(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="54ba6b4b-2ae3-49f7-b882-2ae4858ba965",n._sentryDebugIdIdentifier="sentry-dbid-54ba6b4b-2ae3-49f7-b882-2ae4858ba965")}catch{}})();var I8=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};I8.SENTRY_RELEASE={id:"f0abf8c05e12fe38ce047c4590961deb11efcbad"};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function e_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var HO={exports:{}},nS={},GO={exports:{}},on={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_=Symbol.for("react.element"),P8=Symbol.for("react.portal"),B8=Symbol.for("react.fragment"),D8=Symbol.for("react.strict_mode"),L8=Symbol.for("react.profiler"),N8=Symbol.for("react.provider"),O8=Symbol.for("react.context"),k8=Symbol.for("react.forward_ref"),F8=Symbol.for("react.suspense"),U8=Symbol.for("react.memo"),z8=Symbol.for("react.lazy"),uB=Symbol.iterator;function H8(n){return n===null||typeof n!="object"?null:(n=uB&&n[uB]||n["@@iterator"],typeof n=="function"?n:null)}var VO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WO=Object.assign,XO={};function sp(n,e,t){this.props=n,this.context=e,this.refs=XO,this.updater=t||VO}sp.prototype.isReactComponent={};sp.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};sp.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function jO(){}jO.prototype=sp.prototype;function bC(n,e,t){this.props=n,this.context=e,this.refs=XO,this.updater=t||VO}var RC=bC.prototype=new jO;RC.constructor=bC;WO(RC,sp.prototype);RC.isPureReactComponent=!0;var fB=Array.isArray,JO=Object.prototype.hasOwnProperty,IC={current:null},YO={key:!0,ref:!0,__self:!0,__source:!0};function KO(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)JO.call(e,r)&&!YO.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:t_,type:n,key:s,ref:o,props:i,_owner:IC.current}}function G8(n,e){return{$$typeof:t_,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function PC(n){return typeof n=="object"&&n!==null&&n.$$typeof===t_}function V8(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var dB=/\/+/g;function CA(n,e){return typeof n=="object"&&n!==null&&n.key!=null?V8(""+n.key):e.toString(36)}function hy(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case t_:case P8:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+CA(o,0):r,fB(i)?(t="",n!=null&&(t=n.replace(dB,"$&/")+"/"),hy(i,e,t,"",function(c){return c})):i!=null&&(PC(i)&&(i=G8(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dB,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",fB(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+CA(s,a);o+=hy(s,e,t,l,i)}else if(l=H8(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+CA(s,a++),o+=hy(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function w0(n,e,t){if(n==null)return n;var r=[],i=0;return hy(n,r,"","",function(s){return e.call(t,s,i++)}),r}function W8(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ts={current:null},py={transition:null},X8={ReactCurrentDispatcher:ts,ReactCurrentBatchConfig:py,ReactCurrentOwner:IC};function qO(){throw Error("act(...) is not supported in production builds of React.")}on.Children={map:w0,forEach:function(n,e,t){w0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return w0(n,function(){e++}),e},toArray:function(n){return w0(n,function(e){return e})||[]},only:function(n){if(!PC(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};on.Component=sp;on.Fragment=B8;on.Profiler=L8;on.PureComponent=bC;on.StrictMode=D8;on.Suspense=F8;on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X8;on.act=qO;on.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=WO({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=IC.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)JO.call(e,l)&&!YO.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:t_,type:n.type,key:i,ref:s,props:r,_owner:o}};on.createContext=function(n){return n={$$typeof:O8,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:N8,_context:n},n.Consumer=n};on.createElement=KO;on.createFactory=function(n){var e=KO.bind(null,n);return e.type=n,e};on.createRef=function(){return{current:null}};on.forwardRef=function(n){return{$$typeof:k8,render:n}};on.isValidElement=PC;on.lazy=function(n){return{$$typeof:z8,_payload:{_status:-1,_result:n},_init:W8}};on.memo=function(n,e){return{$$typeof:U8,type:n,compare:e===void 0?null:e}};on.startTransition=function(n){var e=py.transition;py.transition={};try{n()}finally{py.transition=e}};on.unstable_act=qO;on.useCallback=function(n,e){return ts.current.useCallback(n,e)};on.useContext=function(n){return ts.current.useContext(n)};on.useDebugValue=function(){};on.useDeferredValue=function(n){return ts.current.useDeferredValue(n)};on.useEffect=function(n,e){return ts.current.useEffect(n,e)};on.useId=function(){return ts.current.useId()};on.useImperativeHandle=function(n,e,t){return ts.current.useImperativeHandle(n,e,t)};on.useInsertionEffect=function(n,e){return ts.current.useInsertionEffect(n,e)};on.useLayoutEffect=function(n,e){return ts.current.useLayoutEffect(n,e)};on.useMemo=function(n,e){return ts.current.useMemo(n,e)};on.useReducer=function(n,e,t){return ts.current.useReducer(n,e,t)};on.useRef=function(n){return ts.current.useRef(n)};on.useState=function(n){return ts.current.useState(n)};on.useSyncExternalStore=function(n,e,t){return ts.current.useSyncExternalStore(n,e,t)};on.useTransition=function(){return ts.current.useTransition()};on.version="18.3.1";GO.exports=on;var ie=GO.exports;const hf=e_(ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j8=ie,J8=Symbol.for("react.element"),Y8=Symbol.for("react.fragment"),K8=Object.prototype.hasOwnProperty,q8=j8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$8={key:!0,ref:!0,__self:!0,__source:!0};function $O(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)K8.call(e,r)&&!$8.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:J8,type:n,key:s,ref:o,props:i,_owner:q8.current}}nS.Fragment=Y8;nS.jsx=$O;nS.jsxs=$O;HO.exports=nS;var se=HO.exports,Ow={},QO={exports:{}},qs={},ZO={exports:{}},ek={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,Y){var O=F.length;F.push(Y);e:for(;0<O;){var ae=O-1>>>1,me=F[ae];if(0<i(me,Y))F[ae]=Y,F[O]=me,O=ae;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],O=F.pop();if(O!==Y){F[0]=O;e:for(var ae=0,me=F.length,Oe=me>>>1;ae<Oe;){var ce=2*(ae+1)-1,Se=F[ce],Ae=ce+1,Ee=F[Ae];if(0>i(Se,O))Ae<me&&0>i(Ee,Se)?(F[ae]=Ee,F[Ae]=O,ae=Ae):(F[ae]=Se,F[ce]=O,ae=ce);else if(Ae<me&&0>i(Ee,O))F[ae]=Ee,F[Ae]=O,ae=Ae;else break e}}return Y}function i(F,Y){var O=F.sortIndex-Y.sortIndex;return O!==0?O:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(F){for(var Y=t(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=F)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function w(F){if(y=!1,A(F),!g)if(t(l)!==null)g=!0,K(I);else{var Y=t(c);Y!==null&&te(w,Y.startTime-F)}}function I(F,Y){g=!1,y&&(y=!1,_(P),P=-1),m=!0;var O=p;try{for(A(Y),d=t(l);d!==null&&(!(d.expirationTime>Y)||F&&!L());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,p=d.priorityLevel;var me=ae(d.expirationTime<=Y);Y=n.unstable_now(),typeof me=="function"?d.callback=me:d===t(l)&&r(l),A(Y)}else r(l);d=t(l)}if(d!==null)var Oe=!0;else{var ce=t(c);ce!==null&&te(w,ce.startTime-Y),Oe=!1}return Oe}finally{d=null,p=O,m=!1}}var T=!1,R=null,P=-1,b=5,M=-1;function L(){return!(n.unstable_now()-M<b)}function H(){if(R!==null){var F=n.unstable_now();M=F;var Y=!0;try{Y=R(!0,F)}finally{Y?j():(T=!1,R=null)}}else T=!1}var j;if(typeof S=="function")j=function(){S(H)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ee=Q.port2;Q.port1.onmessage=H,j=function(){ee.postMessage(null)}}else j=function(){v(H,0)};function K(F){R=F,T||(T=!0,j())}function te(F,Y){P=v(function(){F(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,K(I))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var O=p;p=Y;try{return F()}finally{p=O}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var O=p;p=F;try{return Y()}finally{p=O}},n.unstable_scheduleCallback=function(F,Y,O){var ae=n.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ae+O:ae):O=ae,F){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=O+me,F={id:u++,callback:Y,priorityLevel:F,startTime:O,expirationTime:me,sortIndex:-1},O>ae?(F.sortIndex=O,e(c,F),t(l)===null&&F===t(c)&&(y?(_(P),P=-1):y=!0,te(w,O-ae))):(F.sortIndex=me,e(l,F),g||m||(g=!0,K(I))),F},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(F){var Y=p;return function(){var O=p;p=Y;try{return F.apply(this,arguments)}finally{p=O}}}})(ek);ZO.exports=ek;var Q8=ZO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z8=ie,Xs=Q8;function Ke(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tk=new Set,sg={};function Of(n,e){Ch(n,e),Ch(n+"Capture",e)}function Ch(n,e){for(sg[n]=e,n=0;n<e.length;n++)tk.add(e[n])}var yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kw=Object.prototype.hasOwnProperty,eV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hB={},pB={};function tV(n){return kw.call(pB,n)?!0:kw.call(hB,n)?!1:eV.test(n)?pB[n]=!0:(hB[n]=!0,!1)}function nV(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function rV(n,e,t,r){if(e===null||typeof e>"u"||nV(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ns(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){pi[n]=new ns(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];pi[e]=new ns(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){pi[n]=new ns(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){pi[n]=new ns(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){pi[n]=new ns(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){pi[n]=new ns(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){pi[n]=new ns(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){pi[n]=new ns(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){pi[n]=new ns(n,5,!1,n.toLowerCase(),null,!1,!1)});var BC=/[\-:]([a-z])/g;function DC(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(BC,DC);pi[e]=new ns(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(BC,DC);pi[e]=new ns(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(BC,DC);pi[e]=new ns(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){pi[n]=new ns(n,1,!1,n.toLowerCase(),null,!1,!1)});pi.xlinkHref=new ns("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){pi[n]=new ns(n,1,!1,n.toLowerCase(),null,!0,!0)});function LC(n,e,t,r){var i=pi.hasOwnProperty(e)?pi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rV(e,t,i,r)&&(t=null),r||i===null?tV(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Rl=Z8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M0=Symbol.for("react.element"),Hd=Symbol.for("react.portal"),Gd=Symbol.for("react.fragment"),NC=Symbol.for("react.strict_mode"),Fw=Symbol.for("react.profiler"),nk=Symbol.for("react.provider"),rk=Symbol.for("react.context"),OC=Symbol.for("react.forward_ref"),Uw=Symbol.for("react.suspense"),zw=Symbol.for("react.suspense_list"),kC=Symbol.for("react.memo"),$l=Symbol.for("react.lazy"),ik=Symbol.for("react.offscreen"),mB=Symbol.iterator;function Up(n){return n===null||typeof n!="object"?null:(n=mB&&n[mB]||n["@@iterator"],typeof n=="function"?n:null)}var cr=Object.assign,bA;function mm(n){if(bA===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);bA=e&&e[1]||""}return`
`+bA+n}var RA=!1;function IA(n,e){if(!n||RA)return"";RA=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{RA=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?mm(n):""}function iV(n){switch(n.tag){case 5:return mm(n.type);case 16:return mm("Lazy");case 13:return mm("Suspense");case 19:return mm("SuspenseList");case 0:case 2:case 15:return n=IA(n.type,!1),n;case 11:return n=IA(n.type.render,!1),n;case 1:return n=IA(n.type,!0),n;default:return""}}function Hw(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Gd:return"Fragment";case Hd:return"Portal";case Fw:return"Profiler";case NC:return"StrictMode";case Uw:return"Suspense";case zw:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case rk:return(n.displayName||"Context")+".Consumer";case nk:return(n._context.displayName||"Context")+".Provider";case OC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case kC:return e=n.displayName||null,e!==null?e:Hw(n.type)||"Memo";case $l:e=n._payload,n=n._init;try{return Hw(n(e))}catch{}}return null}function sV(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hw(e);case 8:return e===NC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ic(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function sk(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oV(n){var e=sk(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function T0(n){n._valueTracker||(n._valueTracker=oV(n))}function ok(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=sk(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Yy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Gw(n,e){var t=e.checked;return cr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function gB(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ic(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ak(n,e){e=e.checked,e!=null&&LC(n,"checked",e,!1)}function Vw(n,e){ak(n,e);var t=Ic(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Ww(n,e.type,t):e.hasOwnProperty("defaultValue")&&Ww(n,e.type,Ic(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function _B(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Ww(n,e,t){(e!=="number"||Yy(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var gm=Array.isArray;function uh(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ic(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Xw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return cr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function vB(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ke(92));if(gm(t)){if(1<t.length)throw Error(Ke(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ic(t)}}function lk(n,e){var t=Ic(e.value),r=Ic(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function yB(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function ck(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?ck(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var C0,uk=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(C0=C0||document.createElement("div"),C0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=C0.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function og(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var bm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aV=["Webkit","ms","Moz","O"];Object.keys(bm).forEach(function(n){aV.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),bm[e]=bm[n]})});function fk(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||bm.hasOwnProperty(n)&&bm[n]?(""+e).trim():e+"px"}function dk(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=fk(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var lV=cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jw(n,e){if(e){if(lV[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ke(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ke(62))}}function Yw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kw=null;function FC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qw=null,fh=null,dh=null;function xB(n){if(n=i_(n)){if(typeof qw!="function")throw Error(Ke(280));var e=n.stateNode;e&&(e=aS(e),qw(n.stateNode,n.type,e))}}function hk(n){fh?dh?dh.push(n):dh=[n]:fh=n}function pk(){if(fh){var n=fh,e=dh;if(dh=fh=null,xB(n),e)for(n=0;n<e.length;n++)xB(e[n])}}function mk(n,e){return n(e)}function gk(){}var PA=!1;function _k(n,e,t){if(PA)return n(e,t);PA=!0;try{return mk(n,e,t)}finally{PA=!1,(fh!==null||dh!==null)&&(gk(),pk())}}function ag(n,e){var t=n.stateNode;if(t===null)return null;var r=aS(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ke(231,e,typeof t));return t}var $w=!1;if(yl)try{var zp={};Object.defineProperty(zp,"passive",{get:function(){$w=!0}}),window.addEventListener("test",zp,zp),window.removeEventListener("test",zp,zp)}catch{$w=!1}function cV(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Rm=!1,Ky=null,qy=!1,Qw=null,uV={onError:function(n){Rm=!0,Ky=n}};function fV(n,e,t,r,i,s,o,a,l){Rm=!1,Ky=null,cV.apply(uV,arguments)}function dV(n,e,t,r,i,s,o,a,l){if(fV.apply(this,arguments),Rm){if(Rm){var c=Ky;Rm=!1,Ky=null}else throw Error(Ke(198));qy||(qy=!0,Qw=c)}}function kf(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function vk(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function SB(n){if(kf(n)!==n)throw Error(Ke(188))}function hV(n){var e=n.alternate;if(!e){if(e=kf(n),e===null)throw Error(Ke(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return SB(i),n;if(s===r)return SB(i),e;s=s.sibling}throw Error(Ke(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ke(189))}}if(t.alternate!==r)throw Error(Ke(190))}if(t.tag!==3)throw Error(Ke(188));return t.stateNode.current===t?n:e}function yk(n){return n=hV(n),n!==null?xk(n):null}function xk(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=xk(n);if(e!==null)return e;n=n.sibling}return null}var Sk=Xs.unstable_scheduleCallback,AB=Xs.unstable_cancelCallback,pV=Xs.unstable_shouldYield,mV=Xs.unstable_requestPaint,Ar=Xs.unstable_now,gV=Xs.unstable_getCurrentPriorityLevel,UC=Xs.unstable_ImmediatePriority,Ak=Xs.unstable_UserBlockingPriority,$y=Xs.unstable_NormalPriority,_V=Xs.unstable_LowPriority,Ek=Xs.unstable_IdlePriority,rS=null,Ta=null;function vV(n){if(Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(rS,n,void 0,(n.current.flags&128)===128)}catch{}}var Yo=Math.clz32?Math.clz32:SV,yV=Math.log,xV=Math.LN2;function SV(n){return n>>>=0,n===0?32:31-(yV(n)/xV|0)|0}var b0=64,R0=4194304;function _m(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Qy(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=_m(a):(s&=o,s!==0&&(r=_m(s)))}else o=t&~i,o!==0?r=_m(o):s!==0&&(r=_m(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Yo(e),i=1<<t,r|=n[t],e&=~i;return r}function AV(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EV(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Yo(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=AV(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Zw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function wk(){var n=b0;return b0<<=1,!(b0&4194240)&&(b0=64),n}function BA(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function n_(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Yo(e),n[e]=t}function wV(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Yo(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function zC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Yo(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var In=0;function Mk(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Tk,HC,Ck,bk,Rk,eM=!1,I0=[],mc=null,gc=null,_c=null,lg=new Map,cg=new Map,ic=[],MV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EB(n,e){switch(n){case"focusin":case"focusout":mc=null;break;case"dragenter":case"dragleave":gc=null;break;case"mouseover":case"mouseout":_c=null;break;case"pointerover":case"pointerout":lg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cg.delete(e.pointerId)}}function Hp(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=i_(e),e!==null&&HC(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function TV(n,e,t,r,i){switch(e){case"focusin":return mc=Hp(mc,n,e,t,r,i),!0;case"dragenter":return gc=Hp(gc,n,e,t,r,i),!0;case"mouseover":return _c=Hp(_c,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return lg.set(s,Hp(lg.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,cg.set(s,Hp(cg.get(s)||null,n,e,t,r,i)),!0}return!1}function Ik(n){var e=Bu(n.target);if(e!==null){var t=kf(e);if(t!==null){if(e=t.tag,e===13){if(e=vk(t),e!==null){n.blockedOn=e,Rk(n.priority,function(){Ck(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function my(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=tM(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Kw=r,t.target.dispatchEvent(r),Kw=null}else return e=i_(t),e!==null&&HC(e),n.blockedOn=t,!1;e.shift()}return!0}function wB(n,e,t){my(n)&&t.delete(e)}function CV(){eM=!1,mc!==null&&my(mc)&&(mc=null),gc!==null&&my(gc)&&(gc=null),_c!==null&&my(_c)&&(_c=null),lg.forEach(wB),cg.forEach(wB)}function Gp(n,e){n.blockedOn===e&&(n.blockedOn=null,eM||(eM=!0,Xs.unstable_scheduleCallback(Xs.unstable_NormalPriority,CV)))}function ug(n){function e(i){return Gp(i,n)}if(0<I0.length){Gp(I0[0],n);for(var t=1;t<I0.length;t++){var r=I0[t];r.blockedOn===n&&(r.blockedOn=null)}}for(mc!==null&&Gp(mc,n),gc!==null&&Gp(gc,n),_c!==null&&Gp(_c,n),lg.forEach(e),cg.forEach(e),t=0;t<ic.length;t++)r=ic[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<ic.length&&(t=ic[0],t.blockedOn===null);)Ik(t),t.blockedOn===null&&ic.shift()}var hh=Rl.ReactCurrentBatchConfig,Zy=!0;function bV(n,e,t,r){var i=In,s=hh.transition;hh.transition=null;try{In=1,GC(n,e,t,r)}finally{In=i,hh.transition=s}}function RV(n,e,t,r){var i=In,s=hh.transition;hh.transition=null;try{In=4,GC(n,e,t,r)}finally{In=i,hh.transition=s}}function GC(n,e,t,r){if(Zy){var i=tM(n,e,t,r);if(i===null)GA(n,e,r,ex,t),EB(n,r);else if(TV(i,n,e,t,r))r.stopPropagation();else if(EB(n,r),e&4&&-1<MV.indexOf(n)){for(;i!==null;){var s=i_(i);if(s!==null&&Tk(s),s=tM(n,e,t,r),s===null&&GA(n,e,r,ex,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else GA(n,e,r,null,t)}}var ex=null;function tM(n,e,t,r){if(ex=null,n=FC(r),n=Bu(n),n!==null)if(e=kf(n),e===null)n=null;else if(t=e.tag,t===13){if(n=vk(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ex=n,null}function Pk(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gV()){case UC:return 1;case Ak:return 4;case $y:case _V:return 16;case Ek:return 536870912;default:return 16}default:return 16}}var ac=null,VC=null,gy=null;function Bk(){if(gy)return gy;var n,e=VC,t=e.length,r,i="value"in ac?ac.value:ac.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return gy=i.slice(n,1<r?1-r:void 0)}function _y(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function P0(){return!0}function MB(){return!1}function $s(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?P0:MB,this.isPropagationStopped=MB,this}return cr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=P0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=P0)},persist:function(){},isPersistent:P0}),e}var op={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WC=$s(op),r_=cr({},op,{view:0,detail:0}),IV=$s(r_),DA,LA,Vp,iS=cr({},r_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:XC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Vp&&(Vp&&n.type==="mousemove"?(DA=n.screenX-Vp.screenX,LA=n.screenY-Vp.screenY):LA=DA=0,Vp=n),DA)},movementY:function(n){return"movementY"in n?n.movementY:LA}}),TB=$s(iS),PV=cr({},iS,{dataTransfer:0}),BV=$s(PV),DV=cr({},r_,{relatedTarget:0}),NA=$s(DV),LV=cr({},op,{animationName:0,elapsedTime:0,pseudoElement:0}),NV=$s(LV),OV=cr({},op,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kV=$s(OV),FV=cr({},op,{data:0}),CB=$s(FV),UV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GV(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=HV[n])?!!e[n]:!1}function XC(){return GV}var VV=cr({},r_,{key:function(n){if(n.key){var e=UV[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=_y(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zV[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:XC,charCode:function(n){return n.type==="keypress"?_y(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_y(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),WV=$s(VV),XV=cr({},iS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bB=$s(XV),jV=cr({},r_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:XC}),JV=$s(jV),YV=cr({},op,{propertyName:0,elapsedTime:0,pseudoElement:0}),KV=$s(YV),qV=cr({},iS,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$V=$s(qV),QV=[9,13,27,32],jC=yl&&"CompositionEvent"in window,Im=null;yl&&"documentMode"in document&&(Im=document.documentMode);var ZV=yl&&"TextEvent"in window&&!Im,Dk=yl&&(!jC||Im&&8<Im&&11>=Im),RB=" ",IB=!1;function Lk(n,e){switch(n){case"keyup":return QV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nk(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Vd=!1;function e9(n,e){switch(n){case"compositionend":return Nk(e);case"keypress":return e.which!==32?null:(IB=!0,RB);case"textInput":return n=e.data,n===RB&&IB?null:n;default:return null}}function t9(n,e){if(Vd)return n==="compositionend"||!jC&&Lk(n,e)?(n=Bk(),gy=VC=ac=null,Vd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dk&&e.locale!=="ko"?null:e.data;default:return null}}var n9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PB(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!n9[n.type]:e==="textarea"}function Ok(n,e,t,r){hk(r),e=tx(e,"onChange"),0<e.length&&(t=new WC("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Pm=null,fg=null;function r9(n){Jk(n,0)}function sS(n){var e=jd(n);if(ok(e))return n}function i9(n,e){if(n==="change")return e}var kk=!1;if(yl){var OA;if(yl){var kA="oninput"in document;if(!kA){var BB=document.createElement("div");BB.setAttribute("oninput","return;"),kA=typeof BB.oninput=="function"}OA=kA}else OA=!1;kk=OA&&(!document.documentMode||9<document.documentMode)}function DB(){Pm&&(Pm.detachEvent("onpropertychange",Fk),fg=Pm=null)}function Fk(n){if(n.propertyName==="value"&&sS(fg)){var e=[];Ok(e,fg,n,FC(n)),_k(r9,e)}}function s9(n,e,t){n==="focusin"?(DB(),Pm=e,fg=t,Pm.attachEvent("onpropertychange",Fk)):n==="focusout"&&DB()}function o9(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sS(fg)}function a9(n,e){if(n==="click")return sS(e)}function l9(n,e){if(n==="input"||n==="change")return sS(e)}function c9(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var $o=typeof Object.is=="function"?Object.is:c9;function dg(n,e){if($o(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!kw.call(e,i)||!$o(n[i],e[i]))return!1}return!0}function LB(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function NB(n,e){var t=LB(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=LB(t)}}function Uk(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Uk(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function zk(){for(var n=window,e=Yy();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Yy(n.document)}return e}function JC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function u9(n){var e=zk(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Uk(t.ownerDocument.documentElement,t)){if(r!==null&&JC(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=NB(t,s);var o=NB(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var f9=yl&&"documentMode"in document&&11>=document.documentMode,Wd=null,nM=null,Bm=null,rM=!1;function OB(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;rM||Wd==null||Wd!==Yy(r)||(r=Wd,"selectionStart"in r&&JC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bm&&dg(Bm,r)||(Bm=r,r=tx(nM,"onSelect"),0<r.length&&(e=new WC("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Wd)))}function B0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Xd={animationend:B0("Animation","AnimationEnd"),animationiteration:B0("Animation","AnimationIteration"),animationstart:B0("Animation","AnimationStart"),transitionend:B0("Transition","TransitionEnd")},FA={},Hk={};yl&&(Hk=document.createElement("div").style,"AnimationEvent"in window||(delete Xd.animationend.animation,delete Xd.animationiteration.animation,delete Xd.animationstart.animation),"TransitionEvent"in window||delete Xd.transitionend.transition);function oS(n){if(FA[n])return FA[n];if(!Xd[n])return n;var e=Xd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Hk)return FA[n]=e[t];return n}var Gk=oS("animationend"),Vk=oS("animationiteration"),Wk=oS("animationstart"),Xk=oS("transitionend"),jk=new Map,kB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vc(n,e){jk.set(n,e),Of(e,[n])}for(var UA=0;UA<kB.length;UA++){var zA=kB[UA],d9=zA.toLowerCase(),h9=zA[0].toUpperCase()+zA.slice(1);Vc(d9,"on"+h9)}Vc(Gk,"onAnimationEnd");Vc(Vk,"onAnimationIteration");Vc(Wk,"onAnimationStart");Vc("dblclick","onDoubleClick");Vc("focusin","onFocus");Vc("focusout","onBlur");Vc(Xk,"onTransitionEnd");Ch("onMouseEnter",["mouseout","mouseover"]);Ch("onMouseLeave",["mouseout","mouseover"]);Ch("onPointerEnter",["pointerout","pointerover"]);Ch("onPointerLeave",["pointerout","pointerover"]);Of("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Of("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Of("onBeforeInput",["compositionend","keypress","textInput","paste"]);Of("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Of("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Of("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p9=new Set("cancel close invalid load scroll toggle".split(" ").concat(vm));function FB(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,dV(r,e,void 0,n),n.currentTarget=null}function Jk(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;FB(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;FB(i,a,c),s=l}}}if(qy)throw n=Qw,qy=!1,Qw=null,n}function Wn(n,e){var t=e[lM];t===void 0&&(t=e[lM]=new Set);var r=n+"__bubble";t.has(r)||(Yk(e,n,2,!1),t.add(r))}function HA(n,e,t){var r=0;e&&(r|=4),Yk(t,n,r,e)}var D0="_reactListening"+Math.random().toString(36).slice(2);function hg(n){if(!n[D0]){n[D0]=!0,tk.forEach(function(t){t!=="selectionchange"&&(p9.has(t)||HA(t,!1,n),HA(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[D0]||(e[D0]=!0,HA("selectionchange",!1,e))}}function Yk(n,e,t,r){switch(Pk(e)){case 1:var i=bV;break;case 4:i=RV;break;default:i=GC}t=i.bind(null,e,t,n),i=void 0,!$w||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function GA(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Bu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}_k(function(){var c=s,u=FC(t),d=[];e:{var p=jk.get(n);if(p!==void 0){var m=WC,g=n;switch(n){case"keypress":if(_y(t)===0)break e;case"keydown":case"keyup":m=WV;break;case"focusin":g="focus",m=NA;break;case"focusout":g="blur",m=NA;break;case"beforeblur":case"afterblur":m=NA;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=TB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=BV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=JV;break;case Gk:case Vk:case Wk:m=NV;break;case Xk:m=KV;break;case"scroll":m=IV;break;case"wheel":m=$V;break;case"copy":case"cut":case"paste":m=kV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=bB}var y=(e&4)!==0,v=!y&&n==="scroll",_=y?p!==null?p+"Capture":null:p;y=[];for(var S=c,A;S!==null;){A=S;var w=A.stateNode;if(A.tag===5&&w!==null&&(A=w,_!==null&&(w=ag(S,_),w!=null&&y.push(pg(S,w,A)))),v)break;S=S.return}0<y.length&&(p=new m(p,g,null,t,u),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==Kw&&(g=t.relatedTarget||t.fromElement)&&(Bu(g)||g[xl]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=c,g=g?Bu(g):null,g!==null&&(v=kf(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(y=TB,w="onMouseLeave",_="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(y=bB,w="onPointerLeave",_="onPointerEnter",S="pointer"),v=m==null?p:jd(m),A=g==null?p:jd(g),p=new y(w,S+"leave",m,t,u),p.target=v,p.relatedTarget=A,w=null,Bu(u)===c&&(y=new y(_,S+"enter",g,t,u),y.target=A,y.relatedTarget=v,w=y),v=w,m&&g)t:{for(y=m,_=g,S=0,A=y;A;A=ld(A))S++;for(A=0,w=_;w;w=ld(w))A++;for(;0<S-A;)y=ld(y),S--;for(;0<A-S;)_=ld(_),A--;for(;S--;){if(y===_||_!==null&&y===_.alternate)break t;y=ld(y),_=ld(_)}y=null}else y=null;m!==null&&UB(d,p,m,y,!1),g!==null&&v!==null&&UB(d,v,g,y,!0)}}e:{if(p=c?jd(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var I=i9;else if(PB(p))if(kk)I=l9;else{I=o9;var T=s9}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=a9);if(I&&(I=I(n,c))){Ok(d,I,t,u);break e}T&&T(n,p,c),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Ww(p,"number",p.value)}switch(T=c?jd(c):window,n){case"focusin":(PB(T)||T.contentEditable==="true")&&(Wd=T,nM=c,Bm=null);break;case"focusout":Bm=nM=Wd=null;break;case"mousedown":rM=!0;break;case"contextmenu":case"mouseup":case"dragend":rM=!1,OB(d,t,u);break;case"selectionchange":if(f9)break;case"keydown":case"keyup":OB(d,t,u)}var R;if(jC)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Vd?Lk(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(Dk&&t.locale!=="ko"&&(Vd||P!=="onCompositionStart"?P==="onCompositionEnd"&&Vd&&(R=Bk()):(ac=u,VC="value"in ac?ac.value:ac.textContent,Vd=!0)),T=tx(c,P),0<T.length&&(P=new CB(P,n,null,t,u),d.push({event:P,listeners:T}),R?P.data=R:(R=Nk(t),R!==null&&(P.data=R)))),(R=ZV?e9(n,t):t9(n,t))&&(c=tx(c,"onBeforeInput"),0<c.length&&(u=new CB("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=R))}Jk(d,e)})}function pg(n,e,t){return{instance:n,listener:e,currentTarget:t}}function tx(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ag(n,t),s!=null&&r.unshift(pg(n,s,i)),s=ag(n,e),s!=null&&r.push(pg(n,s,i))),n=n.return}return r}function ld(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function UB(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ag(t,s),l!=null&&o.unshift(pg(t,l,a))):i||(l=ag(t,s),l!=null&&o.push(pg(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var m9=/\r\n?/g,g9=/\u0000|\uFFFD/g;function zB(n){return(typeof n=="string"?n:""+n).replace(m9,`
`).replace(g9,"")}function L0(n,e,t){if(e=zB(e),zB(n)!==e&&t)throw Error(Ke(425))}function nx(){}var iM=null,sM=null;function oM(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var aM=typeof setTimeout=="function"?setTimeout:void 0,_9=typeof clearTimeout=="function"?clearTimeout:void 0,HB=typeof Promise=="function"?Promise:void 0,v9=typeof queueMicrotask=="function"?queueMicrotask:typeof HB<"u"?function(n){return HB.resolve(null).then(n).catch(y9)}:aM;function y9(n){setTimeout(function(){throw n})}function VA(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),ug(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);ug(e)}function vc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function GB(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ap=Math.random().toString(36).slice(2),va="__reactFiber$"+ap,mg="__reactProps$"+ap,xl="__reactContainer$"+ap,lM="__reactEvents$"+ap,x9="__reactListeners$"+ap,S9="__reactHandles$"+ap;function Bu(n){var e=n[va];if(e)return e;for(var t=n.parentNode;t;){if(e=t[xl]||t[va]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=GB(n);n!==null;){if(t=n[va])return t;n=GB(n)}return e}n=t,t=n.parentNode}return null}function i_(n){return n=n[va]||n[xl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function jd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ke(33))}function aS(n){return n[mg]||null}var cM=[],Jd=-1;function Wc(n){return{current:n}}function Yn(n){0>Jd||(n.current=cM[Jd],cM[Jd]=null,Jd--)}function Vn(n,e){Jd++,cM[Jd]=n.current,n.current=e}var Pc={},Di=Wc(Pc),ps=Wc(!1),pf=Pc;function bh(n,e){var t=n.type.contextTypes;if(!t)return Pc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ms(n){return n=n.childContextTypes,n!=null}function rx(){Yn(ps),Yn(Di)}function VB(n,e,t){if(Di.current!==Pc)throw Error(Ke(168));Vn(Di,e),Vn(ps,t)}function Kk(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ke(108,sV(n)||"Unknown",i));return cr({},t,r)}function ix(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pc,pf=Di.current,Vn(Di,n),Vn(ps,ps.current),!0}function WB(n,e,t){var r=n.stateNode;if(!r)throw Error(Ke(169));t?(n=Kk(n,e,pf),r.__reactInternalMemoizedMergedChildContext=n,Yn(ps),Yn(Di),Vn(Di,n)):Yn(ps),Vn(ps,t)}var rl=null,lS=!1,WA=!1;function qk(n){rl===null?rl=[n]:rl.push(n)}function A9(n){lS=!0,qk(n)}function Xc(){if(!WA&&rl!==null){WA=!0;var n=0,e=In;try{var t=rl;for(In=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}rl=null,lS=!1}catch(i){throw rl!==null&&(rl=rl.slice(n+1)),Sk(UC,Xc),i}finally{In=e,WA=!1}}return null}var Yd=[],Kd=0,sx=null,ox=0,fo=[],ho=0,mf=null,fl=1,dl="";function Au(n,e){Yd[Kd++]=ox,Yd[Kd++]=sx,sx=n,ox=e}function $k(n,e,t){fo[ho++]=fl,fo[ho++]=dl,fo[ho++]=mf,mf=n;var r=fl;n=dl;var i=32-Yo(r)-1;r&=~(1<<i),t+=1;var s=32-Yo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,fl=1<<32-Yo(e)+i|t<<i|r,dl=s+n}else fl=1<<s|t<<i|r,dl=n}function YC(n){n.return!==null&&(Au(n,1),$k(n,1,0))}function KC(n){for(;n===sx;)sx=Yd[--Kd],Yd[Kd]=null,ox=Yd[--Kd],Yd[Kd]=null;for(;n===mf;)mf=fo[--ho],fo[ho]=null,dl=fo[--ho],fo[ho]=null,fl=fo[--ho],fo[ho]=null}var Gs=null,Fs=null,$n=!1,Vo=null;function Qk(n,e){var t=vo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function XB(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Gs=n,Fs=vc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Gs=n,Fs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=mf!==null?{id:fl,overflow:dl}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=vo(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Gs=n,Fs=null,!0):!1;default:return!1}}function uM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function fM(n){if($n){var e=Fs;if(e){var t=e;if(!XB(n,e)){if(uM(n))throw Error(Ke(418));e=vc(t.nextSibling);var r=Gs;e&&XB(n,e)?Qk(r,t):(n.flags=n.flags&-4097|2,$n=!1,Gs=n)}}else{if(uM(n))throw Error(Ke(418));n.flags=n.flags&-4097|2,$n=!1,Gs=n}}}function jB(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Gs=n}function N0(n){if(n!==Gs)return!1;if(!$n)return jB(n),$n=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!oM(n.type,n.memoizedProps)),e&&(e=Fs)){if(uM(n))throw Zk(),Error(Ke(418));for(;e;)Qk(n,e),e=vc(e.nextSibling)}if(jB(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ke(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Fs=vc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Fs=null}}else Fs=Gs?vc(n.stateNode.nextSibling):null;return!0}function Zk(){for(var n=Fs;n;)n=vc(n.nextSibling)}function Rh(){Fs=Gs=null,$n=!1}function qC(n){Vo===null?Vo=[n]:Vo.push(n)}var E9=Rl.ReactCurrentBatchConfig;function Wp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ke(309));var r=t.stateNode}if(!r)throw Error(Ke(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ke(284));if(!t._owner)throw Error(Ke(290,n))}return n}function O0(n,e){throw n=Object.prototype.toString.call(e),Error(Ke(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function JB(n){var e=n._init;return e(n._payload)}function eF(n){function e(_,S){if(n){var A=_.deletions;A===null?(_.deletions=[S],_.flags|=16):A.push(S)}}function t(_,S){if(!n)return null;for(;S!==null;)e(_,S),S=S.sibling;return null}function r(_,S){for(_=new Map;S!==null;)S.key!==null?_.set(S.key,S):_.set(S.index,S),S=S.sibling;return _}function i(_,S){return _=Ac(_,S),_.index=0,_.sibling=null,_}function s(_,S,A){return _.index=A,n?(A=_.alternate,A!==null?(A=A.index,A<S?(_.flags|=2,S):A):(_.flags|=2,S)):(_.flags|=1048576,S)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function a(_,S,A,w){return S===null||S.tag!==6?(S=$A(A,_.mode,w),S.return=_,S):(S=i(S,A),S.return=_,S)}function l(_,S,A,w){var I=A.type;return I===Gd?u(_,S,A.props.children,w,A.key):S!==null&&(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===$l&&JB(I)===S.type)?(w=i(S,A.props),w.ref=Wp(_,S,A),w.return=_,w):(w=wy(A.type,A.key,A.props,null,_.mode,w),w.ref=Wp(_,S,A),w.return=_,w)}function c(_,S,A,w){return S===null||S.tag!==4||S.stateNode.containerInfo!==A.containerInfo||S.stateNode.implementation!==A.implementation?(S=QA(A,_.mode,w),S.return=_,S):(S=i(S,A.children||[]),S.return=_,S)}function u(_,S,A,w,I){return S===null||S.tag!==7?(S=Yu(A,_.mode,w,I),S.return=_,S):(S=i(S,A),S.return=_,S)}function d(_,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return S=$A(""+S,_.mode,A),S.return=_,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case M0:return A=wy(S.type,S.key,S.props,null,_.mode,A),A.ref=Wp(_,null,S),A.return=_,A;case Hd:return S=QA(S,_.mode,A),S.return=_,S;case $l:var w=S._init;return d(_,w(S._payload),A)}if(gm(S)||Up(S))return S=Yu(S,_.mode,A,null),S.return=_,S;O0(_,S)}return null}function p(_,S,A,w){var I=S!==null?S.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return I!==null?null:a(_,S,""+A,w);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case M0:return A.key===I?l(_,S,A,w):null;case Hd:return A.key===I?c(_,S,A,w):null;case $l:return I=A._init,p(_,S,I(A._payload),w)}if(gm(A)||Up(A))return I!==null?null:u(_,S,A,w,null);O0(_,A)}return null}function m(_,S,A,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return _=_.get(A)||null,a(S,_,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case M0:return _=_.get(w.key===null?A:w.key)||null,l(S,_,w,I);case Hd:return _=_.get(w.key===null?A:w.key)||null,c(S,_,w,I);case $l:var T=w._init;return m(_,S,A,T(w._payload),I)}if(gm(w)||Up(w))return _=_.get(A)||null,u(S,_,w,I,null);O0(S,w)}return null}function g(_,S,A,w){for(var I=null,T=null,R=S,P=S=0,b=null;R!==null&&P<A.length;P++){R.index>P?(b=R,R=null):b=R.sibling;var M=p(_,R,A[P],w);if(M===null){R===null&&(R=b);break}n&&R&&M.alternate===null&&e(_,R),S=s(M,S,P),T===null?I=M:T.sibling=M,T=M,R=b}if(P===A.length)return t(_,R),$n&&Au(_,P),I;if(R===null){for(;P<A.length;P++)R=d(_,A[P],w),R!==null&&(S=s(R,S,P),T===null?I=R:T.sibling=R,T=R);return $n&&Au(_,P),I}for(R=r(_,R);P<A.length;P++)b=m(R,_,P,A[P],w),b!==null&&(n&&b.alternate!==null&&R.delete(b.key===null?P:b.key),S=s(b,S,P),T===null?I=b:T.sibling=b,T=b);return n&&R.forEach(function(L){return e(_,L)}),$n&&Au(_,P),I}function y(_,S,A,w){var I=Up(A);if(typeof I!="function")throw Error(Ke(150));if(A=I.call(A),A==null)throw Error(Ke(151));for(var T=I=null,R=S,P=S=0,b=null,M=A.next();R!==null&&!M.done;P++,M=A.next()){R.index>P?(b=R,R=null):b=R.sibling;var L=p(_,R,M.value,w);if(L===null){R===null&&(R=b);break}n&&R&&L.alternate===null&&e(_,R),S=s(L,S,P),T===null?I=L:T.sibling=L,T=L,R=b}if(M.done)return t(_,R),$n&&Au(_,P),I;if(R===null){for(;!M.done;P++,M=A.next())M=d(_,M.value,w),M!==null&&(S=s(M,S,P),T===null?I=M:T.sibling=M,T=M);return $n&&Au(_,P),I}for(R=r(_,R);!M.done;P++,M=A.next())M=m(R,_,P,M.value,w),M!==null&&(n&&M.alternate!==null&&R.delete(M.key===null?P:M.key),S=s(M,S,P),T===null?I=M:T.sibling=M,T=M);return n&&R.forEach(function(H){return e(_,H)}),$n&&Au(_,P),I}function v(_,S,A,w){if(typeof A=="object"&&A!==null&&A.type===Gd&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case M0:e:{for(var I=A.key,T=S;T!==null;){if(T.key===I){if(I=A.type,I===Gd){if(T.tag===7){t(_,T.sibling),S=i(T,A.props.children),S.return=_,_=S;break e}}else if(T.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===$l&&JB(I)===T.type){t(_,T.sibling),S=i(T,A.props),S.ref=Wp(_,T,A),S.return=_,_=S;break e}t(_,T);break}else e(_,T);T=T.sibling}A.type===Gd?(S=Yu(A.props.children,_.mode,w,A.key),S.return=_,_=S):(w=wy(A.type,A.key,A.props,null,_.mode,w),w.ref=Wp(_,S,A),w.return=_,_=w)}return o(_);case Hd:e:{for(T=A.key;S!==null;){if(S.key===T)if(S.tag===4&&S.stateNode.containerInfo===A.containerInfo&&S.stateNode.implementation===A.implementation){t(_,S.sibling),S=i(S,A.children||[]),S.return=_,_=S;break e}else{t(_,S);break}else e(_,S);S=S.sibling}S=QA(A,_.mode,w),S.return=_,_=S}return o(_);case $l:return T=A._init,v(_,S,T(A._payload),w)}if(gm(A))return g(_,S,A,w);if(Up(A))return y(_,S,A,w);O0(_,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,S!==null&&S.tag===6?(t(_,S.sibling),S=i(S,A),S.return=_,_=S):(t(_,S),S=$A(A,_.mode,w),S.return=_,_=S),o(_)):t(_,S)}return v}var Ih=eF(!0),tF=eF(!1),ax=Wc(null),lx=null,qd=null,$C=null;function QC(){$C=qd=lx=null}function ZC(n){var e=ax.current;Yn(ax),n._currentValue=e}function dM(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ph(n,e){lx=n,$C=qd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(fs=!0),n.firstContext=null)}function wo(n){var e=n._currentValue;if($C!==n)if(n={context:n,memoizedValue:e,next:null},qd===null){if(lx===null)throw Error(Ke(308));qd=n,lx.dependencies={lanes:0,firstContext:n}}else qd=qd.next=n;return e}var Du=null;function eb(n){Du===null?Du=[n]:Du.push(n)}function nF(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,eb(e)):(t.next=i.next,i.next=t),e.interleaved=t,Sl(n,r)}function Sl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ql=!1;function tb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rF(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ml(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function yc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Sn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sl(n,t)}return i=r.interleaved,i===null?(e.next=e,eb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sl(n,t)}function vy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,zC(n,t)}}function YB(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function cx(n,e,t,r){var i=n.updateQueue;Ql=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,y=a;switch(p=e,m=t,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(m,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(m,d,p):g,p==null)break e;d=cr({},d,p);break e;case 2:Ql=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);_f|=o,n.lanes=o,n.memoizedState=d}}function KB(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ke(191,i));i.call(r)}}}var s_={},Ca=Wc(s_),gg=Wc(s_),_g=Wc(s_);function Lu(n){if(n===s_)throw Error(Ke(174));return n}function nb(n,e){switch(Vn(_g,e),Vn(gg,n),Vn(Ca,s_),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=jw(e,n)}Yn(Ca),Vn(Ca,e)}function Ph(){Yn(Ca),Yn(gg),Yn(_g)}function iF(n){Lu(_g.current);var e=Lu(Ca.current),t=jw(e,n.type);e!==t&&(Vn(gg,n),Vn(Ca,t))}function rb(n){gg.current===n&&(Yn(Ca),Yn(gg))}var rr=Wc(0);function ux(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var XA=[];function ib(){for(var n=0;n<XA.length;n++)XA[n]._workInProgressVersionPrimary=null;XA.length=0}var yy=Rl.ReactCurrentDispatcher,jA=Rl.ReactCurrentBatchConfig,gf=0,lr=null,kr=null,Zr=null,fx=!1,Dm=!1,vg=0,w9=0;function xi(){throw Error(Ke(321))}function sb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!$o(n[t],e[t]))return!1;return!0}function ob(n,e,t,r,i,s){if(gf=s,lr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yy.current=n===null||n.memoizedState===null?b9:R9,n=t(r,i),Dm){s=0;do{if(Dm=!1,vg=0,25<=s)throw Error(Ke(301));s+=1,Zr=kr=null,e.updateQueue=null,yy.current=I9,n=t(r,i)}while(Dm)}if(yy.current=dx,e=kr!==null&&kr.next!==null,gf=0,Zr=kr=lr=null,fx=!1,e)throw Error(Ke(300));return n}function ab(){var n=vg!==0;return vg=0,n}function da(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zr===null?lr.memoizedState=Zr=n:Zr=Zr.next=n,Zr}function Mo(){if(kr===null){var n=lr.alternate;n=n!==null?n.memoizedState:null}else n=kr.next;var e=Zr===null?lr.memoizedState:Zr.next;if(e!==null)Zr=e,kr=n;else{if(n===null)throw Error(Ke(310));kr=n,n={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Zr===null?lr.memoizedState=Zr=n:Zr=Zr.next=n}return Zr}function yg(n,e){return typeof e=="function"?e(n):e}function JA(n){var e=Mo(),t=e.queue;if(t===null)throw Error(Ke(311));t.lastRenderedReducer=n;var r=kr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((gf&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,lr.lanes|=u,_f|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,$o(r,e.memoizedState)||(fs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,lr.lanes|=s,_f|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function YA(n){var e=Mo(),t=e.queue;if(t===null)throw Error(Ke(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);$o(s,e.memoizedState)||(fs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function sF(){}function oF(n,e){var t=lr,r=Mo(),i=e(),s=!$o(r.memoizedState,i);if(s&&(r.memoizedState=i,fs=!0),r=r.queue,lb(cF.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Zr!==null&&Zr.memoizedState.tag&1){if(t.flags|=2048,xg(9,lF.bind(null,t,r,i,e),void 0,null),ii===null)throw Error(Ke(349));gf&30||aF(t,e,i)}return i}function aF(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=lr.updateQueue,e===null?(e={lastEffect:null,stores:null},lr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function lF(n,e,t,r){e.value=t,e.getSnapshot=r,uF(e)&&fF(n)}function cF(n,e,t){return t(function(){uF(e)&&fF(n)})}function uF(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!$o(n,t)}catch{return!0}}function fF(n){var e=Sl(n,1);e!==null&&Ko(e,n,1,-1)}function qB(n){var e=da();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yg,lastRenderedState:n},e.queue=n,n=n.dispatch=C9.bind(null,lr,n),[e.memoizedState,n]}function xg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=lr.updateQueue,e===null?(e={lastEffect:null,stores:null},lr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function dF(){return Mo().memoizedState}function xy(n,e,t,r){var i=da();lr.flags|=n,i.memoizedState=xg(1|e,t,void 0,r===void 0?null:r)}function cS(n,e,t,r){var i=Mo();r=r===void 0?null:r;var s=void 0;if(kr!==null){var o=kr.memoizedState;if(s=o.destroy,r!==null&&sb(r,o.deps)){i.memoizedState=xg(e,t,s,r);return}}lr.flags|=n,i.memoizedState=xg(1|e,t,s,r)}function $B(n,e){return xy(8390656,8,n,e)}function lb(n,e){return cS(2048,8,n,e)}function hF(n,e){return cS(4,2,n,e)}function pF(n,e){return cS(4,4,n,e)}function mF(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function gF(n,e,t){return t=t!=null?t.concat([n]):null,cS(4,4,mF.bind(null,e,n),t)}function cb(){}function _F(n,e){var t=Mo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&sb(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function vF(n,e){var t=Mo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&sb(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function yF(n,e,t){return gf&21?($o(t,e)||(t=wk(),lr.lanes|=t,_f|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,fs=!0),n.memoizedState=t)}function M9(n,e){var t=In;In=t!==0&&4>t?t:4,n(!0);var r=jA.transition;jA.transition={};try{n(!1),e()}finally{In=t,jA.transition=r}}function xF(){return Mo().memoizedState}function T9(n,e,t){var r=Sc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},SF(n))AF(e,t);else if(t=nF(n,e,t,r),t!==null){var i=Qi();Ko(t,n,r,i),EF(t,e,r)}}function C9(n,e,t){var r=Sc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(SF(n))AF(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,$o(a,o)){var l=e.interleaved;l===null?(i.next=i,eb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=nF(n,e,i,r),t!==null&&(i=Qi(),Ko(t,n,r,i),EF(t,e,r))}}function SF(n){var e=n.alternate;return n===lr||e!==null&&e===lr}function AF(n,e){Dm=fx=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function EF(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,zC(n,t)}}var dx={readContext:wo,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},b9={readContext:wo,useCallback:function(n,e){return da().memoizedState=[n,e===void 0?null:e],n},useContext:wo,useEffect:$B,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,xy(4194308,4,mF.bind(null,e,n),t)},useLayoutEffect:function(n,e){return xy(4194308,4,n,e)},useInsertionEffect:function(n,e){return xy(4,2,n,e)},useMemo:function(n,e){var t=da();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=da();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=T9.bind(null,lr,n),[r.memoizedState,n]},useRef:function(n){var e=da();return n={current:n},e.memoizedState=n},useState:qB,useDebugValue:cb,useDeferredValue:function(n){return da().memoizedState=n},useTransition:function(){var n=qB(!1),e=n[0];return n=M9.bind(null,n[1]),da().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=lr,i=da();if($n){if(t===void 0)throw Error(Ke(407));t=t()}else{if(t=e(),ii===null)throw Error(Ke(349));gf&30||aF(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,$B(cF.bind(null,r,s,n),[n]),r.flags|=2048,xg(9,lF.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=da(),e=ii.identifierPrefix;if($n){var t=dl,r=fl;t=(r&~(1<<32-Yo(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=vg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=w9++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},R9={readContext:wo,useCallback:_F,useContext:wo,useEffect:lb,useImperativeHandle:gF,useInsertionEffect:hF,useLayoutEffect:pF,useMemo:vF,useReducer:JA,useRef:dF,useState:function(){return JA(yg)},useDebugValue:cb,useDeferredValue:function(n){var e=Mo();return yF(e,kr.memoizedState,n)},useTransition:function(){var n=JA(yg)[0],e=Mo().memoizedState;return[n,e]},useMutableSource:sF,useSyncExternalStore:oF,useId:xF,unstable_isNewReconciler:!1},I9={readContext:wo,useCallback:_F,useContext:wo,useEffect:lb,useImperativeHandle:gF,useInsertionEffect:hF,useLayoutEffect:pF,useMemo:vF,useReducer:YA,useRef:dF,useState:function(){return YA(yg)},useDebugValue:cb,useDeferredValue:function(n){var e=Mo();return kr===null?e.memoizedState=n:yF(e,kr.memoizedState,n)},useTransition:function(){var n=YA(yg)[0],e=Mo().memoizedState;return[n,e]},useMutableSource:sF,useSyncExternalStore:oF,useId:xF,unstable_isNewReconciler:!1};function zo(n,e){if(n&&n.defaultProps){e=cr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function hM(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:cr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var uS={isMounted:function(n){return(n=n._reactInternals)?kf(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Qi(),i=Sc(n),s=ml(r,i);s.payload=e,t!=null&&(s.callback=t),e=yc(n,s,i),e!==null&&(Ko(e,n,i,r),vy(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Qi(),i=Sc(n),s=ml(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=yc(n,s,i),e!==null&&(Ko(e,n,i,r),vy(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Qi(),r=Sc(n),i=ml(t,r);i.tag=2,e!=null&&(i.callback=e),e=yc(n,i,r),e!==null&&(Ko(e,n,r,t),vy(e,n,r))}};function QB(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!dg(t,r)||!dg(i,s):!0}function wF(n,e,t){var r=!1,i=Pc,s=e.contextType;return typeof s=="object"&&s!==null?s=wo(s):(i=ms(e)?pf:Di.current,r=e.contextTypes,s=(r=r!=null)?bh(n,i):Pc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uS,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function ZB(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&uS.enqueueReplaceState(e,e.state,null)}function pM(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},tb(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wo(s):(s=ms(e)?pf:Di.current,i.context=bh(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hM(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uS.enqueueReplaceState(i,i.state,null),cx(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Bh(n,e){try{var t="",r=e;do t+=iV(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function KA(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function mM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var P9=typeof WeakMap=="function"?WeakMap:Map;function MF(n,e,t){t=ml(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){px||(px=!0,MM=r),mM(n,e)},t}function TF(n,e,t){t=ml(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){mM(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){mM(n,e),typeof r!="function"&&(xc===null?xc=new Set([this]):xc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function eD(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new P9;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=X9.bind(null,n,e,t),e.then(n,n))}function tD(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function nD(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ml(-1,1),e.tag=2,yc(t,e,1))),t.lanes|=1),n)}var B9=Rl.ReactCurrentOwner,fs=!1;function Wi(n,e,t,r){e.child=n===null?tF(e,null,t,r):Ih(e,n.child,t,r)}function rD(n,e,t,r,i){t=t.render;var s=e.ref;return ph(e,i),r=ob(n,e,t,r,s,i),t=ab(),n!==null&&!fs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Al(n,e,i)):($n&&t&&YC(e),e.flags|=1,Wi(n,e,r,i),e.child)}function iD(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!_b(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,CF(n,e,s,r,i)):(n=wy(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:dg,t(o,r)&&n.ref===e.ref)return Al(n,e,i)}return e.flags|=1,n=Ac(s,r),n.ref=e.ref,n.return=e,e.child=n}function CF(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(dg(s,r)&&n.ref===e.ref)if(fs=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(fs=!0);else return e.lanes=n.lanes,Al(n,e,i)}return gM(n,e,t,r,i)}function bF(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(Qd,Ps),Ps|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Vn(Qd,Ps),Ps|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Vn(Qd,Ps),Ps|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Vn(Qd,Ps),Ps|=r;return Wi(n,e,i,t),e.child}function RF(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function gM(n,e,t,r,i){var s=ms(t)?pf:Di.current;return s=bh(e,s),ph(e,i),t=ob(n,e,t,r,s,i),r=ab(),n!==null&&!fs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Al(n,e,i)):($n&&r&&YC(e),e.flags|=1,Wi(n,e,t,i),e.child)}function sD(n,e,t,r,i){if(ms(t)){var s=!0;ix(e)}else s=!1;if(ph(e,i),e.stateNode===null)Sy(n,e),wF(e,t,r),pM(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=wo(c):(c=ms(t)?pf:Di.current,c=bh(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ZB(e,o,r,c),Ql=!1;var p=e.memoizedState;o.state=p,cx(e,r,o,i),l=e.memoizedState,a!==r||p!==l||ps.current||Ql?(typeof u=="function"&&(hM(e,t,u,r),l=e.memoizedState),(a=Ql||QB(e,t,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rF(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:zo(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=wo(l):(l=ms(t)?pf:Di.current,l=bh(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&ZB(e,o,r,l),Ql=!1,p=e.memoizedState,o.state=p,cx(e,r,o,i);var g=e.memoizedState;a!==d||p!==g||ps.current||Ql?(typeof m=="function"&&(hM(e,t,m,r),g=e.memoizedState),(c=Ql||QB(e,t,c,r,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return _M(n,e,t,r,s,i)}function _M(n,e,t,r,i,s){RF(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&WB(e,t,!1),Al(n,e,s);r=e.stateNode,B9.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Ih(e,n.child,null,s),e.child=Ih(e,null,a,s)):Wi(n,e,a,s),e.memoizedState=r.state,i&&WB(e,t,!0),e.child}function IF(n){var e=n.stateNode;e.pendingContext?VB(n,e.pendingContext,e.pendingContext!==e.context):e.context&&VB(n,e.context,!1),nb(n,e.containerInfo)}function oD(n,e,t,r,i){return Rh(),qC(i),e.flags|=256,Wi(n,e,t,r),e.child}var vM={dehydrated:null,treeContext:null,retryLane:0};function yM(n){return{baseLanes:n,cachePool:null,transitions:null}}function PF(n,e,t){var r=e.pendingProps,i=rr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Vn(rr,i&1),n===null)return fM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hS(o,r,0,null),n=Yu(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=yM(t),e.memoizedState=vM,n):ub(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return D9(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ac(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ac(a,s):(s=Yu(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?yM(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=vM,r}return s=n.child,n=s.sibling,r=Ac(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function ub(n,e){return e=hS({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function k0(n,e,t,r){return r!==null&&qC(r),Ih(e,n.child,null,t),n=ub(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function D9(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=KA(Error(Ke(422))),k0(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hS({mode:"visible",children:r.children},i,0,null),s=Yu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ih(e,n.child,null,o),e.child.memoizedState=yM(o),e.memoizedState=vM,s);if(!(e.mode&1))return k0(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ke(419)),r=KA(s,r,void 0),k0(n,e,o,r)}if(a=(o&n.childLanes)!==0,fs||a){if(r=ii,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Sl(n,i),Ko(r,n,i,-1))}return gb(),r=KA(Error(Ke(421))),k0(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=j9.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Fs=vc(i.nextSibling),Gs=e,$n=!0,Vo=null,n!==null&&(fo[ho++]=fl,fo[ho++]=dl,fo[ho++]=mf,fl=n.id,dl=n.overflow,mf=e),e=ub(e,r.children),e.flags|=4096,e)}function aD(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),dM(n.return,e,t)}function qA(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function BF(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Wi(n,e,r.children,t),r=rr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&aD(n,t,e);else if(n.tag===19)aD(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Vn(rr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&ux(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),qA(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&ux(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}qA(e,!0,t,null,s);break;case"together":qA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Al(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),_f|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ke(153));if(e.child!==null){for(n=e.child,t=Ac(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ac(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function L9(n,e,t){switch(e.tag){case 3:IF(e),Rh();break;case 5:iF(e);break;case 1:ms(e.type)&&ix(e);break;case 4:nb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Vn(ax,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vn(rr,rr.current&1),e.flags|=128,null):t&e.child.childLanes?PF(n,e,t):(Vn(rr,rr.current&1),n=Al(n,e,t),n!==null?n.sibling:null);Vn(rr,rr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return BF(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vn(rr,rr.current),r)break;return null;case 22:case 23:return e.lanes=0,bF(n,e,t)}return Al(n,e,t)}var DF,xM,LF,NF;DF=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};xM=function(){};LF=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Lu(Ca.current);var s=null;switch(t){case"input":i=Gw(n,i),r=Gw(n,r),s=[];break;case"select":i=cr({},i,{value:void 0}),r=cr({},r,{value:void 0}),s=[];break;case"textarea":i=Xw(n,i),r=Xw(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=nx)}Jw(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sg.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sg.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Wn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};NF=function(n,e,t,r){t!==r&&(e.flags|=4)};function Xp(n,e){if(!$n)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Si(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function N9(n,e,t){var r=e.pendingProps;switch(KC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(e),null;case 1:return ms(e.type)&&rx(),Si(e),null;case 3:return r=e.stateNode,Ph(),Yn(ps),Yn(Di),ib(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(N0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vo!==null&&(bM(Vo),Vo=null))),xM(n,e),Si(e),null;case 5:rb(e);var i=Lu(_g.current);if(t=e.type,n!==null&&e.stateNode!=null)LF(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ke(166));return Si(e),null}if(n=Lu(Ca.current),N0(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[va]=e,r[mg]=s,n=(e.mode&1)!==0,t){case"dialog":Wn("cancel",r),Wn("close",r);break;case"iframe":case"object":case"embed":Wn("load",r);break;case"video":case"audio":for(i=0;i<vm.length;i++)Wn(vm[i],r);break;case"source":Wn("error",r);break;case"img":case"image":case"link":Wn("error",r),Wn("load",r);break;case"details":Wn("toggle",r);break;case"input":gB(r,s),Wn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Wn("invalid",r);break;case"textarea":vB(r,s),Wn("invalid",r)}Jw(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&L0(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&L0(r.textContent,a,n),i=["children",""+a]):sg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wn("scroll",r)}switch(t){case"input":T0(r),_B(r,s,!0);break;case"textarea":T0(r),yB(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=nx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ck(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[va]=e,n[mg]=r,DF(n,e,!1,!1),e.stateNode=n;e:{switch(o=Yw(t,r),t){case"dialog":Wn("cancel",n),Wn("close",n),i=r;break;case"iframe":case"object":case"embed":Wn("load",n),i=r;break;case"video":case"audio":for(i=0;i<vm.length;i++)Wn(vm[i],n);i=r;break;case"source":Wn("error",n),i=r;break;case"img":case"image":case"link":Wn("error",n),Wn("load",n),i=r;break;case"details":Wn("toggle",n),i=r;break;case"input":gB(n,r),i=Gw(n,r),Wn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=cr({},r,{value:void 0}),Wn("invalid",n);break;case"textarea":vB(n,r),i=Xw(n,r),Wn("invalid",n);break;default:i=r}Jw(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dk(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uk(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&og(n,l):typeof l=="number"&&og(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sg.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Wn("scroll",n):l!=null&&LC(n,s,l,o))}switch(t){case"input":T0(n),_B(n,r,!1);break;case"textarea":T0(n),yB(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ic(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?uh(n,!!r.multiple,s,!1):r.defaultValue!=null&&uh(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=nx)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Si(e),null;case 6:if(n&&e.stateNode!=null)NF(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ke(166));if(t=Lu(_g.current),Lu(Ca.current),N0(e)){if(r=e.stateNode,t=e.memoizedProps,r[va]=e,(s=r.nodeValue!==t)&&(n=Gs,n!==null))switch(n.tag){case 3:L0(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&L0(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[va]=e,e.stateNode=r}return Si(e),null;case 13:if(Yn(rr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if($n&&Fs!==null&&e.mode&1&&!(e.flags&128))Zk(),Rh(),e.flags|=98560,s=!1;else if(s=N0(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ke(317));s[va]=e}else Rh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Si(e),s=!1}else Vo!==null&&(bM(Vo),Vo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||rr.current&1?Hr===0&&(Hr=3):gb())),e.updateQueue!==null&&(e.flags|=4),Si(e),null);case 4:return Ph(),xM(n,e),n===null&&hg(e.stateNode.containerInfo),Si(e),null;case 10:return ZC(e.type._context),Si(e),null;case 17:return ms(e.type)&&rx(),Si(e),null;case 19:if(Yn(rr),s=e.memoizedState,s===null)return Si(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Xp(s,!1);else{if(Hr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=ux(n),o!==null){for(e.flags|=128,Xp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Vn(rr,rr.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ar()>Dh&&(e.flags|=128,r=!0,Xp(s,!1),e.lanes=4194304)}else{if(!r)if(n=ux(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Xp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$n)return Si(e),null}else 2*Ar()-s.renderingStartTime>Dh&&t!==1073741824&&(e.flags|=128,r=!0,Xp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ar(),e.sibling=null,t=rr.current,Vn(rr,r?t&1|2:t&1),e):(Si(e),null);case 22:case 23:return mb(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ps&1073741824&&(Si(e),e.subtreeFlags&6&&(e.flags|=8192)):Si(e),null;case 24:return null;case 25:return null}throw Error(Ke(156,e.tag))}function O9(n,e){switch(KC(e),e.tag){case 1:return ms(e.type)&&rx(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ph(),Yn(ps),Yn(Di),ib(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return rb(e),null;case 13:if(Yn(rr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ke(340));Rh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Yn(rr),null;case 4:return Ph(),null;case 10:return ZC(e.type._context),null;case 22:case 23:return mb(),null;case 24:return null;default:return null}}var F0=!1,Ci=!1,k9=typeof WeakSet=="function"?WeakSet:Set,dt=null;function $d(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){pr(n,e,r)}else t.current=null}function SM(n,e,t){try{t()}catch(r){pr(n,e,r)}}var lD=!1;function F9(n,e){if(iM=Zy,n=zk(),JC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,p=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(sM={focusedElem:n,selectionRange:t},Zy=!1,dt=e;dt!==null;)if(e=dt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,dt=n;else for(;dt!==null;){e=dt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,_=e.stateNode,S=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:zo(e.type,y),v);_.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(w){pr(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,dt=n;break}dt=e.return}return g=lD,lD=!1,g}function Lm(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&SM(e,t,s)}i=i.next}while(i!==r)}}function fS(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function AM(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function OF(n){var e=n.alternate;e!==null&&(n.alternate=null,OF(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[va],delete e[mg],delete e[lM],delete e[x9],delete e[S9])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function kF(n){return n.tag===5||n.tag===3||n.tag===4}function cD(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||kF(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function EM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=nx));else if(r!==4&&(n=n.child,n!==null))for(EM(n,e,t),n=n.sibling;n!==null;)EM(n,e,t),n=n.sibling}function wM(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(wM(n,e,t),n=n.sibling;n!==null;)wM(n,e,t),n=n.sibling}var ci=null,Go=!1;function Ul(n,e,t){for(t=t.child;t!==null;)FF(n,e,t),t=t.sibling}function FF(n,e,t){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(rS,t)}catch{}switch(t.tag){case 5:Ci||$d(t,e);case 6:var r=ci,i=Go;ci=null,Ul(n,e,t),ci=r,Go=i,ci!==null&&(Go?(n=ci,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ci.removeChild(t.stateNode));break;case 18:ci!==null&&(Go?(n=ci,t=t.stateNode,n.nodeType===8?VA(n.parentNode,t):n.nodeType===1&&VA(n,t),ug(n)):VA(ci,t.stateNode));break;case 4:r=ci,i=Go,ci=t.stateNode.containerInfo,Go=!0,Ul(n,e,t),ci=r,Go=i;break;case 0:case 11:case 14:case 15:if(!Ci&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&SM(t,e,o),i=i.next}while(i!==r)}Ul(n,e,t);break;case 1:if(!Ci&&($d(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){pr(t,e,a)}Ul(n,e,t);break;case 21:Ul(n,e,t);break;case 22:t.mode&1?(Ci=(r=Ci)||t.memoizedState!==null,Ul(n,e,t),Ci=r):Ul(n,e,t);break;default:Ul(n,e,t)}}function uD(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new k9),e.forEach(function(r){var i=J9.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Do(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ci=a.stateNode,Go=!1;break e;case 3:ci=a.stateNode.containerInfo,Go=!0;break e;case 4:ci=a.stateNode.containerInfo,Go=!0;break e}a=a.return}if(ci===null)throw Error(Ke(160));FF(s,o,i),ci=null,Go=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){pr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)UF(e,n),e=e.sibling}function UF(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Do(e,n),ua(n),r&4){try{Lm(3,n,n.return),fS(3,n)}catch(y){pr(n,n.return,y)}try{Lm(5,n,n.return)}catch(y){pr(n,n.return,y)}}break;case 1:Do(e,n),ua(n),r&512&&t!==null&&$d(t,t.return);break;case 5:if(Do(e,n),ua(n),r&512&&t!==null&&$d(t,t.return),n.flags&32){var i=n.stateNode;try{og(i,"")}catch(y){pr(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ak(i,s),Yw(a,o);var c=Yw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?dk(i,d):u==="dangerouslySetInnerHTML"?uk(i,d):u==="children"?og(i,d):LC(i,u,d,c)}switch(a){case"input":Vw(i,s);break;case"textarea":lk(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?uh(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?uh(i,!!s.multiple,s.defaultValue,!0):uh(i,!!s.multiple,s.multiple?[]:"",!1))}i[mg]=s}catch(y){pr(n,n.return,y)}}break;case 6:if(Do(e,n),ua(n),r&4){if(n.stateNode===null)throw Error(Ke(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(y){pr(n,n.return,y)}}break;case 3:if(Do(e,n),ua(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{ug(e.containerInfo)}catch(y){pr(n,n.return,y)}break;case 4:Do(e,n),ua(n);break;case 13:Do(e,n),ua(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(hb=Ar())),r&4&&uD(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Ci=(c=Ci)||u,Do(e,n),Ci=c):Do(e,n),ua(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(dt=n,u=n.child;u!==null;){for(d=dt=u;dt!==null;){switch(p=dt,m=p.child,p.tag){case 0:case 11:case 14:case 15:Lm(4,p,p.return);break;case 1:$d(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){pr(r,t,y)}}break;case 5:$d(p,p.return);break;case 22:if(p.memoizedState!==null){dD(d);continue}}m!==null?(m.return=p,dt=m):dD(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fk("display",o))}catch(y){pr(n,n.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){pr(n,n.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Do(e,n),ua(n),r&4&&uD(n);break;case 21:break;default:Do(e,n),ua(n)}}function ua(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(kF(t)){var r=t;break e}t=t.return}throw Error(Ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(og(i,""),r.flags&=-33);var s=cD(n);wM(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cD(n);EM(n,a,o);break;default:throw Error(Ke(161))}}catch(l){pr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function U9(n,e,t){dt=n,zF(n)}function zF(n,e,t){for(var r=(n.mode&1)!==0;dt!==null;){var i=dt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||F0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ci;a=F0;var c=Ci;if(F0=o,(Ci=l)&&!c)for(dt=i;dt!==null;)o=dt,l=o.child,o.tag===22&&o.memoizedState!==null?hD(i):l!==null?(l.return=o,dt=l):hD(i);for(;s!==null;)dt=s,zF(s),s=s.sibling;dt=i,F0=a,Ci=c}fD(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,dt=s):fD(n)}}function fD(n){for(;dt!==null;){var e=dt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ci||fS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ci)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:zo(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&KB(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}KB(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ug(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}Ci||e.flags&512&&AM(e)}catch(p){pr(e,e.return,p)}}if(e===n){dt=null;break}if(t=e.sibling,t!==null){t.return=e.return,dt=t;break}dt=e.return}}function dD(n){for(;dt!==null;){var e=dt;if(e===n){dt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,dt=t;break}dt=e.return}}function hD(n){for(;dt!==null;){var e=dt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{fS(4,e)}catch(l){pr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){pr(e,i,l)}}var s=e.return;try{AM(e)}catch(l){pr(e,s,l)}break;case 5:var o=e.return;try{AM(e)}catch(l){pr(e,o,l)}}}catch(l){pr(e,e.return,l)}if(e===n){dt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,dt=a;break}dt=e.return}}var z9=Math.ceil,hx=Rl.ReactCurrentDispatcher,fb=Rl.ReactCurrentOwner,Ao=Rl.ReactCurrentBatchConfig,Sn=0,ii=null,Pr=null,fi=0,Ps=0,Qd=Wc(0),Hr=0,Sg=null,_f=0,dS=0,db=0,Nm=null,cs=null,hb=0,Dh=1/0,Za=null,px=!1,MM=null,xc=null,U0=!1,lc=null,mx=0,Om=0,TM=null,Ay=-1,Ey=0;function Qi(){return Sn&6?Ar():Ay!==-1?Ay:Ay=Ar()}function Sc(n){return n.mode&1?Sn&2&&fi!==0?fi&-fi:E9.transition!==null?(Ey===0&&(Ey=wk()),Ey):(n=In,n!==0||(n=window.event,n=n===void 0?16:Pk(n.type)),n):1}function Ko(n,e,t,r){if(50<Om)throw Om=0,TM=null,Error(Ke(185));n_(n,t,r),(!(Sn&2)||n!==ii)&&(n===ii&&(!(Sn&2)&&(dS|=t),Hr===4&&sc(n,fi)),gs(n,r),t===1&&Sn===0&&!(e.mode&1)&&(Dh=Ar()+500,lS&&Xc()))}function gs(n,e){var t=n.callbackNode;EV(n,e);var r=Qy(n,n===ii?fi:0);if(r===0)t!==null&&AB(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&AB(t),e===1)n.tag===0?A9(pD.bind(null,n)):qk(pD.bind(null,n)),v9(function(){!(Sn&6)&&Xc()}),t=null;else{switch(Mk(r)){case 1:t=UC;break;case 4:t=Ak;break;case 16:t=$y;break;case 536870912:t=Ek;break;default:t=$y}t=YF(t,HF.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function HF(n,e){if(Ay=-1,Ey=0,Sn&6)throw Error(Ke(327));var t=n.callbackNode;if(mh()&&n.callbackNode!==t)return null;var r=Qy(n,n===ii?fi:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=gx(n,r);else{e=r;var i=Sn;Sn|=2;var s=VF();(ii!==n||fi!==e)&&(Za=null,Dh=Ar()+500,Ju(n,e));do try{V9();break}catch(a){GF(n,a)}while(!0);QC(),hx.current=s,Sn=i,Pr!==null?e=0:(ii=null,fi=0,e=Hr)}if(e!==0){if(e===2&&(i=Zw(n),i!==0&&(r=i,e=CM(n,i))),e===1)throw t=Sg,Ju(n,0),sc(n,r),gs(n,Ar()),t;if(e===6)sc(n,r);else{if(i=n.current.alternate,!(r&30)&&!H9(i)&&(e=gx(n,r),e===2&&(s=Zw(n),s!==0&&(r=s,e=CM(n,s))),e===1))throw t=Sg,Ju(n,0),sc(n,r),gs(n,Ar()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ke(345));case 2:Eu(n,cs,Za);break;case 3:if(sc(n,r),(r&130023424)===r&&(e=hb+500-Ar(),10<e)){if(Qy(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Qi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=aM(Eu.bind(null,n,cs,Za),e);break}Eu(n,cs,Za);break;case 4:if(sc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Yo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ar()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*z9(r/1960))-r,10<r){n.timeoutHandle=aM(Eu.bind(null,n,cs,Za),r);break}Eu(n,cs,Za);break;case 5:Eu(n,cs,Za);break;default:throw Error(Ke(329))}}}return gs(n,Ar()),n.callbackNode===t?HF.bind(null,n):null}function CM(n,e){var t=Nm;return n.current.memoizedState.isDehydrated&&(Ju(n,e).flags|=256),n=gx(n,e),n!==2&&(e=cs,cs=t,e!==null&&bM(e)),n}function bM(n){cs===null?cs=n:cs.push.apply(cs,n)}function H9(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!$o(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sc(n,e){for(e&=~db,e&=~dS,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Yo(e),r=1<<t;n[t]=-1,e&=~r}}function pD(n){if(Sn&6)throw Error(Ke(327));mh();var e=Qy(n,0);if(!(e&1))return gs(n,Ar()),null;var t=gx(n,e);if(n.tag!==0&&t===2){var r=Zw(n);r!==0&&(e=r,t=CM(n,r))}if(t===1)throw t=Sg,Ju(n,0),sc(n,e),gs(n,Ar()),t;if(t===6)throw Error(Ke(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Eu(n,cs,Za),gs(n,Ar()),null}function pb(n,e){var t=Sn;Sn|=1;try{return n(e)}finally{Sn=t,Sn===0&&(Dh=Ar()+500,lS&&Xc())}}function vf(n){lc!==null&&lc.tag===0&&!(Sn&6)&&mh();var e=Sn;Sn|=1;var t=Ao.transition,r=In;try{if(Ao.transition=null,In=1,n)return n()}finally{In=r,Ao.transition=t,Sn=e,!(Sn&6)&&Xc()}}function mb(){Ps=Qd.current,Yn(Qd)}function Ju(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,_9(t)),Pr!==null)for(t=Pr.return;t!==null;){var r=t;switch(KC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rx();break;case 3:Ph(),Yn(ps),Yn(Di),ib();break;case 5:rb(r);break;case 4:Ph();break;case 13:Yn(rr);break;case 19:Yn(rr);break;case 10:ZC(r.type._context);break;case 22:case 23:mb()}t=t.return}if(ii=n,Pr=n=Ac(n.current,null),fi=Ps=e,Hr=0,Sg=null,db=dS=_f=0,cs=Nm=null,Du!==null){for(e=0;e<Du.length;e++)if(t=Du[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Du=null}return n}function GF(n,e){do{var t=Pr;try{if(QC(),yy.current=dx,fx){for(var r=lr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fx=!1}if(gf=0,Zr=kr=lr=null,Dm=!1,vg=0,fb.current=null,t===null||t.return===null){Hr=1,Sg=e,Pr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=fi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=tD(o);if(m!==null){m.flags&=-257,nD(m,o,a,s,e),m.mode&1&&eD(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){eD(s,c,e),gb();break e}l=Error(Ke(426))}}else if($n&&a.mode&1){var v=tD(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),nD(v,o,a,s,e),qC(Bh(l,a));break e}}s=l=Bh(l,a),Hr!==4&&(Hr=2),Nm===null?Nm=[s]:Nm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=MF(s,l,e);YB(s,_);break e;case 1:a=l;var S=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(xc===null||!xc.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=TF(s,a,e);YB(s,w);break e}}s=s.return}while(s!==null)}XF(t)}catch(I){e=I,Pr===t&&t!==null&&(Pr=t=t.return);continue}break}while(!0)}function VF(){var n=hx.current;return hx.current=dx,n===null?dx:n}function gb(){(Hr===0||Hr===3||Hr===2)&&(Hr=4),ii===null||!(_f&268435455)&&!(dS&268435455)||sc(ii,fi)}function gx(n,e){var t=Sn;Sn|=2;var r=VF();(ii!==n||fi!==e)&&(Za=null,Ju(n,e));do try{G9();break}catch(i){GF(n,i)}while(!0);if(QC(),Sn=t,hx.current=r,Pr!==null)throw Error(Ke(261));return ii=null,fi=0,Hr}function G9(){for(;Pr!==null;)WF(Pr)}function V9(){for(;Pr!==null&&!pV();)WF(Pr)}function WF(n){var e=JF(n.alternate,n,Ps);n.memoizedProps=n.pendingProps,e===null?XF(n):Pr=e,fb.current=null}function XF(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=O9(t,e),t!==null){t.flags&=32767,Pr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Hr=6,Pr=null;return}}else if(t=N9(t,e,Ps),t!==null){Pr=t;return}if(e=e.sibling,e!==null){Pr=e;return}Pr=e=n}while(e!==null);Hr===0&&(Hr=5)}function Eu(n,e,t){var r=In,i=Ao.transition;try{Ao.transition=null,In=1,W9(n,e,t,r)}finally{Ao.transition=i,In=r}return null}function W9(n,e,t,r){do mh();while(lc!==null);if(Sn&6)throw Error(Ke(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ke(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(wV(n,s),n===ii&&(Pr=ii=null,fi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||U0||(U0=!0,YF($y,function(){return mh(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ao.transition,Ao.transition=null;var o=In;In=1;var a=Sn;Sn|=4,fb.current=null,F9(n,t),UF(t,n),u9(sM),Zy=!!iM,sM=iM=null,n.current=t,U9(t),mV(),Sn=a,In=o,Ao.transition=s}else n.current=t;if(U0&&(U0=!1,lc=n,mx=i),s=n.pendingLanes,s===0&&(xc=null),vV(t.stateNode),gs(n,Ar()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(px)throw px=!1,n=MM,MM=null,n;return mx&1&&n.tag!==0&&mh(),s=n.pendingLanes,s&1?n===TM?Om++:(Om=0,TM=n):Om=0,Xc(),null}function mh(){if(lc!==null){var n=Mk(mx),e=Ao.transition,t=In;try{if(Ao.transition=null,In=16>n?16:n,lc===null)var r=!1;else{if(n=lc,lc=null,mx=0,Sn&6)throw Error(Ke(331));var i=Sn;for(Sn|=4,dt=n.current;dt!==null;){var s=dt,o=s.child;if(dt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(dt=c;dt!==null;){var u=dt;switch(u.tag){case 0:case 11:case 15:Lm(8,u,s)}var d=u.child;if(d!==null)d.return=u,dt=d;else for(;dt!==null;){u=dt;var p=u.sibling,m=u.return;if(OF(u),u===c){dt=null;break}if(p!==null){p.return=m,dt=p;break}dt=m}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}dt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,dt=o;else e:for(;dt!==null;){if(s=dt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Lm(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,dt=_;break e}dt=s.return}}var S=n.current;for(dt=S;dt!==null;){o=dt;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,dt=A;else e:for(o=S;dt!==null;){if(a=dt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fS(9,a)}}catch(I){pr(a,a.return,I)}if(a===o){dt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,dt=w;break e}dt=a.return}}if(Sn=i,Xc(),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(rS,n)}catch{}r=!0}return r}finally{In=t,Ao.transition=e}}return!1}function mD(n,e,t){e=Bh(t,e),e=MF(n,e,1),n=yc(n,e,1),e=Qi(),n!==null&&(n_(n,1,e),gs(n,e))}function pr(n,e,t){if(n.tag===3)mD(n,n,t);else for(;e!==null;){if(e.tag===3){mD(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xc===null||!xc.has(r))){n=Bh(t,n),n=TF(e,n,1),e=yc(e,n,1),n=Qi(),e!==null&&(n_(e,1,n),gs(e,n));break}}e=e.return}}function X9(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Qi(),n.pingedLanes|=n.suspendedLanes&t,ii===n&&(fi&t)===t&&(Hr===4||Hr===3&&(fi&130023424)===fi&&500>Ar()-hb?Ju(n,0):db|=t),gs(n,e)}function jF(n,e){e===0&&(n.mode&1?(e=R0,R0<<=1,!(R0&130023424)&&(R0=4194304)):e=1);var t=Qi();n=Sl(n,e),n!==null&&(n_(n,e,t),gs(n,t))}function j9(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),jF(n,t)}function J9(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ke(314))}r!==null&&r.delete(e),jF(n,t)}var JF;JF=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ps.current)fs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return fs=!1,L9(n,e,t);fs=!!(n.flags&131072)}else fs=!1,$n&&e.flags&1048576&&$k(e,ox,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sy(n,e),n=e.pendingProps;var i=bh(e,Di.current);ph(e,t),i=ob(null,e,r,n,i,t);var s=ab();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ms(r)?(s=!0,ix(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tb(e),i.updater=uS,e.stateNode=i,i._reactInternals=e,pM(e,r,n,t),e=_M(null,e,r,!0,s,t)):(e.tag=0,$n&&s&&YC(e),Wi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Sy(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=K9(r),n=zo(r,n),i){case 0:e=gM(null,e,r,n,t);break e;case 1:e=sD(null,e,r,n,t);break e;case 11:e=rD(null,e,r,n,t);break e;case 14:e=iD(null,e,r,zo(r.type,n),t);break e}throw Error(Ke(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zo(r,i),gM(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zo(r,i),sD(n,e,r,i,t);case 3:e:{if(IF(e),n===null)throw Error(Ke(387));r=e.pendingProps,s=e.memoizedState,i=s.element,rF(n,e),cx(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Bh(Error(Ke(423)),e),e=oD(n,e,r,t,i);break e}else if(r!==i){i=Bh(Error(Ke(424)),e),e=oD(n,e,r,t,i);break e}else for(Fs=vc(e.stateNode.containerInfo.firstChild),Gs=e,$n=!0,Vo=null,t=tF(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Rh(),r===i){e=Al(n,e,t);break e}Wi(n,e,r,t)}e=e.child}return e;case 5:return iF(e),n===null&&fM(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,oM(r,i)?o=null:s!==null&&oM(r,s)&&(e.flags|=32),RF(n,e),Wi(n,e,o,t),e.child;case 6:return n===null&&fM(e),null;case 13:return PF(n,e,t);case 4:return nb(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Ih(e,null,r,t):Wi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zo(r,i),rD(n,e,r,i,t);case 7:return Wi(n,e,e.pendingProps,t),e.child;case 8:return Wi(n,e,e.pendingProps.children,t),e.child;case 12:return Wi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Vn(ax,r._currentValue),r._currentValue=o,s!==null)if($o(s.value,o)){if(s.children===i.children&&!ps.current){e=Al(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ml(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),dM(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ke(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),dM(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Wi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ph(e,t),i=wo(i),r=r(i),e.flags|=1,Wi(n,e,r,t),e.child;case 14:return r=e.type,i=zo(r,e.pendingProps),i=zo(r.type,i),iD(n,e,r,i,t);case 15:return CF(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zo(r,i),Sy(n,e),e.tag=1,ms(r)?(n=!0,ix(e)):n=!1,ph(e,t),wF(e,r,i),pM(e,r,i,t),_M(null,e,r,!0,n,t);case 19:return BF(n,e,t);case 22:return bF(n,e,t)}throw Error(Ke(156,e.tag))};function YF(n,e){return Sk(n,e)}function Y9(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vo(n,e,t,r){return new Y9(n,e,t,r)}function _b(n){return n=n.prototype,!(!n||!n.isReactComponent)}function K9(n){if(typeof n=="function")return _b(n)?1:0;if(n!=null){if(n=n.$$typeof,n===OC)return 11;if(n===kC)return 14}return 2}function Ac(n,e){var t=n.alternate;return t===null?(t=vo(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function wy(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")_b(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Gd:return Yu(t.children,i,s,e);case NC:o=8,i|=8;break;case Fw:return n=vo(12,t,e,i|2),n.elementType=Fw,n.lanes=s,n;case Uw:return n=vo(13,t,e,i),n.elementType=Uw,n.lanes=s,n;case zw:return n=vo(19,t,e,i),n.elementType=zw,n.lanes=s,n;case ik:return hS(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nk:o=10;break e;case rk:o=9;break e;case OC:o=11;break e;case kC:o=14;break e;case $l:o=16,r=null;break e}throw Error(Ke(130,n==null?n:typeof n,""))}return e=vo(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Yu(n,e,t,r){return n=vo(7,n,r,e),n.lanes=t,n}function hS(n,e,t,r){return n=vo(22,n,r,e),n.elementType=ik,n.lanes=t,n.stateNode={isHidden:!1},n}function $A(n,e,t){return n=vo(6,n,null,e),n.lanes=t,n}function QA(n,e,t){return e=vo(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function q9(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=BA(0),this.expirationTimes=BA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=BA(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vb(n,e,t,r,i,s,o,a,l){return n=new q9(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},tb(s),n}function $9(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hd,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function KF(n){if(!n)return Pc;n=n._reactInternals;e:{if(kf(n)!==n||n.tag!==1)throw Error(Ke(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ms(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ke(171))}if(n.tag===1){var t=n.type;if(ms(t))return Kk(n,t,e)}return e}function qF(n,e,t,r,i,s,o,a,l){return n=vb(t,r,!0,n,i,s,o,a,l),n.context=KF(null),t=n.current,r=Qi(),i=Sc(t),s=ml(r,i),s.callback=e??null,yc(t,s,i),n.current.lanes=i,n_(n,i,r),gs(n,r),n}function pS(n,e,t,r){var i=e.current,s=Qi(),o=Sc(i);return t=KF(t),e.context===null?e.context=t:e.pendingContext=t,e=ml(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=yc(i,e,o),n!==null&&(Ko(n,i,o,s),vy(n,i,o)),o}function _x(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function gD(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function yb(n,e){gD(n,e),(n=n.alternate)&&gD(n,e)}function Q9(){return null}var $F=typeof reportError=="function"?reportError:function(n){console.error(n)};function xb(n){this._internalRoot=n}mS.prototype.render=xb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ke(409));pS(n,e,null,null)};mS.prototype.unmount=xb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;vf(function(){pS(null,n,null,null)}),e[xl]=null}};function mS(n){this._internalRoot=n}mS.prototype.unstable_scheduleHydration=function(n){if(n){var e=bk();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ic.length&&e!==0&&e<ic[t].priority;t++);ic.splice(t,0,n),t===0&&Ik(n)}};function Sb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function _D(){}function Z9(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=_x(o);s.call(c)}}var o=qF(e,r,n,0,null,!1,!1,"",_D);return n._reactRootContainer=o,n[xl]=o.current,hg(n.nodeType===8?n.parentNode:n),vf(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=_x(l);a.call(c)}}var l=vb(n,0,!1,null,null,!1,!1,"",_D);return n._reactRootContainer=l,n[xl]=l.current,hg(n.nodeType===8?n.parentNode:n),vf(function(){pS(e,l,t,r)}),l}function _S(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_x(o);a.call(l)}}pS(e,o,n,i)}else o=Z9(t,e,n,i,r);return _x(o)}Tk=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=_m(e.pendingLanes);t!==0&&(zC(e,t|1),gs(e,Ar()),!(Sn&6)&&(Dh=Ar()+500,Xc()))}break;case 13:vf(function(){var r=Sl(n,1);if(r!==null){var i=Qi();Ko(r,n,1,i)}}),yb(n,1)}};HC=function(n){if(n.tag===13){var e=Sl(n,134217728);if(e!==null){var t=Qi();Ko(e,n,134217728,t)}yb(n,134217728)}};Ck=function(n){if(n.tag===13){var e=Sc(n),t=Sl(n,e);if(t!==null){var r=Qi();Ko(t,n,e,r)}yb(n,e)}};bk=function(){return In};Rk=function(n,e){var t=In;try{return In=n,e()}finally{In=t}};qw=function(n,e,t){switch(e){case"input":if(Vw(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=aS(r);if(!i)throw Error(Ke(90));ok(r),Vw(r,i)}}}break;case"textarea":lk(n,t);break;case"select":e=t.value,e!=null&&uh(n,!!t.multiple,e,!1)}};mk=pb;gk=vf;var e6={usingClientEntryPoint:!1,Events:[i_,jd,aS,hk,pk,pb]},jp={findFiberByHostInstance:Bu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t6={bundleType:jp.bundleType,version:jp.version,rendererPackageName:jp.rendererPackageName,rendererConfig:jp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=yk(n),n===null?null:n.stateNode},findFiberByHostInstance:jp.findFiberByHostInstance||Q9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var z0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!z0.isDisabled&&z0.supportsFiber)try{rS=z0.inject(t6),Ta=z0}catch{}}qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e6;qs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sb(e))throw Error(Ke(200));return $9(n,e,null,t)};qs.createRoot=function(n,e){if(!Sb(n))throw Error(Ke(299));var t=!1,r="",i=$F;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vb(n,1,!1,null,null,t,!1,r,i),n[xl]=e.current,hg(n.nodeType===8?n.parentNode:n),new xb(e)};qs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ke(188)):(n=Object.keys(n).join(","),Error(Ke(268,n)));return n=yk(e),n=n===null?null:n.stateNode,n};qs.flushSync=function(n){return vf(n)};qs.hydrate=function(n,e,t){if(!gS(e))throw Error(Ke(200));return _S(null,n,e,!0,t)};qs.hydrateRoot=function(n,e,t){if(!Sb(n))throw Error(Ke(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=$F;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=qF(e,null,n,1,t??null,i,!1,s,o),n[xl]=e.current,hg(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new mS(e)};qs.render=function(n,e,t){if(!gS(e))throw Error(Ke(200));return _S(null,n,e,!1,t)};qs.unmountComponentAtNode=function(n){if(!gS(n))throw Error(Ke(40));return n._reactRootContainer?(vf(function(){_S(null,null,n,!1,function(){n._reactRootContainer=null,n[xl]=null})}),!0):!1};qs.unstable_batchedUpdates=pb;qs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!gS(t))throw Error(Ke(200));if(n==null||n._reactInternals===void 0)throw Error(Ke(38));return _S(n,e,t,!1,r)};qs.version="18.3.1-next-f1338f8080-20240426";function QF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QF)}catch(n){console.error(n)}}QF(),QO.exports=qs;var n6=QO.exports,ZF,vD=n6;ZF=Ow.createRoot=vD.createRoot,Ow.hydrateRoot=vD.hydrateRoot;const r6="/Apple-website/assets/videos/hero.mp4",i6="/Apple-website/assets/videos/smallHero.mp4",s6="/Apple-website/assets/videos/highlight-first.mp4",o6="/Apple-website/assets/videos/hightlight-third.mp4",a6="/Apple-website/assets/videos/hightlight-sec.mp4",l6="/Apple-website/assets/videos/hightlight-fourth.mp4",c6="/Apple-website/assets/videos/explore.mp4",u6="/Apple-website/assets/videos/frame.mp4",f6="/Apple-website/assets/images/apple.svg",d6="/Apple-website/assets/images/search.svg",h6="/Apple-website/assets/images/bag.svg",p6="/Apple-website/assets/images/watch.svg",m6="/Apple-website/assets/images/right.svg",g6="/Apple-website/assets/images/replay.svg",_6="/Apple-website/assets/images/play.svg",v6="/Apple-website/assets/images/pause.svg",y6="/Apple-website/assets/images/yellow.jpg",x6="/Apple-website/assets/images/blue.jpg",S6="/Apple-website/assets/images/white.jpg",A6="/Apple-website/assets/images/black.jpg",E6="/Apple-website/assets/images/explore1.jpg",w6="/Apple-website/assets/images/explore2.jpg",M6="/Apple-website/assets/images/chip.jpeg",T6="/Apple-website/assets/images/frame.png",yD=r6,xD=i6,C6=s6,b6=o6,R6=a6,I6=l6,P6=c6,B6=u6,D6=f6,L6=d6,N6=h6,O6=p6,k6=m6,F6=g6,U6=_6,z6=v6,e3=y6,H6=x6,G6=S6,V6=A6,W6=E6,X6=w6,j6=M6,J6=T6,Y6=["Store","Mac","iPhone","Support"],SD=[{id:1,textLists:["Enter A17 Pro.","Gamechanging chip.","Groundbreaking performance."],video:C6,videoDuration:4},{id:2,textLists:["Titanium.","So strong. So light. So Pro."],video:b6,videoDuration:5},{id:3,textLists:["iPhone 15 Pro Max has the","longest optical zoom in","iPhone ever. Far out."],video:R6,videoDuration:2},{id:4,textLists:["All-new Action button.","What will yours do?."],video:I6,videoDuration:3.63}],K6=[{id:1,title:"iPhone 15 Pro in Natural Titanium",color:["#8F8A81","#ffe7b9","#6f6c64"],img:e3},{id:2,title:"iPhone 15 Pro in Blue Titanium",color:["#53596E","#6395ff","#21242e"],img:H6},{id:3,title:"iPhone 15 Pro in White Titanium",color:["#C9C8C2","#ffffff","#C9C8C2"],img:G6},{id:4,title:"iPhone 15 Pro in Black Titanium",color:["#454749","#3b3b3b","#181819"],img:V6}],q6=[{label:'6.1"',value:"small"},{label:'6.7"',value:"large"}],AD=["Privacy Policy","Terms of Use","Sales Policy","Legal","Site Map"],$6=()=>se.jsx("header",{className:"w-full py-5 sm:px-10 px-5 flex justify-between items-center",children:se.jsxs("nav",{className:"flex w-full screen-max-width",children:[se.jsx("img",{src:D6,alt:"apple",width:14,height:18}),se.jsx("div",{className:"flex flex-1 justify-center max-sm:hidden",children:Y6.map(n=>se.jsx("div",{className:"px-5 text-sm cursor-pointer text-gray hover:text-white transition-all",children:n},n))}),se.jsxs("div",{className:"flex items-baseline gap-7 max-sm:justify-end max-sm:flex-1",children:[se.jsx("img",{src:L6,alt:"search",width:18,height:18}),se.jsx("img",{src:N6,alt:"bag",width:18,height:18})]})]})});function el(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function t3(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Vs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Lh={duration:.5,overwrite:!1,delay:0},Ab,Ri,Qn,yo=1e8,Gn=1/yo,RM=Math.PI*2,Q6=RM/4,Z6=0,n3=Math.sqrt,eW=Math.cos,tW=Math.sin,oi=function(e){return typeof e=="string"},_r=function(e){return typeof e=="function"},El=function(e){return typeof e=="number"},Eb=function(e){return typeof e>"u"},Na=function(e){return typeof e=="object"},_s=function(e){return e!==!1},wb=function(){return typeof window<"u"},H0=function(e){return _r(e)||oi(e)},r3=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ii=Array.isArray,IM=/(?:-?\.?\d|\.)+/gi,i3=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Zd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ZA=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,s3=/[+-]=-?[.\d]+/,o3=/[^,'"\[\]\s]+/gi,nW=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ir,pa,PM,Mb,js={},vx={},a3,l3=function(e){return(vx=yf(e,js))&&Ss},Tb=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Ag=function(e,t){return!t&&console.warn(e)},c3=function(e,t){return e&&(js[e]=t)&&vx&&(vx[e]=t)||js},Eg=function(){return 0},rW={suppressEvents:!0,isStart:!0,kill:!1},My={suppressEvents:!0,kill:!1},iW={suppressEvents:!0},Cb={},Ec=[],BM={},u3,Ds={},eE={},ED=30,Ty=[],bb="",Rb=function(e){var t=e[0],r,i;if(Na(t)||_r(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=Ty.length;i--&&!Ty[i].targetTest(t););r=Ty[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new L3(e[i],r)))||e.splice(i,1);return e},Ku=function(e){return e._gsap||Rb(xo(e))[0]._gsap},f3=function(e,t,r){return(r=e[t])&&_r(r)?e[t]():Eb(r)&&e.getAttribute&&e.getAttribute(t)||r},vs=function(e,t){return(e=e.split(",")).forEach(t)||e},Sr=function(e){return Math.round(e*1e5)/1e5||0},ei=function(e){return Math.round(e*1e7)/1e7||0},gh=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},sW=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},yx=function(){var e=Ec.length,t=Ec.slice(0),r,i;for(BM={},Ec.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},d3=function(e,t,r,i){Ec.length&&!Ri&&yx(),e.render(t,r,Ri&&t<0&&(e._initted||e._startAt)),Ec.length&&!Ri&&yx()},h3=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(o3).length<2?t:oi(e)?e.trim():e},p3=function(e){return e},To=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},oW=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},yf=function(e,t){for(var r in t)e[r]=t[r];return e},wD=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Na(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},xx=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},km=function(e){var t=e.parent||ir,r=e.keyframes?oW(Ii(e.keyframes)):To;if(_s(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},aW=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},m3=function(e,t,r,i,s){var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},vS=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Bc=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},qu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},lW=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},DM=function(e,t,r,i){return e._startAt&&(Ri?e._startAt.revert(My):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},cW=function n(e){return!e||e._ts&&n(e.parent)},MD=function(e){return e._repeat?Nh(e._tTime,e=e.duration()+e._rDelay)*e:0},Nh=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},Sx=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},yS=function(e){return e._end=ei(e._start+(e._tDur/Math.abs(e._ts||e._rts||Gn)||0))},xS=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=ei(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),yS(e),r._dirty||qu(r,e)),e},g3=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=Sx(e.rawTime(),t),(!t._dur||o_(0,t.totalDuration(),r)-t._tTime>Gn)&&t.render(r,!0)),qu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Gn}},ya=function(e,t,r,i){return t.parent&&Bc(t),t._start=ei((El(r)?r:r||e!==ir?co(e,r,t):e._time)+t._delay),t._end=ei(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),m3(e,t,"_first","_last",e._sort?"_start":0),LM(t)||(e._recent=t),i||g3(e,t),e._ts<0&&xS(e,e._tTime),e},_3=function(e,t){return(js.ScrollTrigger||Tb("scrollTrigger",t))&&js.ScrollTrigger.create(t,e)},v3=function(e,t,r,i,s){if(Pb(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!Ri&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&u3!==Ns.frame)return Ec.push(e),e._lazy=[s,i],1},uW=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},LM=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},fW=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&uW(e)&&!(!e._initted&&LM(e))||(e._ts<0||e._dp._ts<0)&&!LM(e))?0:1,a=e._rDelay,l=0,c,u,d;if(a&&e._repeat&&(l=o_(0,e._tDur,t),u=Nh(l,a),e._yoyo&&u&1&&(o=1-o),u!==Nh(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Ri||i||e._zTime===Gn||!t&&e._zTime){if(!e._initted&&v3(e,t,i,r,l))return;for(d=e._zTime,e._zTime=t||(r?Gn:0),r||(r=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&DM(e,t,r,!0),e._onUpdate&&!r&&Us(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&Us(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Bc(e,1),!r&&!Ri&&(Us(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},dW=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Oh=function(e,t,r,i){var s=e._repeat,o=ei(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:ei(o*(s+1)+e._rDelay*s):o,a>0&&!i&&xS(e,e._tTime=e._tDur*a),e.parent&&yS(e),r||qu(e.parent,e),e},TD=function(e){return e instanceof Ji?qu(e):Oh(e,e._dur)},hW={_start:0,endTime:Eg,totalDuration:Eg},co=function n(e,t,r){var i=e.labels,s=e._recent||hW,o=e.duration()>=yo?s.endTime(!1):e._dur,a,l,c;return oi(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&r&&(l=l/100*(Ii(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},Fm=function(e,t,r){var i=El(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=_s(l.vars.inherit)&&l.parent;o.immediateRender=_s(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Ir(t[0],o,t[s+1])},jc=function(e,t){return e||e===0?t(e):t},o_=function(e,t,r){return r<e?e:r>t?t:r},bi=function(e,t){return!oi(e)||!(t=nW.exec(e))?"":t[1]},pW=function(e,t,r){return jc(r,function(i){return o_(e,t,i)})},NM=[].slice,y3=function(e,t){return e&&Na(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Na(e[0]))&&!e.nodeType&&e!==pa},mW=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return oi(i)&&!t||y3(i,1)?(s=r).push.apply(s,xo(i)):r.push(i)})||r},xo=function(e,t,r){return Qn&&!t&&Qn.selector?Qn.selector(e):oi(e)&&!r&&(PM||!kh())?NM.call((t||Mb).querySelectorAll(e),0):Ii(e)?mW(e,r):y3(e)?NM.call(e,0):e?[e]:[]},OM=function(e){return e=xo(e)[0]||Ag("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return xo(t,r.querySelectorAll?r:r===e?Ag("Invalid scope")||Mb.createElement("div"):e)}},x3=function(e){return e.sort(function(){return .5-Math.random()})},S3=function(e){if(_r(e))return e;var t=Na(e)?e:{each:e},r=$u(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,c=t.axis,u=i,d=i;return oi(i)?u=d={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(u=i[0],d=i[1]),function(p,m,g){var y=(g||t).length,v=o[y],_,S,A,w,I,T,R,P,b;if(!v){if(b=t.grid==="auto"?0:(t.grid||[1,yo])[1],!b){for(R=-yo;R<(R=g[b++].getBoundingClientRect().left)&&b<y;);b<y&&b--}for(v=o[y]=[],_=l?Math.min(b,y)*u-.5:i%b,S=b===yo?0:l?y*d/b-.5:i/b|0,R=0,P=yo,T=0;T<y;T++)A=T%b-_,w=S-(T/b|0),v[T]=I=c?Math.abs(c==="y"?w:A):n3(A*A+w*w),I>R&&(R=I),I<P&&(P=I);i==="random"&&x3(v),v.max=R-P,v.min=P,v.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(b>y?y-1:c?c==="y"?y/b:b:Math.max(b,y/b))||0)*(i==="edges"?-1:1),v.b=y<0?s-y:s,v.u=bi(t.amount||t.each)||0,r=r&&y<0?P3(r):r}return y=(v[p]-v.min)/v.max||0,ei(v.b+(r?r(y):y)*v.v)+v.u}},kM=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=ei(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(El(r)?0:bi(r))}},A3=function(e,t){var r=Ii(e),i,s;return!r&&Na(e)&&(i=r=e.radius||yo,e.values?(e=xo(e.values),(s=!El(e[0]))&&(i*=i)):e=kM(e.increment)),jc(t,r?_r(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=yo,u=0,d=e.length,p,m;d--;)s?(p=e[d].x-a,m=e[d].y-l,p=p*p+m*m):p=Math.abs(e[d]-a),p<c&&(c=p,u=d);return u=!i||c<=i?e[u]:o,s||u===o||El(o)?u:u+bi(o)}:kM(e))},E3=function(e,t,r,i){return jc(Ii(e)?!t:r===!0?!!(r=0):!i,function(){return Ii(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},gW=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},_W=function(e,t){return function(r){return e(parseFloat(r))+(t||bi(r))}},vW=function(e,t,r){return M3(e,t,0,1,r)},w3=function(e,t,r){return jc(r,function(i){return e[~~t(i)]})},yW=function n(e,t,r){var i=t-e;return Ii(e)?w3(e,n(0,e.length),t):jc(r,function(s){return(i+(s-e)%i)%i+e})},xW=function n(e,t,r){var i=t-e,s=i*2;return Ii(e)?w3(e,n(0,e.length-1),t):jc(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},wg=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?o3:IM),r+=e.substr(t,i-t)+E3(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},M3=function(e,t,r,i,s){var o=t-e,a=i-r;return jc(s,function(l){return r+((l-e)/o*a||0)})},SW=function n(e,t,r,i){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=oi(e),a={},l,c,u,d,p;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(Ii(e)&&!Ii(t)){for(u=[],d=e.length,p=d-2,c=1;c<d;c++)u.push(n(e[c-1],e[c]));d--,s=function(g){g*=d;var y=Math.min(p,~~g);return u[y](g-y)},r=t}else i||(e=yf(Ii(e)?[]:{},e));if(!u){for(l in t)Ib.call(a,e,l,"get",t[l]);s=function(g){return Lb(g,a)||(o?e.p:e)}}}return jc(r,s)},CD=function(e,t,r){var i=e.labels,s=yo,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Us=function(e,t,r){var i=e.vars,s=i[t],o=Qn,a=e._ctx,l,c,u;if(s)return l=i[t+"Params"],c=i.callbackScope||e,r&&Ec.length&&yx(),a&&(Qn=a),u=l?s.apply(c,l):s.call(c),Qn=o,u},ym=function(e){return Bc(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ri),e.progress()<1&&Us(e,"onInterrupt"),e},eh,T3=[],C3=function(e){if(e)if(e=!e.name&&e.default||e,wb()||e.headless){var t=e.name,r=_r(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Eg,render:Lb,add:Ib,kill:kW,modifier:OW,rawVars:0},o={targetTest:0,get:0,getSetter:Db,aliases:{},register:0};if(kh(),e!==i){if(Ds[t])return;To(i,To(xx(e,s),o)),yf(i.prototype,yf(s,xx(e,o))),Ds[i.prop=t]=i,e.targetTest&&(Ty.push(i),Cb[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}c3(t,i),e.register&&e.register(Ss,i,ys)}else T3.push(e)},Nn=255,xm={aqua:[0,Nn,Nn],lime:[0,Nn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Nn],navy:[0,0,128],white:[Nn,Nn,Nn],olive:[128,128,0],yellow:[Nn,Nn,0],orange:[Nn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Nn,0,0],pink:[Nn,192,203],cyan:[0,Nn,Nn],transparent:[Nn,Nn,Nn,0]},tE=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*Nn+.5|0},b3=function(e,t,r){var i=e?El(e)?[e>>16,e>>8&Nn,e&Nn]:0:xm.black,s,o,a,l,c,u,d,p,m,g;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),xm[e])i=xm[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Nn,i&Nn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Nn,e&Nn]}else if(e.substr(0,3)==="hsl"){if(i=g=e.match(IM),!t)l=+i[0]%360/360,c=+i[1]/100,u=+i[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,i.length>3&&(i[3]*=1),i[0]=tE(l+1/3,s,o),i[1]=tE(l,s,o),i[2]=tE(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(i3),r&&i.length<4&&(i[3]=1),i}else i=e.match(IM)||xm.transparent;i=i.map(Number)}return t&&!g&&(s=i[0]/Nn,o=i[1]/Nn,a=i[2]/Nn,d=Math.max(s,o,a),p=Math.min(s,o,a),u=(d+p)/2,d===p?l=c=0:(m=d-p,c=u>.5?m/(2-d-p):m/(d+p),l=d===s?(o-a)/m+(o<a?6:0):d===o?(a-s)/m+2:(s-o)/m+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(u*100+.5)),r&&i.length<4&&(i[3]=1),i},R3=function(e){var t=[],r=[],i=-1;return e.split(wc).forEach(function(s){var o=s.match(Zd)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},bD=function(e,t,r){var i="",s=(e+i).match(wc),o=t?"hsla(":"rgba(",a=0,l,c,u,d;if(!s)return e;if(s=s.map(function(p){return(p=b3(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(u=R3(e),l=r.c,l.join(i)!==u.c.join(i)))for(c=e.replace(wc,"1").split(Zd),d=c.length-1;a<d;a++)i+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:r).shift());if(!c)for(c=e.split(wc),d=c.length-1;a<d;a++)i+=c[a]+s[a];return i+c[d]},wc=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in xm)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),AW=/hsl[a]?\(/,I3=function(e){var t=e.join(" "),r;if(wc.lastIndex=0,wc.test(t))return r=AW.test(t),e[1]=bD(e[1],r),e[0]=bD(e[0],r,R3(e[1])),!0},Mg,Ns=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,c,u,d,p,m,g=function y(v){var _=n()-i,S=v===!0,A,w,I,T;if((_>e||_<0)&&(r+=_-t),i+=_,I=i-r,A=I-o,(A>0||S)&&(T=++d.frame,p=I-d.time*1e3,d.time=I=I/1e3,o+=A+(A>=s?4:s-A),w=1),S||(l=c(y)),w)for(m=0;m<a.length;m++)a[m](I,p,T,v)};return d={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(v){return p/(1e3/(v||60))},wake:function(){a3&&(!PM&&wb()&&(pa=PM=window,Mb=pa.document||{},js.gsap=Ss,(pa.gsapVersions||(pa.gsapVersions=[])).push(Ss.version),l3(vx||pa.GreenSockGlobals||!pa.gsap&&pa||{}),T3.forEach(C3)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),c=u||function(v){return setTimeout(v,o-d.time*1e3+1|0)},Mg=1,g(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Mg=0,c=Eg},lagSmoothing:function(v,_){e=v||1/0,t=Math.min(_||33,e)},fps:function(v){s=1e3/(v||240),o=d.time*1e3+s},add:function(v,_,S){var A=_?function(w,I,T,R){v(w,I,T,R),d.remove(A)}:v;return d.remove(v),a[S?"unshift":"push"](A),kh(),A},remove:function(v,_){~(_=a.indexOf(v))&&a.splice(_,1)&&m>=_&&m--},_listeners:a},d}(),kh=function(){return!Mg&&Ns.wake()},cn={},EW=/^[\d.\-M][\d.\-,\s]/,wW=/["']/g,MW=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,c;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[i]=isNaN(c)?c.replace(wW,"").trim():+c,i=l.substr(a+1).trim();return t},TW=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},CW=function(e){var t=(e+"").split("("),r=cn[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[MW(t[1])]:TW(e).split(",").map(h3)):cn._CE&&EW.test(e)?cn._CE("",e):r},P3=function(e){return function(t){return 1-e(1-t)}},B3=function n(e,t){for(var r=e._first,i;r;)r instanceof Ji?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},$u=function(e,t){return e&&(_r(e)?e:cn[e]||CW(e))||t},Ff=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return vs(e,function(a){cn[a]=js[a]=s,cn[o=a.toLowerCase()]=r;for(var l in s)cn[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=cn[a+"."+l]=s[l]}),s},D3=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},nE=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/RM*(Math.asin(1/i)||0),a=function(u){return u===1?1:i*Math.pow(2,-10*u)*tW((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:D3(a);return s=RM/s,l.config=function(c,u){return n(e,c,u)},l},rE=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:D3(r);return i.config=function(s){return n(e,s)},i};vs("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Ff(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});cn.Linear.easeNone=cn.none=cn.Linear.easeIn;Ff("Elastic",nE("in"),nE("out"),nE());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Ff("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Ff("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Ff("Circ",function(n){return-(n3(1-n*n)-1)});Ff("Sine",function(n){return n===1?1:-eW(n*Q6)+1});Ff("Back",rE("in"),rE("out"),rE());cn.SteppedEase=cn.steps=js.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-Gn;return function(a){return((i*o_(0,o,a)|0)+s)*r}}};Lh.ease=cn["quad.out"];vs("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return bb+=n+","+n+"Params,"});var L3=function(e,t){this.id=Z6++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:f3,this.set=t?t.getSetter:Db},Tg=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Oh(this,+t.duration,1,1),this.data=t.data,Qn&&(this._ctx=Qn,Qn.data.push(this)),Mg||Ns.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Oh(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(kh(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(xS(this,r),!s._dp||s.parent||g3(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&ya(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Gn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),d3(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+MD(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+MD(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?Nh(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-Gn?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?Sx(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Gn?0:this._rts,this.totalTime(o_(-Math.abs(this._delay),this._tDur,s),i!==!1),yS(this),lW(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(kh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Gn&&(this._tTime-=Gn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&ya(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(_s(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Sx(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=iW);var i=Ri;return Ri=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Ri=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,TD(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,TD(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(co(this,r),_s(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,_s(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Gn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Gn,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Gn)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=_r(r)?r:p3,a=function(){var c=i.then;i.then=null,_r(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=c),s(o),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){ym(this)},n}();To(Tg.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Gn,_prom:0,_ps:!1,_rts:1});var Ji=function(n){t3(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=_s(r.sortChildren),ir&&ya(r.parent||ir,el(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&_3(el(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return Fm(0,arguments,this),this},t.from=function(i,s,o){return Fm(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Fm(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,km(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Ir(i,s,co(this,o),1),this},t.call=function(i,s,o){return ya(this,Ir.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Ir(i,o,co(this,l)),this},t.staggerFrom=function(i,s,o,a,l,c,u){return o.runBackwards=1,km(o).immediateRender=_s(o.immediateRender),this.staggerTo(i,s,o,a,l,c,u)},t.staggerFromTo=function(i,s,o,a,l,c,u,d){return a.startAt=o,km(a).immediateRender=_s(a.immediateRender),this.staggerTo(i,s,a,l,c,u,d)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=i<=0?0:ei(i),d=this._zTime<0!=i<0&&(this._initted||!c),p,m,g,y,v,_,S,A,w,I,T,R;if(this!==ir&&u>l&&i>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,i+=this._time-a),p=u,w=this._start,A=this._ts,_=!A,d&&(c||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(T=this._yoyo,v=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(v*100+i,s,o);if(p=ei(u%v),u===l?(y=this._repeat,p=c):(y=~~(u/v),y&&y===u/v&&(p=c,y--),p>c&&(p=c)),I=Nh(this._tTime,v),!a&&this._tTime&&I!==y&&this._tTime-I*v-this._dur<=0&&(I=y),T&&y&1&&(p=c-p,R=1),y!==I&&!this._lock){var P=T&&I&1,b=P===(T&&y&1);if(y<I&&(P=!P),a=P?0:u%c?c:u,this._lock=1,this.render(a||(R?0:ei(y*v)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Us(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,b&&(this._lock=2,a=P?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;B3(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=dW(this,ei(a),ei(p)),S&&(u-=p-(p=S._start))),this._tTime=u,this._time=p,this._act=!A,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&p&&!s&&!y&&(Us(this,"onStart"),this._tTime!==u))return this;if(p>=a&&i>=0)for(m=this._first;m;){if(g=m._next,(m._act||p>=m._start)&&m._ts&&S!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!_){S=0,g&&(u+=this._zTime=-Gn);break}}m=g}else{m=this._last;for(var M=i<0?i:p;m;){if(g=m._prev,(m._act||M<=m._end)&&m._ts&&S!==m){if(m.parent!==this)return this.render(i,s,o);if(m.render(m._ts>0?(M-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(M-m._start)*m._ts,s,o||Ri&&(m._initted||m._startAt)),p!==this._time||!this._ts&&!_){S=0,g&&(u+=this._zTime=M?-Gn:Gn);break}}m=g}}if(S&&!s&&(this.pause(),S.render(p>=a?0:-Gn)._zTime=p>=a?1:-1,this._ts))return this._start=w,yS(this),this.render(i,s,o);this._onUpdate&&!s&&Us(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(w===this._start||Math.abs(A)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Bc(this,1),!s&&!(i<0&&!a)&&(u||a||!l)&&(Us(this,u===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(El(s)||(s=co(this,s,i)),!(i instanceof Tg)){if(Ii(i))return i.forEach(function(a){return o.add(a,s)}),this;if(oi(i))return this.addLabel(i,s);if(_r(i))i=Ir.delayedCall(0,i);else return this}return this!==i?ya(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-yo);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Ir?s&&l.push(c):(o&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return oi(i)?this.removeLabel(i):_r(i)?this.killTweensOf(i):(vS(this,i),i===this._recent&&(this._recent=this._last),qu(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ei(Ns.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=co(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Ir.delayedCall(0,s||Eg,o);return a.data="isPause",this._hasPause=1,ya(this,a,co(this,i))},t.removePause=function(i){var s=this._first;for(i=co(this,i);s;)s._start===i&&s.data==="isPause"&&Bc(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)cc!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=xo(i),l=this._first,c=El(s),u;l;)l instanceof Ir?sW(l._targets,a)&&(c?(!cc||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=co(o,i),l=s,c=l.startAt,u=l.onStart,d=l.onStartParams,p=l.immediateRender,m,g=Ir.to(o,To({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Gn,onStart:function(){if(o.pause(),!m){var v=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==v&&Oh(g,v,0,1).render(g._time,!0,!0),m=1}u&&u.apply(g,d||[])}},s));return p?g.render(0):g},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,To({startAt:{time:co(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),CD(this,co(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),CD(this,co(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Gn)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=i);return qu(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),qu(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=yo,c,u,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,ya(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Oh(o,o===ir&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(ir._ts&&(d3(ir,Sx(i,ir)),u3=Ns.frame),Ns.frame>=ED){ED+=Vs.autoSleep||120;var s=ir._first;if((!s||!s._ts)&&Vs.autoSleep&&Ns._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ns.sleep()}}},e}(Tg);To(Ji.prototype,{_lock:0,_hasPause:0,_forcing:0});var bW=function(e,t,r,i,s,o,a){var l=new ys(this._pt,e,t,0,1,z3,null,s),c=0,u=0,d,p,m,g,y,v,_,S;for(l.b=r,l.e=i,r+="",i+="",(_=~i.indexOf("random("))&&(i=wg(i)),o&&(S=[r,i],o(S,e,t),r=S[0],i=S[1]),p=r.match(ZA)||[];d=ZA.exec(i);)g=d[0],y=i.substring(c,d.index),m?m=(m+1)%5:y.substr(-5)==="rgba("&&(m=1),g!==p[u++]&&(v=parseFloat(p[u-1])||0,l._pt={_next:l._pt,p:y||u===1?y:",",s:v,c:g.charAt(1)==="="?gh(v,g)-v:parseFloat(g)-v,m:m&&m<4?Math.round:0},c=ZA.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=a,(s3.test(i)||_)&&(l.e=0),this._pt=l,l},Ib=function(e,t,r,i,s,o,a,l,c,u){_r(i)&&(i=i(s||0,e,o));var d=e[t],p=r!=="get"?r:_r(d)?c?e[t.indexOf("set")||!_r(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,m=_r(d)?c?DW:F3:Bb,g;if(oi(i)&&(~i.indexOf("random(")&&(i=wg(i)),i.charAt(1)==="="&&(g=gh(p,i)+(bi(p)||0),(g||g===0)&&(i=g))),!u||p!==i||FM)return!isNaN(p*i)&&i!==""?(g=new ys(this._pt,e,t,+p||0,i-(p||0),typeof d=="boolean"?NW:U3,0,m),c&&(g.fp=c),a&&g.modifier(a,this,e),this._pt=g):(!d&&!(t in e)&&Tb(t,i),bW.call(this,e,t,p,i,m,l||Vs.stringFilter,c))},RW=function(e,t,r,i,s){if(_r(e)&&(e=Um(e,s,t,r,i)),!Na(e)||e.style&&e.nodeType||Ii(e)||r3(e))return oi(e)?Um(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=Um(e[a],s,t,r,i);return o},N3=function(e,t,r,i,s,o){var a,l,c,u;if(Ds[e]&&(a=new Ds[e]).init(s,a.rawVars?t[e]:RW(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new ys(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==eh))for(c=r._ptLookup[r._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},cc,FM,Pb=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,c=i.onUpdate,u=i.runBackwards,d=i.yoyoEase,p=i.keyframes,m=i.autoRevert,g=e._dur,y=e._startAt,v=e._targets,_=e.parent,S=_&&_.data==="nested"?_.vars.targets:v,A=e._overwrite==="auto"&&!Ab,w=e.timeline,I,T,R,P,b,M,L,H,j,Q,ee,K,te;if(w&&(!p||!s)&&(s="none"),e._ease=$u(s,Lh.ease),e._yEase=d?P3($u(d===!0?s:d,Lh.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!w&&!!i.runBackwards,!w||p&&!i.stagger){if(H=v[0]?Ku(v[0]).harness:0,K=H&&i[H.prop],I=xx(i,Cb),y&&(y._zTime<0&&y.progress(1),t<0&&u&&a&&!m?y.render(-1,!0):y.revert(u&&g?My:rW),y._lazy=0),o){if(Bc(e._startAt=Ir.set(v,To({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!y&&_s(l),startAt:null,delay:0,onUpdate:c&&function(){return Us(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ri||!a&&!m)&&e._startAt.revert(My),a&&g&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(u&&g&&!y){if(t&&(a=!1),R=To({overwrite:!1,data:"isFromStart",lazy:a&&!y&&_s(l),immediateRender:a,stagger:0,parent:_},I),K&&(R[H.prop]=K),Bc(e._startAt=Ir.set(v,R)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ri?e._startAt.revert(My):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Gn,Gn);else if(!t)return}for(e._pt=e._ptCache=0,l=g&&_s(l)||l&&!g,T=0;T<v.length;T++){if(b=v[T],L=b._gsap||Rb(v)[T]._gsap,e._ptLookup[T]=Q={},BM[L.id]&&Ec.length&&yx(),ee=S===v?T:S.indexOf(b),H&&(j=new H).init(b,K||I,e,ee,S)!==!1&&(e._pt=P=new ys(e._pt,b,j.name,0,1,j.render,j,0,j.priority),j._props.forEach(function(F){Q[F]=P}),j.priority&&(M=1)),!H||K)for(R in I)Ds[R]&&(j=N3(R,I,e,ee,b,S))?j.priority&&(M=1):Q[R]=P=Ib.call(e,b,R,"get",I[R],ee,S,0,i.stringFilter);e._op&&e._op[T]&&e.kill(b,e._op[T]),A&&e._pt&&(cc=e,ir.killTweensOf(b,Q,e.globalTime(t)),te=!e.parent,cc=0),e._pt&&l&&(BM[L.id]=1)}M&&H3(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!te,p&&t<=0&&w.render(yo,!0,!0)},IW=function(e,t,r,i,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,d,p,m;if(!c)for(c=e._ptCache[t]=[],p=e._ptLookup,m=e._targets.length;m--;){if(u=p[m][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return FM=1,e.vars[t]="+=0",Pb(e,a),FM=0,l?Ag(t+" not eligible for reset"):1;c.push(u)}for(m=c.length;m--;)d=c[m],u=d._pt||d,u.s=(i||i===0)&&!s?i:u.s+(i||0)+o*u.c,u.c=r-u.s,d.e&&(d.e=Sr(r)+bi(d.e)),d.b&&(d.b=u.s+bi(d.b))},PW=function(e,t){var r=e[0]?Ku(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=yf({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},BW=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(Ii(t))a=r[e]||(r[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Um=function(e,t,r,i,s){return _r(e)?e.call(t,r,i,s):oi(e)&&~e.indexOf("random(")?wg(e):e},O3=bb+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",k3={};vs(O3+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return k3[n]=1});var Ir=function(n){t3(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:km(i))||this;var l=a.vars,c=l.duration,u=l.delay,d=l.immediateRender,p=l.stagger,m=l.overwrite,g=l.keyframes,y=l.defaults,v=l.scrollTrigger,_=l.yoyoEase,S=i.parent||ir,A=(Ii(r)||r3(r)?El(r[0]):"length"in i)?[r]:xo(r),w,I,T,R,P,b,M,L;if(a._targets=A.length?Rb(A):Ag("GSAP target "+r+" not found. https://gsap.com",!Vs.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,g||p||H0(c)||H0(u)){if(i=a.vars,w=a.timeline=new Ji({data:"nested",defaults:y||{},targets:S&&S.data==="nested"?S.vars.targets:A}),w.kill(),w.parent=w._dp=el(a),w._start=0,p||H0(c)||H0(u)){if(R=A.length,M=p&&S3(p),Na(p))for(P in p)~O3.indexOf(P)&&(L||(L={}),L[P]=p[P]);for(I=0;I<R;I++)T=xx(i,k3),T.stagger=0,_&&(T.yoyoEase=_),L&&yf(T,L),b=A[I],T.duration=+Um(c,el(a),I,b,A),T.delay=(+Um(u,el(a),I,b,A)||0)-a._delay,!p&&R===1&&T.delay&&(a._delay=u=T.delay,a._start+=u,T.delay=0),w.to(b,T,M?M(I,b,A):0),w._ease=cn.none;w.duration()?c=u=0:a.timeline=0}else if(g){km(To(w.vars.defaults,{ease:"none"})),w._ease=$u(g.ease||i.ease||"none");var H=0,j,Q,ee;if(Ii(g))g.forEach(function(K){return w.to(A,K,">")}),w.duration();else{T={};for(P in g)P==="ease"||P==="easeEach"||BW(P,g[P],T,g.easeEach);for(P in T)for(j=T[P].sort(function(K,te){return K.t-te.t}),H=0,I=0;I<j.length;I++)Q=j[I],ee={ease:Q.e,duration:(Q.t-(I?j[I-1].t:0))/100*c},ee[P]=Q.v,w.to(A,ee,H),H+=ee.duration;w.duration()<c&&w.to({},{duration:c-w.duration()})}}c||a.duration(c=w.duration())}else a.timeline=0;return m===!0&&!Ab&&(cc=el(a),ir.killTweensOf(A),cc=0),ya(S,el(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(d||!c&&!g&&a._start===ei(S._time)&&_s(d)&&cW(el(a))&&S.data!=="nested")&&(a._tTime=-Gn,a.render(Math.max(0,-u)||0)),v&&_3(el(a),v),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,c=this._dur,u=i<0,d=i>l-Gn&&!u?l:i<Gn?0:i,p,m,g,y,v,_,S,A,w;if(!c)fW(this,i,s,o);else if(d!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(p=d,A=this.timeline,this._repeat){if(y=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(y*100+i,s,o);if(p=ei(d%y),d===l?(g=this._repeat,p=c):(g=~~(d/y),g&&g===ei(d/y)&&(p=c,g--),p>c&&(p=c)),_=this._yoyo&&g&1,_&&(w=this._yEase,p=c-p),v=Nh(this._tTime,y),p===a&&!o&&this._initted&&g===v)return this._tTime=d,this;g!==v&&(A&&this._yEase&&B3(A,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==y&&this._initted&&(this._lock=o=1,this.render(ei(y*g),!0).invalidate()._lock=0))}if(!this._initted){if(v3(this,u?i:p,o,s,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==v))return this;if(c!==this._dur)return this.render(i,s,o)}if(this._tTime=d,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(w||this._ease)(p/c),this._from&&(this.ratio=S=1-S),p&&!a&&!s&&!g&&(Us(this,"onStart"),this._tTime!==d))return this;for(m=this._pt;m;)m.r(S,m.d),m=m._next;A&&A.render(i<0?i:A._dur*A._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(u&&DM(this,i,s,o),Us(this,"onUpdate")),this._repeat&&g!==v&&this.vars.onRepeat&&!s&&this.parent&&Us(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&DM(this,i,!0,!0),(i||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Bc(this,1),!s&&!(u&&!a)&&(d||a||_)&&(Us(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,l){Mg||Ns.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||Pb(this,c),u=this._ease(c/this._dur),IW(this,i,s,o,a,u,c,l)?this.resetTo(i,s,o,a,1):(xS(this,0),this.parent||m3(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?ym(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,cc&&cc.vars.overwrite!==!0)._first||ym(this),this.parent&&o!==this.timeline.totalDuration()&&Oh(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?xo(i):a,c=this._ptLookup,u=this._pt,d,p,m,g,y,v,_;if((!s||s==="all")&&aW(a,l))return s==="all"&&(this._pt=0),ym(this);for(d=this._op=this._op||[],s!=="all"&&(oi(s)&&(y={},vs(s,function(S){return y[S]=1}),s=y),s=PW(a,s)),_=a.length;_--;)if(~l.indexOf(a[_])){p=c[_],s==="all"?(d[_]=s,g=p,m={}):(m=d[_]=d[_]||{},g=s);for(y in g)v=p&&p[y],v&&((!("kill"in v.d)||v.d.kill(y)===!0)&&vS(this,v,"_pt"),delete p[y]),m!=="all"&&(m[y]=1)}return this._initted&&!this._pt&&u&&ym(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Fm(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Fm(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return ir.killTweensOf(i,s,o)},e}(Tg);To(Ir.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});vs("staggerTo,staggerFrom,staggerFromTo",function(n){Ir[n]=function(){var e=new Ji,t=NM.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var Bb=function(e,t,r){return e[t]=r},F3=function(e,t,r){return e[t](r)},DW=function(e,t,r,i){return e[t](i.fp,r)},LW=function(e,t,r){return e.setAttribute(t,r)},Db=function(e,t){return _r(e[t])?F3:Eb(e[t])&&e.setAttribute?LW:Bb},U3=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},NW=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},z3=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},Lb=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},OW=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},kW=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?vS(this,t,"_pt"):t.dep||(r=1),t=i;return!r},FW=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},H3=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},ys=function(){function n(t,r,i,s,o,a,l,c,u){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||U3,this.d=l||this,this.set=c||Bb,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=FW,this.m=r,this.mt=s,this.tween=i},n}();vs(bb+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Cb[n]=1});js.TweenMax=js.TweenLite=Ir;js.TimelineLite=js.TimelineMax=Ji;ir=new Ji({sortChildren:!1,defaults:Lh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Vs.stringFilter=I3;var Qu=[],Cy={},UW=[],RD=0,zW=0,iE=function(e){return(Cy[e]||UW).map(function(t){return t()})},UM=function(){var e=Date.now(),t=[];e-RD>2&&(iE("matchMediaInit"),Qu.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,c;for(a in i)o=pa.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(r.revert(),l&&t.push(r))}),iE("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),RD=e,iE("matchMedia"))},G3=function(){function n(t,r){this.selector=r&&OM(r),this.data=[],this._r=[],this.isReverted=!1,this.id=zW++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){_r(r)&&(s=i,i=r,r=_r);var o=this,a=function(){var c=Qn,u=o.selector,d;return c&&c!==o&&c.data.push(o),s&&(o.selector=OM(s)),Qn=o,d=i.apply(o,arguments),_r(d)&&o._r.push(d),Qn=c,o.selector=u,o.isReverted=!1,d};return o.last=a,r===_r?a(o,function(l){return o.add(null,l)}):r?o[r]=a:a},e.ignore=function(r){var i=Qn;Qn=null,r(this),Qn=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Ir&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(r)}),l=s.data.length;l--;)c=s.data[l],c instanceof Ji?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Ir)&&c.revert&&c.revert(r);s._r.forEach(function(u){return u(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=Qu.length;o--;)Qu[o].id===this.id&&Qu.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),HW=function(){function n(t){this.contexts=[],this.scope=t,Qn&&Qn.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){Na(r)||(r={matches:r});var o=new G3(0,s||this.scope),a=o.conditions={},l,c,u;Qn&&!o.selector&&(o.selector=Qn.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(c in r)c==="all"?u=1:(l=pa.matchMedia(r[c]),l&&(Qu.indexOf(o)<0&&Qu.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(UM):l.addEventListener("change",UM)));return u&&i(o,function(d){return o.add(null,d)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),Ax={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return C3(i)})},timeline:function(e){return new Ji(e)},getTweensOf:function(e,t){return ir.getTweensOf(e,t)},getProperty:function(e,t,r,i){oi(e)&&(e=xo(e)[0]);var s=Ku(e||{}).get,o=r?p3:h3;return r==="native"&&(r=""),e&&(t?o((Ds[t]&&Ds[t].get||s)(e,t,r,i)):function(a,l,c){return o((Ds[a]&&Ds[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,r){if(e=xo(e),e.length>1){var i=e.map(function(u){return Ss.quickSetter(u,t,r)}),s=i.length;return function(u){for(var d=s;d--;)i[d](u)}}e=e[0]||{};var o=Ds[t],a=Ku(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var d=new o;eh._pt=0,d.init(e,r?u+r:u,eh,0,[e]),d.render(1,d),eh._pt&&Lb(1,eh)}:a.set(e,l);return o?c:function(u){return c(e,l,r?u+r:u,a,1)}},quickTo:function(e,t,r){var i,s=Ss.to(e,yf((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return ir.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=$u(e.ease,Lh.ease)),wD(Lh,e||{})},config:function(e){return wD(Vs,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!Ds[a]&&!js[a]&&Ag(t+" effect requires "+a+" plugin.")}),eE[t]=function(a,l,c){return r(xo(a),To(l||{},s),c)},o&&(Ji.prototype[t]=function(a,l,c){return this.add(eE[t](a,Na(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){cn[e]=$u(t)},parseEase:function(e,t){return arguments.length?$u(e,t):cn},getById:function(e){return ir.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new Ji(e),i,s;for(r.smoothChildTiming=_s(e.smoothChildTiming),ir.remove(r),r._dp=0,r._time=r._tTime=ir._time,i=ir._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Ir&&i.vars.onComplete===i._targets[0]))&&ya(r,i,i._start-i._delay),i=s;return ya(ir,r,0),r},context:function(e,t){return e?new G3(e,t):Qn},matchMedia:function(e){return new HW(e)},matchMediaRefresh:function(){return Qu.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||UM()},addEventListener:function(e,t){var r=Cy[e]||(Cy[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Cy[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:yW,wrapYoyo:xW,distribute:S3,random:E3,snap:A3,normalize:vW,getUnit:bi,clamp:pW,splitColor:b3,toArray:xo,selector:OM,mapRange:M3,pipe:gW,unitize:_W,interpolate:SW,shuffle:x3},install:l3,effects:eE,ticker:Ns,updateRoot:Ji.updateRoot,plugins:Ds,globalTimeline:ir,core:{PropTween:ys,globals:c3,Tween:Ir,Timeline:Ji,Animation:Tg,getCache:Ku,_removeLinkedListItem:vS,reverting:function(){return Ri},context:function(e){return e&&Qn&&(Qn.data.push(e),e._ctx=Qn),Qn},suppressOverwrites:function(e){return Ab=e}}};vs("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Ax[n]=Ir[n]});Ns.add(Ji.updateRoot);eh=Ax.to({},{duration:0});var GW=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},VW=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=GW(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},sE=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,c;if(oi(s)&&(l={},vs(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}VW(a,s)}}}},Ss=Ax.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Ri?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},sE("roundProps",kM),sE("modifiers"),sE("snap",A3))||Ax;Ir.version=Ji.version=Ss.version="3.12.5";a3=1;wb()&&kh();cn.Power0;cn.Power1;cn.Power2;cn.Power3;cn.Power4;cn.Linear;cn.Quad;cn.Cubic;cn.Quart;cn.Quint;cn.Strong;cn.Elastic;cn.Back;cn.SteppedEase;cn.Bounce;cn.Sine;cn.Expo;cn.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ID,uc,_h,Nb,Nu,PD,Ob,WW=function(){return typeof window<"u"},wl={},wu=180/Math.PI,vh=Math.PI/180,cd=Math.atan2,BD=1e8,kb=/([A-Z])/g,XW=/(left|right|width|margin|padding|x)/i,jW=/[\s,\(]\S/,Sa={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},zM=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},JW=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},YW=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},KW=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},V3=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},W3=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},qW=function(e,t,r){return e.style[t]=r},$W=function(e,t,r){return e.style.setProperty(t,r)},QW=function(e,t,r){return e._gsap[t]=r},ZW=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},eX=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},tX=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},sr="transform",xs=sr+"Origin",nX=function n(e,t){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in wl&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Sa[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=il(i,a)}):this.tfm[e]=o.x?o[e]:il(i,e),e===xs&&(this.tfm.zOrigin=o.zOrigin);else return Sa.transform.split(",").forEach(function(a){return n.call(r,a,t)});if(this.props.indexOf(sr)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(xs,t,"")),e=sr}(s||t)&&this.props.push(e,t,s[e])},X3=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},rX=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(kb,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Ob(),(!s||!s.isStart)&&!r[sr]&&(X3(r),i.zOrigin&&r[xs]&&(r[xs]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},j3=function(e,t){var r={target:e,props:[],revert:rX,save:nX};return e._gsap||Ss.core.getCache(e),t&&t.split(",").forEach(function(i){return r.save(i)}),r},J3,HM=function(e,t){var r=uc.createElementNS?uc.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):uc.createElement(e);return r&&r.style?r:uc.createElement(e)},ba=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(kb,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,Fh(t)||t,1)||""},DD="O,Moz,ms,Ms,Webkit".split(","),Fh=function(e,t,r){var i=t||Nu,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(DD[o]+e in s););return o<0?null:(o===3?"ms":o>=0?DD[o]:"")+e},GM=function(){WW()&&window.document&&(ID=window,uc=ID.document,_h=uc.documentElement,Nu=HM("div")||{style:{}},HM("div"),sr=Fh(sr),xs=sr+"Origin",Nu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",J3=!!Fh("perspective"),Ob=Ss.core.reverting,Nb=1)},oE=function n(e){var t=HM("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(_h.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),_h.removeChild(t),this.style.cssText=s,o},LD=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},Y3=function(e){var t;try{t=e.getBBox()}catch{t=oE.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===oE||(t=oE.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+LD(e,["x","cx","x1"])||0,y:+LD(e,["y","cy","y1"])||0,width:0,height:0}:t},K3=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Y3(e))},xf=function(e,t){if(t){var r=e.style,i;t in wl&&t!==xs&&(t=sr),r.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(i==="--"?t:t.replace(kb,"-$1").toLowerCase())):r.removeAttribute(t)}},fc=function(e,t,r,i,s,o){var a=new ys(e._pt,t,r,0,1,o?W3:V3);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},ND={deg:1,rad:1,turn:1},iX={grid:1,flex:1},Dc=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Nu.style,l=XW.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),d=100,p=i==="px",m=i==="%",g,y,v,_;if(i===o||!s||ND[i]||ND[o])return s;if(o!=="px"&&!p&&(s=n(e,t,r,"px")),_=e.getCTM&&K3(e),(m||o==="%")&&(wl[t]||~t.indexOf("adius")))return g=_?e.getBBox()[l?"width":"height"]:e[u],Sr(m?s/g*d:s/100*g);if(a[l?"width":"height"]=d+(p?o:i),y=~t.indexOf("adius")||i==="em"&&e.appendChild&&!c?e:e.parentNode,_&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===uc||!y.appendChild)&&(y=uc.body),v=y._gsap,v&&m&&v.width&&l&&v.time===Ns.time&&!v.uncache)return Sr(s/v.width*d);if(m&&(t==="height"||t==="width")){var S=e.style[t];e.style[t]=d+i,g=e[u],S?e.style[t]=S:xf(e,t)}else(m||o==="%")&&!iX[ba(y,"display")]&&(a.position=ba(e,"position")),y===e&&(a.position="static"),y.appendChild(Nu),g=Nu[u],y.removeChild(Nu),a.position="absolute";return l&&m&&(v=Ku(y),v.time=Ns.time,v.width=y[u]),Sr(p?g*s/d:g&&s?d/g*s:0)},il=function(e,t,r,i){var s;return Nb||GM(),t in Sa&&t!=="transform"&&(t=Sa[t],~t.indexOf(",")&&(t=t.split(",")[0])),wl[t]&&t!=="transform"?(s=bg(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:wx(ba(e,xs))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Ex[t]&&Ex[t](e,t,r)||ba(e,t)||f3(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Dc(e,t,s,r)+r:s},sX=function(e,t,r,i){if(!r||r==="none"){var s=Fh(t,e,1),o=s&&ba(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=ba(e,"borderTopColor"))}var a=new ys(this._pt,e.style,t,0,1,z3),l=0,c=0,u,d,p,m,g,y,v,_,S,A,w,I;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(y=e.style[t],e.style[t]=i,i=ba(e,t)||i,y?e.style[t]=y:xf(e,t)),u=[r,i],I3(u),r=u[0],i=u[1],p=r.match(Zd)||[],I=i.match(Zd)||[],I.length){for(;d=Zd.exec(i);)v=d[0],S=i.substring(l,d.index),g?g=(g+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(g=1),v!==(y=p[c++]||"")&&(m=parseFloat(y)||0,w=y.substr((m+"").length),v.charAt(1)==="="&&(v=gh(m,v)+w),_=parseFloat(v),A=v.substr((_+"").length),l=Zd.lastIndex-A.length,A||(A=A||Vs.units[t]||w,l===i.length&&(i+=A,a.e+=A)),w!==A&&(m=Dc(e,t,y,A)||0),a._pt={_next:a._pt,p:S||c===1?S:",",s:m,c:_-m,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?W3:V3;return s3.test(i)&&(a.e=0),this._pt=a,a},OD={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},oX=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=OD[r]||r,t[1]=OD[i]||i,t.join(" ")},aX=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,c;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],wl[a]&&(l=1,a=a==="transformOrigin"?xs:sr),xf(r,a);l&&(xf(r,sr),o&&(o.svg&&r.removeAttribute("transform"),bg(r,1),o.uncache=1,X3(i)))}},Ex={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new ys(e._pt,t,r,0,0,aX);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},Cg=[1,0,0,1,0,0],q3={},$3=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},kD=function(e){var t=ba(e,sr);return $3(t)?Cg:t.substr(7).match(i3).map(Sr)},Fb=function(e,t){var r=e._gsap||Ku(e),i=e.style,s=kD(e),o,a,l,c;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Cg:s):(s===Cg&&!e.offsetParent&&e!==_h&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,_h.appendChild(e)),s=kD(e),l?i.display=l:xf(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):_h.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},VM=function(e,t,r,i,s,o){var a=e._gsap,l=s||Fb(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,p=a.yOffset||0,m=l[0],g=l[1],y=l[2],v=l[3],_=l[4],S=l[5],A=t.split(" "),w=parseFloat(A[0])||0,I=parseFloat(A[1])||0,T,R,P,b;r?l!==Cg&&(R=m*v-g*y)&&(P=w*(v/R)+I*(-y/R)+(y*S-v*_)/R,b=w*(-g/R)+I*(m/R)-(m*S-g*_)/R,w=P,I=b):(T=Y3(e),w=T.x+(~A[0].indexOf("%")?w/100*T.width:w),I=T.y+(~(A[1]||A[0]).indexOf("%")?I/100*T.height:I)),i||i!==!1&&a.smooth?(_=w-c,S=I-u,a.xOffset=d+(_*m+S*y)-_,a.yOffset=p+(_*g+S*v)-S):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=I,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[xs]="0px 0px",o&&(fc(o,a,"xOrigin",c,w),fc(o,a,"yOrigin",u,I),fc(o,a,"xOffset",d,a.xOffset),fc(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",w+" "+I)},bg=function(e,t){var r=e._gsap||new L3(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=ba(e,xs)||"0",u,d,p,m,g,y,v,_,S,A,w,I,T,R,P,b,M,L,H,j,Q,ee,K,te,F,Y,O,ae,me,Oe,ce,Se;return u=d=p=y=v=_=S=A=w=0,m=g=1,r.svg=!!(e.getCTM&&K3(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[sr]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[sr]!=="none"?l[sr]:"")),i.scale=i.rotate=i.translate="none"),R=Fb(e,r.svg),r.svg&&(r.uncache?(F=e.getBBox(),c=r.xOrigin-F.x+"px "+(r.yOrigin-F.y)+"px",te=""):te=!t&&e.getAttribute("data-svg-origin"),VM(e,te||c,!!te||r.originIsAbsolute,r.smooth!==!1,R)),I=r.xOrigin||0,T=r.yOrigin||0,R!==Cg&&(L=R[0],H=R[1],j=R[2],Q=R[3],u=ee=R[4],d=K=R[5],R.length===6?(m=Math.sqrt(L*L+H*H),g=Math.sqrt(Q*Q+j*j),y=L||H?cd(H,L)*wu:0,S=j||Q?cd(j,Q)*wu+y:0,S&&(g*=Math.abs(Math.cos(S*vh))),r.svg&&(u-=I-(I*L+T*j),d-=T-(I*H+T*Q))):(Se=R[6],Oe=R[7],O=R[8],ae=R[9],me=R[10],ce=R[11],u=R[12],d=R[13],p=R[14],P=cd(Se,me),v=P*wu,P&&(b=Math.cos(-P),M=Math.sin(-P),te=ee*b+O*M,F=K*b+ae*M,Y=Se*b+me*M,O=ee*-M+O*b,ae=K*-M+ae*b,me=Se*-M+me*b,ce=Oe*-M+ce*b,ee=te,K=F,Se=Y),P=cd(-j,me),_=P*wu,P&&(b=Math.cos(-P),M=Math.sin(-P),te=L*b-O*M,F=H*b-ae*M,Y=j*b-me*M,ce=Q*M+ce*b,L=te,H=F,j=Y),P=cd(H,L),y=P*wu,P&&(b=Math.cos(P),M=Math.sin(P),te=L*b+H*M,F=ee*b+K*M,H=H*b-L*M,K=K*b-ee*M,L=te,ee=F),v&&Math.abs(v)+Math.abs(y)>359.9&&(v=y=0,_=180-_),m=Sr(Math.sqrt(L*L+H*H+j*j)),g=Sr(Math.sqrt(K*K+Se*Se)),P=cd(ee,K),S=Math.abs(P)>2e-4?P*wu:0,w=ce?1/(ce<0?-ce:ce):0),r.svg&&(te=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!$3(ba(e,sr)),te&&e.setAttribute("transform",te))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(m*=-1,S+=y<=0?180:-180,y+=y<=0?180:-180):(g*=-1,S+=S<=0?180:-180)),t=t||r.uncache,r.x=u-((r.xPercent=u&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=d-((r.yPercent=d&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=p+o,r.scaleX=Sr(m),r.scaleY=Sr(g),r.rotation=Sr(y)+a,r.rotationX=Sr(v)+a,r.rotationY=Sr(_)+a,r.skewX=S+a,r.skewY=A+a,r.transformPerspective=w+o,(r.zOrigin=parseFloat(c.split(" ")[2])||!t&&r.zOrigin||0)&&(i[xs]=wx(c)),r.xOffset=r.yOffset=0,r.force3D=Vs.force3D,r.renderTransform=r.svg?cX:J3?Q3:lX,r.uncache=0,r},wx=function(e){return(e=e.split(" "))[0]+" "+e[1]},aE=function(e,t,r){var i=bi(t);return Sr(parseFloat(t)+parseFloat(Dc(e,"x",r+"px",i)))+i},lX=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Q3(e,t)},au="0deg",Jp="0px",lu=") ",Q3=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,c=r.rotation,u=r.rotationY,d=r.rotationX,p=r.skewX,m=r.skewY,g=r.scaleX,y=r.scaleY,v=r.transformPerspective,_=r.force3D,S=r.target,A=r.zOrigin,w="",I=_==="auto"&&e&&e!==1||_===!0;if(A&&(d!==au||u!==au)){var T=parseFloat(u)*vh,R=Math.sin(T),P=Math.cos(T),b;T=parseFloat(d)*vh,b=Math.cos(T),o=aE(S,o,R*b*-A),a=aE(S,a,-Math.sin(T)*-A),l=aE(S,l,P*b*-A+A)}v!==Jp&&(w+="perspective("+v+lu),(i||s)&&(w+="translate("+i+"%, "+s+"%) "),(I||o!==Jp||a!==Jp||l!==Jp)&&(w+=l!==Jp||I?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+lu),c!==au&&(w+="rotate("+c+lu),u!==au&&(w+="rotateY("+u+lu),d!==au&&(w+="rotateX("+d+lu),(p!==au||m!==au)&&(w+="skew("+p+", "+m+lu),(g!==1||y!==1)&&(w+="scale("+g+", "+y+lu),S.style[sr]=w||"translate(0, 0)"},cX=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,c=r.skewX,u=r.skewY,d=r.scaleX,p=r.scaleY,m=r.target,g=r.xOrigin,y=r.yOrigin,v=r.xOffset,_=r.yOffset,S=r.forceCSS,A=parseFloat(o),w=parseFloat(a),I,T,R,P,b;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=vh,c*=vh,I=Math.cos(l)*d,T=Math.sin(l)*d,R=Math.sin(l-c)*-p,P=Math.cos(l-c)*p,c&&(u*=vh,b=Math.tan(c-u),b=Math.sqrt(1+b*b),R*=b,P*=b,u&&(b=Math.tan(u),b=Math.sqrt(1+b*b),I*=b,T*=b)),I=Sr(I),T=Sr(T),R=Sr(R),P=Sr(P)):(I=d,P=p,T=R=0),(A&&!~(o+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(A=Dc(m,"x",o,"px"),w=Dc(m,"y",a,"px")),(g||y||v||_)&&(A=Sr(A+g-(g*I+y*R)+v),w=Sr(w+y-(g*T+y*P)+_)),(i||s)&&(b=m.getBBox(),A=Sr(A+i/100*b.width),w=Sr(w+s/100*b.height)),b="matrix("+I+","+T+","+R+","+P+","+A+","+w+")",m.setAttribute("transform",b),S&&(m.style[sr]=b)},uX=function(e,t,r,i,s){var o=360,a=oi(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?wu:1),c=l-i,u=i+c+"deg",d,p;return a&&(d=s.split("_")[1],d==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),d==="cw"&&c<0?c=(c+o*BD)%o-~~(c/o)*o:d==="ccw"&&c>0&&(c=(c-o*BD)%o-~~(c/o)*o)),e._pt=p=new ys(e._pt,t,r,i,c,JW),p.e=u,p.u="deg",e._props.push(r),p},FD=function(e,t){for(var r in t)e[r]=t[r];return e},fX=function(e,t,r){var i=FD({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,c,u,d,p,m,g;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[sr]=t,a=bg(r,1),xf(r,sr),r.setAttribute("transform",c)):(c=getComputedStyle(r)[sr],o[sr]=t,a=bg(r,1),o[sr]=c);for(l in wl)c=i[l],u=a[l],c!==u&&s.indexOf(l)<0&&(m=bi(c),g=bi(u),d=m!==g?Dc(r,l,c,g):parseFloat(c),p=parseFloat(u),e._pt=new ys(e._pt,a,l,d,p-d,zM),e._pt.u=g||0,e._props.push(l));FD(a,i)};vs("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});Ex[e>1?"border"+n:n]=function(a,l,c,u,d){var p,m;if(arguments.length<4)return p=o.map(function(g){return il(a,g,c)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(u+"").split(" "),m={},o.forEach(function(g,y){return m[g]=p[y]=p[y]||p[(y-1)/2|0]}),a.init(l,m,d)}});var Z3={name:"css",register:GM,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,c,u,d,p,m,g,y,v,_,S,A,w,I,T,R,P;Nb||GM(),this.styles=this.styles||j3(e),P=this.styles.props,this.tween=r;for(y in t)if(y!=="autoRound"&&(u=t[y],!(Ds[y]&&N3(y,t,r,i,e,s)))){if(m=typeof u,g=Ex[y],m==="function"&&(u=u.call(r,i,e,s),m=typeof u),m==="string"&&~u.indexOf("random(")&&(u=wg(u)),g)g(this,e,y,u,r)&&(R=1);else if(y.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(y)+"").trim(),u+="",wc.lastIndex=0,wc.test(c)||(v=bi(c),_=bi(u)),_?v!==_&&(c=Dc(e,y,c,_)+_):v&&(u+=v),this.add(a,"setProperty",c,u,i,s,0,0,y),o.push(y),P.push(y,0,a[y]);else if(m!=="undefined"){if(l&&y in l?(c=typeof l[y]=="function"?l[y].call(r,i,e,s):l[y],oi(c)&&~c.indexOf("random(")&&(c=wg(c)),bi(c+"")||c==="auto"||(c+=Vs.units[y]||bi(il(e,y))||""),(c+"").charAt(1)==="="&&(c=il(e,y))):c=il(e,y),p=parseFloat(c),S=m==="string"&&u.charAt(1)==="="&&u.substr(0,2),S&&(u=u.substr(2)),d=parseFloat(u),y in Sa&&(y==="autoAlpha"&&(p===1&&il(e,"visibility")==="hidden"&&d&&(p=0),P.push("visibility",0,a.visibility),fc(this,a,"visibility",p?"inherit":"hidden",d?"inherit":"hidden",!d)),y!=="scale"&&y!=="transform"&&(y=Sa[y],~y.indexOf(",")&&(y=y.split(",")[0]))),A=y in wl,A){if(this.styles.save(y),w||(I=e._gsap,I.renderTransform&&!t.parseTransform||bg(e,t.parseTransform),T=t.smoothOrigin!==!1&&I.smooth,w=this._pt=new ys(this._pt,a,sr,0,1,I.renderTransform,I,0,-1),w.dep=1),y==="scale")this._pt=new ys(this._pt,I,"scaleY",I.scaleY,(S?gh(I.scaleY,S+d):d)-I.scaleY||0,zM),this._pt.u=0,o.push("scaleY",y),y+="X";else if(y==="transformOrigin"){P.push(xs,0,a[xs]),u=oX(u),I.svg?VM(e,u,0,T,0,this):(_=parseFloat(u.split(" ")[2])||0,_!==I.zOrigin&&fc(this,I,"zOrigin",I.zOrigin,_),fc(this,a,y,wx(c),wx(u)));continue}else if(y==="svgOrigin"){VM(e,u,1,T,0,this);continue}else if(y in q3){uX(this,I,y,p,S?gh(p,S+u):u);continue}else if(y==="smoothOrigin"){fc(this,I,"smooth",I.smooth,u);continue}else if(y==="force3D"){I[y]=u;continue}else if(y==="transform"){fX(this,u,e);continue}}else y in a||(y=Fh(y)||y);if(A||(d||d===0)&&(p||p===0)&&!jW.test(u)&&y in a)v=(c+"").substr((p+"").length),d||(d=0),_=bi(u)||(y in Vs.units?Vs.units[y]:v),v!==_&&(p=Dc(e,y,c,_)),this._pt=new ys(this._pt,A?I:a,y,p,(S?gh(p,S+d):d)-p,!A&&(_==="px"||y==="zIndex")&&t.autoRound!==!1?KW:zM),this._pt.u=_||0,v!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=YW);else if(y in a)sX.call(this,e,y,c,S?S+u:u);else if(y in e)this.add(e,y,c||e[y],S?S+u:u,i,s);else if(y!=="parseTransform"){Tb(y,u);continue}A||(y in a?P.push(y,0,a[y]):P.push(y,1,c||e[y])),o.push(y)}}R&&H3(this)},render:function(e,t){if(t.tween._time||!Ob())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:il,aliases:Sa,getSetter:function(e,t,r){var i=Sa[t];return i&&i.indexOf(",")<0&&(t=i),t in wl&&t!==xs&&(e._gsap.x||il(e,"x"))?r&&PD===r?t==="scale"?ZW:QW:(PD=r||{})&&(t==="scale"?eX:tX):e.style&&!Eb(e.style[t])?qW:~t.indexOf("-")?$W:Db(e,t)},core:{_removeProperty:xf,_getMatrix:Fb}};Ss.utils.checkPrefix=Fh;Ss.core.getStyleSaver=j3;(function(n,e,t,r){var i=vs(n+","+e+","+t,function(s){wl[s]=1});vs(e,function(s){Vs.units[s]="deg",q3[s]=1}),Sa[i[13]]=n+","+e,vs(r,function(s){var o=s.split(":");Sa[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");vs("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Vs.units[n]="px"});Ss.registerPlugin(Z3);var xr=Ss.registerPlugin(Z3)||Ss;xr.core.Tween;/*!
 * @gsap/react 2.1.1
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let UD=typeof window<"u"?ie.useLayoutEffect:ie.useEffect,zD=n=>n&&!Array.isArray(n)&&typeof n=="object",G0=[],dX={},eU=xr;const Jc=(n,e=G0)=>{let t=dX;zD(n)?(t=n,n=null,e="dependencies"in t?t.dependencies:G0):zD(e)&&(t=e,e="dependencies"in t?t.dependencies:G0),n&&typeof n!="function"&&console.warn("First parameter must be a function or config object");const{scope:r,revertOnUpdate:i}=t,s=ie.useRef(!1),o=ie.useRef(eU.context(()=>{},r)),a=ie.useRef(c=>o.current.add(null,c)),l=e&&e.length&&!i;return UD(()=>{if(n&&o.current.add(n,r),!l||!s.current)return()=>o.current.revert()},e),l&&UD(()=>(s.current=!0,()=>o.current.revert()),G0),{context:o.current,contextSafe:a.current}};Jc.register=n=>{eU=n};Jc.headless=!0;const hX=()=>{const[n,e]=ie.useState(window.innerWidth<760?xD:yD),t=()=>{window.innerWidth<760?e(xD):e(yD)};return ie.useEffect(()=>(window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}),[]),Jc(()=>{xr.to("#hero",{opacity:1,delay:2}),xr.to("#cta",{opacity:1,delay:2,y:-50})},[]),se.jsxs("section",{className:"w-full nav-height bg-black relative",children:[se.jsxs("div",{className:"h-5/6 w-full flex-center flex-col",children:[se.jsx("p",{id:"hero",className:"hero-title",children:"iPhone 15 pro"}),se.jsx("div",{className:"md:w-10/12 w-9/12",children:se.jsx("video",{className:"pointer-events-none",autoPlay:!0,muted:!0,playsInline:!0,children:se.jsx("source",{src:n,type:"video/mp4"})},n)})]}),se.jsxs("div",{id:"cta",className:"flex flex-col items-center opacity-0 translate-y-20",children:[se.jsx("a",{href:"#highlights",className:"btn",children:"Buy"}),se.jsx("p",{className:"font-normal text-xl",children:"From $199/month or $999"})]})]})},pX=()=>{const n=ie.useRef([]),e=ie.useRef([]),t=ie.useRef([]),[r,i]=ie.useState({isEnd:!1,startPlay:!1,videoId:0,isLastVideo:!1,isPlaying:!1}),[s,o]=ie.useState([]),{isEnd:a,startPlay:l,videoId:c,isLastVideo:u,isPlaying:d}=r;Jc(()=>{xr.to("#slider",{transform:`translateX(${-100*c}%)`,duration:2,ease:"power2.inOut"}),xr.to("#video",{scrollTrigger:{trigger:"#video",toggleActions:"restart none none none"},onComplete:()=>{i(g=>({...g,startPlay:!0,isPlaying:!0}))}})},[a,c]),ie.useEffect(()=>{s.length>3&&(d?l&&n.current[c].play():n.current[c].pause())},[l,c,d,s]);const p=(g,y)=>o(v=>[...v,y]);ie.useEffect(()=>{let g=0,y=e.current;if(y[c]){let v=xr.to(y[c],{onUpdate:()=>{const S=Math.ceil(v.progress()*100);S!=g&&(g=S,xr.to(t.current[c],{width:window.innerWidth<760||window.innerWidth<1200?"10vw":"4vw"}),xr.to(y[c],{width:`${g}%`,backgroundColor:"white"}))},onComplete:()=>{d&&(xr.to(t.current[c],{width:"12px"}),xr.to(y[c],{backgroundColor:"afafaf"}))}});c===0&&v.restart();const _=()=>{v.progress(n.current[c].currentTime/SD[c].videoDuration)};d?xr.ticker.add(_):xr.ticker.remove(_)}},[c,l]);const m=(g,y)=>{switch(g){case"video-end":i(v=>({...v,isEnd:!0,videoId:y+1}));break;case"video-last":i(v=>({...v,isLastVideo:!0}));break;case"video-reset":i(v=>({...v,isLastVideo:!1,videoId:0}));break;case"play":i(v=>({...v,isPlaying:!v.isPlaying}));break;case"pause":i(v=>({...v,isPlaying:!v.isPlaying}));break;default:return r}};return se.jsxs(se.Fragment,{children:[se.jsx("div",{className:"flex items-center",children:SD.map((g,y)=>se.jsx("div",{id:"slider",className:"sm:pr20 pr-10",children:se.jsxs("div",{className:"video-carousel_container",children:[se.jsx("div",{className:"w-full h-full flex-center rounded-3xl overflow-hidden bg-black",children:se.jsx("video",{id:"video",playsInline:!0,preload:"auto",muted:!0,className:`${g.id===2&&"translate-x-44"} pointer-events-none`,ref:v=>n.current[y]=v,onEnded:()=>{y!==3?m("video-end",y):m("video-last")},onPlay:()=>{i(v=>({...v,isPlaying:!0}))},onLoadedMetadata:v=>p(y,v),children:se.jsx("source",{src:g.video,type:"video/mp4"})})}),se.jsx("div",{className:"absolute top-12 left-[5%] z-10",children:g.textLists.map(v=>se.jsx("p",{className:"md:text-xl text-xl font-medium",children:v},v))})]})},g.id))}),se.jsxs("div",{className:"relative flex-center mt-10",children:[se.jsx("div",{className:"flex-center py-5 px-7 bg-gray-300 backdrop-blur rounded-full",children:n.current.map((g,y)=>se.jsx("span",{ref:v=>t.current[y]=v,className:"mx-2 w-3 h-3 bg-gray-200 rounded-full relative cursor-pointer",children:se.jsx("span",{className:"absolute h-full w-full rounded-full",ref:v=>e.current[y]=v})},y))}),se.jsx("button",{className:"control-btn",children:se.jsx("img",{src:u?F6:d?z6:U6,alt:u?"replay":d?"pause":"play",onClick:u?()=>m("video-reset"):d?()=>m("pause"):()=>m("play")})})]})]})},mX=()=>(Jc(()=>{xr.to("#title",{opacity:1,y:0}),xr.to(".link",{opacity:1,y:0,duration:1,stagger:.25})},[]),se.jsx("section",{id:"highlights",className:"w-screen overflow-hidden h-full common-padding bg-zinc",children:se.jsxs("div",{className:"screen-max-width",children:[se.jsxs("div",{className:"mb-12 w-full md:flex items-end justify-between align-middle",children:[se.jsx("h1",{id:"title",className:"section-heading",children:"Get the highlights."}),se.jsxs("div",{className:"flex flex-wrap items-end gap-5",children:[se.jsxs("p",{className:"link",children:["Watch the film",se.jsx("img",{src:O6,alt:"watch",className:"ml-2"})]}),se.jsxs("p",{className:"link",children:["Watch the event",se.jsx("img",{src:k6,alt:"right",className:"ml-2"})]})]})]}),se.jsx(pX,{})]})}));function Qo(){return Qo=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qo.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const lp="165",Mu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Tu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tU=0,WM=1,nU=2,gX=3,rU=0,SS=1,zm=2,Ho=3,Oa=0,Zi=1,us=2,Ra=0,Zu=1,XM=2,jM=3,JM=4,iU=5,oc=100,sU=101,oU=102,aU=103,lU=104,cU=200,uU=201,fU=202,dU=203,Mx=204,Tx=205,hU=206,pU=207,mU=208,gU=209,_U=210,vU=211,yU=212,xU=213,SU=214,AU=0,EU=1,wU=2,Rg=3,MU=4,TU=5,CU=6,bU=7,a_=0,RU=1,IU=2,Ia=0,PU=1,BU=2,DU=3,Ub=4,LU=5,NU=6,OU=7,YM="attached",kU="detached",Lc=300,ka=301,Nc=302,Uh=303,Ig=304,cp=306,Oc=1e3,Er=1001,zh=1002,Gr=1003,AS=1004,_X=1004,Ou=1005,vX=1005,mn=1006,yh=1007,yX=1007,So=1008,KM=1008,Js=1009,zb=1010,Hb=1011,Pg=1012,ES=1013,kc=1014,ar=1015,ti=1016,Gb=1017,Vb=1018,Sf=1020,FU=35902,UU=1021,zU=1022,Br=1023,HU=1024,GU=1025,ef=1026,Af=1027,wS=1028,Wb=1029,VU=1030,Xb=1031,jb=1033,by=33776,Ry=33777,Iy=33778,Py=33779,qM=35840,$M=35841,QM=35842,ZM=35843,eT=36196,tT=37492,nT=37496,rT=37808,iT=37809,sT=37810,oT=37811,aT=37812,lT=37813,cT=37814,uT=37815,fT=37816,dT=37817,hT=37818,pT=37819,mT=37820,gT=37821,By=36492,_T=36494,vT=36495,WU=36283,yT=36284,xT=36285,ST=36286,XU=2200,jU=2201,JU=2202,Hh=2300,Gh=2301,Dy=2302,ku=2400,Fu=2401,Bg=2402,MS=2500,Jb=2501,YU=0,Yb=1,Cx=2,KU=3200,qU=3201,Yc=0,$U=1,ll="",Ls="srgb",Co="srgb-linear",TS="display-p3",l_="display-p3-linear",Dg="linear",Un="srgb",Lg="rec709",Ng="p3",xX=0,Cu=7680,SX=7681,AX=7682,EX=7683,wX=34055,MX=34056,TX=5386,CX=512,bX=513,RX=514,IX=515,PX=516,BX=517,DX=518,AT=519,QU=512,ZU=513,ez=514,Kb=515,tz=516,nz=517,rz=518,iz=519,Og=35044,LX=35048,NX=35040,OX=35045,kX=35049,FX=35041,UX=35046,zX=35050,HX=35042,GX="100",ET="300 es",Aa=2e3,kg=2001;class Fa{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Ai=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let HD=1234567;const tf=Math.PI/180,Vh=180/Math.PI;function Ws(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ai[n&255]+Ai[n>>8&255]+Ai[n>>16&255]+Ai[n>>24&255]+"-"+Ai[e&255]+Ai[e>>8&255]+"-"+Ai[e>>16&15|64]+Ai[e>>24&255]+"-"+Ai[t&63|128]+Ai[t>>8&255]+"-"+Ai[t>>16&255]+Ai[t>>24&255]+Ai[r&255]+Ai[r>>8&255]+Ai[r>>16&255]+Ai[r>>24&255]).toLowerCase()}function gr(n,e,t){return Math.max(e,Math.min(t,n))}function qb(n,e){return(n%e+e)%e}function VX(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function WX(n,e,t){return n!==e?(t-n)/(e-n):0}function Hm(n,e,t){return(1-t)*n+t*e}function XX(n,e,t,r){return Hm(n,e,1-Math.exp(-t*r))}function jX(n,e=1){return e-Math.abs(qb(n,e*2)-e)}function JX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function YX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function KX(n,e){return n+Math.floor(Math.random()*(e-n+1))}function qX(n,e){return n+Math.random()*(e-n)}function $X(n){return n*(.5-Math.random())}function QX(n){n!==void 0&&(HD=n);let e=HD+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ZX(n){return n*tf}function ej(n){return n*Vh}function tj(n){return(n&n-1)===0&&n!==0}function nj(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function rj(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ij(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*d,l*p,a*c);break;case"YZY":n.set(l*p,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*p,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Yi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Xt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const sz={DEG2RAD:tf,RAD2DEG:Vh,generateUUID:Ws,clamp:gr,euclideanModulo:qb,mapLinear:VX,inverseLerp:WX,lerp:Hm,damp:XX,pingpong:jX,smoothstep:JX,smootherstep:YX,randInt:KX,randFloat:qX,randFloatSpread:$X,seededRandom:QX,degToRad:ZX,radToDeg:ej,isPowerOfTwo:tj,ceilPowerOfTwo:nj,floorPowerOfTwo:rj,setQuaternionFromProperEuler:ij,normalize:Xt,denormalize:Yi};class De{constructor(e=0,t=0){De.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(gr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wt{constructor(e,t,r,i,s,o,a,l,c){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],p=r[2],m=r[5],g=r[8],y=i[0],v=i[3],_=i[6],S=i[1],A=i[4],w=i[7],I=i[2],T=i[5],R=i[8];return s[0]=o*y+a*S+l*I,s[3]=o*v+a*A+l*T,s[6]=o*_+a*w+l*R,s[1]=c*y+u*S+d*I,s[4]=c*v+u*A+d*T,s[7]=c*_+u*w+d*R,s[2]=p*y+m*S+g*I,s[5]=p*v+m*A+g*T,s[8]=p*_+m*w+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,p=a*l-u*s,m=c*s-o*l,g=t*d+r*p+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=d*y,e[1]=(i*c-u*r)*y,e[2]=(a*r-i*o)*y,e[3]=p*y,e[4]=(u*t-i*l)*y,e[5]=(i*s-a*t)*y,e[6]=m*y,e[7]=(r*l-c*t)*y,e[8]=(o*t-r*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(lE.makeScale(e,t)),this}rotate(e){return this.premultiply(lE.makeRotation(-e)),this}translate(e,t){return this.premultiply(lE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const lE=new Wt;function oz(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const sj={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function th(n,e){return new sj[n](e)}function Fg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function az(){const n=Fg("canvas");return n.style.display="block",n}const GD={};function $b(n){n in GD||(GD[n]=!0,console.warn(n))}function oj(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}const VD=new Wt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),WD=new Wt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),V0={[Co]:{transfer:Dg,primaries:Lg,toReference:n=>n,fromReference:n=>n},[Ls]:{transfer:Un,primaries:Lg,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[l_]:{transfer:Dg,primaries:Ng,toReference:n=>n.applyMatrix3(WD),fromReference:n=>n.applyMatrix3(VD)},[TS]:{transfer:Un,primaries:Ng,toReference:n=>n.convertSRGBToLinear().applyMatrix3(WD),fromReference:n=>n.applyMatrix3(VD).convertLinearToSRGB()}},aj=new Set([Co,l_]),Tn={enabled:!0,_workingColorSpace:Co,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!aj.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=V0[e].toReference,i=V0[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return V0[n].primaries},getTransfer:function(n){return n===ll?Dg:V0[n].transfer}};function xh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function cE(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ud;class lz{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ud===void 0&&(ud=Fg("canvas")),ud.width=e.width,ud.height=e.height;const r=ud.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ud}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Fg("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=xh(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(xh(t[r]/255)*255):t[r]=xh(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let lj=0;class Uu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:lj++}),this.uuid=Ws(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(uE(i[o].image)):s.push(uE(i[o]))}else s=uE(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function uE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?lz.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let cj=0;class gn extends Fa{constructor(e=gn.DEFAULT_IMAGE,t=gn.DEFAULT_MAPPING,r=Er,i=Er,s=mn,o=So,a=Br,l=Js,c=gn.DEFAULT_ANISOTROPY,u=ll){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:cj++}),this.uuid=Ws(),this.name="",this.source=new Uu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Lc)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Oc:e.x=e.x-Math.floor(e.x);break;case Er:e.x=e.x<0?0:1;break;case zh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Oc:e.y=e.y-Math.floor(e.y);break;case Er:e.y=e.y<0?0:1;break;case zh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}gn.DEFAULT_IMAGE=null;gn.DEFAULT_MAPPING=Lc;gn.DEFAULT_ANISOTROPY=1;class Rn{constructor(e=0,t=0,r=0,i=1){Rn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],p=l[1],m=l[5],g=l[9],y=l[2],v=l[6],_=l[10];if(Math.abs(u-p)<.01&&Math.abs(d-y)<.01&&Math.abs(g-v)<.01){if(Math.abs(u+p)<.1&&Math.abs(d+y)<.1&&Math.abs(g+v)<.1&&Math.abs(c+m+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(c+1)/2,w=(m+1)/2,I=(_+1)/2,T=(u+p)/4,R=(d+y)/4,P=(g+v)/4;return A>w&&A>I?A<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(A),i=T/r,s=R/r):w>I?w<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),r=T/i,s=P/i):I<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(I),r=R/s,i=P/s),this.set(r,i,s,t),this}let S=Math.sqrt((v-g)*(v-g)+(d-y)*(d-y)+(p-u)*(p-u));return Math.abs(S)<.001&&(S=1),this.x=(v-g)/S,this.y=(d-y)/S,this.z=(p-u)/S,this.w=Math.acos((c+m+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class cz extends Fa{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Rn(0,0,e,t),this.scissorTest=!1,this.viewport=new Rn(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:mn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new gn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Uu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class As extends cz{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class CS extends gn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Gr,this.minFilter=Gr,this.wrapR=Er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class uj extends As{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new CS(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Qb extends gn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Gr,this.minFilter=Gr,this.wrapR=Er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fj extends As{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Qb(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class si{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],g=s[o+2],y=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=g,e[t+3]=y;return}if(d!==y||l!==p||c!==m||u!==g){let v=1-a;const _=l*p+c*m+u*g+d*y,S=_>=0?1:-1,A=1-_*_;if(A>Number.EPSILON){const I=Math.sqrt(A),T=Math.atan2(I,_*S);v=Math.sin(v*T)/I,a=Math.sin(a*T)/I}const w=a*S;if(l=l*v+p*w,c=c*v+m*w,u=u*v+g*w,d=d*v+y*w,v===1-a){const I=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=I,c*=I,u*=I,d*=I}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+u*d+l*m-c*p,e[t+1]=l*g+u*p+c*d-a*m,e[t+2]=c*g+u*m+a*p-l*d,e[t+3]=u*g-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=p*u*d+c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d-p*m*g;break;case"YXZ":this._x=p*u*d+c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d+p*m*g;break;case"ZXY":this._x=p*u*d-c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d-p*m*g;break;case"ZYX":this._x=p*u*d-c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d+p*m*g;break;case"YZX":this._x=p*u*d+c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d-p*m*g;break;case"XZY":this._x=p*u*d-c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class G{constructor(e=0,t=0,r=0){G.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(XD.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(XD.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),d=2*(s*r-o*t);return this.x=t+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return fE.copy(this).projectOnVector(e),this.sub(fE)}reflect(e){return this.sub(fE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(gr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fE=new G,XD=new si;class Pi{constructor(e=new G(1/0,1/0,1/0),t=new G(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Lo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Lo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Lo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Lo):Lo.fromBufferAttribute(s,o),Lo.applyMatrix4(e.matrixWorld),this.expandByPoint(Lo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),W0.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),W0.copy(r.boundingBox)),W0.applyMatrix4(e.matrixWorld),this.union(W0)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Lo),Lo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Yp),X0.subVectors(this.max,Yp),fd.subVectors(e.a,Yp),dd.subVectors(e.b,Yp),hd.subVectors(e.c,Yp),zl.subVectors(dd,fd),Hl.subVectors(hd,dd),cu.subVectors(fd,hd);let t=[0,-zl.z,zl.y,0,-Hl.z,Hl.y,0,-cu.z,cu.y,zl.z,0,-zl.x,Hl.z,0,-Hl.x,cu.z,0,-cu.x,-zl.y,zl.x,0,-Hl.y,Hl.x,0,-cu.y,cu.x,0];return!dE(t,fd,dd,hd,X0)||(t=[1,0,0,0,1,0,0,0,1],!dE(t,fd,dd,hd,X0))?!1:(j0.crossVectors(zl,Hl),t=[j0.x,j0.y,j0.z],dE(t,fd,dd,hd,X0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Lo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Lo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ja[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ja[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ja[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ja[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ja[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ja[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ja[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ja[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ja),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ja=[new G,new G,new G,new G,new G,new G,new G,new G],Lo=new G,W0=new Pi,fd=new G,dd=new G,hd=new G,zl=new G,Hl=new G,cu=new G,Yp=new G,X0=new G,j0=new G,uu=new G;function dE(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){uu.fromArray(n,s);const a=i.x*Math.abs(uu.x)+i.y*Math.abs(uu.y)+i.z*Math.abs(uu.z),l=e.dot(uu),c=t.dot(uu),u=r.dot(uu);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const dj=new Pi,Kp=new G,hE=new G;class di{constructor(e=new G,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):dj.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Kp.subVectors(e,this.center);const t=Kp.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Kp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(hE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Kp.copy(e.center).add(hE)),this.expandByPoint(Kp.copy(e.center).sub(hE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ja=new G,pE=new G,J0=new G,Gl=new G,mE=new G,Y0=new G,gE=new G;class Uf{constructor(e=new G,t=new G(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ja)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ja.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ja.copy(this.origin).addScaledVector(this.direction,t),Ja.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){pE.copy(e).add(t).multiplyScalar(.5),J0.copy(t).sub(e).normalize(),Gl.copy(this.origin).sub(pE);const s=e.distanceTo(t)*.5,o=-this.direction.dot(J0),a=Gl.dot(this.direction),l=-Gl.dot(J0),c=Gl.lengthSq(),u=Math.abs(1-o*o);let d,p,m,g;if(u>0)if(d=o*l-a,p=o*a-l,g=s*u,d>=0)if(p>=-g)if(p<=g){const y=1/u;d*=y,p*=y,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-g?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=g?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(pE).addScaledVector(J0,p),m}intersectSphere(e,t){Ja.subVectors(e.center,this.origin);const r=Ja.dot(this.direction),i=Ja.dot(Ja)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ja)!==null}intersectTriangle(e,t,r,i,s){mE.subVectors(t,e),Y0.subVectors(r,e),gE.crossVectors(mE,Y0);let o=this.direction.dot(gE),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Gl.subVectors(this.origin,e);const l=a*this.direction.dot(Y0.crossVectors(Gl,Y0));if(l<0)return null;const c=a*this.direction.dot(mE.cross(Gl));if(c<0||l+c>o)return null;const u=-a*Gl.dot(gE);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class It{constructor(e,t,r,i,s,o,a,l,c,u,d,p,m,g,y,v){It.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,d,p,m,g,y,v)}set(e,t,r,i,s,o,a,l,c,u,d,p,m,g,y,v){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=p,_[3]=m,_[7]=g,_[11]=y,_[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new It().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/pd.setFromMatrixColumn(e,0).length(),s=1/pd.setFromMatrixColumn(e,1).length(),o=1/pd.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*d,g=a*u,y=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=m+g*c,t[5]=p-y*c,t[9]=-a*l,t[2]=y-p*c,t[6]=g+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*d,g=c*u,y=c*d;t[0]=p+y*a,t[4]=g*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=m*a-g,t[6]=y+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*d,g=c*u,y=c*d;t[0]=p-y*a,t[4]=-o*d,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*u,t[9]=y-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*d,g=a*u,y=a*d;t[0]=l*u,t[4]=g*c-m,t[8]=p*c+y,t[1]=l*d,t[5]=y*c+p,t[9]=m*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,g=a*l,y=a*c;t[0]=l*u,t[4]=y-p*d,t[8]=g*d+m,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*d+g,t[10]=p-y*d}else if(e.order==="XZY"){const p=o*l,m=o*c,g=a*l,y=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=p*d+y,t[5]=o*u,t[9]=m*d-g,t[2]=g*d-m,t[6]=a*u,t[10]=y*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(hj,e,pj)}lookAt(e,t,r){const i=this.elements;return bs.subVectors(e,t),bs.lengthSq()===0&&(bs.z=1),bs.normalize(),Vl.crossVectors(r,bs),Vl.lengthSq()===0&&(Math.abs(r.z)===1?bs.x+=1e-4:bs.z+=1e-4,bs.normalize(),Vl.crossVectors(r,bs)),Vl.normalize(),K0.crossVectors(bs,Vl),i[0]=Vl.x,i[4]=K0.x,i[8]=bs.x,i[1]=Vl.y,i[5]=K0.y,i[9]=bs.y,i[2]=Vl.z,i[6]=K0.z,i[10]=bs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],p=r[9],m=r[13],g=r[2],y=r[6],v=r[10],_=r[14],S=r[3],A=r[7],w=r[11],I=r[15],T=i[0],R=i[4],P=i[8],b=i[12],M=i[1],L=i[5],H=i[9],j=i[13],Q=i[2],ee=i[6],K=i[10],te=i[14],F=i[3],Y=i[7],O=i[11],ae=i[15];return s[0]=o*T+a*M+l*Q+c*F,s[4]=o*R+a*L+l*ee+c*Y,s[8]=o*P+a*H+l*K+c*O,s[12]=o*b+a*j+l*te+c*ae,s[1]=u*T+d*M+p*Q+m*F,s[5]=u*R+d*L+p*ee+m*Y,s[9]=u*P+d*H+p*K+m*O,s[13]=u*b+d*j+p*te+m*ae,s[2]=g*T+y*M+v*Q+_*F,s[6]=g*R+y*L+v*ee+_*Y,s[10]=g*P+y*H+v*K+_*O,s[14]=g*b+y*j+v*te+_*ae,s[3]=S*T+A*M+w*Q+I*F,s[7]=S*R+A*L+w*ee+I*Y,s[11]=S*P+A*H+w*K+I*O,s[15]=S*b+A*j+w*te+I*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],p=e[10],m=e[14],g=e[3],y=e[7],v=e[11],_=e[15];return g*(+s*l*d-i*c*d-s*a*p+r*c*p+i*a*m-r*l*m)+y*(+t*l*m-t*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+v*(+t*c*d-t*a*m-s*o*d+r*o*m+s*a*u-r*c*u)+_*(-i*a*u-t*l*d+t*a*p+i*o*d-r*o*p+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],m=e[11],g=e[12],y=e[13],v=e[14],_=e[15],S=d*v*c-y*p*c+y*l*m-a*v*m-d*l*_+a*p*_,A=g*p*c-u*v*c-g*l*m+o*v*m+u*l*_-o*p*_,w=u*y*c-g*d*c+g*a*m-o*y*m-u*a*_+o*d*_,I=g*d*l-u*y*l-g*a*p+o*y*p+u*a*v-o*d*v,T=t*S+r*A+i*w+s*I;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/T;return e[0]=S*R,e[1]=(y*p*s-d*v*s-y*i*m+r*v*m+d*i*_-r*p*_)*R,e[2]=(a*v*s-y*l*s+y*i*c-r*v*c-a*i*_+r*l*_)*R,e[3]=(d*l*s-a*p*s-d*i*c+r*p*c+a*i*m-r*l*m)*R,e[4]=A*R,e[5]=(u*v*s-g*p*s+g*i*m-t*v*m-u*i*_+t*p*_)*R,e[6]=(g*l*s-o*v*s-g*i*c+t*v*c+o*i*_-t*l*_)*R,e[7]=(o*p*s-u*l*s+u*i*c-t*p*c-o*i*m+t*l*m)*R,e[8]=w*R,e[9]=(g*d*s-u*y*s-g*r*m+t*y*m+u*r*_-t*d*_)*R,e[10]=(o*y*s-g*a*s+g*r*c-t*y*c-o*r*_+t*a*_)*R,e[11]=(u*a*s-o*d*s-u*r*c+t*d*c+o*r*m-t*a*m)*R,e[12]=I*R,e[13]=(u*y*i-g*d*i+g*r*p-t*y*p-u*r*v+t*d*v)*R,e[14]=(g*a*i-o*y*i-g*r*l+t*y*l+o*r*v-t*a*v)*R,e[15]=(o*d*i-u*a*i+u*r*l-t*d*l-o*r*p+t*a*p)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,p=s*c,m=s*u,g=s*d,y=o*u,v=o*d,_=a*d,S=l*c,A=l*u,w=l*d,I=r.x,T=r.y,R=r.z;return i[0]=(1-(y+_))*I,i[1]=(m+w)*I,i[2]=(g-A)*I,i[3]=0,i[4]=(m-w)*T,i[5]=(1-(p+_))*T,i[6]=(v+S)*T,i[7]=0,i[8]=(g+A)*R,i[9]=(v-S)*R,i[10]=(1-(p+y))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=pd.set(i[0],i[1],i[2]).length();const o=pd.set(i[4],i[5],i[6]).length(),a=pd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],No.copy(this);const c=1/s,u=1/o,d=1/a;return No.elements[0]*=c,No.elements[1]*=c,No.elements[2]*=c,No.elements[4]*=u,No.elements[5]*=u,No.elements[6]*=u,No.elements[8]*=d,No.elements[9]*=d,No.elements[10]*=d,t.setFromRotationMatrix(No),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Aa){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),d=(t+e)/(t-e),p=(r+i)/(r-i);let m,g;if(a===Aa)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===kg)m=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Aa){const l=this.elements,c=1/(t-e),u=1/(r-i),d=1/(o-s),p=(t+e)*c,m=(r+i)*u;let g,y;if(a===Aa)g=(o+s)*d,y=-2*d;else if(a===kg)g=s*d,y=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=y,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const pd=new G,No=new It,hj=new G(0,0,0),pj=new G(1,1,1),Vl=new G,K0=new G,bs=new G,jD=new It,JD=new si;class Ys{constructor(e=0,t=0,r=0,i=Ys.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(gr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-gr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(gr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-gr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(gr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-gr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return jD.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jD,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return JD.setFromEuler(this),this.setFromQuaternion(JD,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ys.DEFAULT_ORDER="XYZ";class nf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let mj=0;const YD=new G,md=new si,Ya=new It,q0=new G,qp=new G,gj=new G,_j=new si,KD=new G(1,0,0),qD=new G(0,1,0),$D=new G(0,0,1),QD={type:"added"},vj={type:"removed"},gd={type:"childadded",child:null},_E={type:"childremoved",child:null};class vn extends Fa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mj++}),this.uuid=Ws(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vn.DEFAULT_UP.clone();const e=new G,t=new Ys,r=new si,i=new G(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new It},normalMatrix:{value:new Wt}}),this.matrix=new It,this.matrixWorld=new It,this.matrixAutoUpdate=vn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new nf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return md.setFromAxisAngle(e,t),this.quaternion.multiply(md),this}rotateOnWorldAxis(e,t){return md.setFromAxisAngle(e,t),this.quaternion.premultiply(md),this}rotateX(e){return this.rotateOnAxis(KD,e)}rotateY(e){return this.rotateOnAxis(qD,e)}rotateZ(e){return this.rotateOnAxis($D,e)}translateOnAxis(e,t){return YD.copy(e).applyQuaternion(this.quaternion),this.position.add(YD.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(KD,e)}translateY(e){return this.translateOnAxis(qD,e)}translateZ(e){return this.translateOnAxis($D,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ya.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?q0.copy(e):q0.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),qp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ya.lookAt(qp,q0,this.up):Ya.lookAt(q0,qp,this.up),this.quaternion.setFromRotationMatrix(Ya),i&&(Ya.extractRotation(i.matrixWorld),md.setFromRotationMatrix(Ya),this.quaternion.premultiply(md.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(QD),gd.child=e,this.dispatchEvent(gd),gd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vj),_E.child=e,this.dispatchEvent(_E),_E.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ya.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ya.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ya),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(QD),gd.child=e,this.dispatchEvent(gd),gd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qp,e,gj),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qp,_j,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}vn.DEFAULT_UP=new G(0,1,0);vn.DEFAULT_MATRIX_AUTO_UPDATE=!0;vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Oo=new G,Ka=new G,vE=new G,qa=new G,_d=new G,vd=new G,ZD=new G,yE=new G,xE=new G,SE=new G;class Os{constructor(e=new G,t=new G,r=new G){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Oo.subVectors(e,t),i.cross(Oo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Oo.subVectors(i,t),Ka.subVectors(r,t),vE.subVectors(e,t);const o=Oo.dot(Oo),a=Oo.dot(Ka),l=Oo.dot(vE),c=Ka.dot(Ka),u=Ka.dot(vE),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(c*l-a*u)*p,g=(o*u-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,qa)===null?!1:qa.x>=0&&qa.y>=0&&qa.x+qa.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,qa)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,qa.x),l.addScaledVector(o,qa.y),l.addScaledVector(a,qa.z),l)}static isFrontFacing(e,t,r,i){return Oo.subVectors(r,t),Ka.subVectors(e,t),Oo.cross(Ka).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Oo.subVectors(this.c,this.b),Ka.subVectors(this.a,this.b),Oo.cross(Ka).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Os.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Os.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Os.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Os.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Os.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;_d.subVectors(i,r),vd.subVectors(s,r),yE.subVectors(e,r);const l=_d.dot(yE),c=vd.dot(yE);if(l<=0&&c<=0)return t.copy(r);xE.subVectors(e,i);const u=_d.dot(xE),d=vd.dot(xE);if(u>=0&&d<=u)return t.copy(i);const p=l*d-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(_d,o);SE.subVectors(e,s);const m=_d.dot(SE),g=vd.dot(SE);if(g>=0&&m<=g)return t.copy(s);const y=m*c-l*g;if(y<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(r).addScaledVector(vd,a);const v=u*g-m*d;if(v<=0&&d-u>=0&&m-g>=0)return ZD.subVectors(s,i),a=(d-u)/(d-u+(m-g)),t.copy(i).addScaledVector(ZD,a);const _=1/(v+y+p);return o=y*_,a=p*_,t.copy(r).addScaledVector(_d,o).addScaledVector(vd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const uz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wl={h:0,s:0,l:0},$0={h:0,s:0,l:0};function AE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class et{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ls){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Tn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Tn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Tn.workingColorSpace){if(e=qb(e,1),t=gr(t,0,1),r=gr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=AE(o,s,e+1/3),this.g=AE(o,s,e),this.b=AE(o,s,e-1/3)}return Tn.toWorkingColorSpace(this,i),this}setStyle(e,t=Ls){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ls){const r=uz[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xh(e.r),this.g=xh(e.g),this.b=xh(e.b),this}copyLinearToSRGB(e){return this.r=cE(e.r),this.g=cE(e.g),this.b=cE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ls){return Tn.fromWorkingColorSpace(Ei.copy(this),e),Math.round(gr(Ei.r*255,0,255))*65536+Math.round(gr(Ei.g*255,0,255))*256+Math.round(gr(Ei.b*255,0,255))}getHexString(e=Ls){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Tn.workingColorSpace){Tn.fromWorkingColorSpace(Ei.copy(this),t);const r=Ei.r,i=Ei.g,s=Ei.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Tn.workingColorSpace){return Tn.fromWorkingColorSpace(Ei.copy(this),t),e.r=Ei.r,e.g=Ei.g,e.b=Ei.b,e}getStyle(e=Ls){Tn.fromWorkingColorSpace(Ei.copy(this),e);const t=Ei.r,r=Ei.g,i=Ei.b;return e!==Ls?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Wl),this.setHSL(Wl.h+e,Wl.s+t,Wl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Wl),e.getHSL($0);const r=Hm(Wl.h,$0.h,t),i=Hm(Wl.s,$0.s,t),s=Hm(Wl.l,$0.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ei=new et;et.NAMES=uz;let yj=0;class Dr extends Fa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yj++}),this.uuid=Ws(),this.name="",this.type="Material",this.blending=Zu,this.side=Oa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Mx,this.blendDst=Tx,this.blendEquation=oc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new et(0,0,0),this.blendAlpha=0,this.depthFunc=Rg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Cu,this.stencilZFail=Cu,this.stencilZPass=Cu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Zu&&(r.blending=this.blending),this.side!==Oa&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Mx&&(r.blendSrc=this.blendSrc),this.blendDst!==Tx&&(r.blendDst=this.blendDst),this.blendEquation!==oc&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Rg&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AT&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Cu&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Cu&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Cu&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ds extends Dr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ys,this.combine=a_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const cl=xj();function xj(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function os(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=gr(n,-65504,65504),cl.floatView[0]=n;const e=cl.uint32View[0],t=e>>23&511;return cl.baseTable[t]+((e&8388607)>>cl.shiftTable[t])}function Sm(n){const e=n>>10;return cl.uint32View[0]=cl.mantissaTable[cl.offsetTable[e]+(n&1023)]+cl.exponentTable[e],cl.floatView[0]}const zu={toHalfFloat:os,fromHalfFloat:Sm},br=new G,Q0=new De;class yn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Og,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ar,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return $b("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Q0.fromBufferAttribute(this,t),Q0.applyMatrix3(e),this.setXY(t,Q0.x,Q0.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.applyMatrix3(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.applyMatrix4(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.applyNormalMatrix(e),this.setXYZ(t,br.x,br.y,br.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)br.fromBufferAttribute(this,t),br.transformDirection(e),this.setXYZ(t,br.x,br.y,br.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Yi(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Xt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Yi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Yi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Yi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Yi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),r=Xt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),r=Xt(r,this.array),i=Xt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),r=Xt(r,this.array),i=Xt(i,this.array),s=Xt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Og&&(e.usage=this.usage),e}}class Sj extends yn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class Aj extends yn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class Ej extends yn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class wj extends yn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class Zb extends yn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Mj extends yn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class eR extends yn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Tj extends yn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Sm(this.array[e*this.itemSize]);return this.normalized&&(t=Yi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize]=os(t),this}getY(e){let t=Sm(this.array[e*this.itemSize+1]);return this.normalized&&(t=Yi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+1]=os(t),this}getZ(e){let t=Sm(this.array[e*this.itemSize+2]);return this.normalized&&(t=Yi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+2]=os(t),this}getW(e){let t=Sm(this.array[e*this.itemSize+3]);return this.normalized&&(t=Yi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+3]=os(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),r=Xt(r,this.array)),this.array[e+0]=os(t),this.array[e+1]=os(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),r=Xt(r,this.array),i=Xt(i,this.array)),this.array[e+0]=os(t),this.array[e+1]=os(r),this.array[e+2]=os(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),r=Xt(r,this.array),i=Xt(i,this.array),s=Xt(s,this.array)),this.array[e+0]=os(t),this.array[e+1]=os(r),this.array[e+2]=os(i),this.array[e+3]=os(s),this}}class wt extends yn{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Cj=0;const lo=new It,EE=new vn,yd=new G,Rs=new Pi,$p=new Pi,Yr=new G;class Vt extends Fa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Cj++}),this.uuid=Ws(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(oz(e)?eR:Zb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Wt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return lo.makeRotationFromQuaternion(e),this.applyMatrix4(lo),this}rotateX(e){return lo.makeRotationX(e),this.applyMatrix4(lo),this}rotateY(e){return lo.makeRotationY(e),this.applyMatrix4(lo),this}rotateZ(e){return lo.makeRotationZ(e),this.applyMatrix4(lo),this}translate(e,t,r){return lo.makeTranslation(e,t,r),this.applyMatrix4(lo),this}scale(e,t,r){return lo.makeScale(e,t,r),this.applyMatrix4(lo),this}lookAt(e){return EE.lookAt(e),EE.updateMatrix(),this.applyMatrix4(EE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yd).negate(),this.translate(yd.x,yd.y,yd.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new wt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new G(-1/0,-1/0,-1/0),new G(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Rs.setFromBufferAttribute(s),this.morphTargetsRelative?(Yr.addVectors(this.boundingBox.min,Rs.min),this.boundingBox.expandByPoint(Yr),Yr.addVectors(this.boundingBox.max,Rs.max),this.boundingBox.expandByPoint(Yr)):(this.boundingBox.expandByPoint(Rs.min),this.boundingBox.expandByPoint(Rs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new di);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new G,1/0);return}if(e){const r=this.boundingSphere.center;if(Rs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];$p.setFromBufferAttribute(a),this.morphTargetsRelative?(Yr.addVectors(Rs.min,$p.min),Rs.expandByPoint(Yr),Yr.addVectors(Rs.max,$p.max),Rs.expandByPoint(Yr)):(Rs.expandByPoint($p.min),Rs.expandByPoint($p.max))}Rs.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Yr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Yr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Yr.fromBufferAttribute(a,c),l&&(yd.fromBufferAttribute(e,c),Yr.add(yd)),i=Math.max(i,r.distanceToSquared(Yr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new yn(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let P=0;P<r.count;P++)a[P]=new G,l[P]=new G;const c=new G,u=new G,d=new G,p=new De,m=new De,g=new De,y=new G,v=new G;function _(P,b,M){c.fromBufferAttribute(r,P),u.fromBufferAttribute(r,b),d.fromBufferAttribute(r,M),p.fromBufferAttribute(s,P),m.fromBufferAttribute(s,b),g.fromBufferAttribute(s,M),u.sub(c),d.sub(c),m.sub(p),g.sub(p);const L=1/(m.x*g.y-g.x*m.y);isFinite(L)&&(y.copy(u).multiplyScalar(g.y).addScaledVector(d,-m.y).multiplyScalar(L),v.copy(d).multiplyScalar(m.x).addScaledVector(u,-g.x).multiplyScalar(L),a[P].add(y),a[b].add(y),a[M].add(y),l[P].add(v),l[b].add(v),l[M].add(v))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let P=0,b=S.length;P<b;++P){const M=S[P],L=M.start,H=M.count;for(let j=L,Q=L+H;j<Q;j+=3)_(e.getX(j+0),e.getX(j+1),e.getX(j+2))}const A=new G,w=new G,I=new G,T=new G;function R(P){I.fromBufferAttribute(i,P),T.copy(I);const b=a[P];A.copy(b),A.sub(I.multiplyScalar(I.dot(b))).normalize(),w.crossVectors(T,b);const L=w.dot(l[P])<0?-1:1;o.setXYZW(P,A.x,A.y,A.z,L)}for(let P=0,b=S.length;P<b;++P){const M=S[P],L=M.start,H=M.count;for(let j=L,Q=L+H;j<Q;j+=3)R(e.getX(j+0)),R(e.getX(j+1)),R(e.getX(j+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new yn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new G,s=new G,o=new G,a=new G,l=new G,c=new G,u=new G,d=new G;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),y=e.getX(p+1),v=e.getX(p+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,v),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,v),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Yr.fromBufferAttribute(e,t),Yr.normalize(),e.setXYZ(t,Yr.x,Yr.y,Yr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,p=new c.constructor(l.length*u);let m=0,g=0;for(let y=0,v=l.length;y<v;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*u;for(let _=0;_<u;_++)p[g++]=c[m++]}return new yn(p,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Vt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const p=c[u],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let p=0,m=d.length;p<m;p++)u.push(d[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const eL=new It,fu=new Uf,Z0=new di,tL=new G,xd=new G,Sd=new G,Ad=new G,wE=new G,ev=new G,tv=new De,nv=new De,rv=new De,nL=new G,rL=new G,iL=new G,iv=new G,sv=new G;class er extends vn{constructor(e=new Vt,t=new ds){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){ev.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(wE.fromBufferAttribute(d,e),o?ev.addScaledVector(wE,u):ev.addScaledVector(wE.sub(t),u))}t.add(ev)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Z0.copy(r.boundingSphere),Z0.applyMatrix4(s),fu.copy(e.ray).recast(e.near),!(Z0.containsPoint(fu.origin)===!1&&(fu.intersectSphere(Z0,tL)===null||fu.origin.distanceToSquared(tL)>(e.far-e.near)**2))&&(eL.copy(s).invert(),fu.copy(e.ray).applyMatrix4(eL),!(r.boundingBox!==null&&fu.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,fu)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,y=p.length;g<y;g++){const v=p[g],_=o[v.materialIndex],S=Math.max(v.start,m.start),A=Math.min(a.count,Math.min(v.start+v.count,m.start+m.count));for(let w=S,I=A;w<I;w+=3){const T=a.getX(w),R=a.getX(w+1),P=a.getX(w+2);i=ov(this,_,e,r,c,u,d,T,R,P),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=v.materialIndex,t.push(i))}}else{const g=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let v=g,_=y;v<_;v+=3){const S=a.getX(v),A=a.getX(v+1),w=a.getX(v+2);i=ov(this,o,e,r,c,u,d,S,A,w),i&&(i.faceIndex=Math.floor(v/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,y=p.length;g<y;g++){const v=p[g],_=o[v.materialIndex],S=Math.max(v.start,m.start),A=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));for(let w=S,I=A;w<I;w+=3){const T=w,R=w+1,P=w+2;i=ov(this,_,e,r,c,u,d,T,R,P),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=v.materialIndex,t.push(i))}}else{const g=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let v=g,_=y;v<_;v+=3){const S=v,A=v+1,w=v+2;i=ov(this,o,e,r,c,u,d,S,A,w),i&&(i.faceIndex=Math.floor(v/3),t.push(i))}}}}function bj(n,e,t,r,i,s,o,a){let l;if(e.side===Zi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Oa,a),l===null)return null;sv.copy(a),sv.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(sv);return c<t.near||c>t.far?null:{distance:c,point:sv.clone(),object:n}}function ov(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,xd),n.getVertexPosition(l,Sd),n.getVertexPosition(c,Ad);const u=bj(n,e,t,r,xd,Sd,Ad,iv);if(u){i&&(tv.fromBufferAttribute(i,a),nv.fromBufferAttribute(i,l),rv.fromBufferAttribute(i,c),u.uv=Os.getInterpolation(iv,xd,Sd,Ad,tv,nv,rv,new De)),s&&(tv.fromBufferAttribute(s,a),nv.fromBufferAttribute(s,l),rv.fromBufferAttribute(s,c),u.uv1=Os.getInterpolation(iv,xd,Sd,Ad,tv,nv,rv,new De)),o&&(nL.fromBufferAttribute(o,a),rL.fromBufferAttribute(o,l),iL.fromBufferAttribute(o,c),u.normal=Os.getInterpolation(iv,xd,Sd,Ad,nL,rL,iL,new G),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new G,materialIndex:0};Os.getNormal(xd,Sd,Ad,d.normal),u.face=d}return u}class zf extends Vt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let p=0,m=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new wt(c,3)),this.setAttribute("normal",new wt(u,3)),this.setAttribute("uv",new wt(d,2));function g(y,v,_,S,A,w,I,T,R,P,b){const M=w/R,L=I/P,H=w/2,j=I/2,Q=T/2,ee=R+1,K=P+1;let te=0,F=0;const Y=new G;for(let O=0;O<K;O++){const ae=O*L-j;for(let me=0;me<ee;me++){const Oe=me*M-H;Y[y]=Oe*S,Y[v]=ae*A,Y[_]=Q,c.push(Y.x,Y.y,Y.z),Y[y]=0,Y[v]=0,Y[_]=T>0?1:-1,u.push(Y.x,Y.y,Y.z),d.push(me/R),d.push(1-O/P),te+=1}}for(let O=0;O<P;O++)for(let ae=0;ae<R;ae++){const me=p+ae+ee*O,Oe=p+ae+ee*(O+1),ce=p+(ae+1)+ee*(O+1),Se=p+(ae+1)+ee*O;l.push(me,Oe,Se),l.push(Oe,ce,Se),F+=6}a.addGroup(m,F,b),m+=F,p+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Wh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Hi(n){const e={};for(let t=0;t<n.length;t++){const r=Wh(n[t]);for(const i in r)e[i]=r[i]}return e}function Rj(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function fz(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Tn.workingColorSpace}const dz={clone:Wh,merge:Hi};var Ij=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Pj=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Es extends Dr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Ij,this.fragmentShader=Pj,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wh(e.uniforms),this.uniformsGroups=Rj(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class c_ extends vn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new It,this.projectionMatrix=new It,this.projectionMatrixInverse=new It,this.coordinateSystem=Aa}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Xl=new G,sL=new De,oL=new De;let jn=class extends c_{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Vh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(tf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Vh*2*Math.atan(Math.tan(tf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Xl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Xl.x,Xl.y).multiplyScalar(-e/Xl.z),Xl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Xl.x,Xl.y).multiplyScalar(-e/Xl.z)}getViewSize(e,t){return this.getViewBounds(e,sL,oL),t.subVectors(oL,sL)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(tf*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Ed=-90,wd=1;class hz extends vn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new jn(Ed,wd,e,t);i.layers=this.layers,this.add(i);const s=new jn(Ed,wd,e,t);s.layers=this.layers,this.add(s);const o=new jn(Ed,wd,e,t);o.layers=this.layers,this.add(o);const a=new jn(Ed,wd,e,t);a.layers=this.layers,this.add(a);const l=new jn(Ed,wd,e,t);l.layers=this.layers,this.add(l);const c=new jn(Ed,wd,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Aa)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===kg)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(d,p,m),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class u_ extends gn{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:ka,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tR extends As{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new u_(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:mn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new zf(5,5,5),s=new Es({name:"CubemapFromEquirect",uniforms:Wh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Zi,blending:Ra});s.uniforms.tEquirect.value=t;const o=new er(i,s),a=t.minFilter;return t.minFilter===So&&(t.minFilter=mn),new hz(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const ME=new G,Bj=new G,Dj=new Wt;class sl{constructor(e=new G(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=ME.subVectors(r,t).cross(Bj.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(ME),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Dj.getNormalMatrix(e),i=this.coplanarPoint(ME).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const du=new di,av=new G;class f_{constructor(e=new sl,t=new sl,r=new sl,i=new sl,s=new sl,o=new sl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Aa){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],p=i[7],m=i[8],g=i[9],y=i[10],v=i[11],_=i[12],S=i[13],A=i[14],w=i[15];if(r[0].setComponents(l-s,p-c,v-m,w-_).normalize(),r[1].setComponents(l+s,p+c,v+m,w+_).normalize(),r[2].setComponents(l+o,p+u,v+g,w+S).normalize(),r[3].setComponents(l-o,p-u,v-g,w-S).normalize(),r[4].setComponents(l-a,p-d,v-y,w-A).normalize(),t===Aa)r[5].setComponents(l+a,p+d,v+y,w+A).normalize();else if(t===kg)r[5].setComponents(a,d,y,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),du.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),du.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(du)}intersectsSprite(e){return du.center.set(0,0,0),du.radius=.7071067811865476,du.applyMatrix4(e.matrixWorld),this.intersectsSphere(du)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(av.x=i.normal.x>0?e.max.x:e.min.x,av.y=i.normal.y>0?e.max.y:e.min.y,av.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(av)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function pz(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Lj(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,d=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l._updateRange,p=l.updateRanges;if(n.bindBuffer(c,a),d.count===-1&&p.length===0&&n.bufferSubData(c,0,u),p.length!==0){for(let m=0,g=p.length;m<g;m++){const y=p[m];n.bufferSubData(c,y.start*u.BYTES_PER_ELEMENT,u,y.start,y.count)}l.clearUpdateRanges()}d.count!==-1&&(n.bufferSubData(c,d.offset*u.BYTES_PER_ELEMENT,u,d.offset,d.count),d.count=-1),l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}class Kc extends Vt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,p=t/l,m=[],g=[],y=[],v=[];for(let _=0;_<u;_++){const S=_*p-o;for(let A=0;A<c;A++){const w=A*d-s;g.push(w,-S,0),y.push(0,0,1),v.push(A/a),v.push(1-_/l)}}for(let _=0;_<l;_++)for(let S=0;S<a;S++){const A=S+c*_,w=S+c*(_+1),I=S+1+c*(_+1),T=S+1+c*_;m.push(A,w,T),m.push(w,I,T)}this.setIndex(m),this.setAttribute("position",new wt(g,3)),this.setAttribute("normal",new wt(y,3)),this.setAttribute("uv",new wt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kc(e.width,e.height,e.widthSegments,e.heightSegments)}}var Nj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Oj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Fj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Uj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,zj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Hj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Gj=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Vj=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Wj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Xj=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,jj=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Jj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Yj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Kj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,qj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,$j=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Qj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Zj=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,eJ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,tJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,nJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,rJ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,iJ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,sJ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,oJ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,aJ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,lJ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,cJ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,uJ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,fJ="gl_FragColor = linearToOutputTexel( gl_FragColor );",dJ=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,hJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,pJ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,mJ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,gJ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_J=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,vJ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yJ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,xJ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,SJ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,AJ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,EJ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,wJ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,MJ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,TJ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,CJ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,bJ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,RJ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,IJ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,PJ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,BJ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,DJ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,LJ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,NJ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,OJ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,kJ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,FJ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,UJ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zJ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,HJ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,GJ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,VJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,WJ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,XJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,jJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,JJ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,YJ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,KJ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,qJ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,$J=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,QJ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,ZJ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,e7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,t7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,n7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,r7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,i7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,s7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,o7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,a7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,l7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,c7=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,u7=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,f7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,d7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,h7=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,p7=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,m7=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,g7=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,_7=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,v7=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,y7=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,x7=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,S7=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,A7=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,E7=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,w7=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,M7=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,T7=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,C7=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,b7=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,R7=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,I7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,P7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,B7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,D7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const L7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,N7=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,O7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,k7=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,F7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,U7=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,z7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,H7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,G7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,V7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,W7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,X7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,j7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,J7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Y7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,K7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Z7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eY=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,tY=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,nY=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rY=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iY=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,sY=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oY=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aY=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lY=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,cY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uY=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fY=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,dY=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jt={alphahash_fragment:Nj,alphahash_pars_fragment:Oj,alphamap_fragment:kj,alphamap_pars_fragment:Fj,alphatest_fragment:Uj,alphatest_pars_fragment:zj,aomap_fragment:Hj,aomap_pars_fragment:Gj,batching_pars_vertex:Vj,batching_vertex:Wj,begin_vertex:Xj,beginnormal_vertex:jj,bsdfs:Jj,iridescence_fragment:Yj,bumpmap_pars_fragment:Kj,clipping_planes_fragment:qj,clipping_planes_pars_fragment:$j,clipping_planes_pars_vertex:Qj,clipping_planes_vertex:Zj,color_fragment:eJ,color_pars_fragment:tJ,color_pars_vertex:nJ,color_vertex:rJ,common:iJ,cube_uv_reflection_fragment:sJ,defaultnormal_vertex:oJ,displacementmap_pars_vertex:aJ,displacementmap_vertex:lJ,emissivemap_fragment:cJ,emissivemap_pars_fragment:uJ,colorspace_fragment:fJ,colorspace_pars_fragment:dJ,envmap_fragment:hJ,envmap_common_pars_fragment:pJ,envmap_pars_fragment:mJ,envmap_pars_vertex:gJ,envmap_physical_pars_fragment:CJ,envmap_vertex:_J,fog_vertex:vJ,fog_pars_vertex:yJ,fog_fragment:xJ,fog_pars_fragment:SJ,gradientmap_pars_fragment:AJ,lightmap_pars_fragment:EJ,lights_lambert_fragment:wJ,lights_lambert_pars_fragment:MJ,lights_pars_begin:TJ,lights_toon_fragment:bJ,lights_toon_pars_fragment:RJ,lights_phong_fragment:IJ,lights_phong_pars_fragment:PJ,lights_physical_fragment:BJ,lights_physical_pars_fragment:DJ,lights_fragment_begin:LJ,lights_fragment_maps:NJ,lights_fragment_end:OJ,logdepthbuf_fragment:kJ,logdepthbuf_pars_fragment:FJ,logdepthbuf_pars_vertex:UJ,logdepthbuf_vertex:zJ,map_fragment:HJ,map_pars_fragment:GJ,map_particle_fragment:VJ,map_particle_pars_fragment:WJ,metalnessmap_fragment:XJ,metalnessmap_pars_fragment:jJ,morphinstance_vertex:JJ,morphcolor_vertex:YJ,morphnormal_vertex:KJ,morphtarget_pars_vertex:qJ,morphtarget_vertex:$J,normal_fragment_begin:QJ,normal_fragment_maps:ZJ,normal_pars_fragment:e7,normal_pars_vertex:t7,normal_vertex:n7,normalmap_pars_fragment:r7,clearcoat_normal_fragment_begin:i7,clearcoat_normal_fragment_maps:s7,clearcoat_pars_fragment:o7,iridescence_pars_fragment:a7,opaque_fragment:l7,packing:c7,premultiplied_alpha_fragment:u7,project_vertex:f7,dithering_fragment:d7,dithering_pars_fragment:h7,roughnessmap_fragment:p7,roughnessmap_pars_fragment:m7,shadowmap_pars_fragment:g7,shadowmap_pars_vertex:_7,shadowmap_vertex:v7,shadowmask_pars_fragment:y7,skinbase_vertex:x7,skinning_pars_vertex:S7,skinning_vertex:A7,skinnormal_vertex:E7,specularmap_fragment:w7,specularmap_pars_fragment:M7,tonemapping_fragment:T7,tonemapping_pars_fragment:C7,transmission_fragment:b7,transmission_pars_fragment:R7,uv_pars_fragment:I7,uv_pars_vertex:P7,uv_vertex:B7,worldpos_vertex:D7,background_vert:L7,background_frag:N7,backgroundCube_vert:O7,backgroundCube_frag:k7,cube_vert:F7,cube_frag:U7,depth_vert:z7,depth_frag:H7,distanceRGBA_vert:G7,distanceRGBA_frag:V7,equirect_vert:W7,equirect_frag:X7,linedashed_vert:j7,linedashed_frag:J7,meshbasic_vert:Y7,meshbasic_frag:K7,meshlambert_vert:q7,meshlambert_frag:$7,meshmatcap_vert:Q7,meshmatcap_frag:Z7,meshnormal_vert:eY,meshnormal_frag:tY,meshphong_vert:nY,meshphong_frag:rY,meshphysical_vert:iY,meshphysical_frag:sY,meshtoon_vert:oY,meshtoon_frag:aY,points_vert:lY,points_frag:cY,shadow_vert:uY,shadow_frag:fY,sprite_vert:dY,sprite_frag:hY},nt={common:{diffuse:{value:new et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},envMapRotation:{value:new Wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new et(16777215)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}}},Wo={basic:{uniforms:Hi([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.fog]),vertexShader:jt.meshbasic_vert,fragmentShader:jt.meshbasic_frag},lambert:{uniforms:Hi([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new et(0)}}]),vertexShader:jt.meshlambert_vert,fragmentShader:jt.meshlambert_frag},phong:{uniforms:Hi([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new et(0)},specular:{value:new et(1118481)},shininess:{value:30}}]),vertexShader:jt.meshphong_vert,fragmentShader:jt.meshphong_frag},standard:{uniforms:Hi([nt.common,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.roughnessmap,nt.metalnessmap,nt.fog,nt.lights,{emissive:{value:new et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag},toon:{uniforms:Hi([nt.common,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.gradientmap,nt.fog,nt.lights,{emissive:{value:new et(0)}}]),vertexShader:jt.meshtoon_vert,fragmentShader:jt.meshtoon_frag},matcap:{uniforms:Hi([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,{matcap:{value:null}}]),vertexShader:jt.meshmatcap_vert,fragmentShader:jt.meshmatcap_frag},points:{uniforms:Hi([nt.points,nt.fog]),vertexShader:jt.points_vert,fragmentShader:jt.points_frag},dashed:{uniforms:Hi([nt.common,nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jt.linedashed_vert,fragmentShader:jt.linedashed_frag},depth:{uniforms:Hi([nt.common,nt.displacementmap]),vertexShader:jt.depth_vert,fragmentShader:jt.depth_frag},normal:{uniforms:Hi([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,{opacity:{value:1}}]),vertexShader:jt.meshnormal_vert,fragmentShader:jt.meshnormal_frag},sprite:{uniforms:Hi([nt.sprite,nt.fog]),vertexShader:jt.sprite_vert,fragmentShader:jt.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:jt.background_vert,fragmentShader:jt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wt}},vertexShader:jt.backgroundCube_vert,fragmentShader:jt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:jt.cube_vert,fragmentShader:jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:jt.equirect_vert,fragmentShader:jt.equirect_frag},distanceRGBA:{uniforms:Hi([nt.common,nt.displacementmap,{referencePosition:{value:new G},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:jt.distanceRGBA_vert,fragmentShader:jt.distanceRGBA_frag},shadow:{uniforms:Hi([nt.lights,nt.fog,{color:{value:new et(0)},opacity:{value:1}}]),vertexShader:jt.shadow_vert,fragmentShader:jt.shadow_frag}};Wo.physical={uniforms:Hi([Wo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new De(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wt},sheen:{value:0},sheenColor:{value:new et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new De},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new et(0)},specularColor:{value:new et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wt},anisotropyVector:{value:new De},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wt}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag};const lv={r:0,b:0,g:0},hu=new Ys,pY=new It;function mY(n,e,t,r,i,s,o){const a=new et(0);let l=s===!0?0:1,c,u,d=null,p=0,m=null;function g(S){let A=S.isScene===!0?S.background:null;return A&&A.isTexture&&(A=(S.backgroundBlurriness>0?t:e).get(A)),A}function y(S){let A=!1;const w=g(S);w===null?_(a,l):w&&w.isColor&&(_(w,1),A=!0);const I=n.xr.getEnvironmentBlendMode();I==="additive"?r.buffers.color.setClear(0,0,0,1,o):I==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||A)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(S,A){const w=g(A);w&&(w.isCubeTexture||w.mapping===cp)?(u===void 0&&(u=new er(new zf(1,1,1),new Es({name:"BackgroundCubeMaterial",uniforms:Wh(Wo.backgroundCube.uniforms),vertexShader:Wo.backgroundCube.vertexShader,fragmentShader:Wo.backgroundCube.fragmentShader,side:Zi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(I,T,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),hu.copy(A.backgroundRotation),hu.x*=-1,hu.y*=-1,hu.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(hu.y*=-1,hu.z*=-1),u.material.uniforms.envMap.value=w,u.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(pY.makeRotationFromEuler(hu)),u.material.toneMapped=Tn.getTransfer(w.colorSpace)!==Un,(d!==w||p!==w.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=w,p=w.version,m=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new er(new Kc(2,2),new Es({name:"BackgroundMaterial",uniforms:Wh(Wo.background.uniforms),vertexShader:Wo.background.vertexShader,fragmentShader:Wo.background.fragmentShader,side:Oa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,c.material.toneMapped=Tn.getTransfer(w.colorSpace)!==Un,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||p!==w.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=w,p=w.version,m=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))}function _(S,A){S.getRGB(lv,fz(n)),r.buffers.color.setClear(lv.r,lv.g,lv.b,A,o)}return{getClearColor:function(){return a},setClearColor:function(S,A=1){a.set(S),l=A,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,_(a,l)},render:y,addToRenderList:v}}function gY(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,o=!1;function a(M,L,H,j,Q){let ee=!1;const K=d(j,H,L);s!==K&&(s=K,c(s.object)),ee=m(M,j,H,Q),ee&&g(M,j,H,Q),Q!==null&&e.update(Q,n.ELEMENT_ARRAY_BUFFER),(ee||o)&&(o=!1,w(M,L,H,j),Q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Q).buffer))}function l(){return n.createVertexArray()}function c(M){return n.bindVertexArray(M)}function u(M){return n.deleteVertexArray(M)}function d(M,L,H){const j=H.wireframe===!0;let Q=r[M.id];Q===void 0&&(Q={},r[M.id]=Q);let ee=Q[L.id];ee===void 0&&(ee={},Q[L.id]=ee);let K=ee[j];return K===void 0&&(K=p(l()),ee[j]=K),K}function p(M){const L=[],H=[],j=[];for(let Q=0;Q<t;Q++)L[Q]=0,H[Q]=0,j[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:H,attributeDivisors:j,object:M,attributes:{},index:null}}function m(M,L,H,j){const Q=s.attributes,ee=L.attributes;let K=0;const te=H.getAttributes();for(const F in te)if(te[F].location>=0){const O=Q[F];let ae=ee[F];if(ae===void 0&&(F==="instanceMatrix"&&M.instanceMatrix&&(ae=M.instanceMatrix),F==="instanceColor"&&M.instanceColor&&(ae=M.instanceColor)),O===void 0||O.attribute!==ae||ae&&O.data!==ae.data)return!0;K++}return s.attributesNum!==K||s.index!==j}function g(M,L,H,j){const Q={},ee=L.attributes;let K=0;const te=H.getAttributes();for(const F in te)if(te[F].location>=0){let O=ee[F];O===void 0&&(F==="instanceMatrix"&&M.instanceMatrix&&(O=M.instanceMatrix),F==="instanceColor"&&M.instanceColor&&(O=M.instanceColor));const ae={};ae.attribute=O,O&&O.data&&(ae.data=O.data),Q[F]=ae,K++}s.attributes=Q,s.attributesNum=K,s.index=j}function y(){const M=s.newAttributes;for(let L=0,H=M.length;L<H;L++)M[L]=0}function v(M){_(M,0)}function _(M,L){const H=s.newAttributes,j=s.enabledAttributes,Q=s.attributeDivisors;H[M]=1,j[M]===0&&(n.enableVertexAttribArray(M),j[M]=1),Q[M]!==L&&(n.vertexAttribDivisor(M,L),Q[M]=L)}function S(){const M=s.newAttributes,L=s.enabledAttributes;for(let H=0,j=L.length;H<j;H++)L[H]!==M[H]&&(n.disableVertexAttribArray(H),L[H]=0)}function A(M,L,H,j,Q,ee,K){K===!0?n.vertexAttribIPointer(M,L,H,Q,ee):n.vertexAttribPointer(M,L,H,j,Q,ee)}function w(M,L,H,j){y();const Q=j.attributes,ee=H.getAttributes(),K=L.defaultAttributeValues;for(const te in ee){const F=ee[te];if(F.location>=0){let Y=Q[te];if(Y===void 0&&(te==="instanceMatrix"&&M.instanceMatrix&&(Y=M.instanceMatrix),te==="instanceColor"&&M.instanceColor&&(Y=M.instanceColor)),Y!==void 0){const O=Y.normalized,ae=Y.itemSize,me=e.get(Y);if(me===void 0)continue;const Oe=me.buffer,ce=me.type,Se=me.bytesPerElement,Ae=ce===n.INT||ce===n.UNSIGNED_INT||Y.gpuType===ES;if(Y.isInterleavedBufferAttribute){const Ee=Y.data,Qe=Ee.stride,rt=Y.offset;if(Ee.isInstancedInterleavedBuffer){for(let tt=0;tt<F.locationSize;tt++)_(F.location+tt,Ee.meshPerAttribute);M.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let tt=0;tt<F.locationSize;tt++)v(F.location+tt);n.bindBuffer(n.ARRAY_BUFFER,Oe);for(let tt=0;tt<F.locationSize;tt++)A(F.location+tt,ae/F.locationSize,ce,O,Qe*Se,(rt+ae/F.locationSize*tt)*Se,Ae)}else{if(Y.isInstancedBufferAttribute){for(let Ee=0;Ee<F.locationSize;Ee++)_(F.location+Ee,Y.meshPerAttribute);M.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let Ee=0;Ee<F.locationSize;Ee++)v(F.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,Oe);for(let Ee=0;Ee<F.locationSize;Ee++)A(F.location+Ee,ae/F.locationSize,ce,O,ae*Se,ae/F.locationSize*Ee*Se,Ae)}}else if(K!==void 0){const O=K[te];if(O!==void 0)switch(O.length){case 2:n.vertexAttrib2fv(F.location,O);break;case 3:n.vertexAttrib3fv(F.location,O);break;case 4:n.vertexAttrib4fv(F.location,O);break;default:n.vertexAttrib1fv(F.location,O)}}}}S()}function I(){P();for(const M in r){const L=r[M];for(const H in L){const j=L[H];for(const Q in j)u(j[Q].object),delete j[Q];delete L[H]}delete r[M]}}function T(M){if(r[M.id]===void 0)return;const L=r[M.id];for(const H in L){const j=L[H];for(const Q in j)u(j[Q].object),delete j[Q];delete L[H]}delete r[M.id]}function R(M){for(const L in r){const H=r[L];if(H[M.id]===void 0)continue;const j=H[M.id];for(const Q in j)u(j[Q].object),delete j[Q];delete H[M.id]}}function P(){b(),o=!0,s!==i&&(s=i,c(s.object))}function b(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:P,resetDefaultState:b,dispose:I,releaseStatesOfGeometry:T,releaseStatesOfProgram:R,initAttributes:y,enableAttribute:v,disableUnusedAttributes:S}}function _Y(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function o(c,u,d){d!==0&&(n.drawArraysInstanced(r,c,u,d),t.update(u,r,d))}function a(c,u,d){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let m=0;m<d;m++)this.render(c[m],u[m]);else{p.multiDrawArraysWEBGL(r,c,0,u,0,d);let m=0;for(let g=0;g<d;g++)m+=u[g];t.update(m,r,1)}}function l(c,u,d,p){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<c.length;g++)o(c[g],u[g],p[g]);else{m.multiDrawArraysInstancedWEBGL(r,c,0,u,0,p,0,d);let g=0;for(let y=0;y<d;y++)g+=u[y];for(let y=0;y<p.length;y++)t.update(g,r,p[y])}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function vY(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(T){return!(T!==Br&&r.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(T){const R=T===ti&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(T!==Js&&r.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&T!==ar&&!R)}function l(T){if(T==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=m>0,I=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:y,maxAttributes:v,maxVertexUniforms:_,maxVaryings:S,maxFragmentUniforms:A,vertexTextures:w,maxSamples:I}}function yY(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new sl,a=new Wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=u(d,p,0)},this.setState=function(d,p,m){const g=d.clippingPlanes,y=d.clipIntersection,v=d.clipShadows,_=n.get(d);if(!i||g===null||g.length===0||s&&!v)s?u(null):c();else{const S=s?0:r,A=S*4;let w=_.clippingState||null;l.value=w,w=u(g,p,A,m);for(let I=0;I!==A;++I)w[I]=t[I];_.clippingState=w,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,p,m,g){const y=d!==null?d.length:0;let v=null;if(y!==0){if(v=l.value,g!==!0||v===null){const _=m+y*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(v===null||v.length<_)&&(v=new Float32Array(_));for(let A=0,w=m;A!==y;++A,w+=4)o.copy(d[A]).applyMatrix4(S,a),o.normal.toArray(v,w),v[w+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,v}}function xY(n){let e=new WeakMap;function t(o,a){return a===Uh?o.mapping=ka:a===Ig&&(o.mapping=Nc),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Uh||a===Ig)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new tR(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class zs extends c_{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const nh=4,aL=[.125,.215,.35,.446,.526,.582],Pu=20,TE=new zs,lL=new et;let CE=null,bE=0,RE=0,IE=!1;const bu=(1+Math.sqrt(5))/2,Md=1/bu,cL=[new G(-bu,Md,0),new G(bu,Md,0),new G(-Md,0,bu),new G(Md,0,bu),new G(0,bu,-Md),new G(0,bu,Md),new G(-1,1,-1),new G(1,1,-1),new G(-1,1,1),new G(1,1,1)];class wT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){CE=this._renderer.getRenderTarget(),bE=this._renderer.getActiveCubeFace(),RE=this._renderer.getActiveMipmapLevel(),IE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=dL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=fL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(CE,bE,RE),this._renderer.xr.enabled=IE,e.scissorTest=!1,cv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ka||e.mapping===Nc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),CE=this._renderer.getRenderTarget(),bE=this._renderer.getActiveCubeFace(),RE=this._renderer.getActiveMipmapLevel(),IE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:mn,minFilter:mn,generateMipmaps:!1,type:ti,format:Br,colorSpace:Co,depthBuffer:!1},i=uL(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uL(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=SY(s)),this._blurMaterial=AY(s,e,t)}return i}_compileMaterial(e){const t=new er(this._lodPlanes[0],e);this._renderer.compile(t,TE)}_sceneToCubeUV(e,t,r,i){const a=new jn(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,p=u.toneMapping;u.getClearColor(lL),u.toneMapping=Ia,u.autoClear=!1;const m=new ds({name:"PMREM.Background",side:Zi,depthWrite:!1,depthTest:!1}),g=new er(new zf,m);let y=!1;const v=e.background;v?v.isColor&&(m.color.copy(v),e.background=null,y=!0):(m.color.copy(lL),y=!0);for(let _=0;_<6;_++){const S=_%3;S===0?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):S===1?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const A=this._cubeSize;cv(i,S*A,_>2?A:0,A,A),u.setRenderTarget(i),y&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=p,u.autoClear=d,e.background=v}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===ka||e.mapping===Nc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=dL()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=fL());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new er(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;cv(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,TE)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=cL[(i-s-1)%cL.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new er(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Pu-1),y=s/g,v=isFinite(s)?1+Math.floor(u*y):Pu;v>Pu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Pu}`);const _=[];let S=0;for(let R=0;R<Pu;++R){const P=R/y,b=Math.exp(-P*P/2);_.push(b),R===0?S+=b:R<v&&(S+=2*b)}for(let R=0;R<_.length;R++)_[R]=_[R]/S;p.envMap.value=e.texture,p.samples.value=v,p.weights.value=_,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:A}=this;p.dTheta.value=g,p.mipInt.value=A-r;const w=this._sizeLods[i],I=3*w*(i>A-nh?i-A+nh:0),T=4*(this._cubeSize-w);cv(t,I,T,3*w,2*w),l.setRenderTarget(t),l.render(d,TE)}}function SY(n){const e=[],t=[],r=[];let i=n;const s=n-nh+1+aL.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-nh?l=aL[o-n+nh-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,p=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,g=6,y=3,v=2,_=1,S=new Float32Array(y*g*m),A=new Float32Array(v*g*m),w=new Float32Array(_*g*m);for(let T=0;T<m;T++){const R=T%3*2/3-1,P=T>2?0:-1,b=[R,P,0,R+2/3,P,0,R+2/3,P+1,0,R,P,0,R+2/3,P+1,0,R,P+1,0];S.set(b,y*g*T),A.set(p,v*g*T);const M=[T,T,T,T,T,T];w.set(M,_*g*T)}const I=new Vt;I.setAttribute("position",new yn(S,y)),I.setAttribute("uv",new yn(A,v)),I.setAttribute("faceIndex",new yn(w,_)),e.push(I),i>nh&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function uL(n,e,t){const r=new As(n,e,t);return r.texture.mapping=cp,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function cv(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function AY(n,e,t){const r=new Float32Array(Pu),i=new G(0,1,0);return new Es({name:"SphericalGaussianBlur",defines:{n:Pu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:nR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ra,depthTest:!1,depthWrite:!1})}function fL(){return new Es({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:nR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ra,depthTest:!1,depthWrite:!1})}function dL(){return new Es({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:nR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ra,depthTest:!1,depthWrite:!1})}function nR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function EY(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Uh||l===Ig,u=l===ka||l===Nc;if(c||u){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new wT(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&i(m)?(t===null&&(t=new wT(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function wY(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&$b("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function MY(n,e,t,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);for(const g in p.morphAttributes){const y=p.morphAttributes[g];for(let v=0,_=y.length;v<_;v++)e.remove(y[v])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const g in p)e.update(p[g],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const g in m){const y=m[g];for(let v=0,_=y.length;v<_;v++)e.update(y[v],n.ARRAY_BUFFER)}}function c(d){const p=[],m=d.index,g=d.attributes.position;let y=0;if(m!==null){const S=m.array;y=m.version;for(let A=0,w=S.length;A<w;A+=3){const I=S[A+0],T=S[A+1],R=S[A+2];p.push(I,T,T,R,R,I)}}else if(g!==void 0){const S=g.array;y=g.version;for(let A=0,w=S.length/3-1;A<w;A+=3){const I=A+0,T=A+1,R=A+2;p.push(I,T,T,R,R,I)}}else return;const v=new(oz(p)?eR:Zb)(p,1);v.version=y;const _=s.get(d);_&&e.remove(_),s.set(d,v)}function u(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function TY(n,e,t){let r;function i(p){r=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(r,m,s,p*o),t.update(m,r,1)}function c(p,m,g){g!==0&&(n.drawElementsInstanced(r,m,s,p*o,g),t.update(m,r,g))}function u(p,m,g){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let v=0;v<g;v++)this.render(p[v]/o,m[v]);else{y.multiDrawElementsWEBGL(r,m,0,s,p,0,g);let v=0;for(let _=0;_<g;_++)v+=m[_];t.update(v,r,1)}}function d(p,m,g,y){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let _=0;_<p.length;_++)c(p[_]/o,m[_],y[_]);else{v.multiDrawElementsInstancedWEBGL(r,m,0,s,p,0,y,0,g);let _=0;for(let S=0;S<g;S++)_+=m[S];for(let S=0;S<y.length;S++)t.update(_,r,y[S])}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function CY(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function bY(n,e,t){const r=new WeakMap,i=new Rn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let p=r.get(a);if(p===void 0||p.count!==d){let M=function(){P.dispose(),r.delete(a),a.removeEventListener("dispose",M)};var m=M;p!==void 0&&p.texture.dispose();const g=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],A=a.morphAttributes.color||[];let w=0;g===!0&&(w=1),y===!0&&(w=2),v===!0&&(w=3);let I=a.attributes.position.count*w,T=1;I>e.maxTextureSize&&(T=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const R=new Float32Array(I*T*4*d),P=new CS(R,I,T,d);P.type=ar,P.needsUpdate=!0;const b=w*4;for(let L=0;L<d;L++){const H=_[L],j=S[L],Q=A[L],ee=I*T*4*L;for(let K=0;K<H.count;K++){const te=K*b;g===!0&&(i.fromBufferAttribute(H,K),R[ee+te+0]=i.x,R[ee+te+1]=i.y,R[ee+te+2]=i.z,R[ee+te+3]=0),y===!0&&(i.fromBufferAttribute(j,K),R[ee+te+4]=i.x,R[ee+te+5]=i.y,R[ee+te+6]=i.z,R[ee+te+7]=0),v===!0&&(i.fromBufferAttribute(Q,K),R[ee+te+8]=i.x,R[ee+te+9]=i.y,R[ee+te+10]=i.z,R[ee+te+11]=Q.itemSize===4?i.w:1)}}p={count:d,texture:P,size:new De(I,T)},r.set(a,p),a.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let g=0;for(let v=0;v<c.length;v++)g+=c[v];const y=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",y),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function RY(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class bS extends gn{constructor(e,t,r,i,s,o,a,l,c,u=ef){if(u!==ef&&u!==Af)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===ef&&(r=kc),r===void 0&&u===Af&&(r=Sf),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Gr,this.minFilter=l!==void 0?l:Gr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const mz=new gn,gz=new bS(1,1);gz.compareFunction=Kb;const _z=new CS,vz=new Qb,yz=new u_,hL=[],pL=[],mL=new Float32Array(16),gL=new Float32Array(9),_L=new Float32Array(4);function up(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=hL[i];if(s===void 0&&(s=new Float32Array(i),hL[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Vr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Wr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function RS(n,e){let t=pL[e];t===void 0&&(t=new Int32Array(e),pL[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function IY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function PY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vr(t,e))return;n.uniform2fv(this.addr,e),Wr(t,e)}}function BY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Vr(t,e))return;n.uniform3fv(this.addr,e),Wr(t,e)}}function DY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vr(t,e))return;n.uniform4fv(this.addr,e),Wr(t,e)}}function LY(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Vr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Wr(t,e)}else{if(Vr(t,r))return;_L.set(r),n.uniformMatrix2fv(this.addr,!1,_L),Wr(t,r)}}function NY(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Vr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Wr(t,e)}else{if(Vr(t,r))return;gL.set(r),n.uniformMatrix3fv(this.addr,!1,gL),Wr(t,r)}}function OY(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Vr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Wr(t,e)}else{if(Vr(t,r))return;mL.set(r),n.uniformMatrix4fv(this.addr,!1,mL),Wr(t,r)}}function kY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function FY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vr(t,e))return;n.uniform2iv(this.addr,e),Wr(t,e)}}function UY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vr(t,e))return;n.uniform3iv(this.addr,e),Wr(t,e)}}function zY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vr(t,e))return;n.uniform4iv(this.addr,e),Wr(t,e)}}function HY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function GY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vr(t,e))return;n.uniform2uiv(this.addr,e),Wr(t,e)}}function VY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vr(t,e))return;n.uniform3uiv(this.addr,e),Wr(t,e)}}function WY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vr(t,e))return;n.uniform4uiv(this.addr,e),Wr(t,e)}}function XY(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?gz:mz;t.setTexture2D(e||s,i)}function jY(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||vz,i)}function JY(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||yz,i)}function YY(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||_z,i)}function KY(n){switch(n){case 5126:return IY;case 35664:return PY;case 35665:return BY;case 35666:return DY;case 35674:return LY;case 35675:return NY;case 35676:return OY;case 5124:case 35670:return kY;case 35667:case 35671:return FY;case 35668:case 35672:return UY;case 35669:case 35673:return zY;case 5125:return HY;case 36294:return GY;case 36295:return VY;case 36296:return WY;case 35678:case 36198:case 36298:case 36306:case 35682:return XY;case 35679:case 36299:case 36307:return jY;case 35680:case 36300:case 36308:case 36293:return JY;case 36289:case 36303:case 36311:case 36292:return YY}}function qY(n,e){n.uniform1fv(this.addr,e)}function $Y(n,e){const t=up(e,this.size,2);n.uniform2fv(this.addr,t)}function QY(n,e){const t=up(e,this.size,3);n.uniform3fv(this.addr,t)}function ZY(n,e){const t=up(e,this.size,4);n.uniform4fv(this.addr,t)}function eK(n,e){const t=up(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function tK(n,e){const t=up(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function nK(n,e){const t=up(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function rK(n,e){n.uniform1iv(this.addr,e)}function iK(n,e){n.uniform2iv(this.addr,e)}function sK(n,e){n.uniform3iv(this.addr,e)}function oK(n,e){n.uniform4iv(this.addr,e)}function aK(n,e){n.uniform1uiv(this.addr,e)}function lK(n,e){n.uniform2uiv(this.addr,e)}function cK(n,e){n.uniform3uiv(this.addr,e)}function uK(n,e){n.uniform4uiv(this.addr,e)}function fK(n,e,t){const r=this.cache,i=e.length,s=RS(t,i);Vr(r,s)||(n.uniform1iv(this.addr,s),Wr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||mz,s[o])}function dK(n,e,t){const r=this.cache,i=e.length,s=RS(t,i);Vr(r,s)||(n.uniform1iv(this.addr,s),Wr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||vz,s[o])}function hK(n,e,t){const r=this.cache,i=e.length,s=RS(t,i);Vr(r,s)||(n.uniform1iv(this.addr,s),Wr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||yz,s[o])}function pK(n,e,t){const r=this.cache,i=e.length,s=RS(t,i);Vr(r,s)||(n.uniform1iv(this.addr,s),Wr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||_z,s[o])}function mK(n){switch(n){case 5126:return qY;case 35664:return $Y;case 35665:return QY;case 35666:return ZY;case 35674:return eK;case 35675:return tK;case 35676:return nK;case 5124:case 35670:return rK;case 35667:case 35671:return iK;case 35668:case 35672:return sK;case 35669:case 35673:return oK;case 5125:return aK;case 36294:return lK;case 36295:return cK;case 36296:return uK;case 35678:case 36198:case 36298:case 36306:case 35682:return fK;case 35679:case 36299:case 36307:return dK;case 35680:case 36300:case 36308:case 36293:return hK;case 36289:case 36303:case 36311:case 36292:return pK}}class gK{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=KY(t.type)}}class _K{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=mK(t.type)}}class vK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const PE=/(\w+)(\])?(\[|\.)?/g;function vL(n,e){n.seq.push(e),n.map[e.id]=e}function yK(n,e,t){const r=n.name,i=r.length;for(PE.lastIndex=0;;){const s=PE.exec(r),o=PE.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){vL(t,c===void 0?new gK(a,n,e):new _K(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new vK(a),vL(t,d)),t=d}}}class Ly{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);yK(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function yL(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const xK=37297;let SK=0;function AK(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function EK(n){const e=Tn.getPrimaries(Tn.workingColorSpace),t=Tn.getPrimaries(n);let r;switch(e===t?r="":e===Ng&&t===Lg?r="LinearDisplayP3ToLinearSRGB":e===Lg&&t===Ng&&(r="LinearSRGBToLinearDisplayP3"),n){case Co:case l_:return[r,"LinearTransferOETF"];case Ls:case TS:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function xL(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+AK(n.getShaderSource(e),o)}else return i}function wK(n,e){const t=EK(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function MK(n,e){let t;switch(e){case PU:t="Linear";break;case BU:t="Reinhard";break;case DU:t="OptimizedCineon";break;case Ub:t="ACESFilmic";break;case NU:t="AgX";break;case OU:t="Neutral";break;case LU:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function TK(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Am).join(`
`)}function CK(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function bK(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Am(n){return n!==""}function SL(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function AL(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const RK=/^[ \t]*#include +<([\w\d./]+)>/gm;function MT(n){return n.replace(RK,PK)}const IK=new Map;function PK(n,e){let t=jt[e];if(t===void 0){const r=IK.get(e);if(r!==void 0)t=jt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return MT(t)}const BK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function EL(n){return n.replace(BK,DK)}function DK(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function wL(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function LK(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===SS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===zm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ho&&(e="SHADOWMAP_TYPE_VSM"),e}function NK(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ka:case Nc:e="ENVMAP_TYPE_CUBE";break;case cp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function OK(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Nc:e="ENVMAP_MODE_REFRACTION";break}return e}function kK(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case a_:e="ENVMAP_BLENDING_MULTIPLY";break;case RU:e="ENVMAP_BLENDING_MIX";break;case IU:e="ENVMAP_BLENDING_ADD";break}return e}function FK(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function UK(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=LK(t),c=NK(t),u=OK(t),d=kK(t),p=FK(t),m=TK(t),g=CK(s),y=i.createProgram();let v,_,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Am).join(`
`),v.length>0&&(v+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Am).join(`
`),_.length>0&&(_+=`
`)):(v=[wL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Am).join(`
`),_=[wL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ia?"#define TONE_MAPPING":"",t.toneMapping!==Ia?jt.tonemapping_pars_fragment:"",t.toneMapping!==Ia?MK("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",jt.colorspace_pars_fragment,wK("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Am).join(`
`)),o=MT(o),o=SL(o,t),o=AL(o,t),a=MT(a),a=SL(a,t),a=AL(a,t),o=EL(o),a=EL(a),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,v=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,_=["#define varying in",t.glslVersion===ET?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ET?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const A=S+v+o,w=S+_+a,I=yL(i,i.VERTEX_SHADER,A),T=yL(i,i.FRAGMENT_SHADER,w);i.attachShader(y,I),i.attachShader(y,T),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function R(L){if(n.debug.checkShaderErrors){const H=i.getProgramInfoLog(y).trim(),j=i.getShaderInfoLog(I).trim(),Q=i.getShaderInfoLog(T).trim();let ee=!0,K=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(ee=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,I,T);else{const te=xL(i,I,"vertex"),F=xL(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+H+`
`+te+`
`+F)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(j===""||Q==="")&&(K=!1);K&&(L.diagnostics={runnable:ee,programLog:H,vertexShader:{log:j,prefix:v},fragmentShader:{log:Q,prefix:_}})}i.deleteShader(I),i.deleteShader(T),P=new Ly(i,y),b=bK(i,y)}let P;this.getUniforms=function(){return P===void 0&&R(this),P};let b;this.getAttributes=function(){return b===void 0&&R(this),b};let M=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=i.getProgramParameter(y,xK)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=SK++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=I,this.fragmentShader=T,this}let zK=0;class HK{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new GK(e),t.set(e,r)),r}}class GK{constructor(e){this.id=zK++,this.code=e,this.usedTimes=0}}function VK(n,e,t,r,i,s,o){const a=new nf,l=new HK,c=new Set,u=[],d=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(b){return c.add(b),b===0?"uv":`uv${b}`}function v(b,M,L,H,j){const Q=H.fog,ee=j.geometry,K=b.isMeshStandardMaterial?H.environment:null,te=(b.isMeshStandardMaterial?t:e).get(b.envMap||K),F=te&&te.mapping===cp?te.image.height:null,Y=g[b.type];b.precision!==null&&(m=i.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));const O=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,ae=O!==void 0?O.length:0;let me=0;ee.morphAttributes.position!==void 0&&(me=1),ee.morphAttributes.normal!==void 0&&(me=2),ee.morphAttributes.color!==void 0&&(me=3);let Oe,ce,Se,Ae;if(Y){const Nt=Wo[Y];Oe=Nt.vertexShader,ce=Nt.fragmentShader}else Oe=b.vertexShader,ce=b.fragmentShader,l.update(b),Se=l.getVertexShaderID(b),Ae=l.getFragmentShaderID(b);const Ee=n.getRenderTarget(),Qe=j.isInstancedMesh===!0,rt=j.isBatchedMesh===!0,tt=!!b.map,q=!!b.matcap,we=!!te,he=!!b.aoMap,Ce=!!b.lightMap,Le=!!b.bumpMap,ke=!!b.normalMap,ne=!!b.displacementMap,We=!!b.emissiveMap,je=!!b.metalnessMap,X=!!b.roughnessMap,k=b.anisotropy>0,fe=b.clearcoat>0,ge=b.dispersion>0,be=b.iridescence>0,Be=b.sheen>0,st=b.transmission>0,Fe=k&&!!b.anisotropyMap,Je=fe&&!!b.clearcoatMap,yt=fe&&!!b.clearcoatNormalMap,Ue=fe&&!!b.clearcoatRoughnessMap,at=be&&!!b.iridescenceMap,xt=be&&!!b.iridescenceThicknessMap,Et=Be&&!!b.sheenColorMap,Ge=Be&&!!b.sheenRoughnessMap,re=!!b.specularMap,Re=!!b.specularColorMap,Ye=!!b.specularIntensityMap,Z=st&&!!b.transmissionMap,Ie=st&&!!b.thicknessMap,oe=!!b.gradientMap,Te=!!b.alphaMap,Ve=b.alphaTest>0,mt=!!b.alphaHash,bt=!!b.extensions;let Ut=Ia;b.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(Ut=n.toneMapping);const Qt={shaderID:Y,shaderType:b.type,shaderName:b.name,vertexShader:Oe,fragmentShader:ce,defines:b.defines,customVertexShaderID:Se,customFragmentShaderID:Ae,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:m,batching:rt,batchingColor:rt&&j._colorsTexture!==null,instancing:Qe,instancingColor:Qe&&j.instanceColor!==null,instancingMorph:Qe&&j.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Ee===null?n.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:Co,alphaToCoverage:!!b.alphaToCoverage,map:tt,matcap:q,envMap:we,envMapMode:we&&te.mapping,envMapCubeUVHeight:F,aoMap:he,lightMap:Ce,bumpMap:Le,normalMap:ke,displacementMap:p&&ne,emissiveMap:We,normalMapObjectSpace:ke&&b.normalMapType===$U,normalMapTangentSpace:ke&&b.normalMapType===Yc,metalnessMap:je,roughnessMap:X,anisotropy:k,anisotropyMap:Fe,clearcoat:fe,clearcoatMap:Je,clearcoatNormalMap:yt,clearcoatRoughnessMap:Ue,dispersion:ge,iridescence:be,iridescenceMap:at,iridescenceThicknessMap:xt,sheen:Be,sheenColorMap:Et,sheenRoughnessMap:Ge,specularMap:re,specularColorMap:Re,specularIntensityMap:Ye,transmission:st,transmissionMap:Z,thicknessMap:Ie,gradientMap:oe,opaque:b.transparent===!1&&b.blending===Zu&&b.alphaToCoverage===!1,alphaMap:Te,alphaTest:Ve,alphaHash:mt,combine:b.combine,mapUv:tt&&y(b.map.channel),aoMapUv:he&&y(b.aoMap.channel),lightMapUv:Ce&&y(b.lightMap.channel),bumpMapUv:Le&&y(b.bumpMap.channel),normalMapUv:ke&&y(b.normalMap.channel),displacementMapUv:ne&&y(b.displacementMap.channel),emissiveMapUv:We&&y(b.emissiveMap.channel),metalnessMapUv:je&&y(b.metalnessMap.channel),roughnessMapUv:X&&y(b.roughnessMap.channel),anisotropyMapUv:Fe&&y(b.anisotropyMap.channel),clearcoatMapUv:Je&&y(b.clearcoatMap.channel),clearcoatNormalMapUv:yt&&y(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ue&&y(b.clearcoatRoughnessMap.channel),iridescenceMapUv:at&&y(b.iridescenceMap.channel),iridescenceThicknessMapUv:xt&&y(b.iridescenceThicknessMap.channel),sheenColorMapUv:Et&&y(b.sheenColorMap.channel),sheenRoughnessMapUv:Ge&&y(b.sheenRoughnessMap.channel),specularMapUv:re&&y(b.specularMap.channel),specularColorMapUv:Re&&y(b.specularColorMap.channel),specularIntensityMapUv:Ye&&y(b.specularIntensityMap.channel),transmissionMapUv:Z&&y(b.transmissionMap.channel),thicknessMapUv:Ie&&y(b.thicknessMap.channel),alphaMapUv:Te&&y(b.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(ke||k),vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:j.isPoints===!0&&!!ee.attributes.uv&&(tt||Te),fog:!!Q,useFog:b.fog===!0,fogExp2:!!Q&&Q.isFogExp2,flatShading:b.flatShading===!0,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:j.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:ae,morphTextureStride:me,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&L.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ut,decodeVideoTexture:tt&&b.map.isVideoTexture===!0&&Tn.getTransfer(b.map.colorSpace)===Un,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===us,flipSided:b.side===Zi,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionClipCullDistance:bt&&b.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:bt&&b.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:b.customProgramCacheKey()};return Qt.vertexUv1s=c.has(1),Qt.vertexUv2s=c.has(2),Qt.vertexUv3s=c.has(3),c.clear(),Qt}function _(b){const M=[];if(b.shaderID?M.push(b.shaderID):(M.push(b.customVertexShaderID),M.push(b.customFragmentShaderID)),b.defines!==void 0)for(const L in b.defines)M.push(L),M.push(b.defines[L]);return b.isRawShaderMaterial===!1&&(S(M,b),A(M,b),M.push(n.outputColorSpace)),M.push(b.customProgramCacheKey),M.join()}function S(b,M){b.push(M.precision),b.push(M.outputColorSpace),b.push(M.envMapMode),b.push(M.envMapCubeUVHeight),b.push(M.mapUv),b.push(M.alphaMapUv),b.push(M.lightMapUv),b.push(M.aoMapUv),b.push(M.bumpMapUv),b.push(M.normalMapUv),b.push(M.displacementMapUv),b.push(M.emissiveMapUv),b.push(M.metalnessMapUv),b.push(M.roughnessMapUv),b.push(M.anisotropyMapUv),b.push(M.clearcoatMapUv),b.push(M.clearcoatNormalMapUv),b.push(M.clearcoatRoughnessMapUv),b.push(M.iridescenceMapUv),b.push(M.iridescenceThicknessMapUv),b.push(M.sheenColorMapUv),b.push(M.sheenRoughnessMapUv),b.push(M.specularMapUv),b.push(M.specularColorMapUv),b.push(M.specularIntensityMapUv),b.push(M.transmissionMapUv),b.push(M.thicknessMapUv),b.push(M.combine),b.push(M.fogExp2),b.push(M.sizeAttenuation),b.push(M.morphTargetsCount),b.push(M.morphAttributeCount),b.push(M.numDirLights),b.push(M.numPointLights),b.push(M.numSpotLights),b.push(M.numSpotLightMaps),b.push(M.numHemiLights),b.push(M.numRectAreaLights),b.push(M.numDirLightShadows),b.push(M.numPointLightShadows),b.push(M.numSpotLightShadows),b.push(M.numSpotLightShadowsWithMaps),b.push(M.numLightProbes),b.push(M.shadowMapType),b.push(M.toneMapping),b.push(M.numClippingPlanes),b.push(M.numClipIntersection),b.push(M.depthPacking)}function A(b,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),b.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.skinning&&a.enable(4),M.morphTargets&&a.enable(5),M.morphNormals&&a.enable(6),M.morphColors&&a.enable(7),M.premultipliedAlpha&&a.enable(8),M.shadowMapEnabled&&a.enable(9),M.doubleSided&&a.enable(10),M.flipSided&&a.enable(11),M.useDepthPacking&&a.enable(12),M.dithering&&a.enable(13),M.transmission&&a.enable(14),M.sheen&&a.enable(15),M.opaque&&a.enable(16),M.pointsUvs&&a.enable(17),M.decodeVideoTexture&&a.enable(18),M.alphaToCoverage&&a.enable(19),b.push(a.mask)}function w(b){const M=g[b.type];let L;if(M){const H=Wo[M];L=dz.clone(H.uniforms)}else L=b.uniforms;return L}function I(b,M){let L;for(let H=0,j=u.length;H<j;H++){const Q=u[H];if(Q.cacheKey===M){L=Q,++L.usedTimes;break}}return L===void 0&&(L=new UK(n,M,b,s),u.push(L)),L}function T(b){if(--b.usedTimes===0){const M=u.indexOf(b);u[M]=u[u.length-1],u.pop(),b.destroy()}}function R(b){l.remove(b)}function P(){l.dispose()}return{getParameters:v,getProgramCacheKey:_,getUniforms:w,acquireProgram:I,releaseProgram:T,releaseShaderCache:R,programs:u,dispose:P}}function WK(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function XK(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function ML(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function TL(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,p,m,g,y,v){let _=n[e];return _===void 0?(_={id:d.id,object:d,geometry:p,material:m,groupOrder:g,renderOrder:d.renderOrder,z:y,group:v},n[e]=_):(_.id=d.id,_.object=d,_.geometry=p,_.material=m,_.groupOrder=g,_.renderOrder=d.renderOrder,_.z=y,_.group=v),e++,_}function a(d,p,m,g,y,v){const _=o(d,p,m,g,y,v);m.transmission>0?r.push(_):m.transparent===!0?i.push(_):t.push(_)}function l(d,p,m,g,y,v){const _=o(d,p,m,g,y,v);m.transmission>0?r.unshift(_):m.transparent===!0?i.unshift(_):t.unshift(_)}function c(d,p){t.length>1&&t.sort(d||XK),r.length>1&&r.sort(p||ML),i.length>1&&i.sort(p||ML)}function u(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function jK(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new TL,n.set(r,[o])):i>=s.length?(o=new TL,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function JK(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new G,color:new et};break;case"SpotLight":t={position:new G,direction:new G,color:new et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new G,color:new et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new G,skyColor:new et,groundColor:new et};break;case"RectAreaLight":t={color:new et,position:new G,halfWidth:new G,halfHeight:new G};break}return n[e.id]=t,t}}}function YK(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let KK=0;function qK(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function $K(n){const e=new JK,t=YK(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new G);const i=new G,s=new It,o=new It;function a(c){let u=0,d=0,p=0;for(let b=0;b<9;b++)r.probe[b].set(0,0,0);let m=0,g=0,y=0,v=0,_=0,S=0,A=0,w=0,I=0,T=0,R=0;c.sort(qK);for(let b=0,M=c.length;b<M;b++){const L=c[b],H=L.color,j=L.intensity,Q=L.distance,ee=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)u+=H.r*j,d+=H.g*j,p+=H.b*j;else if(L.isLightProbe){for(let K=0;K<9;K++)r.probe[K].addScaledVector(L.sh.coefficients[K],j);R++}else if(L.isDirectionalLight){const K=e.get(L);if(K.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const te=L.shadow,F=t.get(L);F.shadowBias=te.bias,F.shadowNormalBias=te.normalBias,F.shadowRadius=te.radius,F.shadowMapSize=te.mapSize,r.directionalShadow[m]=F,r.directionalShadowMap[m]=ee,r.directionalShadowMatrix[m]=L.shadow.matrix,S++}r.directional[m]=K,m++}else if(L.isSpotLight){const K=e.get(L);K.position.setFromMatrixPosition(L.matrixWorld),K.color.copy(H).multiplyScalar(j),K.distance=Q,K.coneCos=Math.cos(L.angle),K.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),K.decay=L.decay,r.spot[y]=K;const te=L.shadow;if(L.map&&(r.spotLightMap[I]=L.map,I++,te.updateMatrices(L),L.castShadow&&T++),r.spotLightMatrix[y]=te.matrix,L.castShadow){const F=t.get(L);F.shadowBias=te.bias,F.shadowNormalBias=te.normalBias,F.shadowRadius=te.radius,F.shadowMapSize=te.mapSize,r.spotShadow[y]=F,r.spotShadowMap[y]=ee,w++}y++}else if(L.isRectAreaLight){const K=e.get(L);K.color.copy(H).multiplyScalar(j),K.halfWidth.set(L.width*.5,0,0),K.halfHeight.set(0,L.height*.5,0),r.rectArea[v]=K,v++}else if(L.isPointLight){const K=e.get(L);if(K.color.copy(L.color).multiplyScalar(L.intensity),K.distance=L.distance,K.decay=L.decay,L.castShadow){const te=L.shadow,F=t.get(L);F.shadowBias=te.bias,F.shadowNormalBias=te.normalBias,F.shadowRadius=te.radius,F.shadowMapSize=te.mapSize,F.shadowCameraNear=te.camera.near,F.shadowCameraFar=te.camera.far,r.pointShadow[g]=F,r.pointShadowMap[g]=ee,r.pointShadowMatrix[g]=L.shadow.matrix,A++}r.point[g]=K,g++}else if(L.isHemisphereLight){const K=e.get(L);K.skyColor.copy(L.color).multiplyScalar(j),K.groundColor.copy(L.groundColor).multiplyScalar(j),r.hemi[_]=K,_++}}v>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=nt.LTC_FLOAT_1,r.rectAreaLTC2=nt.LTC_FLOAT_2):(r.rectAreaLTC1=nt.LTC_HALF_1,r.rectAreaLTC2=nt.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=p;const P=r.hash;(P.directionalLength!==m||P.pointLength!==g||P.spotLength!==y||P.rectAreaLength!==v||P.hemiLength!==_||P.numDirectionalShadows!==S||P.numPointShadows!==A||P.numSpotShadows!==w||P.numSpotMaps!==I||P.numLightProbes!==R)&&(r.directional.length=m,r.spot.length=y,r.rectArea.length=v,r.point.length=g,r.hemi.length=_,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=w+I-T,r.spotLightMap.length=I,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=R,P.directionalLength=m,P.pointLength=g,P.spotLength=y,P.rectAreaLength=v,P.hemiLength=_,P.numDirectionalShadows=S,P.numPointShadows=A,P.numSpotShadows=w,P.numSpotMaps=I,P.numLightProbes=R,r.version=KK++)}function l(c,u){let d=0,p=0,m=0,g=0,y=0;const v=u.matrixWorldInverse;for(let _=0,S=c.length;_<S;_++){const A=c[_];if(A.isDirectionalLight){const w=r.directional[d];w.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(v),d++}else if(A.isSpotLight){const w=r.spot[m];w.position.setFromMatrixPosition(A.matrixWorld),w.position.applyMatrix4(v),w.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(v),m++}else if(A.isRectAreaLight){const w=r.rectArea[g];w.position.setFromMatrixPosition(A.matrixWorld),w.position.applyMatrix4(v),o.identity(),s.copy(A.matrixWorld),s.premultiply(v),o.extractRotation(s),w.halfWidth.set(A.width*.5,0,0),w.halfHeight.set(0,A.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),g++}else if(A.isPointLight){const w=r.point[p];w.position.setFromMatrixPosition(A.matrixWorld),w.position.applyMatrix4(v),p++}else if(A.isHemisphereLight){const w=r.hemi[y];w.direction.setFromMatrixPosition(A.matrixWorld),w.direction.transformDirection(v),y++}}}return{setup:a,setupView:l,state:r}}function CL(n){const e=new $K(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function QK(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new CL(n),e.set(i,[a])):s>=o.length?(a=new CL(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}class rR extends Dr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=KU,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class iR extends Dr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const ZK=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,eq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function tq(n,e,t){let r=new f_;const i=new De,s=new De,o=new Rn,a=new rR({depthPacking:qU}),l=new iR,c={},u=t.maxTextureSize,d={[Oa]:Zi,[Zi]:Oa,[us]:us},p=new Es({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new De},radius:{value:4}},vertexShader:ZK,fragmentShader:eq}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new Vt;g.setAttribute("position",new yn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new er(g,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=SS;let _=this.type;this.render=function(T,R,P){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||T.length===0)return;const b=n.getRenderTarget(),M=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),H=n.state;H.setBlending(Ra),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const j=_!==Ho&&this.type===Ho,Q=_===Ho&&this.type!==Ho;for(let ee=0,K=T.length;ee<K;ee++){const te=T[ee],F=te.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;i.copy(F.mapSize);const Y=F.getFrameExtents();if(i.multiply(Y),s.copy(F.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/Y.x),i.x=s.x*Y.x,F.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/Y.y),i.y=s.y*Y.y,F.mapSize.y=s.y)),F.map===null||j===!0||Q===!0){const ae=this.type!==Ho?{minFilter:Gr,magFilter:Gr}:{};F.map!==null&&F.map.dispose(),F.map=new As(i.x,i.y,ae),F.map.texture.name=te.name+".shadowMap",F.camera.updateProjectionMatrix()}n.setRenderTarget(F.map),n.clear();const O=F.getViewportCount();for(let ae=0;ae<O;ae++){const me=F.getViewport(ae);o.set(s.x*me.x,s.y*me.y,s.x*me.z,s.y*me.w),H.viewport(o),F.updateMatrices(te,ae),r=F.getFrustum(),w(R,P,F.camera,te,this.type)}F.isPointLightShadow!==!0&&this.type===Ho&&S(F,P),F.needsUpdate=!1}_=this.type,v.needsUpdate=!1,n.setRenderTarget(b,M,L)};function S(T,R){const P=e.update(y);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new As(i.x,i.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(R,null,P,p,y,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(R,null,P,m,y,null)}function A(T,R,P,b){let M=null;const L=P.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(L!==void 0)M=L;else if(M=P.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const H=M.uuid,j=R.uuid;let Q=c[H];Q===void 0&&(Q={},c[H]=Q);let ee=Q[j];ee===void 0&&(ee=M.clone(),Q[j]=ee,R.addEventListener("dispose",I)),M=ee}if(M.visible=R.visible,M.wireframe=R.wireframe,b===Ho?M.side=R.shadowSide!==null?R.shadowSide:R.side:M.side=R.shadowSide!==null?R.shadowSide:d[R.side],M.alphaMap=R.alphaMap,M.alphaTest=R.alphaTest,M.map=R.map,M.clipShadows=R.clipShadows,M.clippingPlanes=R.clippingPlanes,M.clipIntersection=R.clipIntersection,M.displacementMap=R.displacementMap,M.displacementScale=R.displacementScale,M.displacementBias=R.displacementBias,M.wireframeLinewidth=R.wireframeLinewidth,M.linewidth=R.linewidth,P.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const H=n.properties.get(M);H.light=P}return M}function w(T,R,P,b,M){if(T.visible===!1)return;if(T.layers.test(R.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&M===Ho)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,T.matrixWorld);const j=e.update(T),Q=T.material;if(Array.isArray(Q)){const ee=j.groups;for(let K=0,te=ee.length;K<te;K++){const F=ee[K],Y=Q[F.materialIndex];if(Y&&Y.visible){const O=A(T,Y,b,M);T.onBeforeShadow(n,T,R,P,j,O,F),n.renderBufferDirect(P,null,j,O,T,F),T.onAfterShadow(n,T,R,P,j,O,F)}}}else if(Q.visible){const ee=A(T,Q,b,M);T.onBeforeShadow(n,T,R,P,j,ee,null),n.renderBufferDirect(P,null,j,ee,T,null),T.onAfterShadow(n,T,R,P,j,ee,null)}}const H=T.children;for(let j=0,Q=H.length;j<Q;j++)w(H[j],R,P,b,M)}function I(T){T.target.removeEventListener("dispose",I);for(const P in c){const b=c[P],M=T.target.uuid;M in b&&(b[M].dispose(),delete b[M])}}}function nq(n){function e(){let Z=!1;const Ie=new Rn;let oe=null;const Te=new Rn(0,0,0,0);return{setMask:function(Ve){oe!==Ve&&!Z&&(n.colorMask(Ve,Ve,Ve,Ve),oe=Ve)},setLocked:function(Ve){Z=Ve},setClear:function(Ve,mt,bt,Ut,Qt){Qt===!0&&(Ve*=Ut,mt*=Ut,bt*=Ut),Ie.set(Ve,mt,bt,Ut),Te.equals(Ie)===!1&&(n.clearColor(Ve,mt,bt,Ut),Te.copy(Ie))},reset:function(){Z=!1,oe=null,Te.set(-1,0,0,0)}}}function t(){let Z=!1,Ie=null,oe=null,Te=null;return{setTest:function(Ve){Ve?Ae(n.DEPTH_TEST):Ee(n.DEPTH_TEST)},setMask:function(Ve){Ie!==Ve&&!Z&&(n.depthMask(Ve),Ie=Ve)},setFunc:function(Ve){if(oe!==Ve){switch(Ve){case AU:n.depthFunc(n.NEVER);break;case EU:n.depthFunc(n.ALWAYS);break;case wU:n.depthFunc(n.LESS);break;case Rg:n.depthFunc(n.LEQUAL);break;case MU:n.depthFunc(n.EQUAL);break;case TU:n.depthFunc(n.GEQUAL);break;case CU:n.depthFunc(n.GREATER);break;case bU:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}oe=Ve}},setLocked:function(Ve){Z=Ve},setClear:function(Ve){Te!==Ve&&(n.clearDepth(Ve),Te=Ve)},reset:function(){Z=!1,Ie=null,oe=null,Te=null}}}function r(){let Z=!1,Ie=null,oe=null,Te=null,Ve=null,mt=null,bt=null,Ut=null,Qt=null;return{setTest:function(Nt){Z||(Nt?Ae(n.STENCIL_TEST):Ee(n.STENCIL_TEST))},setMask:function(Nt){Ie!==Nt&&!Z&&(n.stencilMask(Nt),Ie=Nt)},setFunc:function(Nt,gt,ut){(oe!==Nt||Te!==gt||Ve!==ut)&&(n.stencilFunc(Nt,gt,ut),oe=Nt,Te=gt,Ve=ut)},setOp:function(Nt,gt,ut){(mt!==Nt||bt!==gt||Ut!==ut)&&(n.stencilOp(Nt,gt,ut),mt=Nt,bt=gt,Ut=ut)},setLocked:function(Nt){Z=Nt},setClear:function(Nt){Qt!==Nt&&(n.clearStencil(Nt),Qt=Nt)},reset:function(){Z=!1,Ie=null,oe=null,Te=null,Ve=null,mt=null,bt=null,Ut=null,Qt=null}}}const i=new e,s=new t,o=new r,a=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,p=[],m=null,g=!1,y=null,v=null,_=null,S=null,A=null,w=null,I=null,T=new et(0,0,0),R=0,P=!1,b=null,M=null,L=null,H=null,j=null;const Q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ee=!1,K=0;const te=n.getParameter(n.VERSION);te.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(te)[1]),ee=K>=1):te.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(te)[1]),ee=K>=2);let F=null,Y={};const O=n.getParameter(n.SCISSOR_BOX),ae=n.getParameter(n.VIEWPORT),me=new Rn().fromArray(O),Oe=new Rn().fromArray(ae);function ce(Z,Ie,oe,Te){const Ve=new Uint8Array(4),mt=n.createTexture();n.bindTexture(Z,mt),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let bt=0;bt<oe;bt++)Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY?n.texImage3D(Ie,0,n.RGBA,1,1,Te,0,n.RGBA,n.UNSIGNED_BYTE,Ve):n.texImage2D(Ie+bt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ve);return mt}const Se={};Se[n.TEXTURE_2D]=ce(n.TEXTURE_2D,n.TEXTURE_2D,1),Se[n.TEXTURE_CUBE_MAP]=ce(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Se[n.TEXTURE_2D_ARRAY]=ce(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Se[n.TEXTURE_3D]=ce(n.TEXTURE_3D,n.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ae(n.DEPTH_TEST),s.setFunc(Rg),Le(!1),ke(WM),Ae(n.CULL_FACE),he(Ra);function Ae(Z){c[Z]!==!0&&(n.enable(Z),c[Z]=!0)}function Ee(Z){c[Z]!==!1&&(n.disable(Z),c[Z]=!1)}function Qe(Z,Ie){return u[Z]!==Ie?(n.bindFramebuffer(Z,Ie),u[Z]=Ie,Z===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=Ie),Z===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=Ie),!0):!1}function rt(Z,Ie){let oe=p,Te=!1;if(Z){oe=d.get(Ie),oe===void 0&&(oe=[],d.set(Ie,oe));const Ve=Z.textures;if(oe.length!==Ve.length||oe[0]!==n.COLOR_ATTACHMENT0){for(let mt=0,bt=Ve.length;mt<bt;mt++)oe[mt]=n.COLOR_ATTACHMENT0+mt;oe.length=Ve.length,Te=!0}}else oe[0]!==n.BACK&&(oe[0]=n.BACK,Te=!0);Te&&n.drawBuffers(oe)}function tt(Z){return m!==Z?(n.useProgram(Z),m=Z,!0):!1}const q={[oc]:n.FUNC_ADD,[sU]:n.FUNC_SUBTRACT,[oU]:n.FUNC_REVERSE_SUBTRACT};q[aU]=n.MIN,q[lU]=n.MAX;const we={[cU]:n.ZERO,[uU]:n.ONE,[fU]:n.SRC_COLOR,[Mx]:n.SRC_ALPHA,[_U]:n.SRC_ALPHA_SATURATE,[mU]:n.DST_COLOR,[hU]:n.DST_ALPHA,[dU]:n.ONE_MINUS_SRC_COLOR,[Tx]:n.ONE_MINUS_SRC_ALPHA,[gU]:n.ONE_MINUS_DST_COLOR,[pU]:n.ONE_MINUS_DST_ALPHA,[vU]:n.CONSTANT_COLOR,[yU]:n.ONE_MINUS_CONSTANT_COLOR,[xU]:n.CONSTANT_ALPHA,[SU]:n.ONE_MINUS_CONSTANT_ALPHA};function he(Z,Ie,oe,Te,Ve,mt,bt,Ut,Qt,Nt){if(Z===Ra){g===!0&&(Ee(n.BLEND),g=!1);return}if(g===!1&&(Ae(n.BLEND),g=!0),Z!==iU){if(Z!==y||Nt!==P){if((v!==oc||A!==oc)&&(n.blendEquation(n.FUNC_ADD),v=oc,A=oc),Nt)switch(Z){case Zu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case XM:n.blendFunc(n.ONE,n.ONE);break;case jM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case JM:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case Zu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case XM:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case jM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case JM:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}_=null,S=null,w=null,I=null,T.set(0,0,0),R=0,y=Z,P=Nt}return}Ve=Ve||Ie,mt=mt||oe,bt=bt||Te,(Ie!==v||Ve!==A)&&(n.blendEquationSeparate(q[Ie],q[Ve]),v=Ie,A=Ve),(oe!==_||Te!==S||mt!==w||bt!==I)&&(n.blendFuncSeparate(we[oe],we[Te],we[mt],we[bt]),_=oe,S=Te,w=mt,I=bt),(Ut.equals(T)===!1||Qt!==R)&&(n.blendColor(Ut.r,Ut.g,Ut.b,Qt),T.copy(Ut),R=Qt),y=Z,P=!1}function Ce(Z,Ie){Z.side===us?Ee(n.CULL_FACE):Ae(n.CULL_FACE);let oe=Z.side===Zi;Ie&&(oe=!oe),Le(oe),Z.blending===Zu&&Z.transparent===!1?he(Ra):he(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),s.setFunc(Z.depthFunc),s.setTest(Z.depthTest),s.setMask(Z.depthWrite),i.setMask(Z.colorWrite);const Te=Z.stencilWrite;o.setTest(Te),Te&&(o.setMask(Z.stencilWriteMask),o.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),o.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),We(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?Ae(n.SAMPLE_ALPHA_TO_COVERAGE):Ee(n.SAMPLE_ALPHA_TO_COVERAGE)}function Le(Z){b!==Z&&(Z?n.frontFace(n.CW):n.frontFace(n.CCW),b=Z)}function ke(Z){Z!==tU?(Ae(n.CULL_FACE),Z!==M&&(Z===WM?n.cullFace(n.BACK):Z===nU?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ee(n.CULL_FACE),M=Z}function ne(Z){Z!==L&&(ee&&n.lineWidth(Z),L=Z)}function We(Z,Ie,oe){Z?(Ae(n.POLYGON_OFFSET_FILL),(H!==Ie||j!==oe)&&(n.polygonOffset(Ie,oe),H=Ie,j=oe)):Ee(n.POLYGON_OFFSET_FILL)}function je(Z){Z?Ae(n.SCISSOR_TEST):Ee(n.SCISSOR_TEST)}function X(Z){Z===void 0&&(Z=n.TEXTURE0+Q-1),F!==Z&&(n.activeTexture(Z),F=Z)}function k(Z,Ie,oe){oe===void 0&&(F===null?oe=n.TEXTURE0+Q-1:oe=F);let Te=Y[oe];Te===void 0&&(Te={type:void 0,texture:void 0},Y[oe]=Te),(Te.type!==Z||Te.texture!==Ie)&&(F!==oe&&(n.activeTexture(oe),F=oe),n.bindTexture(Z,Ie||Se[Z]),Te.type=Z,Te.texture=Ie)}function fe(){const Z=Y[F];Z!==void 0&&Z.type!==void 0&&(n.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function ge(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function be(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Be(){try{n.texSubImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function st(){try{n.texSubImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Fe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function yt(){try{n.texStorage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ue(){try{n.texStorage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function at(){try{n.texImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function xt(){try{n.texImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Et(Z){me.equals(Z)===!1&&(n.scissor(Z.x,Z.y,Z.z,Z.w),me.copy(Z))}function Ge(Z){Oe.equals(Z)===!1&&(n.viewport(Z.x,Z.y,Z.z,Z.w),Oe.copy(Z))}function re(Z,Ie){let oe=l.get(Ie);oe===void 0&&(oe=new WeakMap,l.set(Ie,oe));let Te=oe.get(Z);Te===void 0&&(Te=n.getUniformBlockIndex(Ie,Z.name),oe.set(Z,Te))}function Re(Z,Ie){const Te=l.get(Ie).get(Z);a.get(Ie)!==Te&&(n.uniformBlockBinding(Ie,Te,Z.__bindingPointIndex),a.set(Ie,Te))}function Ye(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},F=null,Y={},u={},d=new WeakMap,p=[],m=null,g=!1,y=null,v=null,_=null,S=null,A=null,w=null,I=null,T=new et(0,0,0),R=0,P=!1,b=null,M=null,L=null,H=null,j=null,me.set(0,0,n.canvas.width,n.canvas.height),Oe.set(0,0,n.canvas.width,n.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:Ae,disable:Ee,bindFramebuffer:Qe,drawBuffers:rt,useProgram:tt,setBlending:he,setMaterial:Ce,setFlipSided:Le,setCullFace:ke,setLineWidth:ne,setPolygonOffset:We,setScissorTest:je,activeTexture:X,bindTexture:k,unbindTexture:fe,compressedTexImage2D:ge,compressedTexImage3D:be,texImage2D:at,texImage3D:xt,updateUBOMapping:re,uniformBlockBinding:Re,texStorage2D:yt,texStorage3D:Ue,texSubImage2D:Be,texSubImage3D:st,compressedTexSubImage2D:Fe,compressedTexSubImage3D:Je,scissor:Et,viewport:Ge,reset:Ye}}function rq(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new De,u=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(X,k){return m?new OffscreenCanvas(X,k):Fg("canvas")}function y(X,k,fe){let ge=1;const be=je(X);if((be.width>fe||be.height>fe)&&(ge=fe/Math.max(be.width,be.height)),ge<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const Be=Math.floor(ge*be.width),st=Math.floor(ge*be.height);d===void 0&&(d=g(Be,st));const Fe=k?g(Be,st):d;return Fe.width=Be,Fe.height=st,Fe.getContext("2d").drawImage(X,0,0,Be,st),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+be.width+"x"+be.height+") to ("+Be+"x"+st+")."),Fe}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+be.width+"x"+be.height+")."),X;return X}function v(X){return X.generateMipmaps&&X.minFilter!==Gr&&X.minFilter!==mn}function _(X){n.generateMipmap(X)}function S(X,k,fe,ge,be=!1){if(X!==null){if(n[X]!==void 0)return n[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Be=k;if(k===n.RED&&(fe===n.FLOAT&&(Be=n.R32F),fe===n.HALF_FLOAT&&(Be=n.R16F),fe===n.UNSIGNED_BYTE&&(Be=n.R8)),k===n.RED_INTEGER&&(fe===n.UNSIGNED_BYTE&&(Be=n.R8UI),fe===n.UNSIGNED_SHORT&&(Be=n.R16UI),fe===n.UNSIGNED_INT&&(Be=n.R32UI),fe===n.BYTE&&(Be=n.R8I),fe===n.SHORT&&(Be=n.R16I),fe===n.INT&&(Be=n.R32I)),k===n.RG&&(fe===n.FLOAT&&(Be=n.RG32F),fe===n.HALF_FLOAT&&(Be=n.RG16F),fe===n.UNSIGNED_BYTE&&(Be=n.RG8)),k===n.RG_INTEGER&&(fe===n.UNSIGNED_BYTE&&(Be=n.RG8UI),fe===n.UNSIGNED_SHORT&&(Be=n.RG16UI),fe===n.UNSIGNED_INT&&(Be=n.RG32UI),fe===n.BYTE&&(Be=n.RG8I),fe===n.SHORT&&(Be=n.RG16I),fe===n.INT&&(Be=n.RG32I)),k===n.RGB&&fe===n.UNSIGNED_INT_5_9_9_9_REV&&(Be=n.RGB9_E5),k===n.RGBA){const st=be?Dg:Tn.getTransfer(ge);fe===n.FLOAT&&(Be=n.RGBA32F),fe===n.HALF_FLOAT&&(Be=n.RGBA16F),fe===n.UNSIGNED_BYTE&&(Be=st===Un?n.SRGB8_ALPHA8:n.RGBA8),fe===n.UNSIGNED_SHORT_4_4_4_4&&(Be=n.RGBA4),fe===n.UNSIGNED_SHORT_5_5_5_1&&(Be=n.RGB5_A1)}return(Be===n.R16F||Be===n.R32F||Be===n.RG16F||Be===n.RG32F||Be===n.RGBA16F||Be===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Be}function A(X,k){let fe;return X?k===null||k===kc||k===Sf?fe=n.DEPTH24_STENCIL8:k===ar?fe=n.DEPTH32F_STENCIL8:k===Pg&&(fe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===kc||k===Sf?fe=n.DEPTH_COMPONENT24:k===ar?fe=n.DEPTH_COMPONENT32F:k===Pg&&(fe=n.DEPTH_COMPONENT16),fe}function w(X,k){return v(X)===!0||X.isFramebufferTexture&&X.minFilter!==Gr&&X.minFilter!==mn?Math.log2(Math.max(k.width,k.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?k.mipmaps.length:1}function I(X){const k=X.target;k.removeEventListener("dispose",I),R(k),k.isVideoTexture&&u.delete(k)}function T(X){const k=X.target;k.removeEventListener("dispose",T),b(k)}function R(X){const k=r.get(X);if(k.__webglInit===void 0)return;const fe=X.source,ge=p.get(fe);if(ge){const be=ge[k.__cacheKey];be.usedTimes--,be.usedTimes===0&&P(X),Object.keys(ge).length===0&&p.delete(fe)}r.remove(X)}function P(X){const k=r.get(X);n.deleteTexture(k.__webglTexture);const fe=X.source,ge=p.get(fe);delete ge[k.__cacheKey],o.memory.textures--}function b(X){const k=r.get(X);if(X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(k.__webglFramebuffer[ge]))for(let be=0;be<k.__webglFramebuffer[ge].length;be++)n.deleteFramebuffer(k.__webglFramebuffer[ge][be]);else n.deleteFramebuffer(k.__webglFramebuffer[ge]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[ge])}else{if(Array.isArray(k.__webglFramebuffer))for(let ge=0;ge<k.__webglFramebuffer.length;ge++)n.deleteFramebuffer(k.__webglFramebuffer[ge]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let ge=0;ge<k.__webglColorRenderbuffer.length;ge++)k.__webglColorRenderbuffer[ge]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[ge]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const fe=X.textures;for(let ge=0,be=fe.length;ge<be;ge++){const Be=r.get(fe[ge]);Be.__webglTexture&&(n.deleteTexture(Be.__webglTexture),o.memory.textures--),r.remove(fe[ge])}r.remove(X)}let M=0;function L(){M=0}function H(){const X=M;return X>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+i.maxTextures),M+=1,X}function j(X){const k=[];return k.push(X.wrapS),k.push(X.wrapT),k.push(X.wrapR||0),k.push(X.magFilter),k.push(X.minFilter),k.push(X.anisotropy),k.push(X.internalFormat),k.push(X.format),k.push(X.type),k.push(X.generateMipmaps),k.push(X.premultiplyAlpha),k.push(X.flipY),k.push(X.unpackAlignment),k.push(X.colorSpace),k.join()}function Q(X,k){const fe=r.get(X);if(X.isVideoTexture&&ne(X),X.isRenderTargetTexture===!1&&X.version>0&&fe.__version!==X.version){const ge=X.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Oe(fe,X,k);return}}t.bindTexture(n.TEXTURE_2D,fe.__webglTexture,n.TEXTURE0+k)}function ee(X,k){const fe=r.get(X);if(X.version>0&&fe.__version!==X.version){Oe(fe,X,k);return}t.bindTexture(n.TEXTURE_2D_ARRAY,fe.__webglTexture,n.TEXTURE0+k)}function K(X,k){const fe=r.get(X);if(X.version>0&&fe.__version!==X.version){Oe(fe,X,k);return}t.bindTexture(n.TEXTURE_3D,fe.__webglTexture,n.TEXTURE0+k)}function te(X,k){const fe=r.get(X);if(X.version>0&&fe.__version!==X.version){ce(fe,X,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+k)}const F={[Oc]:n.REPEAT,[Er]:n.CLAMP_TO_EDGE,[zh]:n.MIRRORED_REPEAT},Y={[Gr]:n.NEAREST,[AS]:n.NEAREST_MIPMAP_NEAREST,[Ou]:n.NEAREST_MIPMAP_LINEAR,[mn]:n.LINEAR,[yh]:n.LINEAR_MIPMAP_NEAREST,[So]:n.LINEAR_MIPMAP_LINEAR},O={[QU]:n.NEVER,[iz]:n.ALWAYS,[ZU]:n.LESS,[Kb]:n.LEQUAL,[ez]:n.EQUAL,[rz]:n.GEQUAL,[tz]:n.GREATER,[nz]:n.NOTEQUAL};function ae(X,k){if(k.type===ar&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===mn||k.magFilter===yh||k.magFilter===Ou||k.magFilter===So||k.minFilter===mn||k.minFilter===yh||k.minFilter===Ou||k.minFilter===So)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(X,n.TEXTURE_WRAP_S,F[k.wrapS]),n.texParameteri(X,n.TEXTURE_WRAP_T,F[k.wrapT]),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,F[k.wrapR]),n.texParameteri(X,n.TEXTURE_MAG_FILTER,Y[k.magFilter]),n.texParameteri(X,n.TEXTURE_MIN_FILTER,Y[k.minFilter]),k.compareFunction&&(n.texParameteri(X,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(X,n.TEXTURE_COMPARE_FUNC,O[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Gr||k.minFilter!==Ou&&k.minFilter!==So||k.type===ar&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||r.get(k).__currentAnisotropy){const fe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(X,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,i.getMaxAnisotropy())),r.get(k).__currentAnisotropy=k.anisotropy}}}function me(X,k){let fe=!1;X.__webglInit===void 0&&(X.__webglInit=!0,k.addEventListener("dispose",I));const ge=k.source;let be=p.get(ge);be===void 0&&(be={},p.set(ge,be));const Be=j(k);if(Be!==X.__cacheKey){be[Be]===void 0&&(be[Be]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),be[Be].usedTimes++;const st=be[X.__cacheKey];st!==void 0&&(be[X.__cacheKey].usedTimes--,st.usedTimes===0&&P(k)),X.__cacheKey=Be,X.__webglTexture=be[Be].texture}return fe}function Oe(X,k,fe){let ge=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ge=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ge=n.TEXTURE_3D);const be=me(X,k),Be=k.source;t.bindTexture(ge,X.__webglTexture,n.TEXTURE0+fe);const st=r.get(Be);if(Be.version!==st.__version||be===!0){t.activeTexture(n.TEXTURE0+fe);const Fe=Tn.getPrimaries(Tn.workingColorSpace),Je=k.colorSpace===ll?null:Tn.getPrimaries(k.colorSpace),yt=k.colorSpace===ll||Fe===Je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);let Ue=y(k.image,!1,i.maxTextureSize);Ue=We(k,Ue);const at=s.convert(k.format,k.colorSpace),xt=s.convert(k.type);let Et=S(k.internalFormat,at,xt,k.colorSpace,k.isVideoTexture);ae(ge,k);let Ge;const re=k.mipmaps,Re=k.isVideoTexture!==!0,Ye=st.__version===void 0||be===!0,Z=Be.dataReady,Ie=w(k,Ue);if(k.isDepthTexture)Et=A(k.format===Af,k.type),Ye&&(Re?t.texStorage2D(n.TEXTURE_2D,1,Et,Ue.width,Ue.height):t.texImage2D(n.TEXTURE_2D,0,Et,Ue.width,Ue.height,0,at,xt,null));else if(k.isDataTexture)if(re.length>0){Re&&Ye&&t.texStorage2D(n.TEXTURE_2D,Ie,Et,re[0].width,re[0].height);for(let oe=0,Te=re.length;oe<Te;oe++)Ge=re[oe],Re?Z&&t.texSubImage2D(n.TEXTURE_2D,oe,0,0,Ge.width,Ge.height,at,xt,Ge.data):t.texImage2D(n.TEXTURE_2D,oe,Et,Ge.width,Ge.height,0,at,xt,Ge.data);k.generateMipmaps=!1}else Re?(Ye&&t.texStorage2D(n.TEXTURE_2D,Ie,Et,Ue.width,Ue.height),Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ue.width,Ue.height,at,xt,Ue.data)):t.texImage2D(n.TEXTURE_2D,0,Et,Ue.width,Ue.height,0,at,xt,Ue.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Re&&Ye&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ie,Et,re[0].width,re[0].height,Ue.depth);for(let oe=0,Te=re.length;oe<Te;oe++)if(Ge=re[oe],k.format!==Br)if(at!==null)if(Re){if(Z)if(k.layerUpdates.size>0){for(const Ve of k.layerUpdates){const mt=Ge.width*Ge.height;t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,oe,0,0,Ve,Ge.width,Ge.height,1,at,Ge.data.slice(mt*Ve,mt*(Ve+1)),0,0)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,oe,0,0,0,Ge.width,Ge.height,Ue.depth,at,Ge.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,oe,Et,Ge.width,Ge.height,Ue.depth,0,Ge.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Re?Z&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,oe,0,0,0,Ge.width,Ge.height,Ue.depth,at,xt,Ge.data):t.texImage3D(n.TEXTURE_2D_ARRAY,oe,Et,Ge.width,Ge.height,Ue.depth,0,at,xt,Ge.data)}else{Re&&Ye&&t.texStorage2D(n.TEXTURE_2D,Ie,Et,re[0].width,re[0].height);for(let oe=0,Te=re.length;oe<Te;oe++)Ge=re[oe],k.format!==Br?at!==null?Re?Z&&t.compressedTexSubImage2D(n.TEXTURE_2D,oe,0,0,Ge.width,Ge.height,at,Ge.data):t.compressedTexImage2D(n.TEXTURE_2D,oe,Et,Ge.width,Ge.height,0,Ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Re?Z&&t.texSubImage2D(n.TEXTURE_2D,oe,0,0,Ge.width,Ge.height,at,xt,Ge.data):t.texImage2D(n.TEXTURE_2D,oe,Et,Ge.width,Ge.height,0,at,xt,Ge.data)}else if(k.isDataArrayTexture)if(Re){if(Ye&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ie,Et,Ue.width,Ue.height,Ue.depth),Z)if(k.layerUpdates.size>0){let oe;switch(xt){case n.UNSIGNED_BYTE:switch(at){case n.ALPHA:oe=1;break;case n.LUMINANCE:oe=1;break;case n.LUMINANCE_ALPHA:oe=2;break;case n.RGB:oe=3;break;case n.RGBA:oe=4;break;default:throw new Error(`Unknown texel size for format ${at}.`)}break;case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:oe=1;break;default:throw new Error(`Unknown texel size for type ${xt}.`)}const Te=Ue.width*Ue.height*oe;for(const Ve of k.layerUpdates)t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ve,Ue.width,Ue.height,1,at,xt,Ue.data.slice(Te*Ve,Te*(Ve+1)));k.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ue.width,Ue.height,Ue.depth,at,xt,Ue.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Et,Ue.width,Ue.height,Ue.depth,0,at,xt,Ue.data);else if(k.isData3DTexture)Re?(Ye&&t.texStorage3D(n.TEXTURE_3D,Ie,Et,Ue.width,Ue.height,Ue.depth),Z&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ue.width,Ue.height,Ue.depth,at,xt,Ue.data)):t.texImage3D(n.TEXTURE_3D,0,Et,Ue.width,Ue.height,Ue.depth,0,at,xt,Ue.data);else if(k.isFramebufferTexture){if(Ye)if(Re)t.texStorage2D(n.TEXTURE_2D,Ie,Et,Ue.width,Ue.height);else{let oe=Ue.width,Te=Ue.height;for(let Ve=0;Ve<Ie;Ve++)t.texImage2D(n.TEXTURE_2D,Ve,Et,oe,Te,0,at,xt,null),oe>>=1,Te>>=1}}else if(re.length>0){if(Re&&Ye){const oe=je(re[0]);t.texStorage2D(n.TEXTURE_2D,Ie,Et,oe.width,oe.height)}for(let oe=0,Te=re.length;oe<Te;oe++)Ge=re[oe],Re?Z&&t.texSubImage2D(n.TEXTURE_2D,oe,0,0,at,xt,Ge):t.texImage2D(n.TEXTURE_2D,oe,Et,at,xt,Ge);k.generateMipmaps=!1}else if(Re){if(Ye){const oe=je(Ue);t.texStorage2D(n.TEXTURE_2D,Ie,Et,oe.width,oe.height)}Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,at,xt,Ue)}else t.texImage2D(n.TEXTURE_2D,0,Et,at,xt,Ue);v(k)&&_(ge),st.__version=Be.version,k.onUpdate&&k.onUpdate(k)}X.__version=k.version}function ce(X,k,fe){if(k.image.length!==6)return;const ge=me(X,k),be=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+fe);const Be=r.get(be);if(be.version!==Be.__version||ge===!0){t.activeTexture(n.TEXTURE0+fe);const st=Tn.getPrimaries(Tn.workingColorSpace),Fe=k.colorSpace===ll?null:Tn.getPrimaries(k.colorSpace),Je=k.colorSpace===ll||st===Fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);const yt=k.isCompressedTexture||k.image[0].isCompressedTexture,Ue=k.image[0]&&k.image[0].isDataTexture,at=[];for(let Te=0;Te<6;Te++)!yt&&!Ue?at[Te]=y(k.image[Te],!0,i.maxCubemapSize):at[Te]=Ue?k.image[Te].image:k.image[Te],at[Te]=We(k,at[Te]);const xt=at[0],Et=s.convert(k.format,k.colorSpace),Ge=s.convert(k.type),re=S(k.internalFormat,Et,Ge,k.colorSpace),Re=k.isVideoTexture!==!0,Ye=Be.__version===void 0||ge===!0,Z=be.dataReady;let Ie=w(k,xt);ae(n.TEXTURE_CUBE_MAP,k);let oe;if(yt){Re&&Ye&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ie,re,xt.width,xt.height);for(let Te=0;Te<6;Te++){oe=at[Te].mipmaps;for(let Ve=0;Ve<oe.length;Ve++){const mt=oe[Ve];k.format!==Br?Et!==null?Re?Z&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ve,0,0,mt.width,mt.height,Et,mt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ve,re,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Re?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ve,0,0,mt.width,mt.height,Et,Ge,mt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ve,re,mt.width,mt.height,0,Et,Ge,mt.data)}}}else{if(oe=k.mipmaps,Re&&Ye){oe.length>0&&Ie++;const Te=je(at[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ie,re,Te.width,Te.height)}for(let Te=0;Te<6;Te++)if(Ue){Re?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,at[Te].width,at[Te].height,Et,Ge,at[Te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,re,at[Te].width,at[Te].height,0,Et,Ge,at[Te].data);for(let Ve=0;Ve<oe.length;Ve++){const bt=oe[Ve].image[Te].image;Re?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ve+1,0,0,bt.width,bt.height,Et,Ge,bt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ve+1,re,bt.width,bt.height,0,Et,Ge,bt.data)}}else{Re?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Et,Ge,at[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,re,Et,Ge,at[Te]);for(let Ve=0;Ve<oe.length;Ve++){const mt=oe[Ve];Re?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ve+1,0,0,Et,Ge,mt.image[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ve+1,re,Et,Ge,mt.image[Te])}}}v(k)&&_(n.TEXTURE_CUBE_MAP),Be.__version=be.version,k.onUpdate&&k.onUpdate(k)}X.__version=k.version}function Se(X,k,fe,ge,be,Be){const st=s.convert(fe.format,fe.colorSpace),Fe=s.convert(fe.type),Je=S(fe.internalFormat,st,Fe,fe.colorSpace);if(!r.get(k).__hasExternalTextures){const Ue=Math.max(1,k.width>>Be),at=Math.max(1,k.height>>Be);be===n.TEXTURE_3D||be===n.TEXTURE_2D_ARRAY?t.texImage3D(be,Be,Je,Ue,at,k.depth,0,st,Fe,null):t.texImage2D(be,Be,Je,Ue,at,0,st,Fe,null)}t.bindFramebuffer(n.FRAMEBUFFER,X),ke(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ge,be,r.get(fe).__webglTexture,0,Le(k)):(be===n.TEXTURE_2D||be>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&be<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ge,be,r.get(fe).__webglTexture,Be),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(X,k,fe){if(n.bindRenderbuffer(n.RENDERBUFFER,X),k.depthBuffer){const ge=k.depthTexture,be=ge&&ge.isDepthTexture?ge.type:null,Be=A(k.stencilBuffer,be),st=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=Le(k);ke(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,Be,k.width,k.height):fe?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,Be,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Be,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,st,n.RENDERBUFFER,X)}else{const ge=k.textures;for(let be=0;be<ge.length;be++){const Be=ge[be],st=s.convert(Be.format,Be.colorSpace),Fe=s.convert(Be.type),Je=S(Be.internalFormat,st,Fe,Be.colorSpace),yt=Le(k);fe&&ke(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,Je,k.width,k.height):ke(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,yt,Je,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Je,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ee(X,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,X),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),Q(k.depthTexture,0);const ge=r.get(k.depthTexture).__webglTexture,be=Le(k);if(k.depthTexture.format===ef)ke(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ge,0,be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ge,0);else if(k.depthTexture.format===Af)ke(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ge,0,be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ge,0);else throw new Error("Unknown depthTexture format")}function Qe(X){const k=r.get(X),fe=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture&&!k.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");Ee(k.__webglFramebuffer,X)}else if(fe){k.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[ge]),k.__webglDepthbuffer[ge]=n.createRenderbuffer(),Ae(k.__webglDepthbuffer[ge],X,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=n.createRenderbuffer(),Ae(k.__webglDepthbuffer,X,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function rt(X,k,fe){const ge=r.get(X);k!==void 0&&Se(ge.__webglFramebuffer,X,X.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),fe!==void 0&&Qe(X)}function tt(X){const k=X.texture,fe=r.get(X),ge=r.get(k);X.addEventListener("dispose",T);const be=X.textures,Be=X.isWebGLCubeRenderTarget===!0,st=be.length>1;if(st||(ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture()),ge.__version=k.version,o.memory.textures++),Be){fe.__webglFramebuffer=[];for(let Fe=0;Fe<6;Fe++)if(k.mipmaps&&k.mipmaps.length>0){fe.__webglFramebuffer[Fe]=[];for(let Je=0;Je<k.mipmaps.length;Je++)fe.__webglFramebuffer[Fe][Je]=n.createFramebuffer()}else fe.__webglFramebuffer[Fe]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){fe.__webglFramebuffer=[];for(let Fe=0;Fe<k.mipmaps.length;Fe++)fe.__webglFramebuffer[Fe]=n.createFramebuffer()}else fe.__webglFramebuffer=n.createFramebuffer();if(st)for(let Fe=0,Je=be.length;Fe<Je;Fe++){const yt=r.get(be[Fe]);yt.__webglTexture===void 0&&(yt.__webglTexture=n.createTexture(),o.memory.textures++)}if(X.samples>0&&ke(X)===!1){fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,fe.__webglMultisampledFramebuffer);for(let Fe=0;Fe<be.length;Fe++){const Je=be[Fe];fe.__webglColorRenderbuffer[Fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,fe.__webglColorRenderbuffer[Fe]);const yt=s.convert(Je.format,Je.colorSpace),Ue=s.convert(Je.type),at=S(Je.internalFormat,yt,Ue,Je.colorSpace,X.isXRRenderTarget===!0),xt=Le(X);n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,at,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,fe.__webglColorRenderbuffer[Fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),X.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),Ae(fe.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Be){t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture),ae(n.TEXTURE_CUBE_MAP,k);for(let Fe=0;Fe<6;Fe++)if(k.mipmaps&&k.mipmaps.length>0)for(let Je=0;Je<k.mipmaps.length;Je++)Se(fe.__webglFramebuffer[Fe][Je],X,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Je);else Se(fe.__webglFramebuffer[Fe],X,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0);v(k)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(st){for(let Fe=0,Je=be.length;Fe<Je;Fe++){const yt=be[Fe],Ue=r.get(yt);t.bindTexture(n.TEXTURE_2D,Ue.__webglTexture),ae(n.TEXTURE_2D,yt),Se(fe.__webglFramebuffer,X,yt,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,0),v(yt)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let Fe=n.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Fe=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Fe,ge.__webglTexture),ae(Fe,k),k.mipmaps&&k.mipmaps.length>0)for(let Je=0;Je<k.mipmaps.length;Je++)Se(fe.__webglFramebuffer[Je],X,k,n.COLOR_ATTACHMENT0,Fe,Je);else Se(fe.__webglFramebuffer,X,k,n.COLOR_ATTACHMENT0,Fe,0);v(k)&&_(Fe),t.unbindTexture()}X.depthBuffer&&Qe(X)}function q(X){const k=X.textures;for(let fe=0,ge=k.length;fe<ge;fe++){const be=k[fe];if(v(be)){const Be=X.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,st=r.get(be).__webglTexture;t.bindTexture(Be,st),_(Be),t.unbindTexture()}}}const we=[],he=[];function Ce(X){if(X.samples>0){if(ke(X)===!1){const k=X.textures,fe=X.width,ge=X.height;let be=n.COLOR_BUFFER_BIT;const Be=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,st=r.get(X),Fe=k.length>1;if(Fe)for(let Je=0;Je<k.length;Je++)t.bindFramebuffer(n.FRAMEBUFFER,st.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,st.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,st.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,st.__webglFramebuffer);for(let Je=0;Je<k.length;Je++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(be|=n.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(be|=n.STENCIL_BUFFER_BIT)),Fe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,st.__webglColorRenderbuffer[Je]);const yt=r.get(k[Je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,yt,0)}n.blitFramebuffer(0,0,fe,ge,0,0,fe,ge,be,n.NEAREST),l===!0&&(we.length=0,he.length=0,we.push(n.COLOR_ATTACHMENT0+Je),X.depthBuffer&&X.resolveDepthBuffer===!1&&(we.push(Be),he.push(Be),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,he)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,we))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Fe)for(let Je=0;Je<k.length;Je++){t.bindFramebuffer(n.FRAMEBUFFER,st.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,st.__webglColorRenderbuffer[Je]);const yt=r.get(k[Je]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,st.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,yt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,st.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&l){const k=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[k])}}}function Le(X){return Math.min(i.maxSamples,X.samples)}function ke(X){const k=r.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function ne(X){const k=o.render.frame;u.get(X)!==k&&(u.set(X,k),X.update())}function We(X,k){const fe=X.colorSpace,ge=X.format,be=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||fe!==Co&&fe!==ll&&(Tn.getTransfer(fe)===Un?(ge!==Br||be!==Js)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",fe)),k}function je(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(c.width=X.naturalWidth||X.width,c.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(c.width=X.displayWidth,c.height=X.displayHeight):(c.width=X.width,c.height=X.height),c}this.allocateTextureUnit=H,this.resetTextureUnits=L,this.setTexture2D=Q,this.setTexture2DArray=ee,this.setTexture3D=K,this.setTextureCube=te,this.rebindTextures=rt,this.setupRenderTarget=tt,this.updateRenderTargetMipmap=q,this.updateMultisampleRenderTarget=Ce,this.setupDepthRenderbuffer=Qe,this.setupFrameBufferTexture=Se,this.useMultisampledRTT=ke}function xz(n,e){function t(r,i=ll){let s;const o=Tn.getTransfer(i);if(r===Js)return n.UNSIGNED_BYTE;if(r===Gb)return n.UNSIGNED_SHORT_4_4_4_4;if(r===Vb)return n.UNSIGNED_SHORT_5_5_5_1;if(r===FU)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===zb)return n.BYTE;if(r===Hb)return n.SHORT;if(r===Pg)return n.UNSIGNED_SHORT;if(r===ES)return n.INT;if(r===kc)return n.UNSIGNED_INT;if(r===ar)return n.FLOAT;if(r===ti)return n.HALF_FLOAT;if(r===UU)return n.ALPHA;if(r===zU)return n.RGB;if(r===Br)return n.RGBA;if(r===HU)return n.LUMINANCE;if(r===GU)return n.LUMINANCE_ALPHA;if(r===ef)return n.DEPTH_COMPONENT;if(r===Af)return n.DEPTH_STENCIL;if(r===wS)return n.RED;if(r===Wb)return n.RED_INTEGER;if(r===VU)return n.RG;if(r===Xb)return n.RG_INTEGER;if(r===jb)return n.RGBA_INTEGER;if(r===by||r===Ry||r===Iy||r===Py)if(o===Un)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===by)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Ry)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Iy)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Py)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===by)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Ry)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Iy)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Py)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===qM||r===$M||r===QM||r===ZM)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===qM)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===$M)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===QM)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===ZM)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===eT||r===tT||r===nT)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===eT||r===tT)return o===Un?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===nT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===rT||r===iT||r===sT||r===oT||r===aT||r===lT||r===cT||r===uT||r===fT||r===dT||r===hT||r===pT||r===mT||r===gT)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===rT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===iT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===sT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===oT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===aT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===lT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===cT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===uT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===fT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===dT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===hT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===pT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===mT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===gT)return o===Un?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===By||r===_T||r===vT)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===By)return o===Un?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===_T)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===vT)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===WU||r===yT||r===xT||r===ST)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===By)return s.COMPRESSED_RED_RGTC1_EXT;if(r===yT)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===xT)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===ST)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Sf?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class Sz extends jn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Jo extends vn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const iq={type:"move"};class BE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Jo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Jo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new G,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new G),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Jo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new G,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new G),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const v=t.getJointPose(y,r),_=this._getHandJoint(c,y);v!==null&&(_.matrix.fromArray(v.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=v.radius),_.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=u.position.distanceTo(d.position),m=.02,g=.005;c.inputState.pinching&&p>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(iq)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Jo;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const sq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,oq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class aq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new gn,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Es({vertexShader:sq,fragmentShader:oq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new er(new Kc(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class lq extends Fa{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,p=null,m=null,g=null;const y=new aq,v=t.getContextAttributes();let _=null,S=null;const A=[],w=[],I=new De;let T=null;const R=new jn;R.layers.enable(1),R.viewport=new Rn;const P=new jn;P.layers.enable(2),P.viewport=new Rn;const b=[R,P],M=new Sz;M.layers.enable(1),M.layers.enable(2);let L=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let Se=A[ce];return Se===void 0&&(Se=new BE,A[ce]=Se),Se.getTargetRaySpace()},this.getControllerGrip=function(ce){let Se=A[ce];return Se===void 0&&(Se=new BE,A[ce]=Se),Se.getGripSpace()},this.getHand=function(ce){let Se=A[ce];return Se===void 0&&(Se=new BE,A[ce]=Se),Se.getHandSpace()};function j(ce){const Se=w.indexOf(ce.inputSource);if(Se===-1)return;const Ae=A[Se];Ae!==void 0&&(Ae.update(ce.inputSource,ce.frame,c||o),Ae.dispatchEvent({type:ce.type,data:ce.inputSource}))}function Q(){i.removeEventListener("select",j),i.removeEventListener("selectstart",j),i.removeEventListener("selectend",j),i.removeEventListener("squeeze",j),i.removeEventListener("squeezestart",j),i.removeEventListener("squeezeend",j),i.removeEventListener("end",Q),i.removeEventListener("inputsourceschange",ee);for(let ce=0;ce<A.length;ce++){const Se=w[ce];Se!==null&&(w[ce]=null,A[ce].disconnect(Se))}L=null,H=null,y.reset(),e.setRenderTarget(_),m=null,p=null,d=null,i=null,S=null,Oe.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(I.width,I.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){s=ce,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){a=ce,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ce){c=ce},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(ce){if(i=ce,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",j),i.addEventListener("selectstart",j),i.addEventListener("selectend",j),i.addEventListener("squeeze",j),i.addEventListener("squeezestart",j),i.addEventListener("squeezeend",j),i.addEventListener("end",Q),i.addEventListener("inputsourceschange",ee),v.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(I),i.renderState.layers===void 0){const Se={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,Se),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new As(m.framebufferWidth,m.framebufferHeight,{format:Br,type:Js,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let Se=null,Ae=null,Ee=null;v.depth&&(Ee=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Se=v.stencil?Af:ef,Ae=v.stencil?Sf:kc);const Qe={colorFormat:t.RGBA8,depthFormat:Ee,scaleFactor:s};d=new XRWebGLBinding(i,t),p=d.createProjectionLayer(Qe),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new As(p.textureWidth,p.textureHeight,{format:Br,type:Js,depthTexture:new bS(p.textureWidth,p.textureHeight,Ae,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),Oe.setContext(i),Oe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function ee(ce){for(let Se=0;Se<ce.removed.length;Se++){const Ae=ce.removed[Se],Ee=w.indexOf(Ae);Ee>=0&&(w[Ee]=null,A[Ee].disconnect(Ae))}for(let Se=0;Se<ce.added.length;Se++){const Ae=ce.added[Se];let Ee=w.indexOf(Ae);if(Ee===-1){for(let rt=0;rt<A.length;rt++)if(rt>=w.length){w.push(Ae),Ee=rt;break}else if(w[rt]===null){w[rt]=Ae,Ee=rt;break}if(Ee===-1)break}const Qe=A[Ee];Qe&&Qe.connect(Ae)}}const K=new G,te=new G;function F(ce,Se,Ae){K.setFromMatrixPosition(Se.matrixWorld),te.setFromMatrixPosition(Ae.matrixWorld);const Ee=K.distanceTo(te),Qe=Se.projectionMatrix.elements,rt=Ae.projectionMatrix.elements,tt=Qe[14]/(Qe[10]-1),q=Qe[14]/(Qe[10]+1),we=(Qe[9]+1)/Qe[5],he=(Qe[9]-1)/Qe[5],Ce=(Qe[8]-1)/Qe[0],Le=(rt[8]+1)/rt[0],ke=tt*Ce,ne=tt*Le,We=Ee/(-Ce+Le),je=We*-Ce;Se.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(je),ce.translateZ(We),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert();const X=tt+We,k=q+We,fe=ke-je,ge=ne+(Ee-je),be=we*q/k*X,Be=he*q/k*X;ce.projectionMatrix.makePerspective(fe,ge,be,Be,X,k),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}function Y(ce,Se){Se===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(Se.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(i===null)return;y.texture!==null&&(ce.near=y.depthNear,ce.far=y.depthFar),M.near=P.near=R.near=ce.near,M.far=P.far=R.far=ce.far,(L!==M.near||H!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),L=M.near,H=M.far,R.near=L,R.far=H,P.near=L,P.far=H,R.updateProjectionMatrix(),P.updateProjectionMatrix(),ce.updateProjectionMatrix());const Se=ce.parent,Ae=M.cameras;Y(M,Se);for(let Ee=0;Ee<Ae.length;Ee++)Y(Ae[Ee],Se);Ae.length===2?F(M,R,P):M.projectionMatrix.copy(R.projectionMatrix),O(ce,M,Se)};function O(ce,Se,Ae){Ae===null?ce.matrix.copy(Se.matrixWorld):(ce.matrix.copy(Ae.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(Se.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(Se.projectionMatrix),ce.projectionMatrixInverse.copy(Se.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=Vh*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ce){l=ce,p!==null&&(p.fixedFoveation=ce),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ce)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(M)};let ae=null;function me(ce,Se){if(u=Se.getViewerPose(c||o),g=Se,u!==null){const Ae=u.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let Ee=!1;Ae.length!==M.cameras.length&&(M.cameras.length=0,Ee=!0);for(let rt=0;rt<Ae.length;rt++){const tt=Ae[rt];let q=null;if(m!==null)q=m.getViewport(tt);else{const he=d.getViewSubImage(p,tt);q=he.viewport,rt===0&&(e.setRenderTargetTextures(S,he.colorTexture,p.ignoreDepthValues?void 0:he.depthStencilTexture),e.setRenderTarget(S))}let we=b[rt];we===void 0&&(we=new jn,we.layers.enable(rt),we.viewport=new Rn,b[rt]=we),we.matrix.fromArray(tt.transform.matrix),we.matrix.decompose(we.position,we.quaternion,we.scale),we.projectionMatrix.fromArray(tt.projectionMatrix),we.projectionMatrixInverse.copy(we.projectionMatrix).invert(),we.viewport.set(q.x,q.y,q.width,q.height),rt===0&&(M.matrix.copy(we.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),Ee===!0&&M.cameras.push(we)}const Qe=i.enabledFeatures;if(Qe&&Qe.includes("depth-sensing")){const rt=d.getDepthInformation(Ae[0]);rt&&rt.isValid&&rt.texture&&y.init(e,rt,i.renderState)}}for(let Ae=0;Ae<A.length;Ae++){const Ee=w[Ae],Qe=A[Ae];Ee!==null&&Qe!==void 0&&Qe.update(Ee,Se,c||o)}ae&&ae(ce,Se),Se.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Se}),g=null}const Oe=new pz;Oe.setAnimationLoop(me),this.setAnimationLoop=function(ce){ae=ce},this.dispose=function(){}}}const pu=new Ys,cq=new It;function uq(n,e){function t(v,_){v.matrixAutoUpdate===!0&&v.updateMatrix(),_.value.copy(v.matrix)}function r(v,_){_.color.getRGB(v.fogColor.value,fz(n)),_.isFog?(v.fogNear.value=_.near,v.fogFar.value=_.far):_.isFogExp2&&(v.fogDensity.value=_.density)}function i(v,_,S,A,w){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(v,_):_.isMeshToonMaterial?(s(v,_),d(v,_)):_.isMeshPhongMaterial?(s(v,_),u(v,_)):_.isMeshStandardMaterial?(s(v,_),p(v,_),_.isMeshPhysicalMaterial&&m(v,_,w)):_.isMeshMatcapMaterial?(s(v,_),g(v,_)):_.isMeshDepthMaterial?s(v,_):_.isMeshDistanceMaterial?(s(v,_),y(v,_)):_.isMeshNormalMaterial?s(v,_):_.isLineBasicMaterial?(o(v,_),_.isLineDashedMaterial&&a(v,_)):_.isPointsMaterial?l(v,_,S,A):_.isSpriteMaterial?c(v,_):_.isShadowMaterial?(v.color.value.copy(_.color),v.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(v,_){v.opacity.value=_.opacity,_.color&&v.diffuse.value.copy(_.color),_.emissive&&v.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(v.map.value=_.map,t(_.map,v.mapTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,t(_.alphaMap,v.alphaMapTransform)),_.bumpMap&&(v.bumpMap.value=_.bumpMap,t(_.bumpMap,v.bumpMapTransform),v.bumpScale.value=_.bumpScale,_.side===Zi&&(v.bumpScale.value*=-1)),_.normalMap&&(v.normalMap.value=_.normalMap,t(_.normalMap,v.normalMapTransform),v.normalScale.value.copy(_.normalScale),_.side===Zi&&v.normalScale.value.negate()),_.displacementMap&&(v.displacementMap.value=_.displacementMap,t(_.displacementMap,v.displacementMapTransform),v.displacementScale.value=_.displacementScale,v.displacementBias.value=_.displacementBias),_.emissiveMap&&(v.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,v.emissiveMapTransform)),_.specularMap&&(v.specularMap.value=_.specularMap,t(_.specularMap,v.specularMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest);const S=e.get(_),A=S.envMap,w=S.envMapRotation;A&&(v.envMap.value=A,pu.copy(w),pu.x*=-1,pu.y*=-1,pu.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(pu.y*=-1,pu.z*=-1),v.envMapRotation.value.setFromMatrix4(cq.makeRotationFromEuler(pu)),v.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=_.reflectivity,v.ior.value=_.ior,v.refractionRatio.value=_.refractionRatio),_.lightMap&&(v.lightMap.value=_.lightMap,v.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,v.lightMapTransform)),_.aoMap&&(v.aoMap.value=_.aoMap,v.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,v.aoMapTransform))}function o(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,_.map&&(v.map.value=_.map,t(_.map,v.mapTransform))}function a(v,_){v.dashSize.value=_.dashSize,v.totalSize.value=_.dashSize+_.gapSize,v.scale.value=_.scale}function l(v,_,S,A){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.size.value=_.size*S,v.scale.value=A*.5,_.map&&(v.map.value=_.map,t(_.map,v.uvTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,t(_.alphaMap,v.alphaMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest)}function c(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.rotation.value=_.rotation,_.map&&(v.map.value=_.map,t(_.map,v.mapTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,t(_.alphaMap,v.alphaMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest)}function u(v,_){v.specular.value.copy(_.specular),v.shininess.value=Math.max(_.shininess,1e-4)}function d(v,_){_.gradientMap&&(v.gradientMap.value=_.gradientMap)}function p(v,_){v.metalness.value=_.metalness,_.metalnessMap&&(v.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,v.metalnessMapTransform)),v.roughness.value=_.roughness,_.roughnessMap&&(v.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,v.roughnessMapTransform)),_.envMap&&(v.envMapIntensity.value=_.envMapIntensity)}function m(v,_,S){v.ior.value=_.ior,_.sheen>0&&(v.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),v.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(v.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,v.sheenColorMapTransform)),_.sheenRoughnessMap&&(v.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,v.sheenRoughnessMapTransform))),_.clearcoat>0&&(v.clearcoat.value=_.clearcoat,v.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(v.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,v.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(v.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Zi&&v.clearcoatNormalScale.value.negate())),_.dispersion>0&&(v.dispersion.value=_.dispersion),_.iridescence>0&&(v.iridescence.value=_.iridescence,v.iridescenceIOR.value=_.iridescenceIOR,v.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(v.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,v.iridescenceMapTransform)),_.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),_.transmission>0&&(v.transmission.value=_.transmission,v.transmissionSamplerMap.value=S.texture,v.transmissionSamplerSize.value.set(S.width,S.height),_.transmissionMap&&(v.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,v.transmissionMapTransform)),v.thickness.value=_.thickness,_.thicknessMap&&(v.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=_.attenuationDistance,v.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(v.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(v.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=_.specularIntensity,v.specularColor.value.copy(_.specularColor),_.specularColorMap&&(v.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,v.specularColorMapTransform)),_.specularIntensityMap&&(v.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,v.specularIntensityMapTransform))}function g(v,_){_.matcap&&(v.matcap.value=_.matcap)}function y(v,_){const S=e.get(_).light;v.referencePosition.value.setFromMatrixPosition(S.matrixWorld),v.nearDistance.value=S.shadow.camera.near,v.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function fq(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,A){const w=A.program;r.uniformBlockBinding(S,w)}function c(S,A){let w=i[S.id];w===void 0&&(g(S),w=u(S),i[S.id]=w,S.addEventListener("dispose",v));const I=A.program;r.updateUBOMapping(S,I);const T=e.render.frame;s[S.id]!==T&&(p(S),s[S.id]=T)}function u(S){const A=d();S.__bindingPointIndex=A;const w=n.createBuffer(),I=S.__size,T=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,I,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,w),w}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const A=i[S.id],w=S.uniforms,I=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let T=0,R=w.length;T<R;T++){const P=Array.isArray(w[T])?w[T]:[w[T]];for(let b=0,M=P.length;b<M;b++){const L=P[b];if(m(L,T,b,I)===!0){const H=L.__offset,j=Array.isArray(L.value)?L.value:[L.value];let Q=0;for(let ee=0;ee<j.length;ee++){const K=j[ee],te=y(K);typeof K=="number"||typeof K=="boolean"?(L.__data[0]=K,n.bufferSubData(n.UNIFORM_BUFFER,H+Q,L.__data)):K.isMatrix3?(L.__data[0]=K.elements[0],L.__data[1]=K.elements[1],L.__data[2]=K.elements[2],L.__data[3]=0,L.__data[4]=K.elements[3],L.__data[5]=K.elements[4],L.__data[6]=K.elements[5],L.__data[7]=0,L.__data[8]=K.elements[6],L.__data[9]=K.elements[7],L.__data[10]=K.elements[8],L.__data[11]=0):(K.toArray(L.__data,Q),Q+=te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,L.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,A,w,I){const T=S.value,R=A+"_"+w;if(I[R]===void 0)return typeof T=="number"||typeof T=="boolean"?I[R]=T:I[R]=T.clone(),!0;{const P=I[R];if(typeof T=="number"||typeof T=="boolean"){if(P!==T)return I[R]=T,!0}else if(P.equals(T)===!1)return P.copy(T),!0}return!1}function g(S){const A=S.uniforms;let w=0;const I=16;for(let R=0,P=A.length;R<P;R++){const b=Array.isArray(A[R])?A[R]:[A[R]];for(let M=0,L=b.length;M<L;M++){const H=b[M],j=Array.isArray(H.value)?H.value:[H.value];for(let Q=0,ee=j.length;Q<ee;Q++){const K=j[Q],te=y(K),F=w%I;F!==0&&I-F<te.boundary&&(w+=I-F),H.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=w,w+=te.storage}}}const T=w%I;return T>0&&(w+=I-T),S.__size=w,S.__cache={},this}function y(S){const A={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(A.boundary=4,A.storage=4):S.isVector2?(A.boundary=8,A.storage=8):S.isVector3||S.isColor?(A.boundary=16,A.storage=12):S.isVector4?(A.boundary=16,A.storage=16):S.isMatrix3?(A.boundary=48,A.storage=48):S.isMatrix4?(A.boundary=64,A.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),A}function v(S){const A=S.target;A.removeEventListener("dispose",v);const w=o.indexOf(A.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(i[A.id]),delete i[A.id],delete s[A.id]}function _(){for(const S in i)n.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:c,dispose:_}}class sR{constructor(e={}){const{canvas:t=az(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),g=new Int32Array(4);let y=null,v=null;const _=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ls,this.toneMapping=Ia,this.toneMappingExposure=1;const A=this;let w=!1,I=0,T=0,R=null,P=-1,b=null;const M=new Rn,L=new Rn;let H=null;const j=new et(0);let Q=0,ee=t.width,K=t.height,te=1,F=null,Y=null;const O=new Rn(0,0,ee,K),ae=new Rn(0,0,ee,K);let me=!1;const Oe=new f_;let ce=!1,Se=!1;const Ae=new It,Ee=new G,Qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let rt=!1;function tt(){return R===null?te:1}let q=r;function we(B,U){return t.getContext(B,U)}try{const B={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${lp}`),t.addEventListener("webglcontextlost",Ie,!1),t.addEventListener("webglcontextrestored",oe,!1),t.addEventListener("webglcontextcreationerror",Te,!1),q===null){const U="webgl2";if(q=we(U,B),q===null)throw we(U)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let he,Ce,Le,ke,ne,We,je,X,k,fe,ge,be,Be,st,Fe,Je,yt,Ue,at,xt,Et,Ge,re,Re;function Ye(){he=new wY(q),he.init(),Ge=new xz(q,he),Ce=new vY(q,he,e,Ge),Le=new nq(q),ke=new CY(q),ne=new WK,We=new rq(q,he,Le,ne,Ce,Ge,ke),je=new xY(A),X=new EY(A),k=new Lj(q),re=new gY(q,k),fe=new MY(q,k,ke,re),ge=new RY(q,fe,k,ke),at=new bY(q,Ce,We),Je=new yY(ne),be=new VK(A,je,X,he,Ce,re,Je),Be=new uq(A,ne),st=new jK,Fe=new QK(he),Ue=new mY(A,je,X,Le,ge,p,l),yt=new tq(A,ge,Ce),Re=new fq(q,ke,Ce,Le),xt=new _Y(q,he,ke),Et=new TY(q,he,ke),ke.programs=be.programs,A.capabilities=Ce,A.extensions=he,A.properties=ne,A.renderLists=st,A.shadowMap=yt,A.state=Le,A.info=ke}Ye();const Z=new lq(A,q);this.xr=Z,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const B=he.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=he.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(B){B!==void 0&&(te=B,this.setSize(ee,K,!1))},this.getSize=function(B){return B.set(ee,K)},this.setSize=function(B,U,V=!0){if(Z.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ee=B,K=U,t.width=Math.floor(B*te),t.height=Math.floor(U*te),V===!0&&(t.style.width=B+"px",t.style.height=U+"px"),this.setViewport(0,0,B,U)},this.getDrawingBufferSize=function(B){return B.set(ee*te,K*te).floor()},this.setDrawingBufferSize=function(B,U,V){ee=B,K=U,te=V,t.width=Math.floor(B*V),t.height=Math.floor(U*V),this.setViewport(0,0,B,U)},this.getCurrentViewport=function(B){return B.copy(M)},this.getViewport=function(B){return B.copy(O)},this.setViewport=function(B,U,V,W){B.isVector4?O.set(B.x,B.y,B.z,B.w):O.set(B,U,V,W),Le.viewport(M.copy(O).multiplyScalar(te).round())},this.getScissor=function(B){return B.copy(ae)},this.setScissor=function(B,U,V,W){B.isVector4?ae.set(B.x,B.y,B.z,B.w):ae.set(B,U,V,W),Le.scissor(L.copy(ae).multiplyScalar(te).round())},this.getScissorTest=function(){return me},this.setScissorTest=function(B){Le.setScissorTest(me=B)},this.setOpaqueSort=function(B){F=B},this.setTransparentSort=function(B){Y=B},this.getClearColor=function(B){return B.copy(Ue.getClearColor())},this.setClearColor=function(){Ue.setClearColor.apply(Ue,arguments)},this.getClearAlpha=function(){return Ue.getClearAlpha()},this.setClearAlpha=function(){Ue.setClearAlpha.apply(Ue,arguments)},this.clear=function(B=!0,U=!0,V=!0){let W=0;if(B){let J=!1;if(R!==null){const le=R.texture.format;J=le===jb||le===Xb||le===Wb}if(J){const le=R.texture.type,pe=le===Js||le===kc||le===Pg||le===Sf||le===Gb||le===Vb,_e=Ue.getClearColor(),xe=Ue.getClearAlpha(),ve=_e.r,Xe=_e.g,Ne=_e.b;pe?(m[0]=ve,m[1]=Xe,m[2]=Ne,m[3]=xe,q.clearBufferuiv(q.COLOR,0,m)):(g[0]=ve,g[1]=Xe,g[2]=Ne,g[3]=xe,q.clearBufferiv(q.COLOR,0,g))}else W|=q.COLOR_BUFFER_BIT}U&&(W|=q.DEPTH_BUFFER_BIT),V&&(W|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(W)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ie,!1),t.removeEventListener("webglcontextrestored",oe,!1),t.removeEventListener("webglcontextcreationerror",Te,!1),st.dispose(),Fe.dispose(),ne.dispose(),je.dispose(),X.dispose(),ge.dispose(),re.dispose(),Re.dispose(),be.dispose(),Z.dispose(),Z.removeEventListener("sessionstart",gt),Z.removeEventListener("sessionend",ut),zt.stop()};function Ie(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function oe(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const B=ke.autoReset,U=yt.enabled,V=yt.autoUpdate,W=yt.needsUpdate,J=yt.type;Ye(),ke.autoReset=B,yt.enabled=U,yt.autoUpdate=V,yt.needsUpdate=W,yt.type=J}function Te(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function Ve(B){const U=B.target;U.removeEventListener("dispose",Ve),mt(U)}function mt(B){bt(B),ne.remove(B)}function bt(B){const U=ne.get(B).programs;U!==void 0&&(U.forEach(function(V){be.releaseProgram(V)}),B.isShaderMaterial&&be.releaseShaderCache(B))}this.renderBufferDirect=function(B,U,V,W,J,le){U===null&&(U=Qe);const pe=J.isMesh&&J.matrixWorld.determinant()<0,_e=Bn(B,U,V,W,J);Le.setMaterial(W,pe);let xe=V.index,ve=1;if(W.wireframe===!0){if(xe=fe.getWireframeAttribute(V),xe===void 0)return;ve=2}const Xe=V.drawRange,Ne=V.attributes.position;let qe=Xe.start*ve,ft=(Xe.start+Xe.count)*ve;le!==null&&(qe=Math.max(qe,le.start*ve),ft=Math.min(ft,(le.start+le.count)*ve)),xe!==null?(qe=Math.max(qe,0),ft=Math.min(ft,xe.count)):Ne!=null&&(qe=Math.max(qe,0),ft=Math.min(ft,Ne.count));const lt=ft-qe;if(lt<0||lt===1/0)return;re.setup(J,W,_e,V,xe);let Mt,ct=xt;if(xe!==null&&(Mt=k.get(xe),ct=Et,ct.setIndex(Mt)),J.isMesh)W.wireframe===!0?(Le.setLineWidth(W.wireframeLinewidth*tt()),ct.setMode(q.LINES)):ct.setMode(q.TRIANGLES);else if(J.isLine){let ze=W.linewidth;ze===void 0&&(ze=1),Le.setLineWidth(ze*tt()),J.isLineSegments?ct.setMode(q.LINES):J.isLineLoop?ct.setMode(q.LINE_LOOP):ct.setMode(q.LINE_STRIP)}else J.isPoints?ct.setMode(q.POINTS):J.isSprite&&ct.setMode(q.TRIANGLES);if(J.isBatchedMesh)J._multiDrawInstances!==null?ct.renderMultiDrawInstances(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount,J._multiDrawInstances):ct.renderMultiDraw(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount);else if(J.isInstancedMesh)ct.renderInstances(qe,lt,J.count);else if(V.isInstancedBufferGeometry){const ze=V._maxInstanceCount!==void 0?V._maxInstanceCount:1/0,_t=Math.min(V.instanceCount,ze);ct.renderInstances(qe,lt,_t)}else ct.render(qe,lt)};function Ut(B,U,V){B.transparent===!0&&B.side===us&&B.forceSinglePass===!1?(B.side=Zi,B.needsUpdate=!0,Pt(B,U,V),B.side=Oa,B.needsUpdate=!0,Pt(B,U,V),B.side=us):Pt(B,U,V)}this.compile=function(B,U,V=null){V===null&&(V=B),v=Fe.get(V),v.init(U),S.push(v),V.traverseVisible(function(J){J.isLight&&J.layers.test(U.layers)&&(v.pushLight(J),J.castShadow&&v.pushShadow(J))}),B!==V&&B.traverseVisible(function(J){J.isLight&&J.layers.test(U.layers)&&(v.pushLight(J),J.castShadow&&v.pushShadow(J))}),v.setupLights();const W=new Set;return B.traverse(function(J){const le=J.material;if(le)if(Array.isArray(le))for(let pe=0;pe<le.length;pe++){const _e=le[pe];Ut(_e,V,J),W.add(_e)}else Ut(le,V,J),W.add(le)}),S.pop(),v=null,W},this.compileAsync=function(B,U,V=null){const W=this.compile(B,U,V);return new Promise(J=>{function le(){if(W.forEach(function(pe){ne.get(pe).currentProgram.isReady()&&W.delete(pe)}),W.size===0){J(B);return}setTimeout(le,10)}he.get("KHR_parallel_shader_compile")!==null?le():setTimeout(le,10)})};let Qt=null;function Nt(B){Qt&&Qt(B)}function gt(){zt.stop()}function ut(){zt.start()}const zt=new pz;zt.setAnimationLoop(Nt),typeof self<"u"&&zt.setContext(self),this.setAnimationLoop=function(B){Qt=B,Z.setAnimationLoop(B),B===null?zt.stop():zt.start()},Z.addEventListener("sessionstart",gt),Z.addEventListener("sessionend",ut),this.render=function(B,U){if(U!==void 0&&U.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),U.parent===null&&U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),Z.enabled===!0&&Z.isPresenting===!0&&(Z.cameraAutoUpdate===!0&&Z.updateCamera(U),U=Z.getCamera()),B.isScene===!0&&B.onBeforeRender(A,B,U,R),v=Fe.get(B,S.length),v.init(U),S.push(v),Ae.multiplyMatrices(U.projectionMatrix,U.matrixWorldInverse),Oe.setFromProjectionMatrix(Ae),Se=this.localClippingEnabled,ce=Je.init(this.clippingPlanes,Se),y=st.get(B,_.length),y.init(),_.push(y),Z.enabled===!0&&Z.isPresenting===!0){const le=A.xr.getDepthSensingMesh();le!==null&&Ze(le,U,-1/0,A.sortObjects)}Ze(B,U,0,A.sortObjects),y.finish(),A.sortObjects===!0&&y.sort(F,Y),rt=Z.enabled===!1||Z.isPresenting===!1||Z.hasDepthSensing()===!1,rt&&Ue.addToRenderList(y,B),this.info.render.frame++,ce===!0&&Je.beginShadows();const V=v.state.shadowsArray;yt.render(V,B,U),ce===!0&&Je.endShadows(),this.info.autoReset===!0&&this.info.reset();const W=y.opaque,J=y.transmissive;if(v.setupLights(),U.isArrayCamera){const le=U.cameras;if(J.length>0)for(let pe=0,_e=le.length;pe<_e;pe++){const xe=le[pe];St(W,J,B,xe)}rt&&Ue.render(B);for(let pe=0,_e=le.length;pe<_e;pe++){const xe=le[pe];Dt(y,B,xe,xe.viewport)}}else J.length>0&&St(W,J,B,U),rt&&Ue.render(B),Dt(y,B,U);R!==null&&(We.updateMultisampleRenderTarget(R),We.updateRenderTargetMipmap(R)),B.isScene===!0&&B.onAfterRender(A,B,U),re.resetDefaultState(),P=-1,b=null,S.pop(),S.length>0?(v=S[S.length-1],ce===!0&&Je.setGlobalState(A.clippingPlanes,v.state.camera)):v=null,_.pop(),_.length>0?y=_[_.length-1]:y=null};function Ze(B,U,V,W){if(B.visible===!1)return;if(B.layers.test(U.layers)){if(B.isGroup)V=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(U);else if(B.isLight)v.pushLight(B),B.castShadow&&v.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||Oe.intersectsSprite(B)){W&&Ee.setFromMatrixPosition(B.matrixWorld).applyMatrix4(Ae);const pe=ge.update(B),_e=B.material;_e.visible&&y.push(B,pe,_e,V,Ee.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||Oe.intersectsObject(B))){const pe=ge.update(B),_e=B.material;if(W&&(B.boundingSphere!==void 0?(B.boundingSphere===null&&B.computeBoundingSphere(),Ee.copy(B.boundingSphere.center)):(pe.boundingSphere===null&&pe.computeBoundingSphere(),Ee.copy(pe.boundingSphere.center)),Ee.applyMatrix4(B.matrixWorld).applyMatrix4(Ae)),Array.isArray(_e)){const xe=pe.groups;for(let ve=0,Xe=xe.length;ve<Xe;ve++){const Ne=xe[ve],qe=_e[Ne.materialIndex];qe&&qe.visible&&y.push(B,pe,qe,V,Ee.z,Ne)}}else _e.visible&&y.push(B,pe,_e,V,Ee.z,null)}}const le=B.children;for(let pe=0,_e=le.length;pe<_e;pe++)Ze(le[pe],U,V,W)}function Dt(B,U,V,W){const J=B.opaque,le=B.transmissive,pe=B.transparent;v.setupLightsView(V),ce===!0&&Je.setGlobalState(A.clippingPlanes,V),W&&Le.viewport(M.copy(W)),J.length>0&&Rt(J,U,V),le.length>0&&Rt(le,U,V),pe.length>0&&Rt(pe,U,V),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function St(B,U,V,W){if((V.isScene===!0?V.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[W.id]===void 0&&(v.state.transmissionRenderTarget[W.id]=new As(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")||he.has("EXT_color_buffer_float")?ti:Js,minFilter:So,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Tn.workingColorSpace}));const le=v.state.transmissionRenderTarget[W.id],pe=W.viewport||M;le.setSize(pe.z,pe.w);const _e=A.getRenderTarget();A.setRenderTarget(le),A.getClearColor(j),Q=A.getClearAlpha(),Q<1&&A.setClearColor(16777215,.5),rt?Ue.render(V):A.clear();const xe=A.toneMapping;A.toneMapping=Ia;const ve=W.viewport;if(W.viewport!==void 0&&(W.viewport=void 0),v.setupLightsView(W),ce===!0&&Je.setGlobalState(A.clippingPlanes,W),Rt(B,V,W),We.updateMultisampleRenderTarget(le),We.updateRenderTargetMipmap(le),he.has("WEBGL_multisampled_render_to_texture")===!1){let Xe=!1;for(let Ne=0,qe=U.length;Ne<qe;Ne++){const ft=U[Ne],lt=ft.object,Mt=ft.geometry,ct=ft.material,ze=ft.group;if(ct.side===us&&lt.layers.test(W.layers)){const _t=ct.side;ct.side=Zi,ct.needsUpdate=!0,bn(lt,V,W,Mt,ct,ze),ct.side=_t,ct.needsUpdate=!0,Xe=!0}}Xe===!0&&(We.updateMultisampleRenderTarget(le),We.updateRenderTargetMipmap(le))}A.setRenderTarget(_e),A.setClearColor(j,Q),ve!==void 0&&(W.viewport=ve),A.toneMapping=xe}function Rt(B,U,V){const W=U.isScene===!0?U.overrideMaterial:null;for(let J=0,le=B.length;J<le;J++){const pe=B[J],_e=pe.object,xe=pe.geometry,ve=W===null?pe.material:W,Xe=pe.group;_e.layers.test(V.layers)&&bn(_e,U,V,xe,ve,Xe)}}function bn(B,U,V,W,J,le){B.onBeforeRender(A,U,V,W,J,le),B.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),J.onBeforeRender(A,U,V,W,B,le),J.transparent===!0&&J.side===us&&J.forceSinglePass===!1?(J.side=Zi,J.needsUpdate=!0,A.renderBufferDirect(V,U,W,J,B,le),J.side=Oa,J.needsUpdate=!0,A.renderBufferDirect(V,U,W,J,B,le),J.side=us):A.renderBufferDirect(V,U,W,J,B,le),B.onAfterRender(A,U,V,W,J,le)}function Pt(B,U,V){U.isScene!==!0&&(U=Qe);const W=ne.get(B),J=v.state.lights,le=v.state.shadowsArray,pe=J.state.version,_e=be.getParameters(B,J.state,le,U,V),xe=be.getProgramCacheKey(_e);let ve=W.programs;W.environment=B.isMeshStandardMaterial?U.environment:null,W.fog=U.fog,W.envMap=(B.isMeshStandardMaterial?X:je).get(B.envMap||W.environment),W.envMapRotation=W.environment!==null&&B.envMap===null?U.environmentRotation:B.envMapRotation,ve===void 0&&(B.addEventListener("dispose",Ve),ve=new Map,W.programs=ve);let Xe=ve.get(xe);if(Xe!==void 0){if(W.currentProgram===Xe&&W.lightsStateVersion===pe)return Kn(B,_e),Xe}else _e.uniforms=be.getUniforms(B),B.onBuild(V,_e,A),B.onBeforeCompile(_e,A),Xe=be.acquireProgram(_e,xe),ve.set(xe,Xe),W.uniforms=_e.uniforms;const Ne=W.uniforms;return(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(Ne.clippingPlanes=Je.uniform),Kn(B,_e),W.needsLights=z(B),W.lightsStateVersion=pe,W.needsLights&&(Ne.ambientLightColor.value=J.state.ambient,Ne.lightProbe.value=J.state.probe,Ne.directionalLights.value=J.state.directional,Ne.directionalLightShadows.value=J.state.directionalShadow,Ne.spotLights.value=J.state.spot,Ne.spotLightShadows.value=J.state.spotShadow,Ne.rectAreaLights.value=J.state.rectArea,Ne.ltc_1.value=J.state.rectAreaLTC1,Ne.ltc_2.value=J.state.rectAreaLTC2,Ne.pointLights.value=J.state.point,Ne.pointLightShadows.value=J.state.pointShadow,Ne.hemisphereLights.value=J.state.hemi,Ne.directionalShadowMap.value=J.state.directionalShadowMap,Ne.directionalShadowMatrix.value=J.state.directionalShadowMatrix,Ne.spotShadowMap.value=J.state.spotShadowMap,Ne.spotLightMatrix.value=J.state.spotLightMatrix,Ne.spotLightMap.value=J.state.spotLightMap,Ne.pointShadowMap.value=J.state.pointShadowMap,Ne.pointShadowMatrix.value=J.state.pointShadowMatrix),W.currentProgram=Xe,W.uniformsList=null,Xe}function At(B){if(B.uniformsList===null){const U=B.currentProgram.getUniforms();B.uniformsList=Ly.seqWithValue(U.seq,B.uniforms)}return B.uniformsList}function Kn(B,U){const V=ne.get(B);V.outputColorSpace=U.outputColorSpace,V.batching=U.batching,V.batchingColor=U.batchingColor,V.instancing=U.instancing,V.instancingColor=U.instancingColor,V.instancingMorph=U.instancingMorph,V.skinning=U.skinning,V.morphTargets=U.morphTargets,V.morphNormals=U.morphNormals,V.morphColors=U.morphColors,V.morphTargetsCount=U.morphTargetsCount,V.numClippingPlanes=U.numClippingPlanes,V.numIntersection=U.numClipIntersection,V.vertexAlphas=U.vertexAlphas,V.vertexTangents=U.vertexTangents,V.toneMapping=U.toneMapping}function Bn(B,U,V,W,J){U.isScene!==!0&&(U=Qe),We.resetTextureUnits();const le=U.fog,pe=W.isMeshStandardMaterial?U.environment:null,_e=R===null?A.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:Co,xe=(W.isMeshStandardMaterial?X:je).get(W.envMap||pe),ve=W.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,Xe=!!V.attributes.tangent&&(!!W.normalMap||W.anisotropy>0),Ne=!!V.morphAttributes.position,qe=!!V.morphAttributes.normal,ft=!!V.morphAttributes.color;let lt=Ia;W.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(lt=A.toneMapping);const Mt=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,ct=Mt!==void 0?Mt.length:0,ze=ne.get(W),_t=v.state.lights;if(ce===!0&&(Se===!0||B!==b)){const An=B===b&&W.id===P;Je.setState(W,B,An)}let vt=!1;W.version===ze.__version?(ze.needsLights&&ze.lightsStateVersion!==_t.state.version||ze.outputColorSpace!==_e||J.isBatchedMesh&&ze.batching===!1||!J.isBatchedMesh&&ze.batching===!0||J.isBatchedMesh&&ze.batchingColor===!0&&J.colorTexture===null||J.isBatchedMesh&&ze.batchingColor===!1&&J.colorTexture!==null||J.isInstancedMesh&&ze.instancing===!1||!J.isInstancedMesh&&ze.instancing===!0||J.isSkinnedMesh&&ze.skinning===!1||!J.isSkinnedMesh&&ze.skinning===!0||J.isInstancedMesh&&ze.instancingColor===!0&&J.instanceColor===null||J.isInstancedMesh&&ze.instancingColor===!1&&J.instanceColor!==null||J.isInstancedMesh&&ze.instancingMorph===!0&&J.morphTexture===null||J.isInstancedMesh&&ze.instancingMorph===!1&&J.morphTexture!==null||ze.envMap!==xe||W.fog===!0&&ze.fog!==le||ze.numClippingPlanes!==void 0&&(ze.numClippingPlanes!==Je.numPlanes||ze.numIntersection!==Je.numIntersection)||ze.vertexAlphas!==ve||ze.vertexTangents!==Xe||ze.morphTargets!==Ne||ze.morphNormals!==qe||ze.morphColors!==ft||ze.toneMapping!==lt||ze.morphTargetsCount!==ct)&&(vt=!0):(vt=!0,ze.__version=W.version);let tn=ze.currentProgram;vt===!0&&(tn=Pt(W,U,J));let Ot=!1,un=!1,Mr=!1;const Yt=tn.getUniforms(),kn=ze.uniforms;if(Le.useProgram(tn.program)&&(Ot=!0,un=!0,Mr=!0),W.id!==P&&(P=W.id,un=!0),Ot||b!==B){Yt.setValue(q,"projectionMatrix",B.projectionMatrix),Yt.setValue(q,"viewMatrix",B.matrixWorldInverse);const An=Yt.map.cameraPosition;An!==void 0&&An.setValue(q,Ee.setFromMatrixPosition(B.matrixWorld)),Ce.logarithmicDepthBuffer&&Yt.setValue(q,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),(W.isMeshPhongMaterial||W.isMeshToonMaterial||W.isMeshLambertMaterial||W.isMeshBasicMaterial||W.isMeshStandardMaterial||W.isShaderMaterial)&&Yt.setValue(q,"isOrthographic",B.isOrthographicCamera===!0),b!==B&&(b=B,un=!0,Mr=!0)}if(J.isSkinnedMesh){Yt.setOptional(q,J,"bindMatrix"),Yt.setOptional(q,J,"bindMatrixInverse");const An=J.skeleton;An&&(An.boneTexture===null&&An.computeBoneTexture(),Yt.setValue(q,"boneTexture",An.boneTexture,We))}J.isBatchedMesh&&(Yt.setOptional(q,J,"batchingTexture"),Yt.setValue(q,"batchingTexture",J._matricesTexture,We),Yt.setOptional(q,J,"batchingColorTexture"),J._colorsTexture!==null&&Yt.setValue(q,"batchingColorTexture",J._colorsTexture,We));const fn=V.morphAttributes;if((fn.position!==void 0||fn.normal!==void 0||fn.color!==void 0)&&at.update(J,V,tn),(un||ze.receiveShadow!==J.receiveShadow)&&(ze.receiveShadow=J.receiveShadow,Yt.setValue(q,"receiveShadow",J.receiveShadow)),W.isMeshGouraudMaterial&&W.envMap!==null&&(kn.envMap.value=xe,kn.flipEnvMap.value=xe.isCubeTexture&&xe.isRenderTargetTexture===!1?-1:1),W.isMeshStandardMaterial&&W.envMap===null&&U.environment!==null&&(kn.envMapIntensity.value=U.environmentIntensity),un&&(Yt.setValue(q,"toneMappingExposure",A.toneMappingExposure),ze.needsLights&&N(kn,Mr),le&&W.fog===!0&&Be.refreshFogUniforms(kn,le),Be.refreshMaterialUniforms(kn,W,te,K,v.state.transmissionRenderTarget[B.id]),Ly.upload(q,At(ze),kn,We)),W.isShaderMaterial&&W.uniformsNeedUpdate===!0&&(Ly.upload(q,At(ze),kn,We),W.uniformsNeedUpdate=!1),W.isSpriteMaterial&&Yt.setValue(q,"center",J.center),Yt.setValue(q,"modelViewMatrix",J.modelViewMatrix),Yt.setValue(q,"normalMatrix",J.normalMatrix),Yt.setValue(q,"modelMatrix",J.matrixWorld),W.isShaderMaterial||W.isRawShaderMaterial){const An=W.uniformsGroups;for(let xn=0,dn=An.length;xn<dn;xn++){const Dn=An[xn];Re.update(Dn,tn),Re.bind(Dn,tn)}}return tn}function N(B,U){B.ambientLightColor.needsUpdate=U,B.lightProbe.needsUpdate=U,B.directionalLights.needsUpdate=U,B.directionalLightShadows.needsUpdate=U,B.pointLights.needsUpdate=U,B.pointLightShadows.needsUpdate=U,B.spotLights.needsUpdate=U,B.spotLightShadows.needsUpdate=U,B.rectAreaLights.needsUpdate=U,B.hemisphereLights.needsUpdate=U}function z(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(B,U,V){ne.get(B.texture).__webglTexture=U,ne.get(B.depthTexture).__webglTexture=V;const W=ne.get(B);W.__hasExternalTextures=!0,W.__autoAllocateDepthBuffer=V===void 0,W.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),W.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(B,U){const V=ne.get(B);V.__webglFramebuffer=U,V.__useDefaultFramebuffer=U===void 0},this.setRenderTarget=function(B,U=0,V=0){R=B,I=U,T=V;let W=!0,J=null,le=!1,pe=!1;if(B){const xe=ne.get(B);xe.__useDefaultFramebuffer!==void 0?(Le.bindFramebuffer(q.FRAMEBUFFER,null),W=!1):xe.__webglFramebuffer===void 0?We.setupRenderTarget(B):xe.__hasExternalTextures&&We.rebindTextures(B,ne.get(B.texture).__webglTexture,ne.get(B.depthTexture).__webglTexture);const ve=B.texture;(ve.isData3DTexture||ve.isDataArrayTexture||ve.isCompressedArrayTexture)&&(pe=!0);const Xe=ne.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Array.isArray(Xe[U])?J=Xe[U][V]:J=Xe[U],le=!0):B.samples>0&&We.useMultisampledRTT(B)===!1?J=ne.get(B).__webglMultisampledFramebuffer:Array.isArray(Xe)?J=Xe[V]:J=Xe,M.copy(B.viewport),L.copy(B.scissor),H=B.scissorTest}else M.copy(O).multiplyScalar(te).floor(),L.copy(ae).multiplyScalar(te).floor(),H=me;if(Le.bindFramebuffer(q.FRAMEBUFFER,J)&&W&&Le.drawBuffers(B,J),Le.viewport(M),Le.scissor(L),Le.setScissorTest(H),le){const xe=ne.get(B.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+U,xe.__webglTexture,V)}else if(pe){const xe=ne.get(B.texture),ve=U||0;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,xe.__webglTexture,V||0,ve)}P=-1},this.readRenderTargetPixels=function(B,U,V,W,J,le,pe){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _e=ne.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&pe!==void 0&&(_e=_e[pe]),_e){Le.bindFramebuffer(q.FRAMEBUFFER,_e);try{const xe=B.texture,ve=xe.format,Xe=xe.type;if(!Ce.textureFormatReadable(ve)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ce.textureTypeReadable(Xe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}U>=0&&U<=B.width-W&&V>=0&&V<=B.height-J&&q.readPixels(U,V,W,J,Ge.convert(ve),Ge.convert(Xe),le)}finally{const xe=R!==null?ne.get(R).__webglFramebuffer:null;Le.bindFramebuffer(q.FRAMEBUFFER,xe)}}},this.readRenderTargetPixelsAsync=async function(B,U,V,W,J,le,pe){if(!(B&&B.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let _e=ne.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&pe!==void 0&&(_e=_e[pe]),_e){Le.bindFramebuffer(q.FRAMEBUFFER,_e);try{const xe=B.texture,ve=xe.format,Xe=xe.type;if(!Ce.textureFormatReadable(ve))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ce.textureTypeReadable(Xe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(U>=0&&U<=B.width-W&&V>=0&&V<=B.height-J){const Ne=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,Ne),q.bufferData(q.PIXEL_PACK_BUFFER,le.byteLength,q.STREAM_READ),q.readPixels(U,V,W,J,Ge.convert(ve),Ge.convert(Xe),0),q.flush();const qe=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);await oj(q,qe,4);try{q.bindBuffer(q.PIXEL_PACK_BUFFER,Ne),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,le)}finally{q.deleteBuffer(Ne),q.deleteSync(qe)}return le}}finally{const xe=R!==null?ne.get(R).__webglFramebuffer:null;Le.bindFramebuffer(q.FRAMEBUFFER,xe)}}},this.copyFramebufferToTexture=function(B,U=null,V=0){B.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),U=arguments[0]||null,B=arguments[1]);const W=Math.pow(2,-V),J=Math.floor(B.image.width*W),le=Math.floor(B.image.height*W),pe=U!==null?U.x:0,_e=U!==null?U.y:0;We.setTexture2D(B,0),q.copyTexSubImage2D(q.TEXTURE_2D,V,0,0,pe,_e,J,le),Le.unbindTexture()},this.copyTextureToTexture=function(B,U,V=null,W=null,J=0){B.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),W=arguments[0]||null,B=arguments[1],U=arguments[2],J=arguments[3]||0,V=null);let le,pe,_e,xe,ve,Xe;V!==null?(le=V.max.x-V.min.x,pe=V.max.y-V.min.y,_e=V.min.x,xe=V.min.y):(le=B.image.width,pe=B.image.height,_e=0,xe=0),W!==null?(ve=W.x,Xe=W.y):(ve=0,Xe=0);const Ne=Ge.convert(U.format),qe=Ge.convert(U.type);We.setTexture2D(U,0),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,U.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,U.unpackAlignment);const ft=q.getParameter(q.UNPACK_ROW_LENGTH),lt=q.getParameter(q.UNPACK_IMAGE_HEIGHT),Mt=q.getParameter(q.UNPACK_SKIP_PIXELS),ct=q.getParameter(q.UNPACK_SKIP_ROWS),ze=q.getParameter(q.UNPACK_SKIP_IMAGES),_t=B.isCompressedTexture?B.mipmaps[J]:B.image;q.pixelStorei(q.UNPACK_ROW_LENGTH,_t.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,_t.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,_e),q.pixelStorei(q.UNPACK_SKIP_ROWS,xe),B.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,J,ve,Xe,le,pe,Ne,qe,_t.data):B.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,J,ve,Xe,_t.width,_t.height,Ne,_t.data):q.texSubImage2D(q.TEXTURE_2D,J,ve,Xe,Ne,qe,_t),q.pixelStorei(q.UNPACK_ROW_LENGTH,ft),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,lt),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Mt),q.pixelStorei(q.UNPACK_SKIP_ROWS,ct),q.pixelStorei(q.UNPACK_SKIP_IMAGES,ze),J===0&&U.generateMipmaps&&q.generateMipmap(q.TEXTURE_2D),Le.unbindTexture()},this.copyTextureToTexture3D=function(B,U,V=null,W=null,J=0){B.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),V=arguments[0]||null,W=arguments[1]||null,B=arguments[2],U=arguments[3],J=arguments[4]||0);let le,pe,_e,xe,ve,Xe,Ne,qe,ft;const lt=B.isCompressedTexture?B.mipmaps[J]:B.image;V!==null?(le=V.max.x-V.min.x,pe=V.max.y-V.min.y,_e=V.max.z-V.min.z,xe=V.min.x,ve=V.min.y,Xe=V.min.z):(le=lt.width,pe=lt.height,_e=lt.depth,xe=0,ve=0,Xe=0),W!==null?(Ne=W.x,qe=W.y,ft=W.z):(Ne=0,qe=0,ft=0);const Mt=Ge.convert(U.format),ct=Ge.convert(U.type);let ze;if(U.isData3DTexture)We.setTexture3D(U,0),ze=q.TEXTURE_3D;else if(U.isDataArrayTexture||U.isCompressedArrayTexture)We.setTexture2DArray(U,0),ze=q.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,U.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,U.unpackAlignment);const _t=q.getParameter(q.UNPACK_ROW_LENGTH),vt=q.getParameter(q.UNPACK_IMAGE_HEIGHT),tn=q.getParameter(q.UNPACK_SKIP_PIXELS),Ot=q.getParameter(q.UNPACK_SKIP_ROWS),un=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,lt.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,lt.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,xe),q.pixelStorei(q.UNPACK_SKIP_ROWS,ve),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Xe),B.isDataTexture||B.isData3DTexture?q.texSubImage3D(ze,J,Ne,qe,ft,le,pe,_e,Mt,ct,lt.data):U.isCompressedArrayTexture?q.compressedTexSubImage3D(ze,J,Ne,qe,ft,le,pe,_e,Mt,lt.data):q.texSubImage3D(ze,J,Ne,qe,ft,le,pe,_e,Mt,ct,lt),q.pixelStorei(q.UNPACK_ROW_LENGTH,_t),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,vt),q.pixelStorei(q.UNPACK_SKIP_PIXELS,tn),q.pixelStorei(q.UNPACK_SKIP_ROWS,Ot),q.pixelStorei(q.UNPACK_SKIP_IMAGES,un),J===0&&U.generateMipmaps&&q.generateMipmap(ze),Le.unbindTexture()},this.initRenderTarget=function(B){ne.get(B).__webglFramebuffer===void 0&&We.setupRenderTarget(B)},this.initTexture=function(B){B.isCubeTexture?We.setTextureCube(B,0):B.isData3DTexture?We.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?We.setTexture2DArray(B,0):We.setTexture2D(B,0),Le.unbindTexture()},this.resetState=function(){I=0,T=0,R=null,Le.reset(),re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Aa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===TS?"display-p3":"srgb",t.unpackColorSpace=Tn.workingColorSpace===l_?"display-p3":"srgb"}}class IS{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new et(e),this.density=t}clone(){return new IS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class PS{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new et(e),this.near=t,this.far=r}clone(){return new PS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Ef extends vn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ys,this.environmentIntensity=1,this.environmentRotation=new Ys,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class d_{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Og,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ws()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return $b("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ws()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ws()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fi=new G;class Fc{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Fi.fromBufferAttribute(this,t),Fi.applyMatrix4(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Fi.fromBufferAttribute(this,t),Fi.applyNormalMatrix(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Fi.fromBufferAttribute(this,t),Fi.transformDirection(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Yi(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Xt(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Yi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Yi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Yi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Yi(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xt(t,this.array),r=Xt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xt(t,this.array),r=Xt(r,this.array),i=Xt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xt(t,this.array),r=Xt(r,this.array),i=Xt(i,this.array),s=Xt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new yn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Fc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class oR extends Dr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Td;const Qp=new G,Cd=new G,bd=new G,Rd=new De,Zp=new De,Az=new It,uv=new G,em=new G,fv=new G,bL=new De,DE=new De,RL=new De;class Ez extends vn{constructor(e=new oR){if(super(),this.isSprite=!0,this.type="Sprite",Td===void 0){Td=new Vt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new d_(t,5);Td.setIndex([0,1,2,0,2,3]),Td.setAttribute("position",new Fc(r,3,0,!1)),Td.setAttribute("uv",new Fc(r,2,3,!1))}this.geometry=Td,this.material=e,this.center=new De(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Cd.setFromMatrixScale(this.matrixWorld),Az.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Cd.multiplyScalar(-bd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;dv(uv.set(-.5,-.5,0),bd,o,Cd,i,s),dv(em.set(.5,-.5,0),bd,o,Cd,i,s),dv(fv.set(.5,.5,0),bd,o,Cd,i,s),bL.set(0,0),DE.set(1,0),RL.set(1,1);let a=e.ray.intersectTriangle(uv,em,fv,!1,Qp);if(a===null&&(dv(em.set(-.5,.5,0),bd,o,Cd,i,s),DE.set(0,1),a=e.ray.intersectTriangle(uv,fv,em,!1,Qp),a===null))return;const l=e.ray.origin.distanceTo(Qp);l<e.near||l>e.far||t.push({distance:l,point:Qp.clone(),uv:Os.getInterpolation(Qp,uv,em,fv,bL,DE,RL,new De),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function dv(n,e,t,r,i,s){Rd.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Zp.x=s*Rd.x-i*Rd.y,Zp.y=i*Rd.x+s*Rd.y):Zp.copy(Rd),n.copy(e),n.x+=Zp.x,n.y+=Zp.y,n.applyMatrix4(Az)}const hv=new G,IL=new G;class wz extends vn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){hv.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(hv);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){hv.setFromMatrixPosition(e.matrixWorld),IL.setFromMatrixPosition(this.matrixWorld);const r=hv.distanceTo(IL)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const PL=new G,BL=new Rn,DL=new Rn,dq=new G,LL=new It,pv=new G,LE=new di,NL=new It,NE=new Uf;class aR extends er{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=YM,this.bindMatrix=new It,this.bindMatrixInverse=new It,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Pi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,pv),this.boundingBox.expandByPoint(pv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new di),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,pv),this.boundingSphere.expandByPoint(pv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),LE.copy(this.boundingSphere),LE.applyMatrix4(i),e.ray.intersectsSphere(LE)!==!1&&(NL.copy(i).invert(),NE.copy(e.ray).applyMatrix4(NL),!(this.boundingBox!==null&&NE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,NE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Rn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===YM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===kU?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;BL.fromBufferAttribute(i.attributes.skinIndex,e),DL.fromBufferAttribute(i.attributes.skinWeight,e),PL.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=DL.getComponent(s);if(o!==0){const a=BL.getComponent(s);LL.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(dq.copy(PL).applyMatrix4(LL),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class BS extends vn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Pa extends gn{constructor(e=null,t=1,r=1,i,s,o,a,l,c=Gr,u=Gr,d,p){super(null,o,a,l,c,u,i,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const OL=new It,hq=new It;class h_{constructor(e=[],t=[]){this.uuid=Ws(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new It)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new It;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:hq;OL.multiplyMatrices(a,t[s]),OL.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new h_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Pa(t,e,e,Br,ar);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new BS),this.bones.push(o),this.boneInverses.push(new It().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class wf extends yn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Id=new It,kL=new It,mv=[],FL=new Pi,pq=new It,tm=new er,nm=new di;class lR extends er{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new wf(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,pq)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Pi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Id),FL.copy(e.boundingBox).applyMatrix4(Id),this.boundingBox.union(FL)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new di),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Id),nm.copy(e.boundingSphere).applyMatrix4(Id),this.boundingSphere.union(nm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(tm.geometry=this.geometry,tm.material=this.material,tm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),nm.copy(this.boundingSphere),nm.applyMatrix4(r),e.ray.intersectsSphere(nm)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Id),kL.multiplyMatrices(r,Id),tm.matrixWorld=kL,tm.raycast(e,mv);for(let o=0,a=mv.length;o<a;o++){const l=mv[o];l.instanceId=s,l.object=this,t.push(l)}mv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new wf(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Pa(new Float32Array(i*this.count),i,this.count,wS,ar));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<r.length;c++)o+=r[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function mq(n,e){return n.z-e.z}function gq(n,e){return e.z-n.z}class _q{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Pd="batchId",jl=new It,OE=new It,vq=new It,yq=new et(1,1,1),UL=new It,kE=new f_,gv=new Pi,mu=new di,rm=new G,zL=new G,xq=new G,FE=new _q,wi=new er,_v=[];function Sq(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class Mz extends er{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new Vt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture(),this._colorsTexture=null}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Pa(t,e,e,Br,ar);this._matricesTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxGeometryCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Pa(t,e,e,Br,ar);r.colorSpace=Tn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:d}=l,p=new c.constructor(r*u),m=new yn(p,u,d);t.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new yn(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(Pd,new yn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Pd))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Pd}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===Pd)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pi);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,jl),this.getBoundingBoxAt(i,gv).applyMatrix4(jl),t.union(gv))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new di);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,jl),this.getBoundingSphereAt(i,mu).applyMatrix4(jl),t.union(mu))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,p=this._active,m=this._matricesTexture,g=this._matricesTexture.image.data,y=this._colorsTexture;d.push(!0),p.push(!0);const v=this._geometryCount;this._geometryCount++,vq.toArray(g,v*16),m.needsUpdate=!0,y!==null&&(yq.toArray(y.image.data,v*4),y.needsUpdate=!0),o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Pi,sphereInitialized:!1,sphere:new di});const _=this.geometry.getAttribute(Pd);for(let S=0;S<i.vertexCount;S++)_.setX(i.vertexStart+S,v);return _.needsUpdate=!0,this.setGeometryAt(v,e),v}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){if(m===Pd)continue;const g=t.getAttribute(m),y=r.getAttribute(m);Sq(g,y,l);const v=g.itemSize;for(let _=g.count,S=c;_<S;_++){const A=l+_;for(let w=0;w<v;w++)y.setComponent(A,w,0)}y.needsUpdate=!0,y.addUpdateRange(l*v,c*v)}if(i){const m=a.indexStart;for(let g=0;g<o.count;g++)s.setX(m+g,l+o.getX(g));for(let g=o.count,y=a.indexCount;g<y;g++)s.setX(m+g,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,t){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=t,e}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,d=c.start+c.count;u<d;u++){let p=u;a&&(p=a.getX(p)),s.expandByPoint(rm.fromBufferAttribute(l,p))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,gv),gv.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let d=c.start,p=c.start+c.count;d<p;d++){let m=d;a&&(m=a.getX(m)),rm.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(rm))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const r=this._active,i=this._colorsTexture,s=this._colorsTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const r=this._active,i=this._colorsTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;wi.material=this.material,wi.geometry.index=l.index,wi.geometry.attributes=l.attributes,wi.geometry.boundingBox===null&&(wi.geometry.boundingBox=new Pi),wi.geometry.boundingSphere===null&&(wi.geometry.boundingSphere=new di);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];wi.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,wi.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,wi.geometry.boundingBox),this.getBoundingSphereAt(c,wi.geometry.boundingSphere),wi.raycast(e,_v);for(let d=0,p=_v.length;d<p;d++){const m=_v[d];m.object=this,m.batchId=c,t.push(m)}_v.length=0}wi.material=null,wi.geometry.index=null,wi.geometry.attributes={},wi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,u=this._multiDrawStarts,d=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(UL.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),kE.setFromProjectionMatrix(UL,e.coordinateSystem));let g=0;if(this.sortObjects){OE.copy(this.matrixWorld).invert(),rm.setFromMatrixPosition(r.matrixWorld).applyMatrix4(OE),zL.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(OE);for(let _=0,S=c.length;_<S;_++)if(c[_]&&l[_]){this.getMatrixAt(_,jl),this.getBoundingSphereAt(_,mu).applyMatrix4(jl);let A=!1;if(m&&(A=!kE.intersectsSphere(mu)),!A){const w=xq.subVectors(mu.center,rm).dot(zL);FE.push(p[_],w)}}const y=FE.list,v=this.customSort;v===null?y.sort(s.transparent?gq:mq):v.call(this,y,r);for(let _=0,S=y.length;_<S;_++){const A=y[_];u[g]=A.start*a,d[g]=A.count,g++}FE.reset()}else for(let y=0,v=c.length;y<v;y++)if(c[y]&&l[y]){let _=!1;if(m&&(this.getMatrixAt(y,jl),this.getBoundingSphereAt(y,mu).applyMatrix4(jl),_=!kE.intersectsSphere(mu)),!_){const S=p[y];u[g]=S.start*a,d[g]=S.count,g++}}this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Li extends Dr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const bx=new G,Rx=new G,HL=new It,im=new Uf,vv=new di,UE=new G,GL=new G;class Ml extends vn{constructor(e=new Vt,t=new Li){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)bx.fromBufferAttribute(t,i-1),Rx.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=bx.distanceTo(Rx);e.setAttribute("lineDistance",new wt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),vv.copy(r.boundingSphere),vv.applyMatrix4(i),vv.radius+=s,e.ray.intersectsSphere(vv)===!1)return;HL.copy(i).invert(),im.copy(e.ray).applyMatrix4(HL);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,p=r.attributes.position;if(u!==null){const m=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let y=m,v=g-1;y<v;y+=c){const _=u.getX(y),S=u.getX(y+1),A=yv(this,e,im,l,_,S);A&&t.push(A)}if(this.isLineLoop){const y=u.getX(g-1),v=u.getX(m),_=yv(this,e,im,l,y,v);_&&t.push(_)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let y=m,v=g-1;y<v;y+=c){const _=yv(this,e,im,l,y,y+1);_&&t.push(_)}if(this.isLineLoop){const y=yv(this,e,im,l,g-1,m);y&&t.push(y)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function yv(n,e,t,r,i,s){const o=n.geometry.attributes.position;if(bx.fromBufferAttribute(o,i),Rx.fromBufferAttribute(o,s),t.distanceSqToSegment(bx,Rx,UE,GL)>r)return;UE.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(UE);if(!(l<e.near||l>e.far))return{distance:l,point:GL.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,object:n}}const VL=new G,WL=new G;class Zo extends Ml{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)VL.fromBufferAttribute(t,i),WL.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+VL.distanceTo(WL);e.setAttribute("lineDistance",new wt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class cR extends Ml{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class DS extends Dr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const XL=new It,TT=new Uf,xv=new di,Sv=new G;class uR extends vn{constructor(e=new Vt,t=new DS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),xv.copy(r.boundingSphere),xv.applyMatrix4(i),xv.radius+=s,e.ray.intersectsSphere(xv)===!1)return;XL.copy(i).invert(),TT.copy(e.ray).applyMatrix4(XL);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let g=p,y=m;g<y;g++){const v=c.getX(g);Sv.fromBufferAttribute(d,v),jL(Sv,v,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let g=p,y=m;g<y;g++)Sv.fromBufferAttribute(d,g),jL(Sv,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function jL(n,e,t,r,i,s,o){const a=TT.distanceSqToPoint(n);if(a<t){const l=new G;TT.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Aq extends gn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:mn,this.magFilter=s!==void 0?s:mn,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Eq extends gn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Gr,this.minFilter=Gr,this.generateMipmaps=!1,this.needsUpdate=!0}}class LS extends gn{constructor(e,t,r,i,s,o,a,l,c,u,d,p){super(null,o,a,l,c,u,i,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class wq extends LS{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Er,this.layerUpdates=new Set}addLayerUpdates(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Mq extends LS{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,ka),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Tq extends gn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ea{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(o-u)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new De:new G);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new G,i=[],s=[],o=[],a=new G,l=new It;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new G)}s[0]=new G,o[0]=new G;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(gr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(gr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class NS extends ea{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new De){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*d+this.aX,c=p*d+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Tz extends NS{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function fR(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+d)+(l-a)/d;p*=u,m*=u,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Av=new G,zE=new fR,HE=new fR,GE=new fR;class Cz extends ea{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new G){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(Av.subVectors(i[0],i[1]).add(i[0]),c=Av);const d=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(Av.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=Av),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(p),m),v=Math.pow(p.distanceToSquared(u),m);y<1e-4&&(y=1),g<1e-4&&(g=y),v<1e-4&&(v=y),zE.initNonuniformCatmullRom(c.x,d.x,p.x,u.x,g,y,v),HE.initNonuniformCatmullRom(c.y,d.y,p.y,u.y,g,y,v),GE.initNonuniformCatmullRom(c.z,d.z,p.z,u.z,g,y,v)}else this.curveType==="catmullrom"&&(zE.initCatmullRom(c.x,d.x,p.x,u.x,this.tension),HE.initCatmullRom(c.y,d.y,p.y,u.y,this.tension),GE.initCatmullRom(c.z,d.z,p.z,u.z,this.tension));return r.set(zE.calc(l),HE.calc(l),GE.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new G().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function JL(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Cq(n,e){const t=1-n;return t*t*e}function bq(n,e){return 2*(1-n)*n*e}function Rq(n,e){return n*n*e}function Gm(n,e,t,r){return Cq(n,e)+bq(n,t)+Rq(n,r)}function Iq(n,e){const t=1-n;return t*t*t*e}function Pq(n,e){const t=1-n;return 3*t*t*n*e}function Bq(n,e){return 3*(1-n)*n*n*e}function Dq(n,e){return n*n*n*e}function Vm(n,e,t,r,i){return Iq(n,e)+Pq(n,t)+Bq(n,r)+Dq(n,i)}class dR extends ea{constructor(e=new De,t=new De,r=new De,i=new De){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new De){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vm(e,i.x,s.x,o.x,a.x),Vm(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class bz extends ea{constructor(e=new G,t=new G,r=new G,i=new G){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new G){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vm(e,i.x,s.x,o.x,a.x),Vm(e,i.y,s.y,o.y,a.y),Vm(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hR extends ea{constructor(e=new De,t=new De){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new De){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new De){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Rz extends ea{constructor(e=new G,t=new G){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new G){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new G){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pR extends ea{constructor(e=new De,t=new De,r=new De){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new De){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Gm(e,i.x,s.x,o.x),Gm(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mR extends ea{constructor(e=new G,t=new G,r=new G){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new G){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Gm(e,i.x,s.x,o.x),Gm(e,i.y,s.y,o.y),Gm(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gR extends ea{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new De){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(JL(a,l.x,c.x,u.x,d.x),JL(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new De().fromArray(i))}return this}}var Ix=Object.freeze({__proto__:null,ArcCurve:Tz,CatmullRomCurve3:Cz,CubicBezierCurve:dR,CubicBezierCurve3:bz,EllipseCurve:NS,LineCurve:hR,LineCurve3:Rz,QuadraticBezierCurve:pR,QuadraticBezierCurve3:mR,SplineCurve:gR});class Iz extends ea{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Ix[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new Ix[i.type]().fromJSON(i))}return this}}class Ug extends Iz{constructor(e){super(),this.type="Path",this.currentPoint=new De,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new hR(this.currentPoint.clone(),new De(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new pR(this.currentPoint.clone(),new De(e,t),new De(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new dR(this.currentPoint.clone(),new De(e,t),new De(r,i),new De(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new gR(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new NS(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class p_ extends Vt{constructor(e=[new De(0,-.5),new De(.5,0),new De(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=gr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,d=new G,p=new De,m=new G,g=new G,y=new G;let v=0,_=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:v=e[S+1].x-e[S].x,_=e[S+1].y-e[S].y,m.x=_*1,m.y=-v,m.z=_*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:v=e[S+1].x-e[S].x,_=e[S+1].y-e[S].y,m.x=_*1,m.y=-v,m.z=_*0,g.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(g)}for(let S=0;S<=t;S++){const A=r+S*u*i,w=Math.sin(A),I=Math.cos(A);for(let T=0;T<=e.length-1;T++){d.x=e[T].x*w,d.y=e[T].y,d.z=e[T].x*I,o.push(d.x,d.y,d.z),p.x=S/t,p.y=T/(e.length-1),a.push(p.x,p.y);const R=l[3*T+0]*w,P=l[3*T+1],b=l[3*T+0]*I;c.push(R,P,b)}}for(let S=0;S<t;S++)for(let A=0;A<e.length-1;A++){const w=A+S*e.length,I=w,T=w+e.length,R=w+e.length+1,P=w+1;s.push(I,T,P),s.push(R,P,T)}this.setIndex(s),this.setAttribute("position",new wt(o,3)),this.setAttribute("uv",new wt(a,2)),this.setAttribute("normal",new wt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new p_(e.points,e.segments,e.phiStart,e.phiLength)}}class OS extends p_{constructor(e=1,t=1,r=4,i=8){const s=new Ug;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new OS(e.radius,e.length,e.capSegments,e.radialSegments)}}class kS extends Vt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new G,u=new De;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=r+d/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new wt(o,3)),this.setAttribute("normal",new wt(a,3)),this.setAttribute("uv",new wt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class fp extends Vt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],p=[],m=[];let g=0;const y=[],v=r/2;let _=0;S(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(u),this.setAttribute("position",new wt(d,3)),this.setAttribute("normal",new wt(p,3)),this.setAttribute("uv",new wt(m,2));function S(){const w=new G,I=new G;let T=0;const R=(t-e)/r;for(let P=0;P<=s;P++){const b=[],M=P/s,L=M*(t-e)+e;for(let H=0;H<=i;H++){const j=H/i,Q=j*l+a,ee=Math.sin(Q),K=Math.cos(Q);I.x=L*ee,I.y=-M*r+v,I.z=L*K,d.push(I.x,I.y,I.z),w.set(ee,R,K).normalize(),p.push(w.x,w.y,w.z),m.push(j,1-M),b.push(g++)}y.push(b)}for(let P=0;P<i;P++)for(let b=0;b<s;b++){const M=y[b][P],L=y[b+1][P],H=y[b+1][P+1],j=y[b][P+1];u.push(M,L,j),u.push(L,H,j),T+=6}c.addGroup(_,T,0),_+=T}function A(w){const I=g,T=new De,R=new G;let P=0;const b=w===!0?e:t,M=w===!0?1:-1;for(let H=1;H<=i;H++)d.push(0,v*M,0),p.push(0,M,0),m.push(.5,.5),g++;const L=g;for(let H=0;H<=i;H++){const Q=H/i*l+a,ee=Math.cos(Q),K=Math.sin(Q);R.x=b*K,R.y=v*M,R.z=b*ee,d.push(R.x,R.y,R.z),p.push(0,M,0),T.x=ee*.5+.5,T.y=K*.5*M+.5,m.push(T.x,T.y),g++}for(let H=0;H<i;H++){const j=I+H,Q=L+H;w===!0?u.push(Q,Q+1,j):u.push(Q+1,Q,j),P+=3}c.addGroup(_,P,w===!0?1:2),_+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class FS extends fp{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new FS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qc extends Vt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new wt(s,3)),this.setAttribute("normal",new wt(s.slice(),3)),this.setAttribute("uv",new wt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const A=new G,w=new G,I=new G;for(let T=0;T<t.length;T+=3)m(t[T+0],A),m(t[T+1],w),m(t[T+2],I),l(A,w,I,S)}function l(S,A,w,I){const T=I+1,R=[];for(let P=0;P<=T;P++){R[P]=[];const b=S.clone().lerp(w,P/T),M=A.clone().lerp(w,P/T),L=T-P;for(let H=0;H<=L;H++)H===0&&P===T?R[P][H]=b:R[P][H]=b.clone().lerp(M,H/L)}for(let P=0;P<T;P++)for(let b=0;b<2*(T-P)-1;b++){const M=Math.floor(b/2);b%2===0?(p(R[P][M+1]),p(R[P+1][M]),p(R[P][M])):(p(R[P][M+1]),p(R[P+1][M+1]),p(R[P+1][M]))}}function c(S){const A=new G;for(let w=0;w<s.length;w+=3)A.x=s[w+0],A.y=s[w+1],A.z=s[w+2],A.normalize().multiplyScalar(S),s[w+0]=A.x,s[w+1]=A.y,s[w+2]=A.z}function u(){const S=new G;for(let A=0;A<s.length;A+=3){S.x=s[A+0],S.y=s[A+1],S.z=s[A+2];const w=v(S)/2/Math.PI+.5,I=_(S)/Math.PI+.5;o.push(w,1-I)}g(),d()}function d(){for(let S=0;S<o.length;S+=6){const A=o[S+0],w=o[S+2],I=o[S+4],T=Math.max(A,w,I),R=Math.min(A,w,I);T>.9&&R<.1&&(A<.2&&(o[S+0]+=1),w<.2&&(o[S+2]+=1),I<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,A){const w=S*3;A.x=e[w+0],A.y=e[w+1],A.z=e[w+2]}function g(){const S=new G,A=new G,w=new G,I=new G,T=new De,R=new De,P=new De;for(let b=0,M=0;b<s.length;b+=9,M+=6){S.set(s[b+0],s[b+1],s[b+2]),A.set(s[b+3],s[b+4],s[b+5]),w.set(s[b+6],s[b+7],s[b+8]),T.set(o[M+0],o[M+1]),R.set(o[M+2],o[M+3]),P.set(o[M+4],o[M+5]),I.copy(S).add(A).add(w).divideScalar(3);const L=v(I);y(T,M+0,S,L),y(R,M+2,A,L),y(P,M+4,w,L)}}function y(S,A,w,I){I<0&&S.x===1&&(o[A]=S.x-1),w.x===0&&w.z===0&&(o[A]=I/2/Math.PI+.5)}function v(S){return Math.atan2(S.z,-S.x)}function _(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qc(e.vertices,e.indices,e.radius,e.details)}}class US extends qc{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new US(e.radius,e.detail)}}const Ev=new G,wv=new G,VE=new G,Mv=new Os;class Pz extends Vt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(tf*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:y,b:v,c:_}=Mv;if(y.fromBufferAttribute(a,c[0]),v.fromBufferAttribute(a,c[1]),_.fromBufferAttribute(a,c[2]),Mv.getNormal(VE),d[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,d[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let S=0;S<3;S++){const A=(S+1)%3,w=d[S],I=d[A],T=Mv[u[S]],R=Mv[u[A]],P=`${w}_${I}`,b=`${I}_${w}`;b in p&&p[b]?(VE.dot(p[b].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(R.x,R.y,R.z)),p[b]=null):P in p||(p[P]={index0:c[S],index1:c[A],normal:VE.clone()})}}for(const g in p)if(p[g]){const{index0:y,index1:v}=p[g];Ev.fromBufferAttribute(a,y),wv.fromBufferAttribute(a,v),m.push(Ev.x,Ev.y,Ev.z),m.push(wv.x,wv.y,wv.z)}this.setAttribute("position",new wt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class rf extends Ug{constructor(e){super(e),this.uuid=Ws(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Ug().fromJSON(i))}return this}}const Lq={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=Bz(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,p,m;if(r&&(s=Uq(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<i;g+=t)d=n[g],p=n[g+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return zg(s,o,t,a,l,m,0),o}};function Bz(n,e,t,r,i){let s,o;if(i===qq(n,e,t,r)>0)for(s=e;s<t;s+=r)o=YL(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=YL(s,n[s],n[s+1],o);return o&&zS(o,o.next)&&(Gg(o),o=o.next),o}function Mf(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(zS(t,t.next)||or(t.prev,t,t.next)===0)){if(Gg(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function zg(n,e,t,r,i,s,o){if(!n)return;!o&&s&&Wq(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Oq(n,r,i,s):Nq(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Gg(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=kq(Mf(n),e,t),zg(n,e,t,r,i,s,2)):o===2&&Fq(n,e,t,r,i,s):zg(Mf(n),e,t,r,i,s,1);break}}}function Nq(n){const e=n.prev,t=n,r=n.next;if(or(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let g=r.next;for(;g!==e;){if(g.x>=u&&g.x<=p&&g.y>=d&&g.y<=m&&rh(i,a,s,l,o,c,g.x,g.y)&&or(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Oq(n,e,t,r){const i=n.prev,s=n,o=n.next;if(or(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,g=u<d?u<p?u:p:d<p?d:p,y=a>l?a>c?a:c:l>c?l:c,v=u>d?u>p?u:p:d>p?d:p,_=CT(m,g,e,t,r),S=CT(y,v,e,t,r);let A=n.prevZ,w=n.nextZ;for(;A&&A.z>=_&&w&&w.z<=S;){if(A.x>=m&&A.x<=y&&A.y>=g&&A.y<=v&&A!==i&&A!==o&&rh(a,u,l,d,c,p,A.x,A.y)&&or(A.prev,A,A.next)>=0||(A=A.prevZ,w.x>=m&&w.x<=y&&w.y>=g&&w.y<=v&&w!==i&&w!==o&&rh(a,u,l,d,c,p,w.x,w.y)&&or(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;A&&A.z>=_;){if(A.x>=m&&A.x<=y&&A.y>=g&&A.y<=v&&A!==i&&A!==o&&rh(a,u,l,d,c,p,A.x,A.y)&&or(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;w&&w.z<=S;){if(w.x>=m&&w.x<=y&&w.y>=g&&w.y<=v&&w!==i&&w!==o&&rh(a,u,l,d,c,p,w.x,w.y)&&or(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function kq(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!zS(i,s)&&Dz(i,r,r.next,s)&&Hg(i,s)&&Hg(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Gg(r),Gg(r.next),r=n=s),r=r.next}while(r!==n);return Mf(r)}function Fq(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Jq(o,a)){let l=Lz(o,a);o=Mf(o,o.next),l=Mf(l,l.next),zg(o,e,t,r,i,s,0),zg(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function Uq(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=Bz(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(jq(c));for(i.sort(zq),s=0;s<i.length;s++)t=Hq(i[s],t);return t}function zq(n,e){return n.x-e.x}function Hq(n,e){const t=Gq(n,e);if(!t)return e;const r=Lz(t,n);return Mf(r,r.next),Mf(t,t.next)}function Gq(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&rh(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Hg(t,n)&&(d<u||d===u&&(t.x>i.x||t.x===i.x&&Vq(i,t)))&&(i=t,u=d)),t=t.next;while(t!==a);return i}function Vq(n,e){return or(n.prev,n,e.prev)<0&&or(e.next,n,n.next)<0}function Wq(n,e,t,r){let i=n;do i.z===0&&(i.z=CT(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Xq(i)}function Xq(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function CT(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function jq(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function rh(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function Jq(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Yq(n,e)&&(Hg(n,e)&&Hg(e,n)&&Kq(n,e)&&(or(n.prev,n,e.prev)||or(n,e.prev,e))||zS(n,e)&&or(n.prev,n,n.next)>0&&or(e.prev,e,e.next)>0)}function or(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function zS(n,e){return n.x===e.x&&n.y===e.y}function Dz(n,e,t,r){const i=Cv(or(n,e,t)),s=Cv(or(n,e,r)),o=Cv(or(t,r,n)),a=Cv(or(t,r,e));return!!(i!==s&&o!==a||i===0&&Tv(n,t,e)||s===0&&Tv(n,r,e)||o===0&&Tv(t,n,r)||a===0&&Tv(t,e,r))}function Tv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Cv(n){return n>0?1:n<0?-1:0}function Yq(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Dz(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Hg(n,e){return or(n.prev,n,n.next)<0?or(n,e,n.next)>=0&&or(n,n.prev,e)>=0:or(n,e,n.prev)<0||or(n,n.next,e)<0}function Kq(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function Lz(n,e){const t=new bT(n.i,n.x,n.y),r=new bT(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function YL(n,e,t,r){const i=new bT(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Gg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function bT(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qq(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Ba{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Ba.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];KL(e),qL(r,e);let o=e.length;t.forEach(KL);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,qL(r,t[l]);const a=Lq.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function KL(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function qL(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class HS extends Vt{constructor(e=new rf([new De(.5,.5),new De(-.5,.5),new De(-.5,-.5),new De(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new wt(i,3)),this.setAttribute("uv",new wt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:$q;let A,w=!1,I,T,R,P;_&&(A=_.getSpacedPoints(u),w=!0,p=!1,I=_.computeFrenetFrames(u,!1),T=new G,R=new G,P=new G),p||(v=0,m=0,g=0,y=0);const b=a.extractPoints(c);let M=b.shape;const L=b.holes;if(!Ba.isClockWise(M)){M=M.reverse();for(let we=0,he=L.length;we<he;we++){const Ce=L[we];Ba.isClockWise(Ce)&&(L[we]=Ce.reverse())}}const j=Ba.triangulateShape(M,L),Q=M;for(let we=0,he=L.length;we<he;we++){const Ce=L[we];M=M.concat(Ce)}function ee(we,he,Ce){return he||console.error("THREE.ExtrudeGeometry: vec does not exist"),we.clone().addScaledVector(he,Ce)}const K=M.length,te=j.length;function F(we,he,Ce){let Le,ke,ne;const We=we.x-he.x,je=we.y-he.y,X=Ce.x-we.x,k=Ce.y-we.y,fe=We*We+je*je,ge=We*k-je*X;if(Math.abs(ge)>Number.EPSILON){const be=Math.sqrt(fe),Be=Math.sqrt(X*X+k*k),st=he.x-je/be,Fe=he.y+We/be,Je=Ce.x-k/Be,yt=Ce.y+X/Be,Ue=((Je-st)*k-(yt-Fe)*X)/(We*k-je*X);Le=st+We*Ue-we.x,ke=Fe+je*Ue-we.y;const at=Le*Le+ke*ke;if(at<=2)return new De(Le,ke);ne=Math.sqrt(at/2)}else{let be=!1;We>Number.EPSILON?X>Number.EPSILON&&(be=!0):We<-Number.EPSILON?X<-Number.EPSILON&&(be=!0):Math.sign(je)===Math.sign(k)&&(be=!0),be?(Le=-je,ke=We,ne=Math.sqrt(fe)):(Le=We,ke=je,ne=Math.sqrt(fe/2))}return new De(Le/ne,ke/ne)}const Y=[];for(let we=0,he=Q.length,Ce=he-1,Le=we+1;we<he;we++,Ce++,Le++)Ce===he&&(Ce=0),Le===he&&(Le=0),Y[we]=F(Q[we],Q[Ce],Q[Le]);const O=[];let ae,me=Y.concat();for(let we=0,he=L.length;we<he;we++){const Ce=L[we];ae=[];for(let Le=0,ke=Ce.length,ne=ke-1,We=Le+1;Le<ke;Le++,ne++,We++)ne===ke&&(ne=0),We===ke&&(We=0),ae[Le]=F(Ce[Le],Ce[ne],Ce[We]);O.push(ae),me=me.concat(ae)}for(let we=0;we<v;we++){const he=we/v,Ce=m*Math.cos(he*Math.PI/2),Le=g*Math.sin(he*Math.PI/2)+y;for(let ke=0,ne=Q.length;ke<ne;ke++){const We=ee(Q[ke],Y[ke],Le);Ee(We.x,We.y,-Ce)}for(let ke=0,ne=L.length;ke<ne;ke++){const We=L[ke];ae=O[ke];for(let je=0,X=We.length;je<X;je++){const k=ee(We[je],ae[je],Le);Ee(k.x,k.y,-Ce)}}}const Oe=g+y;for(let we=0;we<K;we++){const he=p?ee(M[we],me[we],Oe):M[we];w?(R.copy(I.normals[0]).multiplyScalar(he.x),T.copy(I.binormals[0]).multiplyScalar(he.y),P.copy(A[0]).add(R).add(T),Ee(P.x,P.y,P.z)):Ee(he.x,he.y,0)}for(let we=1;we<=u;we++)for(let he=0;he<K;he++){const Ce=p?ee(M[he],me[he],Oe):M[he];w?(R.copy(I.normals[we]).multiplyScalar(Ce.x),T.copy(I.binormals[we]).multiplyScalar(Ce.y),P.copy(A[we]).add(R).add(T),Ee(P.x,P.y,P.z)):Ee(Ce.x,Ce.y,d/u*we)}for(let we=v-1;we>=0;we--){const he=we/v,Ce=m*Math.cos(he*Math.PI/2),Le=g*Math.sin(he*Math.PI/2)+y;for(let ke=0,ne=Q.length;ke<ne;ke++){const We=ee(Q[ke],Y[ke],Le);Ee(We.x,We.y,d+Ce)}for(let ke=0,ne=L.length;ke<ne;ke++){const We=L[ke];ae=O[ke];for(let je=0,X=We.length;je<X;je++){const k=ee(We[je],ae[je],Le);w?Ee(k.x,k.y+A[u-1].y,A[u-1].x+Ce):Ee(k.x,k.y,d+Ce)}}}ce(),Se();function ce(){const we=i.length/3;if(p){let he=0,Ce=K*he;for(let Le=0;Le<te;Le++){const ke=j[Le];Qe(ke[2]+Ce,ke[1]+Ce,ke[0]+Ce)}he=u+v*2,Ce=K*he;for(let Le=0;Le<te;Le++){const ke=j[Le];Qe(ke[0]+Ce,ke[1]+Ce,ke[2]+Ce)}}else{for(let he=0;he<te;he++){const Ce=j[he];Qe(Ce[2],Ce[1],Ce[0])}for(let he=0;he<te;he++){const Ce=j[he];Qe(Ce[0]+K*u,Ce[1]+K*u,Ce[2]+K*u)}}r.addGroup(we,i.length/3-we,0)}function Se(){const we=i.length/3;let he=0;Ae(Q,he),he+=Q.length;for(let Ce=0,Le=L.length;Ce<Le;Ce++){const ke=L[Ce];Ae(ke,he),he+=ke.length}r.addGroup(we,i.length/3-we,1)}function Ae(we,he){let Ce=we.length;for(;--Ce>=0;){const Le=Ce;let ke=Ce-1;ke<0&&(ke=we.length-1);for(let ne=0,We=u+v*2;ne<We;ne++){const je=K*ne,X=K*(ne+1),k=he+Le+je,fe=he+ke+je,ge=he+ke+X,be=he+Le+X;rt(k,fe,ge,be)}}}function Ee(we,he,Ce){l.push(we),l.push(he),l.push(Ce)}function Qe(we,he,Ce){tt(we),tt(he),tt(Ce);const Le=i.length/3,ke=S.generateTopUV(r,i,Le-3,Le-2,Le-1);q(ke[0]),q(ke[1]),q(ke[2])}function rt(we,he,Ce,Le){tt(we),tt(he),tt(Le),tt(he),tt(Ce),tt(Le);const ke=i.length/3,ne=S.generateSideWallUV(r,i,ke-6,ke-3,ke-2,ke-1);q(ne[0]),q(ne[1]),q(ne[3]),q(ne[1]),q(ne[2]),q(ne[3])}function tt(we){i.push(l[we*3+0]),i.push(l[we*3+1]),i.push(l[we*3+2])}function q(we){s.push(we.x),s.push(we.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return Qq(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Ix[i.type]().fromJSON(i)),new HS(r,e.options)}}const $q={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new De(s,o),new De(a,l),new De(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],g=e[i*3+2],y=e[s*3],v=e[s*3+1],_=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new De(o,1-l),new De(c,1-d),new De(p,1-g),new De(y,1-_)]:[new De(a,1-l),new De(u,1-d),new De(m,1-g),new De(v,1-_)]}};function Qq(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class m_ extends qc{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new m_(e.radius,e.detail)}}class g_ extends qc{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new g_(e.radius,e.detail)}}class GS extends Vt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const p=(t-e)/i,m=new G,g=new De;for(let y=0;y<=i;y++){for(let v=0;v<=r;v++){const _=s+v/r*o;m.x=d*Math.cos(_),m.y=d*Math.sin(_),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,u.push(g.x,g.y)}d+=p}for(let y=0;y<i;y++){const v=y*(r+1);for(let _=0;_<r;_++){const S=_+v,A=S,w=S+r+1,I=S+r+2,T=S+1;a.push(A,w,T),a.push(w,I,T)}}this.setIndex(a),this.setAttribute("position",new wt(l,3)),this.setAttribute("normal",new wt(c,3)),this.setAttribute("uv",new wt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new GS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class VS extends Vt{constructor(e=new rf([new De(0,.5),new De(-.5,-.5),new De(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new wt(i,3)),this.setAttribute("normal",new wt(s,3)),this.setAttribute("uv",new wt(o,2));function c(u){const d=i.length/3,p=u.extractPoints(t);let m=p.shape;const g=p.holes;Ba.isClockWise(m)===!1&&(m=m.reverse());for(let v=0,_=g.length;v<_;v++){const S=g[v];Ba.isClockWise(S)===!0&&(g[v]=S.reverse())}const y=Ba.triangulateShape(m,g);for(let v=0,_=g.length;v<_;v++){const S=g[v];m=m.concat(S)}for(let v=0,_=m.length;v<_;v++){const S=m[v];i.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let v=0,_=y.length;v<_;v++){const S=y[v],A=S[0]+d,w=S[1]+d,I=S[2]+d;r.push(A,w,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Zq(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new VS(r,e.curveSegments)}}function Zq(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class __ extends Vt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new G,p=new G,m=[],g=[],y=[],v=[];for(let _=0;_<=r;_++){const S=[],A=_/r;let w=0;_===0&&o===0?w=.5/t:_===r&&l===Math.PI&&(w=-.5/t);for(let I=0;I<=t;I++){const T=I/t;d.x=-e*Math.cos(i+T*s)*Math.sin(o+A*a),d.y=e*Math.cos(o+A*a),d.z=e*Math.sin(i+T*s)*Math.sin(o+A*a),g.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),v.push(T+w,1-A),S.push(c++)}u.push(S)}for(let _=0;_<r;_++)for(let S=0;S<t;S++){const A=u[_][S+1],w=u[_][S],I=u[_+1][S],T=u[_+1][S+1];(_!==0||o>0)&&m.push(A,w,T),(_!==r-1||l<Math.PI)&&m.push(w,I,T)}this.setIndex(m),this.setAttribute("position",new wt(g,3)),this.setAttribute("normal",new wt(y,3)),this.setAttribute("uv",new wt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new __(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class WS extends qc{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new WS(e.radius,e.detail)}}class XS extends Vt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new G,d=new G,p=new G;for(let m=0;m<=r;m++)for(let g=0;g<=i;g++){const y=g/i*s,v=m/r*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(y),d.y=(e+t*Math.cos(v))*Math.sin(y),d.z=t*Math.sin(v),a.push(d.x,d.y,d.z),u.x=e*Math.cos(y),u.y=e*Math.sin(y),p.subVectors(d,u).normalize(),l.push(p.x,p.y,p.z),c.push(g/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let g=1;g<=i;g++){const y=(i+1)*m+g-1,v=(i+1)*(m-1)+g-1,_=(i+1)*(m-1)+g,S=(i+1)*m+g;o.push(y,v,S),o.push(v,_,S)}this.setIndex(o),this.setAttribute("position",new wt(a,3)),this.setAttribute("normal",new wt(l,3)),this.setAttribute("uv",new wt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new XS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class jS extends Vt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new G,p=new G,m=new G,g=new G,y=new G,v=new G,_=new G;for(let A=0;A<=r;++A){const w=A/r*s*Math.PI*2;S(w,s,o,e,m),S(w+.01,s,o,e,g),v.subVectors(g,m),_.addVectors(g,m),y.crossVectors(v,_),_.crossVectors(y,v),y.normalize(),_.normalize();for(let I=0;I<=i;++I){const T=I/i*Math.PI*2,R=-t*Math.cos(T),P=t*Math.sin(T);d.x=m.x+(R*_.x+P*y.x),d.y=m.y+(R*_.y+P*y.y),d.z=m.z+(R*_.z+P*y.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),c.push(p.x,p.y,p.z),u.push(A/r),u.push(I/i)}}for(let A=1;A<=r;A++)for(let w=1;w<=i;w++){const I=(i+1)*(A-1)+(w-1),T=(i+1)*A+(w-1),R=(i+1)*A+w,P=(i+1)*(A-1)+w;a.push(I,T,P),a.push(T,R,P)}this.setIndex(a),this.setAttribute("position",new wt(l,3)),this.setAttribute("normal",new wt(c,3)),this.setAttribute("uv",new wt(u,2));function S(A,w,I,T,R){const P=Math.cos(A),b=Math.sin(A),M=I/w*A,L=Math.cos(M);R.x=T*(2+L)*.5*P,R.y=T*(2+L)*b*.5,R.z=T*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class JS extends Vt{constructor(e=new mR(new G(-1,-1,0),new G(-1,1,0),new G(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new G,l=new G,c=new De;let u=new G;const d=[],p=[],m=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new wt(d,3)),this.setAttribute("normal",new wt(p,3)),this.setAttribute("uv",new wt(m,2));function y(){for(let A=0;A<t;A++)v(A);v(s===!1?t:0),S(),_()}function v(A){u=e.getPointAt(A/t,u);const w=o.normals[A],I=o.binormals[A];for(let T=0;T<=i;T++){const R=T/i*Math.PI*2,P=Math.sin(R),b=-Math.cos(R);l.x=b*w.x+P*I.x,l.y=b*w.y+P*I.y,l.z=b*w.z+P*I.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function _(){for(let A=1;A<=t;A++)for(let w=1;w<=i;w++){const I=(i+1)*(A-1)+(w-1),T=(i+1)*A+(w-1),R=(i+1)*A+w,P=(i+1)*(A-1)+w;g.push(I,T,P),g.push(T,R,P)}}function S(){for(let A=0;A<=t;A++)for(let w=0;w<=i;w++)c.x=A/t,c.y=w/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new JS(new Ix[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Nz extends Vt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new G,s=new G;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],p=d.start,m=d.count;for(let g=p,y=p+m;g<y;g+=3)for(let v=0;v<3;v++){const _=a.getX(g+v),S=a.getX(g+(v+1)%3);i.fromBufferAttribute(o,_),s.fromBufferAttribute(o,S),$L(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),$L(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new wt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function $L(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var QL=Object.freeze({__proto__:null,BoxGeometry:zf,CapsuleGeometry:OS,CircleGeometry:kS,ConeGeometry:FS,CylinderGeometry:fp,DodecahedronGeometry:US,EdgesGeometry:Pz,ExtrudeGeometry:HS,IcosahedronGeometry:m_,LatheGeometry:p_,OctahedronGeometry:g_,PlaneGeometry:Kc,PolyhedronGeometry:qc,RingGeometry:GS,ShapeGeometry:VS,SphereGeometry:__,TetrahedronGeometry:WS,TorusGeometry:XS,TorusKnotGeometry:jS,TubeGeometry:JS,WireframeGeometry:Nz});class Oz extends Dr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class kz extends Es{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class v_ extends Dr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ys,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ro extends v_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new De(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return gr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new et(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Fz extends Dr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new et(16777215),this.specular=new et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ys,this.combine=a_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Uz extends Dr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class zz extends Dr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Hz extends Dr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ys,this.combine=a_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Gz extends Dr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Vz extends Li{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Hu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Wz(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Xz(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function RT(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function _R(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function e$(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],p=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*i;if(!(g<t||g>=r)){d.push(c.times[m]);for(let y=0;y<u;++y)p.push(c.values[m*u+y])}}d.length!==0&&(c.times=Hu(d,c.times.constructor),c.values=Hu(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function t$(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let y;if(s<=a.times[0]){const _=u,S=d-u;y=a.values.slice(_,S)}else if(s>=a.times[g]){const _=g*d+u,S=_+d-u;y=a.values.slice(_,S)}else{const _=a.createInterpolant(),S=u,A=d-u;_.evaluate(s),y=_.resultBuffer.slice(S,A)}l==="quaternion"&&new si().fromArray(y).normalize().conjugate().toArray(y);const v=c.times.length;for(let _=0;_<v;++_){const S=_*m+p;if(l==="quaternion")si.multiplyQuaternionsFlat(c.values,S,y,0,c.values,S);else{const A=m-p*2;for(let w=0;w<A;++w)c.values[S+w]-=y[w]}}}return n.blendMode=Jb,n}const n$={convertArray:Hu,isTypedArray:Wz,getKeyframeOrder:Xz,sortedArray:RT,flattenJSON:_R,subclip:e$,makeClipAdditive:t$};class dp{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class jz extends dp{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ku,endingEnd:ku}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Fu:s=e,a=2*t-r;break;case Bg:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Fu:o=e,l=2*r-t;break;case Bg:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(r-t)/(i-t),y=g*g,v=y*g,_=-p*v+2*p*y-p*g,S=(1+p)*v+(-1.5-2*p)*y+(-.5+p)*g+1,A=(-1-m)*v+(1.5+m)*y+.5*g,w=m*v-m*y;for(let I=0;I!==a;++I)s[I]=_*o[u+I]+S*o[c+I]+A*o[l+I]+w*o[d+I];return s}}class vR extends dp{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),d=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[l+p]*u;return s}}class Jz extends dp{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ta{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hu(t,this.TimeBufferType),this.values=Hu(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Hu(e.times,Array),values:Hu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Jz(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new vR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new jz(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Hh:t=this.InterpolantFactoryMethodDiscrete;break;case Gh:t=this.InterpolantFactoryMethodLinear;break;case Dy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Hh;case this.InterpolantFactoryMethodLinear:return Gh;case this.InterpolantFactoryMethodSmooth:return Dy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&Wz(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Dy,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let g=0;g!==r;++g){const y=t[d+g];if(y!==t[p+g]||y!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ta.prototype.TimeBufferType=Float32Array;ta.prototype.ValueBufferType=Float32Array;ta.prototype.DefaultInterpolation=Gh;class Hf extends ta{constructor(e,t,r){super(e,t,r)}}Hf.prototype.ValueTypeName="bool";Hf.prototype.ValueBufferType=Array;Hf.prototype.DefaultInterpolation=Hh;Hf.prototype.InterpolantFactoryMethodLinear=void 0;Hf.prototype.InterpolantFactoryMethodSmooth=void 0;class yR extends ta{}yR.prototype.ValueTypeName="color";class Tf extends ta{}Tf.prototype.ValueTypeName="number";class Yz extends dp{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)si.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Cf extends ta{InterpolantFactoryMethodLinear(e){return new Yz(this.times,this.values,this.getValueSize(),e)}}Cf.prototype.ValueTypeName="quaternion";Cf.prototype.InterpolantFactoryMethodSmooth=void 0;class Gf extends ta{constructor(e,t,r){super(e,t,r)}}Gf.prototype.ValueTypeName="string";Gf.prototype.ValueBufferType=Array;Gf.prototype.DefaultInterpolation=Hh;Gf.prototype.InterpolantFactoryMethodLinear=void 0;Gf.prototype.InterpolantFactoryMethodSmooth=void 0;class bf extends ta{}bf.prototype.ValueTypeName="vector";class Xh{constructor(e="",t=-1,r=[],i=MS){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ws(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(i$(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(ta.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Xz(l);l=RT(l,1,u),c=RT(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Tf(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let p=i[d];p||(i[d]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,p,m,g,y){if(m.length!==0){const v=[],_=[];_R(m,v,_,g),v.length!==0&&y.push(new d(p,v,_))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let y=0;y<p[g].morphTargets.length;y++)m[p[g].morphTargets[y]]=-1;for(const y in m){const v=[],_=[];for(let S=0;S!==p[g].morphTargets.length;++S){const A=p[g];v.push(A.time),_.push(A.morphTarget===y?1:0)}i.push(new Tf(".morphTargetInfluence["+y+"]",v,_))}l=m.length*o}else{const m=".bones["+t[d].name+"]";r(bf,m+".position",p,"pos",i),r(Cf,m+".quaternion",p,"rot",i),r(bf,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function r$(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tf;case"vector":case"vector2":case"vector3":case"vector4":return bf;case"color":return yR;case"quaternion":return Cf;case"bool":case"boolean":return Hf;case"string":return Gf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function i$(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=r$(n.type);if(n.times===void 0){const t=[],r=[];_R(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const hl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class YS{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,p=c.length;d<p;d+=2){const m=c[d],g=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const Kz=new YS;let mi=class{constructor(e){this.manager=e!==void 0?e:Kz,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};mi.DEFAULT_MATERIAL_NAME="__DEFAULT";const $a={};class s$ extends Error{constructor(e,t){super(e),this.response=t}}class hi extends mi{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=hl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if($a[e]!==void 0){$a[e].push({onLoad:t,onProgress:r,onError:i});return}$a[e]=[],$a[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=$a[e],d=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,g=m!==0;let y=0;const v=new ReadableStream({start(_){S();function S(){d.read().then(({done:A,value:w})=>{if(A)_.close();else{y+=w.byteLength;const I=new ProgressEvent("progress",{lengthComputable:g,loaded:y,total:m});for(let T=0,R=u.length;T<R;T++){const P=u[T];P.onProgress&&P.onProgress(I)}_.enqueue(w),S()}},A=>{_.error(A)})}}});return new Response(v)}else throw new s$(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{hl.add(e,c);const u=$a[e];delete $a[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=$a[e];if(u===void 0)throw this.manager.itemError(e),c;delete $a[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class o$ extends mi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new hi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Xh.parse(e[r]);t.push(i)}return t}}class a$ extends mi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new LS,l=new hi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=mn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)u(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+y]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=mn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Vg extends mi{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=hl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Fg("img");function l(){u(),hl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class qz extends mi{constructor(e){super(e)}load(e,t,r,i){const s=new u_;s.colorSpace=Ls;const o=new Vg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class xR extends mi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Pa,a=new hi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Er,o.wrapT=c.wrapT!==void 0?c.wrapT:Er,o.magFilter=c.magFilter!==void 0?c.magFilter:mn,o.minFilter=c.minFilter!==void 0?c.minFilter:mn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=So),c.mipmapCount===1&&(o.minFilter=mn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class y_ extends mi{constructor(e){super(e)}load(e,t,r,i){const s=new gn,o=new Vg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class $c extends vn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class $z extends $c{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const WE=new It,ZL=new G,e2=new G;class SR{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new De(512,512),this.map=null,this.mapPass=null,this.matrix=new It,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new f_,this._frameExtents=new De(1,1),this._viewportCount=1,this._viewports=[new Rn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;ZL.setFromMatrixPosition(e.matrixWorld),t.position.copy(ZL),e2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(e2),t.updateMatrixWorld(),WE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(WE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(WE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class l$ extends SR{constructor(){super(new jn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Vh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class AR extends $c{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.target=new vn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new l$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const t2=new It,sm=new G,XE=new G;class c$ extends SR{constructor(){super(new jn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new De(4,2),this._viewportCount=6,this._viewports=[new Rn(2,1,1,1),new Rn(0,1,1,1),new Rn(3,1,1,1),new Rn(1,1,1,1),new Rn(3,0,1,1),new Rn(1,0,1,1)],this._cubeDirections=[new G(1,0,0),new G(-1,0,0),new G(0,0,1),new G(0,0,-1),new G(0,1,0),new G(0,-1,0)],this._cubeUps=[new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,0,1),new G(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),sm.setFromMatrixPosition(e.matrixWorld),r.position.copy(sm),XE.copy(r.position),XE.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(XE),r.updateMatrixWorld(),i.makeTranslation(-sm.x,-sm.y,-sm.z),t2.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(t2)}}class ER extends $c{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new c$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class u$ extends SR{constructor(){super(new zs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class wR extends $c{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.target=new vn,this.shadow=new u$}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Qz extends $c{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Zz extends $c{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class eH{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new G)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class tH extends $c{constructor(e=new eH,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class KS extends mi{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new hi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=KS.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new et().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new et().setHex(o.value);break;case"v2":i.uniforms[s].value=new De().fromArray(o.value);break;case"v3":i.uniforms[s].value=new G().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Rn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Wt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new It().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new De().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new De().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:Oz,SpriteMaterial:oR,RawShaderMaterial:kz,ShaderMaterial:Es,PointsMaterial:DS,MeshPhysicalMaterial:Ro,MeshStandardMaterial:v_,MeshPhongMaterial:Fz,MeshToonMaterial:Uz,MeshNormalMaterial:zz,MeshLambertMaterial:Hz,MeshDepthMaterial:rR,MeshDistanceMaterial:iR,MeshBasicMaterial:ds,MeshMatcapMaterial:Gz,LineDashedMaterial:Vz,LineBasicMaterial:Li,Material:Dr};return new t[e]}}class Mc{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class nH extends Vt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class rH extends mi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new hi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,g){if(t[g]!==void 0)return t[g];const v=m.interleavedBuffers[g],_=s(m,v.buffer),S=th(v.type,_),A=new d_(S,v.stride);return A.uuid=v.uuid,t[g]=A,A}function s(m,g){if(r[g]!==void 0)return r[g];const v=m.arrayBuffers[g],_=new Uint32Array(v).buffer;return r[g]=_,_}const o=e.isInstancedBufferGeometry?new nH:new Vt,a=e.data.index;if(a!==void 0){const m=th(a.type,a.array);o.setIndex(new yn(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let y;if(g.isInterleavedBufferAttribute){const v=i(e.data,g.data);y=new Fc(v,g.itemSize,g.offset,g.normalized)}else{const v=th(g.type,g.array),_=g.isInstancedBufferAttribute?wf:yn;y=new _(v,g.itemSize,g.normalized)}g.name!==void 0&&(y.name=g.name),g.usage!==void 0&&y.setUsage(g.usage),o.setAttribute(m,y)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],y=[];for(let v=0,_=g.length;v<_;v++){const S=g[v];let A;if(S.isInterleavedBufferAttribute){const w=i(e.data,S.data);A=new Fc(w,S.itemSize,S.offset,S.normalized)}else{const w=th(S.type,S.array);A=new yn(w,S.itemSize,S.normalized)}S.name!==void 0&&(A.name=S.name),y.push(A)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,g=d.length;m!==g;++m){const y=d[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new G;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new di(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class f$ extends mi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?Mc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new hi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Mc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new hi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new rf().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new h_().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new rH;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in QL?a=QL[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new KS;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Xh.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:th(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new YS(t);s=new Vg(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const v=p[g],_=a(v);_!==null&&(_ instanceof HTMLImageElement?m.push(_):m.push(new Pa(_.data,_.width,_.height)))}i[d.uuid]=new Uu(m)}else{const m=a(d.url);i[d.uuid]=new Uu(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:th(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Vg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d],g=await s(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Pa(g.data,g.width,g.height)))}r[l.uuid]=new Uu(u)}else{const u=await s(l.url);r[l.uuid]=new Uu(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new u_,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Pa:u=new gn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,d$)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],n2),u.wrapT=r(a.wrap[1],n2)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,r2)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,r2)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const v=p[g];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),m.push(r[v])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,d;switch(e.type){case"Scene":o=new Ef,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new et(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new PS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new IS(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new jn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new zs(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Qz(e.color,e.intensity);break;case"DirectionalLight":o=new wR(e.color,e.intensity);break;case"PointLight":o=new ER(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Zz(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new AR(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new $z(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new tH().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new aR(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new er(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new lR(u,d,p),o.instanceMatrix=new wf(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new wf(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),o=new Mz(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(y=>{const v=new Pi;v.min.fromArray(y.boxMin),v.max.fromArray(y.boxMax);const _=new di;return _.radius=y.sphereRadius,_.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:v,sphereInitialized:y.sphereInitialized,sphere:_}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new wz;break;case"Line":o=new Ml(a(e.geometry),l(e.material));break;case"LineLoop":o=new cR(a(e.geometry),l(e.material));break;case"LineSegments":o=new Zo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new uR(a(e.geometry),l(e.material));break;case"Sprite":o=new Ez(l(e.material));break;case"Group":o=new Jo;break;case"Bone":o=new BS;break;default:o=new vn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],y=o.getObjectByProperty("uuid",g.object);y!==void 0&&o.addLevel(y,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const d$={UVMapping:Lc,CubeReflectionMapping:ka,CubeRefractionMapping:Nc,EquirectangularReflectionMapping:Uh,EquirectangularRefractionMapping:Ig,CubeUVReflectionMapping:cp},n2={RepeatWrapping:Oc,ClampToEdgeWrapping:Er,MirroredRepeatWrapping:zh},r2={NearestFilter:Gr,NearestMipmapNearestFilter:AS,NearestMipmapLinearFilter:Ou,LinearFilter:mn,LinearMipmapNearestFilter:yh,LinearMipmapLinearFilter:So};class iH extends mi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=hl.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return hl.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),hl.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});hl.add(e,l),s.manager.itemStart(e)}}let bv;class MR{static getContext(){return bv===void 0&&(bv=new(window.AudioContext||window.webkitAudioContext)),bv}static setContext(e){bv=e}}class h$ extends mi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new hi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);MR.getContext().decodeAudioData(c,function(d){t(d)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const i2=new It,s2=new It,gu=new It;class p${constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new jn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new jn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,gu.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(tf*t.fov*.5)/t.zoom;let a,l;s2.elements[12]=-i,i2.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,gu.elements[0]=2*t.near/(l-a),gu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(gu),a=-o*t.aspect-s,l=o*t.aspect-s,gu.elements[0]=2*t.near/(l-a),gu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(gu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(s2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(i2)}}class TR{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=o2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=o2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function o2(){return(typeof performance>"u"?Date:performance).now()}const _u=new G,a2=new si,m$=new G,vu=new G;class g$ extends vn{constructor(){super(),this.type="AudioListener",this.context=MR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new TR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_u,a2,m$),vu.set(0,0,-1).applyQuaternion(a2),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(_u.x,i),t.positionY.linearRampToValueAtTime(_u.y,i),t.positionZ.linearRampToValueAtTime(_u.z,i),t.forwardX.linearRampToValueAtTime(vu.x,i),t.forwardY.linearRampToValueAtTime(vu.y,i),t.forwardZ.linearRampToValueAtTime(vu.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(_u.x,_u.y,_u.z),t.setOrientation(vu.x,vu.y,vu.z,r.x,r.y,r.z)}}class sH extends vn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const yu=new G,l2=new si,_$=new G,xu=new G;class v$ extends sH{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(yu,l2,_$),xu.set(0,0,1).applyQuaternion(l2);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(yu.x,r),t.positionY.linearRampToValueAtTime(yu.y,r),t.positionZ.linearRampToValueAtTime(yu.z,r),t.orientationX.linearRampToValueAtTime(xu.x,r),t.orientationY.linearRampToValueAtTime(xu.y,r),t.orientationZ.linearRampToValueAtTime(xu.z,r)}else t.setPosition(yu.x,yu.y,yu.z),t.setOrientation(xu.x,xu.y,xu.z)}}class y${constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class oH{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){si.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;si.multiplyQuaternionsFlat(e,o,e,t,e,r),si.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const CR="\\[\\]\\.:\\/",x$=new RegExp("["+CR+"]","g"),bR="[^"+CR+"]",S$="[^"+CR.replace("\\.","")+"]",A$=/((?:WC+[\/:])*)/.source.replace("WC",bR),E$=/(WCOD+)?/.source.replace("WCOD",S$),w$=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bR),M$=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bR),T$=new RegExp("^"+A$+E$+w$+M$+"$"),C$=["material","materials","bones","map"];class b${constructor(e,t,r){const i=r||hn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class hn{constructor(e,t,r){this.path=t,this.parsedPath=r||hn.parseTrackName(t),this.node=hn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new hn.Composite(e,t,r):new hn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(x$,"")}static parseTrackName(e){const t=T$.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);C$.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=hn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}hn.Composite=b$;hn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};hn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};hn.prototype.GetterByBindingType=[hn.prototype._getValue_direct,hn.prototype._getValue_array,hn.prototype._getValue_arrayElement,hn.prototype._getValue_toArray];hn.prototype.SetterByBindingTypeAndVersioning=[[hn.prototype._setValue_direct,hn.prototype._setValue_direct_setNeedsUpdate,hn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[hn.prototype._setValue_array,hn.prototype._setValue_array_setNeedsUpdate,hn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[hn.prototype._setValue_arrayElement,hn.prototype._setValue_arrayElement_setNeedsUpdate,hn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[hn.prototype._setValue_fromArray,hn.prototype._setValue_fromArray_setNeedsUpdate,hn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class R${constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ws(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],m=p.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(p);for(let y=0,v=o;y!==v;++y)s[y].push(new hn(p,r[y],i[y]))}else if(g<c){a=e[g];const y=--c,v=e[y];t[v.uuid]=g,e[g]=v,t[m]=y,e[y]=p;for(let _=0,S=o;_!==S;++_){const A=s[_],w=A[y];let I=A[g];A[g]=w,I===void 0&&(I=new hn(p,r[_],i[_])),A[y]=I}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,p=e[d];t[p.uuid]=u,e[u]=p,t[c]=d,e[d]=l;for(let m=0,g=i;m!==g;++m){const y=r[m],v=y[d],_=y[u];y[u]=v,y[d]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const p=--s,m=e[p],g=--o,y=e[g];t[m.uuid]=d,e[d]=m,t[y.uuid]=p,e[p]=y,e.pop();for(let v=0,_=i;v!==_;++v){const S=r[v],A=S[p],w=S[g];S[d]=A,S[p]=w,S.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let g=0,y=i;g!==y;++g){const v=r[g];v[d]=v[p],v.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let p=u,m=l.length;p!==m;++p){const g=l[p];d[p]=new hn(g,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class aH{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:ku,endingEnd:ku};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=jU,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Jb:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case MS:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===JU;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===XU){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Fu,i.endingEnd=Fu):(e?i.endingStart=this.zeroSlopeAtStart?Fu:ku:i.endingStart=Bg,t?i.endingEnd=this.zeroSlopeAtEnd?Fu:ku:i.endingEnd=Bg)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const I$=new Float32Array(1);class P$ extends Fa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const p=i[d],m=p.name;let g=u[m];if(g!==void 0)++g.referenceCount,o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const y=t&&t._propertyBindings[d].binding.parsedPath;g=new oH(hn.create(r,m,y),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new vR(new Float32Array(2),new Float32Array(2),1,I$),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Xh.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=MS),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new aH(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Xh.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class RR{constructor(e){this.value=e}clone(){return new RR(this.value.clone===void 0?this.value:this.value.clone())}}let B$=0;class D$ extends Fa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:B$++}),this.name="",this.usage=Og,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class L$ extends d_{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class N${constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const c2=new It;class IR{constructor(e,t,r=0,i=1/0){this.ray=new Uf(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new nf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return c2.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(c2),this}intersectObject(e,t=!0,r=[]){return IT(e,this,r,t),r.sort(u2),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)IT(e[i],this,r,t);return r.sort(u2),r}}function u2(n,e){return n.distance-e.distance}function IT(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)IT(s[o],e,t,!0)}}class PT{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(gr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class O${constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const f2=new De;class k${constructor(e=new De(1/0,1/0),t=new De(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=f2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,f2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const d2=new G,Rv=new G;class F${constructor(e=new G,t=new G){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){d2.subVectors(e,this.start),Rv.subVectors(this.end,this.start);const r=Rv.dot(Rv);let s=Rv.dot(d2)/r;return t&&(s=gr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const h2=new G;class U$ extends vn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Vt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new wt(i,3));const s=new Li({fog:!1,toneMapped:!1});this.cone=new Zo(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),h2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(h2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Jl=new G,Iv=new It,jE=new It;class z$ extends Zo{constructor(e){const t=lH(e),r=new Vt,i=[],s=[],o=new et(0,0,1),a=new et(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new wt(i,3)),r.setAttribute("color",new wt(s,3));const l=new Li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");jE.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Iv.multiplyMatrices(jE,a.matrixWorld),Jl.setFromMatrixPosition(Iv),i.setXYZ(o,Jl.x,Jl.y,Jl.z),Iv.multiplyMatrices(jE,a.parent.matrixWorld),Jl.setFromMatrixPosition(Iv),i.setXYZ(o+1,Jl.x,Jl.y,Jl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function lH(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,lH(n.children[t]));return e}class H$ extends er{constructor(e,t,r){const i=new __(t,4,2),s=new ds({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const G$=new G,p2=new et,m2=new et;class V$ extends vn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new g_(t);i.rotateY(Math.PI*.5),this.material=new ds({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new yn(o,3)),this.add(new er(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");p2.copy(this.light.color),m2.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?p2:m2;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(G$.setFromMatrixPosition(this.light.matrixWorld).negate())}}class W$ extends Zo{constructor(e=10,t=10,r=4473924,i=8947848){r=new et(r),i=new et(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,g=-a;p<=t;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const y=p===s?r:i;y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3}const u=new Vt;u.setAttribute("position",new wt(l,3)),u.setAttribute("color",new wt(c,3));const d=new Li({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class X$ extends Zo{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new et(s),o=new et(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const y=d&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let d=0;d<r;d++){const p=d&1?s:o,m=e-e/r*d;for(let g=0;g<i;g++){let y=g/i*(Math.PI*2),v=Math.sin(y)*m,_=Math.cos(y)*m;a.push(v,0,_),l.push(p.r,p.g,p.b),y=(g+1)/i*(Math.PI*2),v=Math.sin(y)*m,_=Math.cos(y)*m,a.push(v,0,_),l.push(p.r,p.g,p.b)}}const c=new Vt;c.setAttribute("position",new wt(a,3)),c.setAttribute("color",new wt(l,3));const u=new Li({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const g2=new G,Pv=new G,_2=new G;class j$ extends vn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Vt;i.setAttribute("position",new wt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Li({fog:!1,toneMapped:!1});this.lightPlane=new Ml(i,s),this.add(this.lightPlane),i=new Vt,i.setAttribute("position",new wt([0,0,0,0,0,1],3)),this.targetLine=new Ml(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),g2.setFromMatrixPosition(this.light.matrixWorld),Pv.setFromMatrixPosition(this.light.target.matrixWorld),_2.subVectors(Pv,g2),this.lightPlane.lookAt(Pv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Pv),this.targetLine.scale.z=_2.length()}}const Bv=new G,dr=new c_;class J$ extends Zo{constructor(e){const t=new Vt,r=new Li({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,y){l(g),l(y)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}t.setAttribute("position",new wt(i,3)),t.setAttribute("color",new wt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new et(16755200),u=new et(16711680),d=new et(43775),p=new et(16777215),m=new et(3355443);this.setColors(c,u,d,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;dr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),yr("c",t,e,dr,0,0,-1),yr("t",t,e,dr,0,0,1),yr("n1",t,e,dr,-r,-i,-1),yr("n2",t,e,dr,r,-i,-1),yr("n3",t,e,dr,-r,i,-1),yr("n4",t,e,dr,r,i,-1),yr("f1",t,e,dr,-r,-i,1),yr("f2",t,e,dr,r,-i,1),yr("f3",t,e,dr,-r,i,1),yr("f4",t,e,dr,r,i,1),yr("u1",t,e,dr,r*.7,i*1.1,-1),yr("u2",t,e,dr,-r*.7,i*1.1,-1),yr("u3",t,e,dr,0,i*2,-1),yr("cf1",t,e,dr,-r,0,1),yr("cf2",t,e,dr,r,0,1),yr("cf3",t,e,dr,0,-i,1),yr("cf4",t,e,dr,0,i,1),yr("cn1",t,e,dr,-r,0,-1),yr("cn2",t,e,dr,r,0,-1),yr("cn3",t,e,dr,0,-i,-1),yr("cn4",t,e,dr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function yr(n,e,t,r,i,s,o){Bv.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Bv.x,Bv.y,Bv.z)}}const Dv=new Pi;class Y$ extends Zo{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Vt;s.setIndex(new yn(r,1)),s.setAttribute("position",new yn(i,3)),super(s,new Li({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Dv.setFromObject(this.object),Dv.isEmpty())return;const t=Dv.min,r=Dv.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class K$ extends Zo{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Vt;s.setIndex(new yn(r,1)),s.setAttribute("position",new wt(i,3)),super(s,new Li({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class q$ extends Ml{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Vt;o.setAttribute("position",new wt(s,3)),o.computeBoundingSphere(),super(o,new Li({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Vt;l.setAttribute("position",new wt(a,3)),l.computeBoundingSphere(),this.add(new er(l,new ds({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const v2=new G;let Lv,JE;class $$ extends vn{constructor(e=new G(0,0,1),t=new G(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Lv===void 0&&(Lv=new Vt,Lv.setAttribute("position",new wt([0,0,0,0,1,0],3)),JE=new fp(0,.5,1,5,1),JE.translate(0,-.5,0)),this.position.copy(t),this.line=new Ml(Lv,new Li({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new er(JE,new ds({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{v2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(v2,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Q$ extends Zo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Vt;i.setAttribute("position",new wt(t,3)),i.setAttribute("color",new wt(r,3));const s=new Li({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new et,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z${constructor(){this.type="ShapePath",this.color=new et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ug,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const S=[];for(let A=0,w=_.length;A<w;A++){const I=_[A],T=new rf;T.curves=I.curves,S.push(T)}return S}function r(_,S){const A=S.length;let w=!1;for(let I=A-1,T=0;T<A;I=T++){let R=S[I],P=S[T],b=P.x-R.x,M=P.y-R.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(R=S[T],b=-b,P=S[I],M=-M),_.y<R.y||_.y>P.y)continue;if(_.y===R.y){if(_.x===R.x)return!0}else{const L=M*(_.x-R.x)-b*(_.y-R.y);if(L===0)return!0;if(L<0)continue;w=!w}}else{if(_.y!==R.y)continue;if(P.x<=_.x&&_.x<=R.x||R.x<=_.x&&_.x<=P.x)return!0}}return w}const i=Ba.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new rf,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],p=[];let m=[],g=0,y;p[g]=void 0,m[g]=[];for(let _=0,S=s.length;_<S;_++)a=s[_],y=a.getPoints(),o=i(y),o=e?!o:o,o?(!u&&p[g]&&g++,p[g]={s:new rf,p:y},p[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:y[0]});if(!p[0])return t(s);if(p.length>1){let _=!1,S=0;for(let A=0,w=p.length;A<w;A++)d[A]=[];for(let A=0,w=p.length;A<w;A++){const I=m[A];for(let T=0;T<I.length;T++){const R=I[T];let P=!0;for(let b=0;b<p.length;b++)r(R.p,p[b].p)&&(A!==b&&S++,P?(P=!1,d[b].push(R)):_=!0);P&&d[A].push(R)}}S>0&&_===!1&&(m=d)}let v;for(let _=0,S=p.length;_<S;_++){l=p[_].s,c.push(l),v=m[_];for(let A=0,w=v.length;A<w;A++)l.holes.push(v[A].h)}return c}}class eQ extends As{constructor(e=1,t=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:lp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=lp);const tQ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Ub,AddEquation:oc,AddOperation:IU,AdditiveAnimationBlendMode:Jb,AdditiveBlending:XM,AgXToneMapping:NU,AlphaFormat:UU,AlwaysCompare:iz,AlwaysDepth:EU,AlwaysStencilFunc:AT,AmbientLight:Qz,AnimationAction:aH,AnimationClip:Xh,AnimationLoader:o$,AnimationMixer:P$,AnimationObjectGroup:R$,AnimationUtils:n$,ArcCurve:Tz,ArrayCamera:Sz,ArrowHelper:$$,AttachedBindMode:YM,Audio:sH,AudioAnalyser:y$,AudioContext:MR,AudioListener:g$,AudioLoader:h$,AxesHelper:Q$,BackSide:Zi,BasicDepthPacking:KU,BasicShadowMap:rU,BatchedMesh:Mz,Bone:BS,BooleanKeyframeTrack:Hf,Box2:k$,Box3:Pi,Box3Helper:K$,BoxGeometry:zf,BoxHelper:Y$,BufferAttribute:yn,BufferGeometry:Vt,BufferGeometryLoader:rH,ByteType:zb,Cache:hl,Camera:c_,CameraHelper:J$,CanvasTexture:Tq,CapsuleGeometry:OS,CatmullRomCurve3:Cz,CineonToneMapping:DU,CircleGeometry:kS,ClampToEdgeWrapping:Er,Clock:TR,Color:et,ColorKeyframeTrack:yR,ColorManagement:Tn,CompressedArrayTexture:wq,CompressedCubeTexture:Mq,CompressedTexture:LS,CompressedTextureLoader:a$,ConeGeometry:FS,ConstantAlphaFactor:xU,ConstantColorFactor:vU,CubeCamera:hz,CubeReflectionMapping:ka,CubeRefractionMapping:Nc,CubeTexture:u_,CubeTextureLoader:qz,CubeUVReflectionMapping:cp,CubicBezierCurve:dR,CubicBezierCurve3:bz,CubicInterpolant:jz,CullFaceBack:WM,CullFaceFront:nU,CullFaceFrontBack:gX,CullFaceNone:tU,Curve:ea,CurvePath:Iz,CustomBlending:iU,CustomToneMapping:LU,CylinderGeometry:fp,Cylindrical:O$,Data3DTexture:Qb,DataArrayTexture:CS,DataTexture:Pa,DataTextureLoader:xR,DataUtils:zu,DecrementStencilOp:EX,DecrementWrapStencilOp:MX,DefaultLoadingManager:Kz,DepthFormat:ef,DepthStencilFormat:Af,DepthTexture:bS,DetachedBindMode:kU,DirectionalLight:wR,DirectionalLightHelper:j$,DiscreteInterpolant:Jz,DisplayP3ColorSpace:TS,DodecahedronGeometry:US,DoubleSide:us,DstAlphaFactor:hU,DstColorFactor:mU,DynamicCopyUsage:zX,DynamicDrawUsage:LX,DynamicReadUsage:kX,EdgesGeometry:Pz,EllipseCurve:NS,EqualCompare:ez,EqualDepth:MU,EqualStencilFunc:RX,EquirectangularReflectionMapping:Uh,EquirectangularRefractionMapping:Ig,Euler:Ys,EventDispatcher:Fa,ExtrudeGeometry:HS,FileLoader:hi,Float16BufferAttribute:Tj,Float32BufferAttribute:wt,FloatType:ar,Fog:PS,FogExp2:IS,FramebufferTexture:Eq,FrontSide:Oa,Frustum:f_,GLBufferAttribute:N$,GLSL1:GX,GLSL3:ET,GreaterCompare:tz,GreaterDepth:CU,GreaterEqualCompare:rz,GreaterEqualDepth:TU,GreaterEqualStencilFunc:DX,GreaterStencilFunc:PX,GridHelper:W$,Group:Jo,HalfFloatType:ti,HemisphereLight:$z,HemisphereLightHelper:V$,IcosahedronGeometry:m_,ImageBitmapLoader:iH,ImageLoader:Vg,ImageUtils:lz,IncrementStencilOp:AX,IncrementWrapStencilOp:wX,InstancedBufferAttribute:wf,InstancedBufferGeometry:nH,InstancedInterleavedBuffer:L$,InstancedMesh:lR,Int16BufferAttribute:wj,Int32BufferAttribute:Mj,Int8BufferAttribute:Sj,IntType:ES,InterleavedBuffer:d_,InterleavedBufferAttribute:Fc,Interpolant:dp,InterpolateDiscrete:Hh,InterpolateLinear:Gh,InterpolateSmooth:Dy,InvertStencilOp:TX,KeepStencilOp:Cu,KeyframeTrack:ta,LOD:wz,LatheGeometry:p_,Layers:nf,LessCompare:ZU,LessDepth:wU,LessEqualCompare:Kb,LessEqualDepth:Rg,LessEqualStencilFunc:IX,LessStencilFunc:bX,Light:$c,LightProbe:tH,Line:Ml,Line3:F$,LineBasicMaterial:Li,LineCurve:hR,LineCurve3:Rz,LineDashedMaterial:Vz,LineLoop:cR,LineSegments:Zo,LinearDisplayP3ColorSpace:l_,LinearFilter:mn,LinearInterpolant:vR,LinearMipMapLinearFilter:KM,LinearMipMapNearestFilter:yX,LinearMipmapLinearFilter:So,LinearMipmapNearestFilter:yh,LinearSRGBColorSpace:Co,LinearToneMapping:PU,LinearTransfer:Dg,Loader:mi,LoaderUtils:Mc,LoadingManager:YS,LoopOnce:XU,LoopPingPong:JU,LoopRepeat:jU,LuminanceAlphaFormat:GU,LuminanceFormat:HU,MOUSE:Mu,Material:Dr,MaterialLoader:KS,MathUtils:sz,Matrix3:Wt,Matrix4:It,MaxEquation:lU,Mesh:er,MeshBasicMaterial:ds,MeshDepthMaterial:rR,MeshDistanceMaterial:iR,MeshLambertMaterial:Hz,MeshMatcapMaterial:Gz,MeshNormalMaterial:zz,MeshPhongMaterial:Fz,MeshPhysicalMaterial:Ro,MeshStandardMaterial:v_,MeshToonMaterial:Uz,MinEquation:aU,MirroredRepeatWrapping:zh,MixOperation:RU,MultiplyBlending:JM,MultiplyOperation:a_,NearestFilter:Gr,NearestMipMapLinearFilter:vX,NearestMipMapNearestFilter:_X,NearestMipmapLinearFilter:Ou,NearestMipmapNearestFilter:AS,NeutralToneMapping:OU,NeverCompare:QU,NeverDepth:AU,NeverStencilFunc:CX,NoBlending:Ra,NoColorSpace:ll,NoToneMapping:Ia,NormalAnimationBlendMode:MS,NormalBlending:Zu,NotEqualCompare:nz,NotEqualDepth:bU,NotEqualStencilFunc:BX,NumberKeyframeTrack:Tf,Object3D:vn,ObjectLoader:f$,ObjectSpaceNormalMap:$U,OctahedronGeometry:g_,OneFactor:uU,OneMinusConstantAlphaFactor:SU,OneMinusConstantColorFactor:yU,OneMinusDstAlphaFactor:pU,OneMinusDstColorFactor:gU,OneMinusSrcAlphaFactor:Tx,OneMinusSrcColorFactor:dU,OrthographicCamera:zs,P3Primaries:Ng,PCFShadowMap:SS,PCFSoftShadowMap:zm,PMREMGenerator:wT,Path:Ug,PerspectiveCamera:jn,Plane:sl,PlaneGeometry:Kc,PlaneHelper:q$,PointLight:ER,PointLightHelper:H$,Points:uR,PointsMaterial:DS,PolarGridHelper:X$,PolyhedronGeometry:qc,PositionalAudio:v$,PropertyBinding:hn,PropertyMixer:oH,QuadraticBezierCurve:pR,QuadraticBezierCurve3:mR,Quaternion:si,QuaternionKeyframeTrack:Cf,QuaternionLinearInterpolant:Yz,RED_GREEN_RGTC2_Format:xT,RED_RGTC1_Format:WU,REVISION:lp,RGBADepthPacking:qU,RGBAFormat:Br,RGBAIntegerFormat:jb,RGBA_ASTC_10x10_Format:pT,RGBA_ASTC_10x5_Format:fT,RGBA_ASTC_10x6_Format:dT,RGBA_ASTC_10x8_Format:hT,RGBA_ASTC_12x10_Format:mT,RGBA_ASTC_12x12_Format:gT,RGBA_ASTC_4x4_Format:rT,RGBA_ASTC_5x4_Format:iT,RGBA_ASTC_5x5_Format:sT,RGBA_ASTC_6x5_Format:oT,RGBA_ASTC_6x6_Format:aT,RGBA_ASTC_8x5_Format:lT,RGBA_ASTC_8x6_Format:cT,RGBA_ASTC_8x8_Format:uT,RGBA_BPTC_Format:By,RGBA_ETC2_EAC_Format:nT,RGBA_PVRTC_2BPPV1_Format:ZM,RGBA_PVRTC_4BPPV1_Format:QM,RGBA_S3TC_DXT1_Format:Ry,RGBA_S3TC_DXT3_Format:Iy,RGBA_S3TC_DXT5_Format:Py,RGBFormat:zU,RGB_BPTC_SIGNED_Format:_T,RGB_BPTC_UNSIGNED_Format:vT,RGB_ETC1_Format:eT,RGB_ETC2_Format:tT,RGB_PVRTC_2BPPV1_Format:$M,RGB_PVRTC_4BPPV1_Format:qM,RGB_S3TC_DXT1_Format:by,RGFormat:VU,RGIntegerFormat:Xb,RawShaderMaterial:kz,Ray:Uf,Raycaster:IR,Rec709Primaries:Lg,RectAreaLight:Zz,RedFormat:wS,RedIntegerFormat:Wb,ReinhardToneMapping:BU,RenderTarget:cz,RepeatWrapping:Oc,ReplaceStencilOp:SX,ReverseSubtractEquation:oU,RingGeometry:GS,SIGNED_RED_GREEN_RGTC2_Format:ST,SIGNED_RED_RGTC1_Format:yT,SRGBColorSpace:Ls,SRGBTransfer:Un,Scene:Ef,ShaderChunk:jt,ShaderLib:Wo,ShaderMaterial:Es,ShadowMaterial:Oz,Shape:rf,ShapeGeometry:VS,ShapePath:Z$,ShapeUtils:Ba,ShortType:Hb,Skeleton:h_,SkeletonHelper:z$,SkinnedMesh:aR,Source:Uu,Sphere:di,SphereGeometry:__,Spherical:PT,SphericalHarmonics3:eH,SplineCurve:gR,SpotLight:AR,SpotLightHelper:U$,Sprite:Ez,SpriteMaterial:oR,SrcAlphaFactor:Mx,SrcAlphaSaturateFactor:_U,SrcColorFactor:fU,StaticCopyUsage:UX,StaticDrawUsage:Og,StaticReadUsage:OX,StereoCamera:p$,StreamCopyUsage:HX,StreamDrawUsage:NX,StreamReadUsage:FX,StringKeyframeTrack:Gf,SubtractEquation:sU,SubtractiveBlending:jM,TOUCH:Tu,TangentSpaceNormalMap:Yc,TetrahedronGeometry:WS,Texture:gn,TextureLoader:y_,TorusGeometry:XS,TorusKnotGeometry:jS,Triangle:Os,TriangleFanDrawMode:Cx,TriangleStripDrawMode:Yb,TrianglesDrawMode:YU,TubeGeometry:JS,UVMapping:Lc,Uint16BufferAttribute:Zb,Uint32BufferAttribute:eR,Uint8BufferAttribute:Aj,Uint8ClampedBufferAttribute:Ej,Uniform:RR,UniformsGroup:D$,UniformsLib:nt,UniformsUtils:dz,UnsignedByteType:Js,UnsignedInt248Type:Sf,UnsignedInt5999Type:FU,UnsignedIntType:kc,UnsignedShort4444Type:Gb,UnsignedShort5551Type:Vb,UnsignedShortType:Pg,VSMShadowMap:Ho,Vector2:De,Vector3:G,Vector4:Rn,VectorKeyframeTrack:bf,VideoTexture:Aq,WebGL3DRenderTarget:fj,WebGLArrayRenderTarget:uj,WebGLCoordinateSystem:Aa,WebGLCubeRenderTarget:tR,WebGLMultipleRenderTargets:eQ,WebGLRenderTarget:As,WebGLRenderer:sR,WebGLUtils:xz,WebGPUCoordinateSystem:kg,WireframeGeometry:Nz,WrapAroundEnding:Bg,ZeroCurvatureEnding:ku,ZeroFactor:cU,ZeroSlopeEnding:Fu,ZeroStencilOp:xX,createCanvasElement:az},Symbol.toStringTag,{value:"Module"}));var cH={exports:{}},Vf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Vf.ConcurrentRoot=1;Vf.ContinuousEventPriority=4;Vf.DefaultEventPriority=16;Vf.DiscreteEventPriority=1;Vf.IdleEventPriority=536870912;Vf.LegacyRoot=0;cH.exports=Vf;var ih=cH.exports;function nQ(n){let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const g=u(e);if(!d(p,g)){const y=p;c(p=g,y)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const rQ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),y2=rQ?ie.useEffect:ie.useLayoutEffect;function uH(n){const e=typeof n=="function"?nQ(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=ie.useReducer(v=>v+1,0),o=e.getState(),a=ie.useRef(o),l=ie.useRef(r),c=ie.useRef(i),u=ie.useRef(!1),d=ie.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(d.current,p)),y2(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const g=ie.useRef(o);y2(()=>{const v=()=>{try{const S=e.getState(),A=l.current(S);c.current(d.current,A)||(a.current=S,d.current=A,s())}catch{u.current=!0,s()}},_=e.subscribe(v);return e.getState()!==g.current&&v(),_},[]);const y=m?p:d.current;return ie.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var fH={exports:{}},YE={exports:{}},KE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function iQ(){return x2||(x2=1,function(n){function e(F,Y){var O=F.length;F.push(Y);e:for(;0<O;){var ae=O-1>>>1,me=F[ae];if(0<i(me,Y))F[ae]=Y,F[O]=me,O=ae;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],O=F.pop();if(O!==Y){F[0]=O;e:for(var ae=0,me=F.length,Oe=me>>>1;ae<Oe;){var ce=2*(ae+1)-1,Se=F[ce],Ae=ce+1,Ee=F[Ae];if(0>i(Se,O))Ae<me&&0>i(Ee,Se)?(F[ae]=Ee,F[Ae]=O,ae=Ae):(F[ae]=Se,F[ce]=O,ae=ce);else if(Ae<me&&0>i(Ee,O))F[ae]=Ee,F[Ae]=O,ae=Ae;else break e}}return Y}function i(F,Y){var O=F.sortIndex-Y.sortIndex;return O!==0?O:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(F){for(var Y=t(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=F)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function w(F){if(y=!1,A(F),!g)if(t(l)!==null)g=!0,K(I);else{var Y=t(c);Y!==null&&te(w,Y.startTime-F)}}function I(F,Y){g=!1,y&&(y=!1,_(P),P=-1),m=!0;var O=p;try{for(A(Y),d=t(l);d!==null&&(!(d.expirationTime>Y)||F&&!L());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,p=d.priorityLevel;var me=ae(d.expirationTime<=Y);Y=n.unstable_now(),typeof me=="function"?d.callback=me:d===t(l)&&r(l),A(Y)}else r(l);d=t(l)}if(d!==null)var Oe=!0;else{var ce=t(c);ce!==null&&te(w,ce.startTime-Y),Oe=!1}return Oe}finally{d=null,p=O,m=!1}}var T=!1,R=null,P=-1,b=5,M=-1;function L(){return!(n.unstable_now()-M<b)}function H(){if(R!==null){var F=n.unstable_now();M=F;var Y=!0;try{Y=R(!0,F)}finally{Y?j():(T=!1,R=null)}}else T=!1}var j;if(typeof S=="function")j=function(){S(H)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ee=Q.port2;Q.port1.onmessage=H,j=function(){ee.postMessage(null)}}else j=function(){v(H,0)};function K(F){R=F,T||(T=!0,j())}function te(F,Y){P=v(function(){F(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,K(I))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var O=p;p=Y;try{return F()}finally{p=O}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var O=p;p=F;try{return Y()}finally{p=O}},n.unstable_scheduleCallback=function(F,Y,O){var ae=n.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ae+O:ae):O=ae,F){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=O+me,F={id:u++,callback:Y,priorityLevel:F,startTime:O,expirationTime:me,sortIndex:-1},O>ae?(F.sortIndex=O,e(c,F),t(l)===null&&F===t(c)&&(y?(_(P),P=-1):y=!0,te(w,O-ae))):(F.sortIndex=me,e(l,F),g||m||(g=!0,K(I))),F},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(F){var Y=p;return function(){var O=p;p=Y;try{return F.apply(this,arguments)}finally{p=O}}}}(KE)),KE}var S2;function sQ(){return S2||(S2=1,YE.exports=iQ()),YE.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oQ=function(e){var t={},r=ie,i=sQ(),s=Object.assign;function o(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),I=Symbol.iterator;function T(f){return f===null||typeof f!="object"?null:(f=I&&f[I]||f["@@iterator"],typeof f=="function"?f:null)}function R(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case _:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case g:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case y:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case S:return h=f.displayName||null,h!==null?h:R(f.type)||"Memo";case A:h=f._payload,f=f._init;try{return R(f(h))}catch{}}return null}function P(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function b(f){var h=f,x=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,h.flags&4098&&(x=h.return),f=h.return;while(f)}return h.tag===3?x:null}function M(f){if(b(f)!==f)throw Error(o(188))}function L(f){var h=f.alternate;if(!h){if(h=b(f),h===null)throw Error(o(188));return h!==f?null:f}for(var x=f,E=h;;){var C=x.return;if(C===null)break;var D=C.alternate;if(D===null){if(E=C.return,E!==null){x=E;continue}break}if(C.child===D.child){for(D=C.child;D;){if(D===x)return M(C),f;if(D===E)return M(C),h;D=D.sibling}throw Error(o(188))}if(x.return!==E.return)x=C,E=D;else{for(var $=!1,ue=C.child;ue;){if(ue===x){$=!0,x=C,E=D;break}if(ue===E){$=!0,E=C,x=D;break}ue=ue.sibling}if(!$){for(ue=D.child;ue;){if(ue===x){$=!0,x=D,E=C;break}if(ue===E){$=!0,E=D,x=C;break}ue=ue.sibling}if(!$)throw Error(o(189))}}if(x.alternate!==E)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?f:h}function H(f){return f=L(f),f!==null?j(f):null}function j(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=j(f);if(h!==null)return h;f=f.sibling}return null}function Q(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var h=Q(f);if(h!==null)return h}f=f.sibling}return null}var ee=Array.isArray,K=e.getPublicInstance,te=e.getRootHostContext,F=e.getChildHostContext,Y=e.prepareForCommit,O=e.resetAfterCommit,ae=e.createInstance,me=e.appendInitialChild,Oe=e.finalizeInitialChildren,ce=e.prepareUpdate,Se=e.shouldSetTextContent,Ae=e.createTextInstance,Ee=e.scheduleTimeout,Qe=e.cancelTimeout,rt=e.noTimeout,tt=e.isPrimaryRenderer,q=e.supportsMutation,we=e.supportsPersistence,he=e.supportsHydration,Ce=e.getInstanceFromNode,Le=e.preparePortalMount,ke=e.getCurrentEventPriority,ne=e.detachDeletedInstance,We=e.supportsMicrotasks,je=e.scheduleMicrotask,X=e.supportsTestSelectors,k=e.findFiberRoot,fe=e.getBoundingRect,ge=e.getTextContent,be=e.isHiddenSubtree,Be=e.matchAccessibilityRole,st=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,Je=e.appendChild,yt=e.appendChildToContainer,Ue=e.commitTextUpdate,at=e.commitMount,xt=e.commitUpdate,Et=e.insertBefore,Ge=e.insertInContainerBefore,re=e.removeChild,Re=e.removeChildFromContainer,Ye=e.resetTextContent,Z=e.hideInstance,Ie=e.hideTextInstance,oe=e.unhideInstance,Te=e.unhideTextInstance,Ve=e.clearContainer,mt=e.cloneInstance,bt=e.createContainerChildSet,Ut=e.appendChildToContainerChildSet,Qt=e.finalizeContainerChildren,Nt=e.replaceContainerChildren,gt=e.cloneHiddenInstance,ut=e.cloneHiddenTextInstance,zt=e.canHydrateInstance,Ze=e.canHydrateTextInstance,Dt=e.canHydrateSuspenseInstance,St=e.isSuspenseInstancePending,Rt=e.isSuspenseInstanceFallback,bn=e.registerSuspenseInstanceRetry,Pt=e.getNextHydratableSibling,At=e.getFirstHydratableChild,Kn=e.getFirstHydratableChildWithinContainer,Bn=e.getFirstHydratableChildWithinSuspenseInstance,N=e.hydrateInstance,z=e.hydrateTextInstance,B=e.hydrateSuspenseInstance,U=e.getNextHydratableInstanceAfterSuspenseInstance,V=e.commitHydratedContainer,W=e.commitHydratedSuspenseInstance,J=e.clearSuspenseBoundary,le=e.clearSuspenseBoundaryFromContainer,pe=e.shouldDeleteUnhydratedTailInstances,_e=e.didNotMatchHydratedContainerTextInstance,xe=e.didNotMatchHydratedTextInstance,ve;function Xe(f){if(ve===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);ve=h&&h[1]||""}return`
`+ve+f}var Ne=!1;function qe(f,h){if(!f||Ne)return"";Ne=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch($e){var E=$e}Reflect.construct(f,[],h)}else{try{h.call()}catch($e){E=$e}f.call(h.prototype)}else{try{throw Error()}catch($e){E=$e}f()}}catch($e){if($e&&E&&typeof $e.stack=="string"){for(var C=$e.stack.split(`
`),D=E.stack.split(`
`),$=C.length-1,ue=D.length-1;1<=$&&0<=ue&&C[$]!==D[ue];)ue--;for(;1<=$&&0<=ue;$--,ue--)if(C[$]!==D[ue]){if($!==1||ue!==1)do if($--,ue--,0>ue||C[$]!==D[ue]){var Pe=`
`+C[$].replace(" at new "," at ");return f.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",f.displayName)),Pe}while(1<=$&&0<=ue);break}}}finally{Ne=!1,Error.prepareStackTrace=x}return(f=f?f.displayName||f.name:"")?Xe(f):""}var ft=Object.prototype.hasOwnProperty,lt=[],Mt=-1;function ct(f){return{current:f}}function ze(f){0>Mt||(f.current=lt[Mt],lt[Mt]=null,Mt--)}function _t(f,h){Mt++,lt[Mt]=f.current,f.current=h}var vt={},tn=ct(vt),Ot=ct(!1),un=vt;function Mr(f,h){var x=f.type.contextTypes;if(!x)return vt;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===h)return E.__reactInternalMemoizedMaskedChildContext;var C={},D;for(D in x)C[D]=h[D];return E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=C),C}function Yt(f){return f=f.childContextTypes,f!=null}function kn(){ze(Ot),ze(tn)}function fn(f,h,x){if(tn.current!==vt)throw Error(o(168));_t(tn,h),_t(Ot,x)}function An(f,h,x){var E=f.stateNode;if(h=h.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var C in E)if(!(C in h))throw Error(o(108,P(f)||"Unknown",C));return s({},x,E)}function xn(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||vt,un=tn.current,_t(tn,f),_t(Ot,Ot.current),!0}function dn(f,h,x){var E=f.stateNode;if(!E)throw Error(o(169));x?(f=An(f,h,un),E.__reactInternalMemoizedMergedChildContext=f,ze(Ot),ze(tn),_t(tn,f)):ze(Ot),_t(Ot,x)}var Dn=Math.clz32?Math.clz32:na,Ua=Math.log,Ni=Math.LN2;function na(f){return f>>>=0,f===0?32:31-(Ua(f)/Ni|0)|0}var B_=64,D_=4194304;function xp(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function L_(f,h){var x=f.pendingLanes;if(x===0)return 0;var E=0,C=f.suspendedLanes,D=f.pingedLanes,$=x&268435455;if($!==0){var ue=$&~C;ue!==0?E=xp(ue):(D&=$,D!==0&&(E=xp(D)))}else $=x&~C,$!==0?E=xp($):D!==0&&(E=xp(D));if(E===0)return 0;if(h!==0&&h!==E&&!(h&C)&&(C=E&-E,D=h&-h,C>=D||C===16&&(D&4194240)!==0))return h;if(E&4&&(E|=x&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=E;0<h;)x=31-Dn(h),C=1<<x,E|=f[x],h&=~C;return E}function G5(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V5(f,h){for(var x=f.suspendedLanes,E=f.pingedLanes,C=f.expirationTimes,D=f.pendingLanes;0<D;){var $=31-Dn(D),ue=1<<$,Pe=C[$];Pe===-1?(!(ue&x)||ue&E)&&(C[$]=G5(ue,h)):Pe<=h&&(f.expiredLanes|=ue),D&=~ue}}function E1(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function w1(f){for(var h=[],x=0;31>x;x++)h.push(f);return h}function Sp(f,h,x){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-Dn(h),f[h]=x}function W5(f,h){var x=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var E=f.eventTimes;for(f=f.expirationTimes;0<x;){var C=31-Dn(x),D=1<<C;h[C]=0,E[C]=-1,f[C]=-1,x&=~D}}function M1(f,h){var x=f.entangledLanes|=h;for(f=f.entanglements;x;){var E=31-Dn(x),C=1<<E;C&h|f[E]&h&&(f[E]|=h),x&=~C}}var En=0;function DI(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var T1=i.unstable_scheduleCallback,LI=i.unstable_cancelCallback,X5=i.unstable_shouldYield,j5=i.unstable_requestPaint,Xr=i.unstable_now,C1=i.unstable_ImmediatePriority,J5=i.unstable_UserBlockingPriority,b1=i.unstable_NormalPriority,Y5=i.unstable_IdlePriority,N_=null,ra=null;function K5(f){if(ra&&typeof ra.onCommitFiberRoot=="function")try{ra.onCommitFiberRoot(N_,f,void 0,(f.current.flags&128)===128)}catch{}}function q5(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var ia=typeof Object.is=="function"?Object.is:q5,za=null,O_=!1,R1=!1;function NI(f){za===null?za=[f]:za.push(f)}function $5(f){O_=!0,NI(f)}function sa(){if(!R1&&za!==null){R1=!0;var f=0,h=En;try{var x=za;for(En=1;f<x.length;f++){var E=x[f];do E=E(!0);while(E!==null)}za=null,O_=!1}catch(C){throw za!==null&&(za=za.slice(f+1)),T1(C1,sa),C}finally{En=h,R1=!1}}return null}var Q5=a.ReactCurrentBatchConfig;function k_(f,h){if(ia(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var x=Object.keys(f),E=Object.keys(h);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var C=x[E];if(!ft.call(h,C)||!ia(f[C],h[C]))return!1}return!0}function Z5(f){switch(f.tag){case 5:return Xe(f.type);case 16:return Xe("Lazy");case 13:return Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 2:case 15:return f=qe(f.type,!1),f;case 11:return f=qe(f.type.render,!1),f;case 1:return f=qe(f.type,!0),f;default:return""}}function Po(f,h){if(f&&f.defaultProps){h=s({},h),f=f.defaultProps;for(var x in f)h[x]===void 0&&(h[x]=f[x]);return h}return h}var F_=ct(null),U_=null,qf=null,I1=null;function P1(){I1=qf=U_=null}function OI(f,h,x){tt?(_t(F_,h._currentValue),h._currentValue=x):(_t(F_,h._currentValue2),h._currentValue2=x)}function B1(f){var h=F_.current;ze(F_),tt?f._currentValue=h:f._currentValue2=h}function D1(f,h,x){for(;f!==null;){var E=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),f===x)break;f=f.return}}function $f(f,h){U_=f,I1=qf=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&h&&(Ts=!0),f.firstContext=null)}function eo(f){var h=tt?f._currentValue:f._currentValue2;if(I1!==f)if(f={context:f,memoizedValue:h,next:null},qf===null){if(U_===null)throw Error(o(308));qf=f,U_.dependencies={lanes:0,firstContext:f}}else qf=qf.next=f;return h}var oa=null,Pl=!1;function L1(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kI(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Ha(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function Bl(f,h){var x=f.updateQueue;x!==null&&(x=x.shared,Tr!==null&&f.mode&1&&!(Kt&2)?(f=x.interleaved,f===null?(h.next=h,oa===null?oa=[x]:oa.push(x)):(h.next=f.next,f.next=h),x.interleaved=h):(f=x.pending,f===null?h.next=h:(h.next=f.next,f.next=h),x.pending=h))}function z_(f,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var E=h.lanes;E&=f.pendingLanes,x|=E,h.lanes=x,M1(f,x)}}function FI(f,h){var x=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var C=null,D=null;if(x=x.firstBaseUpdate,x!==null){do{var $={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};D===null?C=D=$:D=D.next=$,x=x.next}while(x!==null);D===null?C=D=h:D=D.next=h}else C=D=h;x={baseState:E.baseState,firstBaseUpdate:C,lastBaseUpdate:D,shared:E.shared,effects:E.effects},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=h:f.next=h,x.lastBaseUpdate=h}function H_(f,h,x,E){var C=f.updateQueue;Pl=!1;var D=C.firstBaseUpdate,$=C.lastBaseUpdate,ue=C.shared.pending;if(ue!==null){C.shared.pending=null;var Pe=ue,$e=Pe.next;Pe.next=null,$===null?D=$e:$.next=$e,$=Pe;var ht=f.alternate;ht!==null&&(ht=ht.updateQueue,ue=ht.lastBaseUpdate,ue!==$&&(ue===null?ht.firstBaseUpdate=$e:ue.next=$e,ht.lastBaseUpdate=Pe))}if(D!==null){var Ht=C.baseState;$=0,ht=$e=Pe=null,ue=D;do{var Bt=ue.lane,Ln=ue.eventTime;if((E&Bt)===Bt){ht!==null&&(ht=ht.next={eventTime:Ln,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var Ct=f,yi=ue;switch(Bt=h,Ln=x,yi.tag){case 1:if(Ct=yi.payload,typeof Ct=="function"){Ht=Ct.call(Ln,Ht,Bt);break e}Ht=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=yi.payload,Bt=typeof Ct=="function"?Ct.call(Ln,Ht,Bt):Ct,Bt==null)break e;Ht=s({},Ht,Bt);break e;case 2:Pl=!0}}ue.callback!==null&&ue.lane!==0&&(f.flags|=64,Bt=C.effects,Bt===null?C.effects=[ue]:Bt.push(ue))}else Ln={eventTime:Ln,lane:Bt,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},ht===null?($e=ht=Ln,Pe=Ht):ht=ht.next=Ln,$|=Bt;if(ue=ue.next,ue===null){if(ue=C.shared.pending,ue===null)break;Bt=ue,ue=Bt.next,Bt.next=null,C.lastBaseUpdate=Bt,C.shared.pending=null}}while(!0);if(ht===null&&(Pe=Ht),C.baseState=Pe,C.firstBaseUpdate=$e,C.lastBaseUpdate=ht,h=C.shared.interleaved,h!==null){C=h;do $|=C.lane,C=C.next;while(C!==h)}else D===null&&(C.shared.lanes=0);od|=$,f.lanes=$,f.memoizedState=Ht}}function UI(f,h,x){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var E=f[h],C=E.callback;if(C!==null){if(E.callback=null,E=x,typeof C!="function")throw Error(o(191,C));C.call(E)}}}var zI=new r.Component().refs;function N1(f,h,x,E){h=f.memoizedState,x=x(E,h),x=x==null?h:s({},h,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}var G_={isMounted:function(f){return(f=f._reactInternals)?b(f)===f:!1},enqueueSetState:function(f,h,x){f=f._reactInternals;var E=ki(),C=Nl(f),D=Ha(E,C);D.payload=h,x!=null&&(D.callback=x),Bl(f,D),h=so(f,C,E),h!==null&&z_(h,f,C)},enqueueReplaceState:function(f,h,x){f=f._reactInternals;var E=ki(),C=Nl(f),D=Ha(E,C);D.tag=1,D.payload=h,x!=null&&(D.callback=x),Bl(f,D),h=so(f,C,E),h!==null&&z_(h,f,C)},enqueueForceUpdate:function(f,h){f=f._reactInternals;var x=ki(),E=Nl(f),C=Ha(x,E);C.tag=2,h!=null&&(C.callback=h),Bl(f,C),h=so(f,E,x),h!==null&&z_(h,f,E)}};function HI(f,h,x,E,C,D,$){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,D,$):h.prototype&&h.prototype.isPureReactComponent?!k_(x,E)||!k_(C,D):!0}function GI(f,h,x){var E=!1,C=vt,D=h.contextType;return typeof D=="object"&&D!==null?D=eo(D):(C=Yt(h)?un:tn.current,E=h.contextTypes,D=(E=E!=null)?Mr(f,C):vt),h=new h(x,D),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=G_,f.stateNode=h,h._reactInternals=f,E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=C,f.__reactInternalMemoizedMaskedChildContext=D),h}function VI(f,h,x,E){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,E),h.state!==f&&G_.enqueueReplaceState(h,h.state,null)}function O1(f,h,x,E){var C=f.stateNode;C.props=x,C.state=f.memoizedState,C.refs=zI,L1(f);var D=h.contextType;typeof D=="object"&&D!==null?C.context=eo(D):(D=Yt(h)?un:tn.current,C.context=Mr(f,D)),C.state=f.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(N1(f,h,D,x),C.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(h=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),h!==C.state&&G_.enqueueReplaceState(C,C.state,null),H_(f,x,C,E),C.state=f.memoizedState),typeof C.componentDidMount=="function"&&(f.flags|=4194308)}var Qf=[],Zf=0,V_=null,W_=0,to=[],no=0,Qc=null,Ga=1,Va="";function Zc(f,h){Qf[Zf++]=W_,Qf[Zf++]=V_,V_=f,W_=h}function WI(f,h,x){to[no++]=Ga,to[no++]=Va,to[no++]=Qc,Qc=f;var E=Ga;f=Va;var C=32-Dn(E)-1;E&=~(1<<C),x+=1;var D=32-Dn(h)+C;if(30<D){var $=C-C%5;D=(E&(1<<$)-1).toString(32),E>>=$,C-=$,Ga=1<<32-Dn(h)+C|x<<C|E,Va=D+f}else Ga=1<<D|x<<C|E,Va=f}function k1(f){f.return!==null&&(Zc(f,1),WI(f,1,0))}function F1(f){for(;f===V_;)V_=Qf[--Zf],Qf[Zf]=null,W_=Qf[--Zf],Qf[Zf]=null;for(;f===Qc;)Qc=to[--no],to[no]=null,Va=to[--no],to[no]=null,Ga=to[--no],to[no]=null}var ws=null,Ms=null,qn=!1,Ap=!1,Bo=null;function XI(f,h){var x=oo(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=f,h=f.deletions,h===null?(f.deletions=[x],f.flags|=16):h.push(x)}function jI(f,h){switch(f.tag){case 5:return h=zt(h,f.type,f.pendingProps),h!==null?(f.stateNode=h,ws=f,Ms=At(h),!0):!1;case 6:return h=Ze(h,f.pendingProps),h!==null?(f.stateNode=h,ws=f,Ms=null,!0):!1;case 13:if(h=Dt(h),h!==null){var x=Qc!==null?{id:Ga,overflow:Va}:null;return f.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=oo(18,null,null,0),x.stateNode=h,x.return=f,f.child=x,ws=f,Ms=null,!0}return!1;default:return!1}}function U1(f){return(f.mode&1)!==0&&(f.flags&128)===0}function z1(f){if(qn){var h=Ms;if(h){var x=h;if(!jI(f,h)){if(U1(f))throw Error(o(418));h=Pt(x);var E=ws;h&&jI(f,h)?XI(E,x):(f.flags=f.flags&-4097|2,qn=!1,ws=f)}}else{if(U1(f))throw Error(o(418));f.flags=f.flags&-4097|2,qn=!1,ws=f}}}function JI(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;ws=f}function Ep(f){if(!he||f!==ws)return!1;if(!qn)return JI(f),qn=!0,!1;if(f.tag!==3&&(f.tag!==5||pe(f.type)&&!Se(f.type,f.memoizedProps))){var h=Ms;if(h){if(U1(f)){for(f=Ms;f;)f=Pt(f);throw Error(o(418))}for(;h;)XI(f,h),h=Pt(h)}}if(JI(f),f.tag===13){if(!he)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));Ms=U(f)}else Ms=ws?Pt(f.stateNode):null;return!0}function ed(){he&&(Ms=ws=null,Ap=qn=!1)}function H1(f){Bo===null?Bo=[f]:Bo.push(f)}function wp(f,h,x){if(f=x.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var E=x.stateNode}if(!E)throw Error(o(147,f));var C=E,D=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===D?h.ref:(h=function($){var ue=C.refs;ue===zI&&(ue=C.refs={}),$===null?delete ue[D]:ue[D]=$},h._stringRef=D,h)}if(typeof f!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,f))}return f}function X_(f,h){throw f=Object.prototype.toString.call(h),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function YI(f){var h=f._init;return h(f._payload)}function KI(f){function h(ye,de){if(f){var Me=ye.deletions;Me===null?(ye.deletions=[de],ye.flags|=16):Me.push(de)}}function x(ye,de){if(!f)return null;for(;de!==null;)h(ye,de),de=de.sibling;return null}function E(ye,de){for(ye=new Map;de!==null;)de.key!==null?ye.set(de.key,de):ye.set(de.index,de),de=de.sibling;return ye}function C(ye,de){return ye=kl(ye,de),ye.index=0,ye.sibling=null,ye}function D(ye,de,Me){return ye.index=Me,f?(Me=ye.alternate,Me!==null?(Me=Me.index,Me<de?(ye.flags|=2,de):Me):(ye.flags|=2,de)):(ye.flags|=1048576,de)}function $(ye){return f&&ye.alternate===null&&(ye.flags|=2),ye}function ue(ye,de,Me,ot){return de===null||de.tag!==6?(de=wA(Me,ye.mode,ot),de.return=ye,de):(de=C(de,Me),de.return=ye,de)}function Pe(ye,de,Me,ot){var Tt=Me.type;return Tt===u?ht(ye,de,Me.props.children,ot,Me.key):de!==null&&(de.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===A&&YI(Tt)===de.type)?(ot=C(de,Me.props),ot.ref=wp(ye,de,Me),ot.return=ye,ot):(ot=A0(Me.type,Me.key,Me.props,null,ye.mode,ot),ot.ref=wp(ye,de,Me),ot.return=ye,ot)}function $e(ye,de,Me,ot){return de===null||de.tag!==4||de.stateNode.containerInfo!==Me.containerInfo||de.stateNode.implementation!==Me.implementation?(de=MA(Me,ye.mode,ot),de.return=ye,de):(de=C(de,Me.children||[]),de.return=ye,de)}function ht(ye,de,Me,ot,Tt){return de===null||de.tag!==7?(de=ou(Me,ye.mode,ot,Tt),de.return=ye,de):(de=C(de,Me),de.return=ye,de)}function Ht(ye,de,Me){if(typeof de=="string"&&de!==""||typeof de=="number")return de=wA(""+de,ye.mode,Me),de.return=ye,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return Me=A0(de.type,de.key,de.props,null,ye.mode,Me),Me.ref=wp(ye,null,de),Me.return=ye,Me;case c:return de=MA(de,ye.mode,Me),de.return=ye,de;case A:var ot=de._init;return Ht(ye,ot(de._payload),Me)}if(ee(de)||T(de))return de=ou(de,ye.mode,Me,null),de.return=ye,de;X_(ye,de)}return null}function Bt(ye,de,Me,ot){var Tt=de!==null?de.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Tt!==null?null:ue(ye,de,""+Me,ot);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case l:return Me.key===Tt?Pe(ye,de,Me,ot):null;case c:return Me.key===Tt?$e(ye,de,Me,ot):null;case A:return Tt=Me._init,Bt(ye,de,Tt(Me._payload),ot)}if(ee(Me)||T(Me))return Tt!==null?null:ht(ye,de,Me,ot,null);X_(ye,Me)}return null}function Ln(ye,de,Me,ot,Tt){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return ye=ye.get(Me)||null,ue(de,ye,""+ot,Tt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case l:return ye=ye.get(ot.key===null?Me:ot.key)||null,Pe(de,ye,ot,Tt);case c:return ye=ye.get(ot.key===null?Me:ot.key)||null,$e(de,ye,ot,Tt);case A:var Jt=ot._init;return Ln(ye,de,Me,Jt(ot._payload),Tt)}if(ee(ot)||T(ot))return ye=ye.get(Me)||null,ht(de,ye,ot,Tt,null);X_(de,ot)}return null}function Ct(ye,de,Me,ot){for(var Tt=null,Jt=null,Gt=de,wn=de=0,Jr=null;Gt!==null&&wn<Me.length;wn++){Gt.index>wn?(Jr=Gt,Gt=null):Jr=Gt.sibling;var Mn=Bt(ye,Gt,Me[wn],ot);if(Mn===null){Gt===null&&(Gt=Jr);break}f&&Gt&&Mn.alternate===null&&h(ye,Gt),de=D(Mn,de,wn),Jt===null?Tt=Mn:Jt.sibling=Mn,Jt=Mn,Gt=Jr}if(wn===Me.length)return x(ye,Gt),qn&&Zc(ye,wn),Tt;if(Gt===null){for(;wn<Me.length;wn++)Gt=Ht(ye,Me[wn],ot),Gt!==null&&(de=D(Gt,de,wn),Jt===null?Tt=Gt:Jt.sibling=Gt,Jt=Gt);return qn&&Zc(ye,wn),Tt}for(Gt=E(ye,Gt);wn<Me.length;wn++)Jr=Ln(Gt,ye,wn,Me[wn],ot),Jr!==null&&(f&&Jr.alternate!==null&&Gt.delete(Jr.key===null?wn:Jr.key),de=D(Jr,de,wn),Jt===null?Tt=Jr:Jt.sibling=Jr,Jt=Jr);return f&&Gt.forEach(function(Fl){return h(ye,Fl)}),qn&&Zc(ye,wn),Tt}function yi(ye,de,Me,ot){var Tt=T(Me);if(typeof Tt!="function")throw Error(o(150));if(Me=Tt.call(Me),Me==null)throw Error(o(151));for(var Jt=Tt=null,Gt=de,wn=de=0,Jr=null,Mn=Me.next();Gt!==null&&!Mn.done;wn++,Mn=Me.next()){Gt.index>wn?(Jr=Gt,Gt=null):Jr=Gt.sibling;var Fl=Bt(ye,Gt,Mn.value,ot);if(Fl===null){Gt===null&&(Gt=Jr);break}f&&Gt&&Fl.alternate===null&&h(ye,Gt),de=D(Fl,de,wn),Jt===null?Tt=Fl:Jt.sibling=Fl,Jt=Fl,Gt=Jr}if(Mn.done)return x(ye,Gt),qn&&Zc(ye,wn),Tt;if(Gt===null){for(;!Mn.done;wn++,Mn=Me.next())Mn=Ht(ye,Mn.value,ot),Mn!==null&&(de=D(Mn,de,wn),Jt===null?Tt=Mn:Jt.sibling=Mn,Jt=Mn);return qn&&Zc(ye,wn),Tt}for(Gt=E(ye,Gt);!Mn.done;wn++,Mn=Me.next())Mn=Ln(Gt,ye,wn,Mn.value,ot),Mn!==null&&(f&&Mn.alternate!==null&&Gt.delete(Mn.key===null?wn:Mn.key),de=D(Mn,de,wn),Jt===null?Tt=Mn:Jt.sibling=Mn,Jt=Mn);return f&&Gt.forEach(function(R8){return h(ye,R8)}),qn&&Zc(ye,wn),Tt}function ao(ye,de,Me,ot){if(typeof Me=="object"&&Me!==null&&Me.type===u&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case l:e:{for(var Tt=Me.key,Jt=de;Jt!==null;){if(Jt.key===Tt){if(Tt=Me.type,Tt===u){if(Jt.tag===7){x(ye,Jt.sibling),de=C(Jt,Me.props.children),de.return=ye,ye=de;break e}}else if(Jt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===A&&YI(Tt)===Jt.type){x(ye,Jt.sibling),de=C(Jt,Me.props),de.ref=wp(ye,Jt,Me),de.return=ye,ye=de;break e}x(ye,Jt);break}else h(ye,Jt);Jt=Jt.sibling}Me.type===u?(de=ou(Me.props.children,ye.mode,ot,Me.key),de.return=ye,ye=de):(ot=A0(Me.type,Me.key,Me.props,null,ye.mode,ot),ot.ref=wp(ye,de,Me),ot.return=ye,ye=ot)}return $(ye);case c:e:{for(Jt=Me.key;de!==null;){if(de.key===Jt)if(de.tag===4&&de.stateNode.containerInfo===Me.containerInfo&&de.stateNode.implementation===Me.implementation){x(ye,de.sibling),de=C(de,Me.children||[]),de.return=ye,ye=de;break e}else{x(ye,de);break}else h(ye,de);de=de.sibling}de=MA(Me,ye.mode,ot),de.return=ye,ye=de}return $(ye);case A:return Jt=Me._init,ao(ye,de,Jt(Me._payload),ot)}if(ee(Me))return Ct(ye,de,Me,ot);if(T(Me))return yi(ye,de,Me,ot);X_(ye,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,de!==null&&de.tag===6?(x(ye,de.sibling),de=C(de,Me),de.return=ye,ye=de):(x(ye,de),de=wA(Me,ye.mode,ot),de.return=ye,ye=de),$(ye)):x(ye,de)}return ao}var td=KI(!0),qI=KI(!1),Mp={},ro=ct(Mp),Tp=ct(Mp),nd=ct(Mp);function aa(f){if(f===Mp)throw Error(o(174));return f}function G1(f,h){_t(nd,h),_t(Tp,f),_t(ro,Mp),f=te(h),ze(ro),_t(ro,f)}function rd(){ze(ro),ze(Tp),ze(nd)}function $I(f){var h=aa(nd.current),x=aa(ro.current);h=F(x,f.type,h),x!==h&&(_t(Tp,f),_t(ro,h))}function V1(f){Tp.current===f&&(ze(ro),ze(Tp))}var tr=ct(0);function j_(f){for(var h=f;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||St(x)||Rt(x)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var W1=[];function X1(){for(var f=0;f<W1.length;f++){var h=W1[f];tt?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}W1.length=0}var J_=a.ReactCurrentDispatcher,io=a.ReactCurrentBatchConfig,id=0,fr=null,gi=null,jr=null,Y_=!1,Cp=!1,bp=0,e8=0;function _i(){throw Error(o(321))}function j1(f,h){if(h===null)return!1;for(var x=0;x<h.length&&x<f.length;x++)if(!ia(f[x],h[x]))return!1;return!0}function J1(f,h,x,E,C,D){if(id=D,fr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,J_.current=f===null||f.memoizedState===null?i8:s8,f=x(E,C),Cp){D=0;do{if(Cp=!1,bp=0,25<=D)throw Error(o(301));D+=1,jr=gi=null,h.updateQueue=null,J_.current=o8,f=x(E,C)}while(Cp)}if(J_.current=Z_,h=gi!==null&&gi.next!==null,id=0,jr=gi=fr=null,Y_=!1,h)throw Error(o(300));return f}function Y1(){var f=bp!==0;return bp=0,f}function Wa(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jr===null?fr.memoizedState=jr=f:jr=jr.next=f,jr}function la(){if(gi===null){var f=fr.alternate;f=f!==null?f.memoizedState:null}else f=gi.next;var h=jr===null?fr.memoizedState:jr.next;if(h!==null)jr=h,gi=f;else{if(f===null)throw Error(o(310));gi=f,f={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},jr===null?fr.memoizedState=jr=f:jr=jr.next=f}return jr}function eu(f,h){return typeof h=="function"?h(f):h}function K_(f){var h=la(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=f;var E=gi,C=E.baseQueue,D=x.pending;if(D!==null){if(C!==null){var $=C.next;C.next=D.next,D.next=$}E.baseQueue=C=D,x.pending=null}if(C!==null){D=C.next,E=E.baseState;var ue=$=null,Pe=null,$e=D;do{var ht=$e.lane;if((id&ht)===ht)Pe!==null&&(Pe=Pe.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),E=$e.hasEagerState?$e.eagerState:f(E,$e.action);else{var Ht={lane:ht,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};Pe===null?(ue=Pe=Ht,$=E):Pe=Pe.next=Ht,fr.lanes|=ht,od|=ht}$e=$e.next}while($e!==null&&$e!==D);Pe===null?$=E:Pe.next=ue,ia(E,h.memoizedState)||(Ts=!0),h.memoizedState=E,h.baseState=$,h.baseQueue=Pe,x.lastRenderedState=E}if(f=x.interleaved,f!==null){C=f;do D=C.lane,fr.lanes|=D,od|=D,C=C.next;while(C!==f)}else C===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function q_(f){var h=la(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=f;var E=x.dispatch,C=x.pending,D=h.memoizedState;if(C!==null){x.pending=null;var $=C=C.next;do D=f(D,$.action),$=$.next;while($!==C);ia(D,h.memoizedState)||(Ts=!0),h.memoizedState=D,h.baseQueue===null&&(h.baseState=D),x.lastRenderedState=D}return[D,E]}function QI(){}function ZI(f,h){var x=fr,E=la(),C=h(),D=!ia(E.memoizedState,C);if(D&&(E.memoizedState=C,Ts=!0),E=E.queue,Ip(nP.bind(null,x,E,f),[f]),E.getSnapshot!==h||D||jr!==null&&jr.memoizedState.tag&1){if(x.flags|=2048,Rp(9,tP.bind(null,x,E,C,h),void 0,null),Tr===null)throw Error(o(349));id&30||eP(x,h,C)}return C}function eP(f,h,x){f.flags|=16384,f={getSnapshot:h,value:x},h=fr.updateQueue,h===null?(h={lastEffect:null,stores:null},fr.updateQueue=h,h.stores=[f]):(x=h.stores,x===null?h.stores=[f]:x.push(f))}function tP(f,h,x,E){h.value=x,h.getSnapshot=E,rP(h)&&so(f,1,-1)}function nP(f,h,x){return x(function(){rP(h)&&so(f,1,-1)})}function rP(f){var h=f.getSnapshot;f=f.value;try{var x=h();return!ia(f,x)}catch{return!0}}function K1(f){var h=Wa();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:f},h.queue=f,f=f.dispatch=r8.bind(null,fr,f),[h.memoizedState,f]}function Rp(f,h,x,E){return f={tag:f,create:h,destroy:x,deps:E,next:null},h=fr.updateQueue,h===null?(h={lastEffect:null,stores:null},fr.updateQueue=h,h.lastEffect=f.next=f):(x=h.lastEffect,x===null?h.lastEffect=f.next=f:(E=x.next,x.next=f,f.next=E,h.lastEffect=f)),f}function iP(){return la().memoizedState}function $_(f,h,x,E){var C=Wa();fr.flags|=f,C.memoizedState=Rp(1|h,x,void 0,E===void 0?null:E)}function Q_(f,h,x,E){var C=la();E=E===void 0?null:E;var D=void 0;if(gi!==null){var $=gi.memoizedState;if(D=$.destroy,E!==null&&j1(E,$.deps)){C.memoizedState=Rp(h,x,D,E);return}}fr.flags|=f,C.memoizedState=Rp(1|h,x,D,E)}function q1(f,h){return $_(8390656,8,f,h)}function Ip(f,h){return Q_(2048,8,f,h)}function sP(f,h){return Q_(4,2,f,h)}function oP(f,h){return Q_(4,4,f,h)}function aP(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function lP(f,h,x){return x=x!=null?x.concat([f]):null,Q_(4,4,aP.bind(null,h,f),x)}function $1(){}function cP(f,h){var x=la();h=h===void 0?null:h;var E=x.memoizedState;return E!==null&&h!==null&&j1(h,E[1])?E[0]:(x.memoizedState=[f,h],f)}function uP(f,h){var x=la();h=h===void 0?null:h;var E=x.memoizedState;return E!==null&&h!==null&&j1(h,E[1])?E[0]:(f=f(),x.memoizedState=[f,h],f)}function t8(f,h){var x=En;En=x!==0&&4>x?x:4,f(!0);var E=io.transition;io.transition={};try{f(!1),h()}finally{En=x,io.transition=E}}function fP(){return la().memoizedState}function n8(f,h,x){var E=Nl(f);x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},dP(f)?hP(h,x):(pP(f,h,x),x=ki(),f=so(f,E,x),f!==null&&mP(f,h,E))}function r8(f,h,x){var E=Nl(f),C={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(dP(f))hP(h,C);else{pP(f,h,C);var D=f.alternate;if(f.lanes===0&&(D===null||D.lanes===0)&&(D=h.lastRenderedReducer,D!==null))try{var $=h.lastRenderedState,ue=D($,x);if(C.hasEagerState=!0,C.eagerState=ue,ia(ue,$))return}catch{}finally{}x=ki(),f=so(f,E,x),f!==null&&mP(f,h,E)}}function dP(f){var h=f.alternate;return f===fr||h!==null&&h===fr}function hP(f,h){Cp=Y_=!0;var x=f.pending;x===null?h.next=h:(h.next=x.next,x.next=h),f.pending=h}function pP(f,h,x){Tr!==null&&f.mode&1&&!(Kt&2)?(f=h.interleaved,f===null?(x.next=x,oa===null?oa=[h]:oa.push(h)):(x.next=f.next,f.next=x),h.interleaved=x):(f=h.pending,f===null?x.next=x:(x.next=f.next,f.next=x),h.pending=x)}function mP(f,h,x){if(x&4194240){var E=h.lanes;E&=f.pendingLanes,x|=E,h.lanes=x,M1(f,x)}}var Z_={readContext:eo,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},i8={readContext:eo,useCallback:function(f,h){return Wa().memoizedState=[f,h===void 0?null:h],f},useContext:eo,useEffect:q1,useImperativeHandle:function(f,h,x){return x=x!=null?x.concat([f]):null,$_(4194308,4,aP.bind(null,h,f),x)},useLayoutEffect:function(f,h){return $_(4194308,4,f,h)},useInsertionEffect:function(f,h){return $_(4,2,f,h)},useMemo:function(f,h){var x=Wa();return h=h===void 0?null:h,f=f(),x.memoizedState=[f,h],f},useReducer:function(f,h,x){var E=Wa();return h=x!==void 0?x(h):h,E.memoizedState=E.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},E.queue=f,f=f.dispatch=n8.bind(null,fr,f),[E.memoizedState,f]},useRef:function(f){var h=Wa();return f={current:f},h.memoizedState=f},useState:K1,useDebugValue:$1,useDeferredValue:function(f){var h=K1(f),x=h[0],E=h[1];return q1(function(){var C=io.transition;io.transition={};try{E(f)}finally{io.transition=C}},[f]),x},useTransition:function(){var f=K1(!1),h=f[0];return f=t8.bind(null,f[1]),Wa().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,x){var E=fr,C=Wa();if(qn){if(x===void 0)throw Error(o(407));x=x()}else{if(x=h(),Tr===null)throw Error(o(349));id&30||eP(E,h,x)}C.memoizedState=x;var D={value:x,getSnapshot:h};return C.queue=D,q1(nP.bind(null,E,D,f),[f]),E.flags|=2048,Rp(9,tP.bind(null,E,D,x,h),void 0,null),x},useId:function(){var f=Wa(),h=Tr.identifierPrefix;if(qn){var x=Va,E=Ga;x=(E&~(1<<32-Dn(E)-1)).toString(32)+x,h=":"+h+"R"+x,x=bp++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=e8++,h=":"+h+"r"+x.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},s8={readContext:eo,useCallback:cP,useContext:eo,useEffect:Ip,useImperativeHandle:lP,useInsertionEffect:sP,useLayoutEffect:oP,useMemo:uP,useReducer:K_,useRef:iP,useState:function(){return K_(eu)},useDebugValue:$1,useDeferredValue:function(f){var h=K_(eu),x=h[0],E=h[1];return Ip(function(){var C=io.transition;io.transition={};try{E(f)}finally{io.transition=C}},[f]),x},useTransition:function(){var f=K_(eu)[0],h=la().memoizedState;return[f,h]},useMutableSource:QI,useSyncExternalStore:ZI,useId:fP,unstable_isNewReconciler:!1},o8={readContext:eo,useCallback:cP,useContext:eo,useEffect:Ip,useImperativeHandle:lP,useInsertionEffect:sP,useLayoutEffect:oP,useMemo:uP,useReducer:q_,useRef:iP,useState:function(){return q_(eu)},useDebugValue:$1,useDeferredValue:function(f){var h=q_(eu),x=h[0],E=h[1];return Ip(function(){var C=io.transition;io.transition={};try{E(f)}finally{io.transition=C}},[f]),x},useTransition:function(){var f=q_(eu)[0],h=la().memoizedState;return[f,h]},useMutableSource:QI,useSyncExternalStore:ZI,useId:fP,unstable_isNewReconciler:!1};function Q1(f,h){try{var x="",E=h;do x+=Z5(E),E=E.return;while(E);var C=x}catch(D){C=`
Error generating stack: `+D.message+`
`+D.stack}return{value:f,source:h,stack:C}}function Z1(f,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var a8=typeof WeakMap=="function"?WeakMap:Map;function gP(f,h,x){x=Ha(-1,x),x.tag=3,x.payload={element:null};var E=h.value;return x.callback=function(){m0||(m0=!0,_A=E),Z1(f,h)},x}function _P(f,h,x){x=Ha(-1,x),x.tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var C=h.value;x.payload=function(){return E(C)},x.callback=function(){Z1(f,h)}}var D=f.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(x.callback=function(){Z1(f,h),typeof E!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var $=h.stack;this.componentDidCatch(h.value,{componentStack:$!==null?$:""})}),x}function vP(f,h,x){var E=f.pingCache;if(E===null){E=f.pingCache=new a8;var C=new Set;E.set(h,C)}else C=E.get(h),C===void 0&&(C=new Set,E.set(h,C));C.has(x)||(C.add(x),f=S8.bind(null,f,h,x),h.then(f,f))}function yP(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function xP(f,h,x,E,C){return f.mode&1?(f.flags|=65536,f.lanes=C,f):(f===h?f.flags|=65536:(f.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=Ha(-1,1),h.tag=2,Bl(x,h))),x.lanes|=1),f)}function ca(f){f.flags|=4}function SP(f,h){if(f!==null&&f.child===h.child)return!0;if(h.flags&16)return!1;for(f=h.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var Pp,Bp,e0,t0;if(q)Pp=function(f,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)me(f,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Bp=function(){},e0=function(f,h,x,E,C){if(f=f.memoizedProps,f!==E){var D=h.stateNode,$=aa(ro.current);x=ce(D,x,f,E,C,$),(h.updateQueue=x)&&ca(h)}},t0=function(f,h,x,E){x!==E&&ca(h)};else if(we){Pp=function(f,h,x,E){for(var C=h.child;C!==null;){if(C.tag===5){var D=C.stateNode;x&&E&&(D=gt(D,C.type,C.memoizedProps,C)),me(f,D)}else if(C.tag===6)D=C.stateNode,x&&E&&(D=ut(D,C.memoizedProps,C)),me(f,D);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)D=C.child,D!==null&&(D.return=C),Pp(f,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===h)break;for(;C.sibling===null;){if(C.return===null||C.return===h)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var AP=function(f,h,x,E){for(var C=h.child;C!==null;){if(C.tag===5){var D=C.stateNode;x&&E&&(D=gt(D,C.type,C.memoizedProps,C)),Ut(f,D)}else if(C.tag===6)D=C.stateNode,x&&E&&(D=ut(D,C.memoizedProps,C)),Ut(f,D);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)D=C.child,D!==null&&(D.return=C),AP(f,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===h)break;for(;C.sibling===null;){if(C.return===null||C.return===h)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};Bp=function(f,h){var x=h.stateNode;if(!SP(f,h)){f=x.containerInfo;var E=bt(f);AP(E,h,!1,!1),x.pendingChildren=E,ca(h),Qt(f,E)}},e0=function(f,h,x,E,C){var D=f.stateNode,$=f.memoizedProps;if((f=SP(f,h))&&$===E)h.stateNode=D;else{var ue=h.stateNode,Pe=aa(ro.current),$e=null;$!==E&&($e=ce(ue,x,$,E,C,Pe)),f&&$e===null?h.stateNode=D:(D=mt(D,$e,x,$,E,h,f,ue),Oe(D,x,E,C,Pe)&&ca(h),h.stateNode=D,f?ca(h):Pp(D,h,!1,!1))}},t0=function(f,h,x,E){x!==E?(f=aa(nd.current),x=aa(ro.current),h.stateNode=Ae(E,f,x,h),ca(h)):h.stateNode=f.stateNode}}else Bp=function(){},e0=function(){},t0=function(){};function Dp(f,h){if(!qn)switch(f.tailMode){case"hidden":h=f.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function vi(f){var h=f.alternate!==null&&f.alternate.child===f.child,x=0,E=0;if(h)for(var C=f.child;C!==null;)x|=C.lanes|C.childLanes,E|=C.subtreeFlags&14680064,E|=C.flags&14680064,C.return=f,C=C.sibling;else for(C=f.child;C!==null;)x|=C.lanes|C.childLanes,E|=C.subtreeFlags,E|=C.flags,C.return=f,C=C.sibling;return f.subtreeFlags|=E,f.childLanes=x,h}function l8(f,h,x){var E=h.pendingProps;switch(F1(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(h),null;case 1:return Yt(h.type)&&kn(),vi(h),null;case 3:return E=h.stateNode,rd(),ze(Ot),ze(tn),X1(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(f===null||f.child===null)&&(Ep(h)?ca(h):f===null||f.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Bo!==null&&(xA(Bo),Bo=null))),Bp(f,h),vi(h),null;case 5:V1(h),x=aa(nd.current);var C=h.type;if(f!==null&&h.stateNode!=null)e0(f,h,C,E,x),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!E){if(h.stateNode===null)throw Error(o(166));return vi(h),null}if(f=aa(ro.current),Ep(h)){if(!he)throw Error(o(175));f=N(h.stateNode,h.type,h.memoizedProps,x,f,h,!Ap),h.updateQueue=f,f!==null&&ca(h)}else{var D=ae(C,E,x,f,h);Pp(D,h,!1,!1),h.stateNode=D,Oe(D,C,E,x,f)&&ca(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return vi(h),null;case 6:if(f&&h.stateNode!=null)t0(f,h,f.memoizedProps,E);else{if(typeof E!="string"&&h.stateNode===null)throw Error(o(166));if(f=aa(nd.current),x=aa(ro.current),Ep(h)){if(!he)throw Error(o(176));if(f=h.stateNode,E=h.memoizedProps,(x=z(f,E,h,!Ap))&&(C=ws,C!==null))switch(D=(C.mode&1)!==0,C.tag){case 3:_e(C.stateNode.containerInfo,f,E,D);break;case 5:xe(C.type,C.memoizedProps,C.stateNode,f,E,D)}x&&ca(h)}else h.stateNode=Ae(E,f,x,h)}return vi(h),null;case 13:if(ze(tr),E=h.memoizedState,qn&&Ms!==null&&h.mode&1&&!(h.flags&128)){for(f=Ms;f;)f=Pt(f);return ed(),h.flags|=98560,h}if(E!==null&&E.dehydrated!==null){if(E=Ep(h),f===null){if(!E)throw Error(o(318));if(!he)throw Error(o(344));if(f=h.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));B(f,h)}else ed(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return vi(h),null}return Bo!==null&&(xA(Bo),Bo=null),h.flags&128?(h.lanes=x,h):(E=E!==null,x=!1,f===null?Ep(h):x=f.memoizedState!==null,E&&!x&&(h.child.flags|=8192,h.mode&1&&(f===null||tr.current&1?Nr===0&&(Nr=3):AA())),h.updateQueue!==null&&(h.flags|=4),vi(h),null);case 4:return rd(),Bp(f,h),f===null&&Le(h.stateNode.containerInfo),vi(h),null;case 10:return B1(h.type._context),vi(h),null;case 17:return Yt(h.type)&&kn(),vi(h),null;case 19:if(ze(tr),C=h.memoizedState,C===null)return vi(h),null;if(E=(h.flags&128)!==0,D=C.rendering,D===null)if(E)Dp(C,!1);else{if(Nr!==0||f!==null&&f.flags&128)for(f=h.child;f!==null;){if(D=j_(f),D!==null){for(h.flags|=128,Dp(C,!1),f=D.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),h.subtreeFlags=0,f=x,E=h.child;E!==null;)x=E,C=f,x.flags&=14680066,D=x.alternate,D===null?(x.childLanes=0,x.lanes=C,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=D.childLanes,x.lanes=D.lanes,x.child=D.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=D.memoizedProps,x.memoizedState=D.memoizedState,x.updateQueue=D.updateQueue,x.type=D.type,C=D.dependencies,x.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),E=E.sibling;return _t(tr,tr.current&1|2),h.child}f=f.sibling}C.tail!==null&&Xr()>gA&&(h.flags|=128,E=!0,Dp(C,!1),h.lanes=4194304)}else{if(!E)if(f=j_(D),f!==null){if(h.flags|=128,E=!0,f=f.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),Dp(C,!0),C.tail===null&&C.tailMode==="hidden"&&!D.alternate&&!qn)return vi(h),null}else 2*Xr()-C.renderingStartTime>gA&&x!==1073741824&&(h.flags|=128,E=!0,Dp(C,!1),h.lanes=4194304);C.isBackwards?(D.sibling=h.child,h.child=D):(f=C.last,f!==null?f.sibling=D:h.child=D,C.last=D)}return C.tail!==null?(h=C.tail,C.rendering=h,C.tail=h.sibling,C.renderingStartTime=Xr(),h.sibling=null,f=tr.current,_t(tr,E?f&1|2:f&1),h):(vi(h),null);case 22:case 23:return SA(),E=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==E&&(h.flags|=8192),E&&h.mode&1?Cs&1073741824&&(vi(h),q&&h.subtreeFlags&6&&(h.flags|=8192)):vi(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var c8=a.ReactCurrentOwner,Ts=!1;function Oi(f,h,x,E){h.child=f===null?qI(h,null,x,E):td(h,f.child,x,E)}function EP(f,h,x,E,C){x=x.render;var D=h.ref;return $f(h,C),E=J1(f,h,x,E,D,C),x=Y1(),f!==null&&!Ts?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~C,Xa(f,h,C)):(qn&&x&&k1(h),h.flags|=1,Oi(f,h,E,C),h.child)}function wP(f,h,x,E,C){if(f===null){var D=x.type;return typeof D=="function"&&!EA(D)&&D.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=D,MP(f,h,D,E,C)):(f=A0(x.type,null,E,h,h.mode,C),f.ref=h.ref,f.return=h,h.child=f)}if(D=f.child,!(f.lanes&C)){var $=D.memoizedProps;if(x=x.compare,x=x!==null?x:k_,x($,E)&&f.ref===h.ref)return Xa(f,h,C)}return h.flags|=1,f=kl(D,E),f.ref=h.ref,f.return=h,h.child=f}function MP(f,h,x,E,C){if(f!==null&&k_(f.memoizedProps,E)&&f.ref===h.ref)if(Ts=!1,(f.lanes&C)!==0)f.flags&131072&&(Ts=!0);else return h.lanes=f.lanes,Xa(f,h,C);return eA(f,h,x,E,C)}function TP(f,h,x){var E=h.pendingProps,C=E.children,D=f!==null?f.memoizedState:null;if(E.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},_t(sd,Cs),Cs|=x;else if(x&1073741824)h.memoizedState={baseLanes:0,cachePool:null},E=D!==null?D.baseLanes:x,_t(sd,Cs),Cs|=E;else return f=D!==null?D.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null},h.updateQueue=null,_t(sd,Cs),Cs|=f,null;else D!==null?(E=D.baseLanes|x,h.memoizedState=null):E=x,_t(sd,Cs),Cs|=E;return Oi(f,h,C,x),h.child}function CP(f,h){var x=h.ref;(f===null&&x!==null||f!==null&&f.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function eA(f,h,x,E,C){var D=Yt(x)?un:tn.current;return D=Mr(h,D),$f(h,C),x=J1(f,h,x,E,D,C),E=Y1(),f!==null&&!Ts?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~C,Xa(f,h,C)):(qn&&E&&k1(h),h.flags|=1,Oi(f,h,x,C),h.child)}function bP(f,h,x,E,C){if(Yt(x)){var D=!0;xn(h)}else D=!1;if($f(h,C),h.stateNode===null)f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),GI(h,x,E),O1(h,x,E,C),E=!0;else if(f===null){var $=h.stateNode,ue=h.memoizedProps;$.props=ue;var Pe=$.context,$e=x.contextType;typeof $e=="object"&&$e!==null?$e=eo($e):($e=Yt(x)?un:tn.current,$e=Mr(h,$e));var ht=x.getDerivedStateFromProps,Ht=typeof ht=="function"||typeof $.getSnapshotBeforeUpdate=="function";Ht||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ue!==E||Pe!==$e)&&VI(h,$,E,$e),Pl=!1;var Bt=h.memoizedState;$.state=Bt,H_(h,E,$,C),Pe=h.memoizedState,ue!==E||Bt!==Pe||Ot.current||Pl?(typeof ht=="function"&&(N1(h,x,ht,E),Pe=h.memoizedState),(ue=Pl||HI(h,x,ue,E,Bt,Pe,$e))?(Ht||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(h.flags|=4194308)):(typeof $.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=Pe),$.props=E,$.state=Pe,$.context=$e,E=ue):(typeof $.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{$=h.stateNode,kI(f,h),ue=h.memoizedProps,$e=h.type===h.elementType?ue:Po(h.type,ue),$.props=$e,Ht=h.pendingProps,Bt=$.context,Pe=x.contextType,typeof Pe=="object"&&Pe!==null?Pe=eo(Pe):(Pe=Yt(x)?un:tn.current,Pe=Mr(h,Pe));var Ln=x.getDerivedStateFromProps;(ht=typeof Ln=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ue!==Ht||Bt!==Pe)&&VI(h,$,E,Pe),Pl=!1,Bt=h.memoizedState,$.state=Bt,H_(h,E,$,C);var Ct=h.memoizedState;ue!==Ht||Bt!==Ct||Ot.current||Pl?(typeof Ln=="function"&&(N1(h,x,Ln,E),Ct=h.memoizedState),($e=Pl||HI(h,x,$e,E,Bt,Ct,Pe)||!1)?(ht||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(E,Ct,Pe),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(E,Ct,Pe)),typeof $.componentDidUpdate=="function"&&(h.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof $.componentDidUpdate!="function"||ue===f.memoizedProps&&Bt===f.memoizedState||(h.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ue===f.memoizedProps&&Bt===f.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=Ct),$.props=E,$.state=Ct,$.context=Pe,E=$e):(typeof $.componentDidUpdate!="function"||ue===f.memoizedProps&&Bt===f.memoizedState||(h.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ue===f.memoizedProps&&Bt===f.memoizedState||(h.flags|=1024),E=!1)}return tA(f,h,x,E,D,C)}function tA(f,h,x,E,C,D){CP(f,h);var $=(h.flags&128)!==0;if(!E&&!$)return C&&dn(h,x,!1),Xa(f,h,D);E=h.stateNode,c8.current=h;var ue=$&&typeof x.getDerivedStateFromError!="function"?null:E.render();return h.flags|=1,f!==null&&$?(h.child=td(h,f.child,null,D),h.child=td(h,null,ue,D)):Oi(f,h,ue,D),h.memoizedState=E.state,C&&dn(h,x,!0),h.child}function RP(f){var h=f.stateNode;h.pendingContext?fn(f,h.pendingContext,h.pendingContext!==h.context):h.context&&fn(f,h.context,!1),G1(f,h.containerInfo)}function IP(f,h,x,E,C){return ed(),H1(C),h.flags|=256,Oi(f,h,x,E),h.child}var n0={dehydrated:null,treeContext:null,retryLane:0};function r0(f){return{baseLanes:f,cachePool:null}}function PP(f,h,x){var E=h.pendingProps,C=tr.current,D=!1,$=(h.flags&128)!==0,ue;if((ue=$)||(ue=f!==null&&f.memoizedState===null?!1:(C&2)!==0),ue?(D=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(C|=1),_t(tr,C&1),f===null)return z1(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(h.mode&1?Rt(f)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(C=E.children,f=E.fallback,D?(E=h.mode,D=h.child,C={mode:"hidden",children:C},!(E&1)&&D!==null?(D.childLanes=0,D.pendingProps=C):D=E0(C,E,0,null),f=ou(f,E,x,null),D.return=h,f.return=h,D.sibling=f,h.child=D,h.child.memoizedState=r0(x),h.memoizedState=n0,f):nA(h,C));if(C=f.memoizedState,C!==null){if(ue=C.dehydrated,ue!==null){if($)return h.flags&256?(h.flags&=-257,i0(f,h,x,Error(o(422)))):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(D=E.fallback,C=h.mode,E=E0({mode:"visible",children:E.children},C,0,null),D=ou(D,C,x,null),D.flags|=2,E.return=h,D.return=h,E.sibling=D,h.child=E,h.mode&1&&td(h,f.child,null,x),h.child.memoizedState=r0(x),h.memoizedState=n0,D);if(!(h.mode&1))h=i0(f,h,x,null);else if(Rt(ue))h=i0(f,h,x,Error(o(419)));else if(E=(x&f.childLanes)!==0,Ts||E){if(E=Tr,E!==null){switch(x&-x){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}E=D&(E.suspendedLanes|x)?0:D,E!==0&&E!==C.retryLane&&(C.retryLane=E,so(f,E,-1))}AA(),h=i0(f,h,x,Error(o(421)))}else St(ue)?(h.flags|=128,h.child=f.child,h=A8.bind(null,f),bn(ue,h),h=null):(x=C.treeContext,he&&(Ms=Bn(ue),ws=h,qn=!0,Bo=null,Ap=!1,x!==null&&(to[no++]=Ga,to[no++]=Va,to[no++]=Qc,Ga=x.id,Va=x.overflow,Qc=h)),h=nA(h,h.pendingProps.children),h.flags|=4096);return h}return D?(E=DP(f,h,E.children,E.fallback,x),D=h.child,C=f.child.memoizedState,D.memoizedState=C===null?r0(x):{baseLanes:C.baseLanes|x,cachePool:null},D.childLanes=f.childLanes&~x,h.memoizedState=n0,E):(x=BP(f,h,E.children,x),h.memoizedState=null,x)}return D?(E=DP(f,h,E.children,E.fallback,x),D=h.child,C=f.child.memoizedState,D.memoizedState=C===null?r0(x):{baseLanes:C.baseLanes|x,cachePool:null},D.childLanes=f.childLanes&~x,h.memoizedState=n0,E):(x=BP(f,h,E.children,x),h.memoizedState=null,x)}function nA(f,h){return h=E0({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function BP(f,h,x,E){var C=f.child;return f=C.sibling,x=kl(C,{mode:"visible",children:x}),!(h.mode&1)&&(x.lanes=E),x.return=h,x.sibling=null,f!==null&&(E=h.deletions,E===null?(h.deletions=[f],h.flags|=16):E.push(f)),h.child=x}function DP(f,h,x,E,C){var D=h.mode;f=f.child;var $=f.sibling,ue={mode:"hidden",children:x};return!(D&1)&&h.child!==f?(x=h.child,x.childLanes=0,x.pendingProps=ue,h.deletions=null):(x=kl(f,ue),x.subtreeFlags=f.subtreeFlags&14680064),$!==null?E=kl($,E):(E=ou(E,D,C,null),E.flags|=2),E.return=h,x.return=h,x.sibling=E,h.child=x,E}function i0(f,h,x,E){return E!==null&&H1(E),td(h,f.child,null,x),f=nA(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function LP(f,h,x){f.lanes|=h;var E=f.alternate;E!==null&&(E.lanes|=h),D1(f.return,h,x)}function rA(f,h,x,E,C){var D=f.memoizedState;D===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:C}:(D.isBackwards=h,D.rendering=null,D.renderingStartTime=0,D.last=E,D.tail=x,D.tailMode=C)}function NP(f,h,x){var E=h.pendingProps,C=E.revealOrder,D=E.tail;if(Oi(f,h,E.children,x),E=tr.current,E&2)E=E&1|2,h.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&LP(f,x,h);else if(f.tag===19)LP(f,x,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(_t(tr,E),!(h.mode&1))h.memoizedState=null;else switch(C){case"forwards":for(x=h.child,C=null;x!==null;)f=x.alternate,f!==null&&j_(f)===null&&(C=x),x=x.sibling;x=C,x===null?(C=h.child,h.child=null):(C=x.sibling,x.sibling=null),rA(h,!1,C,x,D);break;case"backwards":for(x=null,C=h.child,h.child=null;C!==null;){if(f=C.alternate,f!==null&&j_(f)===null){h.child=C;break}f=C.sibling,C.sibling=x,x=C,C=f}rA(h,!0,x,null,D);break;case"together":rA(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Xa(f,h,x){if(f!==null&&(h.dependencies=f.dependencies),od|=h.lanes,!(x&h.childLanes))return null;if(f!==null&&h.child!==f.child)throw Error(o(153));if(h.child!==null){for(f=h.child,x=kl(f,f.pendingProps),h.child=x,x.return=h;f.sibling!==null;)f=f.sibling,x=x.sibling=kl(f,f.pendingProps),x.return=h;x.sibling=null}return h.child}function u8(f,h,x){switch(h.tag){case 3:RP(h),ed();break;case 5:$I(h);break;case 1:Yt(h.type)&&xn(h);break;case 4:G1(h,h.stateNode.containerInfo);break;case 10:OI(h,h.type._context,h.memoizedProps.value);break;case 13:var E=h.memoizedState;if(E!==null)return E.dehydrated!==null?(_t(tr,tr.current&1),h.flags|=128,null):x&h.child.childLanes?PP(f,h,x):(_t(tr,tr.current&1),f=Xa(f,h,x),f!==null?f.sibling:null);_t(tr,tr.current&1);break;case 19:if(E=(x&h.childLanes)!==0,f.flags&128){if(E)return NP(f,h,x);h.flags|=128}var C=h.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),_t(tr,tr.current),E)break;return null;case 22:case 23:return h.lanes=0,TP(f,h,x)}return Xa(f,h,x)}function f8(f,h){switch(F1(h),h.tag){case 1:return Yt(h.type)&&kn(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return rd(),ze(Ot),ze(tn),X1(),f=h.flags,f&65536&&!(f&128)?(h.flags=f&-65537|128,h):null;case 5:return V1(h),null;case 13:if(ze(tr),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(o(340));ed()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return ze(tr),null;case 4:return rd(),null;case 10:return B1(h.type._context),null;case 22:case 23:return SA(),null;case 24:return null;default:return null}}var s0=!1,tu=!1,d8=typeof WeakSet=="function"?WeakSet:Set,it=null;function o0(f,h){var x=f.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){ss(f,h,E)}else x.current=null}function iA(f,h,x){try{x()}catch(E){ss(f,h,E)}}var OP=!1;function h8(f,h){for(Y(f.containerInfo),it=h;it!==null;)if(f=it,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,it=h;else for(;it!==null;){f=it;try{var x=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,C=x.memoizedState,D=f.stateNode,$=D.getSnapshotBeforeUpdate(f.elementType===f.type?E:Po(f.type,E),C);D.__reactInternalSnapshotBeforeUpdate=$}break;case 3:q&&Ve(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ue){ss(f,f.return,ue)}if(h=f.sibling,h!==null){h.return=f.return,it=h;break}it=f.return}return x=OP,OP=!1,x}function nu(f,h,x){var E=h.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var C=E=E.next;do{if((C.tag&f)===f){var D=C.destroy;C.destroy=void 0,D!==void 0&&iA(h,x,D)}C=C.next}while(C!==E)}}function Lp(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&f)===f){var E=x.create;x.destroy=E()}x=x.next}while(x!==h)}}function sA(f){var h=f.ref;if(h!==null){var x=f.stateNode;switch(f.tag){case 5:f=K(x);break;default:f=x}typeof h=="function"?h(f):h.current=f}}function kP(f,h,x){if(ra&&typeof ra.onCommitFiberUnmount=="function")try{ra.onCommitFiberUnmount(N_,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var E=f=f.next;do{var C=E,D=C.destroy;C=C.tag,D!==void 0&&(C&2||C&4)&&iA(h,x,D),E=E.next}while(E!==f)}break;case 1:if(o0(h,x),f=h.stateNode,typeof f.componentWillUnmount=="function")try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch($){ss(h,x,$)}break;case 5:o0(h,x);break;case 4:q?VP(f,h,x):we&&we&&(h=h.stateNode.containerInfo,x=bt(h),Nt(h,x))}}function FP(f,h,x){for(var E=h;;)if(kP(f,E,x),E.child===null||q&&E.tag===4){if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function UP(f){var h=f.alternate;h!==null&&(f.alternate=null,UP(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&ne(h)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function zP(f){return f.tag===5||f.tag===3||f.tag===4}function HP(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||zP(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function GP(f){if(q){e:{for(var h=f.return;h!==null;){if(zP(h))break e;h=h.return}throw Error(o(160))}var x=h;switch(x.tag){case 5:h=x.stateNode,x.flags&32&&(Ye(h),x.flags&=-33),x=HP(f),aA(f,x,h);break;case 3:case 4:h=x.stateNode.containerInfo,x=HP(f),oA(f,x,h);break;default:throw Error(o(161))}}}function oA(f,h,x){var E=f.tag;if(E===5||E===6)f=f.stateNode,h?Ge(x,f,h):yt(x,f);else if(E!==4&&(f=f.child,f!==null))for(oA(f,h,x),f=f.sibling;f!==null;)oA(f,h,x),f=f.sibling}function aA(f,h,x){var E=f.tag;if(E===5||E===6)f=f.stateNode,h?Et(x,f,h):Je(x,f);else if(E!==4&&(f=f.child,f!==null))for(aA(f,h,x),f=f.sibling;f!==null;)aA(f,h,x),f=f.sibling}function VP(f,h,x){for(var E=h,C=!1,D,$;;){if(!C){C=E.return;e:for(;;){if(C===null)throw Error(o(160));switch(D=C.stateNode,C.tag){case 5:$=!1;break e;case 3:D=D.containerInfo,$=!0;break e;case 4:D=D.containerInfo,$=!0;break e}C=C.return}C=!0}if(E.tag===5||E.tag===6)FP(f,E,x),$?Re(D,E.stateNode):re(D,E.stateNode);else if(E.tag===18)$?le(D,E.stateNode):J(D,E.stateNode);else if(E.tag===4){if(E.child!==null){D=E.stateNode.containerInfo,$=!0,E.child.return=E,E=E.child;continue}}else if(kP(f,E,x),E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return,E.tag===4&&(C=!1)}E.sibling.return=E.return,E=E.sibling}}function lA(f,h){if(q){switch(h.tag){case 0:case 11:case 14:case 15:nu(3,h,h.return),Lp(3,h),nu(5,h,h.return);return;case 1:return;case 5:var x=h.stateNode;if(x!=null){var E=h.memoizedProps;f=f!==null?f.memoizedProps:E;var C=h.type,D=h.updateQueue;h.updateQueue=null,D!==null&&xt(x,D,C,f,E,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));x=h.memoizedProps,Ue(h.stateNode,f!==null?f.memoizedProps:x,x);return;case 3:he&&f!==null&&f.memoizedState.isDehydrated&&V(h.stateNode.containerInfo);return;case 12:return;case 13:a0(h);return;case 19:a0(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:nu(3,h,h.return),Lp(3,h),nu(5,h,h.return);return;case 12:return;case 13:a0(h);return;case 19:a0(h);return;case 3:he&&f!==null&&f.memoizedState.isDehydrated&&V(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(we){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Nt(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function a0(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var x=f.stateNode;x===null&&(x=f.stateNode=new d8),h.forEach(function(E){var C=E8.bind(null,f,E);x.has(E)||(x.add(E),E.then(C,C))})}}function p8(f,h){for(it=h;it!==null;){h=it;var x=h.deletions;if(x!==null)for(var E=0;E<x.length;E++){var C=x[E];try{var D=f;q?VP(D,C,h):FP(D,C,h);var $=C.alternate;$!==null&&($.return=null),C.return=null}catch(Tt){ss(C,h,Tt)}}if(x=h.child,h.subtreeFlags&12854&&x!==null)x.return=h,it=x;else for(;it!==null;){h=it;try{var ue=h.flags;if(ue&32&&q&&Ye(h.stateNode),ue&512){var Pe=h.alternate;if(Pe!==null){var $e=Pe.ref;$e!==null&&(typeof $e=="function"?$e(null):$e.current=null)}}if(ue&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var ht=h.alternate;(ht===null||ht.memoizedState===null)&&(mA=Xr())}break;case 22:var Ht=h.memoizedState!==null,Bt=h.alternate,Ln=Bt!==null&&Bt.memoizedState!==null;if(x=h,q){e:if(E=x,C=Ht,D=null,q)for(var Ct=E;;){if(Ct.tag===5){if(D===null){D=Ct;var yi=Ct.stateNode;C?Z(yi):oe(Ct.stateNode,Ct.memoizedProps)}}else if(Ct.tag===6){if(D===null){var ao=Ct.stateNode;C?Ie(ao):Te(ao,Ct.memoizedProps)}}else if((Ct.tag!==22&&Ct.tag!==23||Ct.memoizedState===null||Ct===E)&&Ct.child!==null){Ct.child.return=Ct,Ct=Ct.child;continue}if(Ct===E)break;for(;Ct.sibling===null;){if(Ct.return===null||Ct.return===E)break e;D===Ct&&(D=null),Ct=Ct.return}D===Ct&&(D=null),Ct.sibling.return=Ct.return,Ct=Ct.sibling}}if(Ht&&!Ln&&x.mode&1){it=x;for(var ye=x.child;ye!==null;){for(x=it=ye;it!==null;){E=it;var de=E.child;switch(E.tag){case 0:case 11:case 14:case 15:nu(4,E,E.return);break;case 1:o0(E,E.return);var Me=E.stateNode;if(typeof Me.componentWillUnmount=="function"){var ot=E.return;try{Me.props=E.memoizedProps,Me.state=E.memoizedState,Me.componentWillUnmount()}catch(Tt){ss(E,ot,Tt)}}break;case 5:o0(E,E.return);break;case 22:if(E.memoizedState!==null){jP(x);continue}}de!==null?(de.return=E,it=de):jP(x)}ye=ye.sibling}}}switch(ue&4102){case 2:GP(h),h.flags&=-3;break;case 6:GP(h),h.flags&=-3,lA(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,lA(h.alternate,h);break;case 4:lA(h.alternate,h)}}catch(Tt){ss(h,h.return,Tt)}if(x=h.sibling,x!==null){x.return=h.return,it=x;break}it=h.return}}}function m8(f,h,x){it=f,WP(f)}function WP(f,h,x){for(var E=(f.mode&1)!==0;it!==null;){var C=it,D=C.child;if(C.tag===22&&E){var $=C.memoizedState!==null||s0;if(!$){var ue=C.alternate,Pe=ue!==null&&ue.memoizedState!==null||tu;ue=s0;var $e=tu;if(s0=$,(tu=Pe)&&!$e)for(it=C;it!==null;)$=it,Pe=$.child,$.tag===22&&$.memoizedState!==null?JP(C):Pe!==null?(Pe.return=$,it=Pe):JP(C);for(;D!==null;)it=D,WP(D),D=D.sibling;it=C,s0=ue,tu=$e}XP(f)}else C.subtreeFlags&8772&&D!==null?(D.return=C,it=D):XP(f)}}function XP(f){for(;it!==null;){var h=it;if(h.flags&8772){var x=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:tu||Lp(5,h);break;case 1:var E=h.stateNode;if(h.flags&4&&!tu)if(x===null)E.componentDidMount();else{var C=h.elementType===h.type?x.memoizedProps:Po(h.type,x.memoizedProps);E.componentDidUpdate(C,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var D=h.updateQueue;D!==null&&UI(h,D,E);break;case 3:var $=h.updateQueue;if($!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=K(h.child.stateNode);break;case 1:x=h.child.stateNode}UI(h,$,x)}break;case 5:var ue=h.stateNode;x===null&&h.flags&4&&at(ue,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(he&&h.memoizedState===null){var Pe=h.alternate;if(Pe!==null){var $e=Pe.memoizedState;if($e!==null){var ht=$e.dehydrated;ht!==null&&W(ht)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}tu||h.flags&512&&sA(h)}catch(Ht){ss(h,h.return,Ht)}}if(h===f){it=null;break}if(x=h.sibling,x!==null){x.return=h.return,it=x;break}it=h.return}}function jP(f){for(;it!==null;){var h=it;if(h===f){it=null;break}var x=h.sibling;if(x!==null){x.return=h.return,it=x;break}it=h.return}}function JP(f){for(;it!==null;){var h=it;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{Lp(4,h)}catch(Pe){ss(h,x,Pe)}break;case 1:var E=h.stateNode;if(typeof E.componentDidMount=="function"){var C=h.return;try{E.componentDidMount()}catch(Pe){ss(h,C,Pe)}}var D=h.return;try{sA(h)}catch(Pe){ss(h,D,Pe)}break;case 5:var $=h.return;try{sA(h)}catch(Pe){ss(h,$,Pe)}}}catch(Pe){ss(h,h.return,Pe)}if(h===f){it=null;break}var ue=h.sibling;if(ue!==null){ue.return=h.return,it=ue;break}it=h.return}}var l0=0,c0=1,u0=2,f0=3,d0=4;if(typeof Symbol=="function"&&Symbol.for){var Np=Symbol.for;l0=Np("selector.component"),c0=Np("selector.has_pseudo_class"),u0=Np("selector.role"),f0=Np("selector.test_id"),d0=Np("selector.text")}function cA(f){var h=Ce(f);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(f=k(f),f===null)throw Error(o(362));return f.stateNode.current}function uA(f,h){switch(h.$$typeof){case l0:if(f.type===h.value)return!0;break;case c0:e:{h=h.value,f=[f,0];for(var x=0;x<f.length;){var E=f[x++],C=f[x++],D=h[C];if(E.tag!==5||!be(E)){for(;D!=null&&uA(E,D);)C++,D=h[C];if(C===h.length){h=!0;break e}else for(E=E.child;E!==null;)f.push(E,C),E=E.sibling}}h=!1}return h;case u0:if(f.tag===5&&Be(f.stateNode,h.value))return!0;break;case d0:if((f.tag===5||f.tag===6)&&(f=ge(f),f!==null&&0<=f.indexOf(h.value)))return!0;break;case f0:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function fA(f){switch(f.$$typeof){case l0:return"<"+(R(f.value)||"Unknown")+">";case c0:return":has("+(fA(f)||"")+")";case u0:return'[role="'+f.value+'"]';case d0:return'"'+f.value+'"';case f0:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function YP(f,h){var x=[];f=[f,0];for(var E=0;E<f.length;){var C=f[E++],D=f[E++],$=h[D];if(C.tag!==5||!be(C)){for(;$!=null&&uA(C,$);)D++,$=h[D];if(D===h.length)x.push(C);else for(C=C.child;C!==null;)f.push(C,D),C=C.sibling}}return x}function dA(f,h){if(!X)throw Error(o(363));f=cA(f),f=YP(f,h),h=[],f=Array.from(f);for(var x=0;x<f.length;){var E=f[x++];if(E.tag===5)be(E)||h.push(E.stateNode);else for(E=E.child;E!==null;)f.push(E),E=E.sibling}return h}var g8=Math.ceil,h0=a.ReactCurrentDispatcher,hA=a.ReactCurrentOwner,vr=a.ReactCurrentBatchConfig,Kt=0,Tr=null,Cr=null,li=0,Cs=0,sd=ct(0),Nr=0,Op=null,od=0,p0=0,pA=0,kp=null,rs=null,mA=0,gA=1/0;function ad(){gA=Xr()+500}var m0=!1,_A=null,Dl=null,g0=!1,Ll=null,_0=0,Fp=0,vA=null,v0=-1,y0=0;function ki(){return Kt&6?Xr():v0!==-1?v0:v0=Xr()}function Nl(f){return f.mode&1?Kt&2&&li!==0?li&-li:Q5.transition!==null?(y0===0&&(f=B_,B_<<=1,!(B_&4194240)&&(B_=64),y0=f),y0):(f=En,f!==0?f:ke()):1}function so(f,h,x){if(50<Fp)throw Fp=0,vA=null,Error(o(185));var E=x0(f,h);return E===null?null:(Sp(E,h,x),(!(Kt&2)||E!==Tr)&&(E===Tr&&(!(Kt&2)&&(p0|=h),Nr===4&&Ol(E,li)),is(E,x),h===1&&Kt===0&&!(f.mode&1)&&(ad(),O_&&sa())),E)}function x0(f,h){f.lanes|=h;var x=f.alternate;for(x!==null&&(x.lanes|=h),x=f,f=f.return;f!==null;)f.childLanes|=h,x=f.alternate,x!==null&&(x.childLanes|=h),x=f,f=f.return;return x.tag===3?x.stateNode:null}function is(f,h){var x=f.callbackNode;V5(f,h);var E=L_(f,f===Tr?li:0);if(E===0)x!==null&&LI(x),f.callbackNode=null,f.callbackPriority=0;else if(h=E&-E,f.callbackPriority!==h){if(x!=null&&LI(x),h===1)f.tag===0?$5(qP.bind(null,f)):NI(qP.bind(null,f)),We?je(function(){Kt===0&&sa()}):T1(C1,sa),x=null;else{switch(DI(E)){case 1:x=C1;break;case 4:x=J5;break;case 16:x=b1;break;case 536870912:x=Y5;break;default:x=b1}x=sB(x,KP.bind(null,f))}f.callbackPriority=h,f.callbackNode=x}}function KP(f,h){if(v0=-1,y0=0,Kt&6)throw Error(o(327));var x=f.callbackNode;if(su()&&f.callbackNode!==x)return null;var E=L_(f,f===Tr?li:0);if(E===0)return null;if(E&30||E&f.expiredLanes||h)h=S0(f,E);else{h=E;var C=Kt;Kt|=2;var D=ZP();(Tr!==f||li!==h)&&(ad(),ru(f,h));do try{y8();break}catch(ue){QP(f,ue)}while(!0);P1(),h0.current=D,Kt=C,Cr!==null?h=0:(Tr=null,li=0,h=Nr)}if(h!==0){if(h===2&&(C=E1(f),C!==0&&(E=C,h=yA(f,C))),h===1)throw x=Op,ru(f,0),Ol(f,E),is(f,Xr()),x;if(h===6)Ol(f,E);else{if(C=f.current.alternate,!(E&30)&&!_8(C)&&(h=S0(f,E),h===2&&(D=E1(f),D!==0&&(E=D,h=yA(f,D))),h===1))throw x=Op,ru(f,0),Ol(f,E),is(f,Xr()),x;switch(f.finishedWork=C,f.finishedLanes=E,h){case 0:case 1:throw Error(o(345));case 2:iu(f,rs);break;case 3:if(Ol(f,E),(E&130023424)===E&&(h=mA+500-Xr(),10<h)){if(L_(f,0)!==0)break;if(C=f.suspendedLanes,(C&E)!==E){ki(),f.pingedLanes|=f.suspendedLanes&C;break}f.timeoutHandle=Ee(iu.bind(null,f,rs),h);break}iu(f,rs);break;case 4:if(Ol(f,E),(E&4194240)===E)break;for(h=f.eventTimes,C=-1;0<E;){var $=31-Dn(E);D=1<<$,$=h[$],$>C&&(C=$),E&=~D}if(E=C,E=Xr()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*g8(E/1960))-E,10<E){f.timeoutHandle=Ee(iu.bind(null,f,rs),E);break}iu(f,rs);break;case 5:iu(f,rs);break;default:throw Error(o(329))}}}return is(f,Xr()),f.callbackNode===x?KP.bind(null,f):null}function yA(f,h){var x=kp;return f.current.memoizedState.isDehydrated&&(ru(f,h).flags|=256),f=S0(f,h),f!==2&&(h=rs,rs=x,h!==null&&xA(h)),f}function xA(f){rs===null?rs=f:rs.push.apply(rs,f)}function _8(f){for(var h=f;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var E=0;E<x.length;E++){var C=x[E],D=C.getSnapshot;C=C.value;try{if(!ia(D(),C))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ol(f,h){for(h&=~pA,h&=~p0,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var x=31-Dn(h),E=1<<x;f[x]=-1,h&=~E}}function qP(f){if(Kt&6)throw Error(o(327));su();var h=L_(f,0);if(!(h&1))return is(f,Xr()),null;var x=S0(f,h);if(f.tag!==0&&x===2){var E=E1(f);E!==0&&(h=E,x=yA(f,E))}if(x===1)throw x=Op,ru(f,0),Ol(f,h),is(f,Xr()),x;if(x===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,iu(f,rs),is(f,Xr()),null}function $P(f){Ll!==null&&Ll.tag===0&&!(Kt&6)&&su();var h=Kt;Kt|=1;var x=vr.transition,E=En;try{if(vr.transition=null,En=1,f)return f()}finally{En=E,vr.transition=x,Kt=h,!(Kt&6)&&sa()}}function SA(){Cs=sd.current,ze(sd)}function ru(f,h){f.finishedWork=null,f.finishedLanes=0;var x=f.timeoutHandle;if(x!==rt&&(f.timeoutHandle=rt,Qe(x)),Cr!==null)for(x=Cr.return;x!==null;){var E=x;switch(F1(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&kn();break;case 3:rd(),ze(Ot),ze(tn),X1();break;case 5:V1(E);break;case 4:rd();break;case 13:ze(tr);break;case 19:ze(tr);break;case 10:B1(E.type._context);break;case 22:case 23:SA()}x=x.return}if(Tr=f,Cr=f=kl(f.current,null),li=Cs=h,Nr=0,Op=null,pA=p0=od=0,rs=kp=null,oa!==null){for(h=0;h<oa.length;h++)if(x=oa[h],E=x.interleaved,E!==null){x.interleaved=null;var C=E.next,D=x.pending;if(D!==null){var $=D.next;D.next=C,E.next=$}x.pending=E}oa=null}return f}function QP(f,h){do{var x=Cr;try{if(P1(),J_.current=Z_,Y_){for(var E=fr.memoizedState;E!==null;){var C=E.queue;C!==null&&(C.pending=null),E=E.next}Y_=!1}if(id=0,jr=gi=fr=null,Cp=!1,bp=0,hA.current=null,x===null||x.return===null){Nr=1,Op=h,Cr=null;break}e:{var D=f,$=x.return,ue=x,Pe=h;if(h=li,ue.flags|=32768,Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var $e=Pe,ht=ue,Ht=ht.tag;if(!(ht.mode&1)&&(Ht===0||Ht===11||Ht===15)){var Bt=ht.alternate;Bt?(ht.updateQueue=Bt.updateQueue,ht.memoizedState=Bt.memoizedState,ht.lanes=Bt.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var Ln=yP($);if(Ln!==null){Ln.flags&=-257,xP(Ln,$,ue,D,h),Ln.mode&1&&vP(D,$e,h),h=Ln,Pe=$e;var Ct=h.updateQueue;if(Ct===null){var yi=new Set;yi.add(Pe),h.updateQueue=yi}else Ct.add(Pe);break e}else{if(!(h&1)){vP(D,$e,h),AA();break e}Pe=Error(o(426))}}else if(qn&&ue.mode&1){var ao=yP($);if(ao!==null){!(ao.flags&65536)&&(ao.flags|=256),xP(ao,$,ue,D,h),H1(Pe);break e}}D=Pe,Nr!==4&&(Nr=2),kp===null?kp=[D]:kp.push(D),Pe=Q1(Pe,ue),ue=$;do{switch(ue.tag){case 3:ue.flags|=65536,h&=-h,ue.lanes|=h;var ye=gP(ue,Pe,h);FI(ue,ye);break e;case 1:D=Pe;var de=ue.type,Me=ue.stateNode;if(!(ue.flags&128)&&(typeof de.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(Dl===null||!Dl.has(Me)))){ue.flags|=65536,h&=-h,ue.lanes|=h;var ot=_P(ue,D,h);FI(ue,ot);break e}}ue=ue.return}while(ue!==null)}tB(x)}catch(Tt){h=Tt,Cr===x&&x!==null&&(Cr=x=x.return);continue}break}while(!0)}function ZP(){var f=h0.current;return h0.current=Z_,f===null?Z_:f}function AA(){(Nr===0||Nr===3||Nr===2)&&(Nr=4),Tr===null||!(od&268435455)&&!(p0&268435455)||Ol(Tr,li)}function S0(f,h){var x=Kt;Kt|=2;var E=ZP();Tr===f&&li===h||ru(f,h);do try{v8();break}catch(C){QP(f,C)}while(!0);if(P1(),Kt=x,h0.current=E,Cr!==null)throw Error(o(261));return Tr=null,li=0,Nr}function v8(){for(;Cr!==null;)eB(Cr)}function y8(){for(;Cr!==null&&!X5();)eB(Cr)}function eB(f){var h=iB(f.alternate,f,Cs);f.memoizedProps=f.pendingProps,h===null?tB(f):Cr=h,hA.current=null}function tB(f){var h=f;do{var x=h.alternate;if(f=h.return,h.flags&32768){if(x=f8(x,h),x!==null){x.flags&=32767,Cr=x;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Nr=6,Cr=null;return}}else if(x=l8(x,h,Cs),x!==null){Cr=x;return}if(h=h.sibling,h!==null){Cr=h;return}Cr=h=f}while(h!==null);Nr===0&&(Nr=5)}function iu(f,h){var x=En,E=vr.transition;try{vr.transition=null,En=1,x8(f,h,x)}finally{vr.transition=E,En=x}return null}function x8(f,h,x){do su();while(Ll!==null);if(Kt&6)throw Error(o(327));var E=f.finishedWork,C=f.finishedLanes;if(E===null)return null;if(f.finishedWork=null,f.finishedLanes=0,E===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var D=E.lanes|E.childLanes;if(W5(f,D),f===Tr&&(Cr=Tr=null,li=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||g0||(g0=!0,sB(b1,function(){return su(),null})),D=(E.flags&15990)!==0,E.subtreeFlags&15990||D){D=vr.transition,vr.transition=null;var $=En;En=1;var ue=Kt;Kt|=4,hA.current=null,h8(f,E),p8(f,E),O(f.containerInfo),f.current=E,m8(E),j5(),Kt=ue,En=$,vr.transition=D}else f.current=E;if(g0&&(g0=!1,Ll=f,_0=C),D=f.pendingLanes,D===0&&(Dl=null),K5(E.stateNode),is(f,Xr()),h!==null)for(x=f.onRecoverableError,E=0;E<h.length;E++)x(h[E]);if(m0)throw m0=!1,f=_A,_A=null,f;return _0&1&&f.tag!==0&&su(),D=f.pendingLanes,D&1?f===vA?Fp++:(Fp=0,vA=f):Fp=0,sa(),null}function su(){if(Ll!==null){var f=DI(_0),h=vr.transition,x=En;try{if(vr.transition=null,En=16>f?16:f,Ll===null)var E=!1;else{if(f=Ll,Ll=null,_0=0,Kt&6)throw Error(o(331));var C=Kt;for(Kt|=4,it=f.current;it!==null;){var D=it,$=D.child;if(it.flags&16){var ue=D.deletions;if(ue!==null){for(var Pe=0;Pe<ue.length;Pe++){var $e=ue[Pe];for(it=$e;it!==null;){var ht=it;switch(ht.tag){case 0:case 11:case 15:nu(8,ht,D)}var Ht=ht.child;if(Ht!==null)Ht.return=ht,it=Ht;else for(;it!==null;){ht=it;var Bt=ht.sibling,Ln=ht.return;if(UP(ht),ht===$e){it=null;break}if(Bt!==null){Bt.return=Ln,it=Bt;break}it=Ln}}}var Ct=D.alternate;if(Ct!==null){var yi=Ct.child;if(yi!==null){Ct.child=null;do{var ao=yi.sibling;yi.sibling=null,yi=ao}while(yi!==null)}}it=D}}if(D.subtreeFlags&2064&&$!==null)$.return=D,it=$;else e:for(;it!==null;){if(D=it,D.flags&2048)switch(D.tag){case 0:case 11:case 15:nu(9,D,D.return)}var ye=D.sibling;if(ye!==null){ye.return=D.return,it=ye;break e}it=D.return}}var de=f.current;for(it=de;it!==null;){$=it;var Me=$.child;if($.subtreeFlags&2064&&Me!==null)Me.return=$,it=Me;else e:for($=de;it!==null;){if(ue=it,ue.flags&2048)try{switch(ue.tag){case 0:case 11:case 15:Lp(9,ue)}}catch(Tt){ss(ue,ue.return,Tt)}if(ue===$){it=null;break e}var ot=ue.sibling;if(ot!==null){ot.return=ue.return,it=ot;break e}it=ue.return}}if(Kt=C,sa(),ra&&typeof ra.onPostCommitFiberRoot=="function")try{ra.onPostCommitFiberRoot(N_,f)}catch{}E=!0}return E}finally{En=x,vr.transition=h}}return!1}function nB(f,h,x){h=Q1(x,h),h=gP(f,h,1),Bl(f,h),h=ki(),f=x0(f,1),f!==null&&(Sp(f,1,h),is(f,h))}function ss(f,h,x){if(f.tag===3)nB(f,f,x);else for(;h!==null;){if(h.tag===3){nB(h,f,x);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Dl===null||!Dl.has(E))){f=Q1(x,f),f=_P(h,f,1),Bl(h,f),f=ki(),h=x0(h,1),h!==null&&(Sp(h,1,f),is(h,f));break}}h=h.return}}function S8(f,h,x){var E=f.pingCache;E!==null&&E.delete(h),h=ki(),f.pingedLanes|=f.suspendedLanes&x,Tr===f&&(li&x)===x&&(Nr===4||Nr===3&&(li&130023424)===li&&500>Xr()-mA?ru(f,0):pA|=x),is(f,h)}function rB(f,h){h===0&&(f.mode&1?(h=D_,D_<<=1,!(D_&130023424)&&(D_=4194304)):h=1);var x=ki();f=x0(f,h),f!==null&&(Sp(f,h,x),is(f,x))}function A8(f){var h=f.memoizedState,x=0;h!==null&&(x=h.retryLane),rB(f,x)}function E8(f,h){var x=0;switch(f.tag){case 13:var E=f.stateNode,C=f.memoizedState;C!==null&&(x=C.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(h),rB(f,x)}var iB;iB=function(f,h,x){if(f!==null)if(f.memoizedProps!==h.pendingProps||Ot.current)Ts=!0;else{if(!(f.lanes&x)&&!(h.flags&128))return Ts=!1,u8(f,h,x);Ts=!!(f.flags&131072)}else Ts=!1,qn&&h.flags&1048576&&WI(h,W_,h.index);switch(h.lanes=0,h.tag){case 2:var E=h.type;f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps;var C=Mr(h,tn.current);$f(h,x),C=J1(null,h,E,f,C,x);var D=Y1();return h.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Yt(E)?(D=!0,xn(h)):D=!1,h.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,L1(h),C.updater=G_,h.stateNode=C,C._reactInternals=h,O1(h,E,f,x),h=tA(null,h,E,!0,D,x)):(h.tag=0,qn&&D&&k1(h),Oi(null,h,C,x),h=h.child),h;case 16:E=h.elementType;e:{switch(f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps,C=E._init,E=C(E._payload),h.type=E,C=h.tag=M8(E),f=Po(E,f),C){case 0:h=eA(null,h,E,f,x);break e;case 1:h=bP(null,h,E,f,x);break e;case 11:h=EP(null,h,E,f,x);break e;case 14:h=wP(null,h,E,Po(E.type,f),x);break e}throw Error(o(306,E,""))}return h;case 0:return E=h.type,C=h.pendingProps,C=h.elementType===E?C:Po(E,C),eA(f,h,E,C,x);case 1:return E=h.type,C=h.pendingProps,C=h.elementType===E?C:Po(E,C),bP(f,h,E,C,x);case 3:e:{if(RP(h),f===null)throw Error(o(387));E=h.pendingProps,D=h.memoizedState,C=D.element,kI(f,h),H_(h,E,null,x);var $=h.memoizedState;if(E=$.element,he&&D.isDehydrated)if(D={element:E,isDehydrated:!1,cache:$.cache,transitions:$.transitions},h.updateQueue.baseState=D,h.memoizedState=D,h.flags&256){C=Error(o(423)),h=IP(f,h,E,x,C);break e}else if(E!==C){C=Error(o(424)),h=IP(f,h,E,x,C);break e}else for(he&&(Ms=Kn(h.stateNode.containerInfo),ws=h,qn=!0,Bo=null,Ap=!1),x=qI(h,null,E,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(ed(),E===C){h=Xa(f,h,x);break e}Oi(f,h,E,x)}h=h.child}return h;case 5:return $I(h),f===null&&z1(h),E=h.type,C=h.pendingProps,D=f!==null?f.memoizedProps:null,$=C.children,Se(E,C)?$=null:D!==null&&Se(E,D)&&(h.flags|=32),CP(f,h),Oi(f,h,$,x),h.child;case 6:return f===null&&z1(h),null;case 13:return PP(f,h,x);case 4:return G1(h,h.stateNode.containerInfo),E=h.pendingProps,f===null?h.child=td(h,null,E,x):Oi(f,h,E,x),h.child;case 11:return E=h.type,C=h.pendingProps,C=h.elementType===E?C:Po(E,C),EP(f,h,E,C,x);case 7:return Oi(f,h,h.pendingProps,x),h.child;case 8:return Oi(f,h,h.pendingProps.children,x),h.child;case 12:return Oi(f,h,h.pendingProps.children,x),h.child;case 10:e:{if(E=h.type._context,C=h.pendingProps,D=h.memoizedProps,$=C.value,OI(h,E,$),D!==null)if(ia(D.value,$)){if(D.children===C.children&&!Ot.current){h=Xa(f,h,x);break e}}else for(D=h.child,D!==null&&(D.return=h);D!==null;){var ue=D.dependencies;if(ue!==null){$=D.child;for(var Pe=ue.firstContext;Pe!==null;){if(Pe.context===E){if(D.tag===1){Pe=Ha(-1,x&-x),Pe.tag=2;var $e=D.updateQueue;if($e!==null){$e=$e.shared;var ht=$e.pending;ht===null?Pe.next=Pe:(Pe.next=ht.next,ht.next=Pe),$e.pending=Pe}}D.lanes|=x,Pe=D.alternate,Pe!==null&&(Pe.lanes|=x),D1(D.return,x,h),ue.lanes|=x;break}Pe=Pe.next}}else if(D.tag===10)$=D.type===h.type?null:D.child;else if(D.tag===18){if($=D.return,$===null)throw Error(o(341));$.lanes|=x,ue=$.alternate,ue!==null&&(ue.lanes|=x),D1($,x,h),$=D.sibling}else $=D.child;if($!==null)$.return=D;else for($=D;$!==null;){if($===h){$=null;break}if(D=$.sibling,D!==null){D.return=$.return,$=D;break}$=$.return}D=$}Oi(f,h,C.children,x),h=h.child}return h;case 9:return C=h.type,E=h.pendingProps.children,$f(h,x),C=eo(C),E=E(C),h.flags|=1,Oi(f,h,E,x),h.child;case 14:return E=h.type,C=Po(E,h.pendingProps),C=Po(E.type,C),wP(f,h,E,C,x);case 15:return MP(f,h,h.type,h.pendingProps,x);case 17:return E=h.type,C=h.pendingProps,C=h.elementType===E?C:Po(E,C),f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Yt(E)?(f=!0,xn(h)):f=!1,$f(h,x),GI(h,E,C),O1(h,E,C,x),tA(null,h,E,!0,f,x);case 19:return NP(f,h,x);case 22:return TP(f,h,x)}throw Error(o(156,h.tag))};function sB(f,h){return T1(f,h)}function w8(f,h,x,E){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oo(f,h,x,E){return new w8(f,h,x,E)}function EA(f){return f=f.prototype,!(!f||!f.isReactComponent)}function M8(f){if(typeof f=="function")return EA(f)?1:0;if(f!=null){if(f=f.$$typeof,f===y)return 11;if(f===S)return 14}return 2}function kl(f,h){var x=f.alternate;return x===null?(x=oo(f.tag,h,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=h,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&14680064,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,h=f.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x}function A0(f,h,x,E,C,D){var $=2;if(E=f,typeof f=="function")EA(f)&&($=1);else if(typeof f=="string")$=5;else e:switch(f){case u:return ou(x.children,C,D,h);case d:$=8,C|=8;break;case p:return f=oo(12,x,h,C|2),f.elementType=p,f.lanes=D,f;case v:return f=oo(13,x,h,C),f.elementType=v,f.lanes=D,f;case _:return f=oo(19,x,h,C),f.elementType=_,f.lanes=D,f;case w:return E0(x,C,D,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:$=10;break e;case g:$=9;break e;case y:$=11;break e;case S:$=14;break e;case A:$=16,E=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return h=oo($,x,h,C),h.elementType=f,h.type=E,h.lanes=D,h}function ou(f,h,x,E){return f=oo(7,f,E,h),f.lanes=x,f}function E0(f,h,x,E){return f=oo(22,f,E,h),f.elementType=w,f.lanes=x,f.stateNode={},f}function wA(f,h,x){return f=oo(6,f,null,h),f.lanes=x,f}function MA(f,h,x){return h=oo(4,f.children!==null?f.children:[],f.key,h),h.lanes=x,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function T8(f,h,x,E,C){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=w1(0),this.expirationTimes=w1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w1(0),this.identifierPrefix=E,this.onRecoverableError=C,he&&(this.mutableSourceEagerHydrationData=null)}function oB(f,h,x,E,C,D,$,ue,Pe){return f=new T8(f,h,x,ue,Pe),h===1?(h=1,D===!0&&(h|=8)):h=0,D=oo(3,null,null,h),f.current=D,D.stateNode=f,D.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null},L1(D),f}function aB(f){if(!f)return vt;f=f._reactInternals;e:{if(b(f)!==f||f.tag!==1)throw Error(o(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Yt(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(f.tag===1){var x=f.type;if(Yt(x))return An(f,x,h)}return h}function lB(f){var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=H(h),f===null?null:f.stateNode}function cB(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<h?x:h}}function TA(f,h){cB(f,h),(f=f.alternate)&&cB(f,h)}function C8(f){return f=H(f),f===null?null:f.stateNode}function b8(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var h=ki();so(f,134217728,h),TA(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var h=ki(),x=Nl(f);so(f,x,h),TA(f,x)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var x=xp(h.pendingLanes);x!==0&&(M1(h,x|1),is(h,Xr()),!(Kt&6)&&(ad(),sa()))}break;case 13:var E=ki();$P(function(){return so(f,1,E)}),TA(f,1)}},t.batchedUpdates=function(f,h){var x=Kt;Kt|=1;try{return f(h)}finally{Kt=x,Kt===0&&(ad(),O_&&sa())}},t.createComponentSelector=function(f){return{$$typeof:l0,value:f}},t.createContainer=function(f,h,x,E,C,D,$){return oB(f,h,!1,null,x,E,C,D,$)},t.createHasPseudoClassSelector=function(f){return{$$typeof:c0,value:f}},t.createHydrationContainer=function(f,h,x,E,C,D,$,ue,Pe){return f=oB(x,E,!0,f,C,D,$,ue,Pe),f.context=aB(null),x=f.current,E=ki(),C=Nl(x),D=Ha(E,C),D.callback=h??null,Bl(x,D),f.current.lanes=C,Sp(f,C,E),is(f,E),f},t.createPortal=function(f,h,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:f,containerInfo:h,implementation:x}},t.createRoleSelector=function(f){return{$$typeof:u0,value:f}},t.createTestNameSelector=function(f){return{$$typeof:f0,value:f}},t.createTextSelector=function(f){return{$$typeof:d0,value:f}},t.deferredUpdates=function(f){var h=En,x=vr.transition;try{return vr.transition=null,En=16,f()}finally{En=h,vr.transition=x}},t.discreteUpdates=function(f,h,x,E,C){var D=En,$=vr.transition;try{return vr.transition=null,En=1,f(h,x,E,C)}finally{En=D,vr.transition=$,Kt===0&&ad()}},t.findAllNodes=dA,t.findBoundingRects=function(f,h){if(!X)throw Error(o(363));h=dA(f,h),f=[];for(var x=0;x<h.length;x++)f.push(fe(h[x]));for(h=f.length-1;0<h;h--){x=f[h];for(var E=x.x,C=E+x.width,D=x.y,$=D+x.height,ue=h-1;0<=ue;ue--)if(h!==ue){var Pe=f[ue],$e=Pe.x,ht=$e+Pe.width,Ht=Pe.y,Bt=Ht+Pe.height;if(E>=$e&&D>=Ht&&C<=ht&&$<=Bt){f.splice(h,1);break}else if(E!==$e||x.width!==Pe.width||Bt<D||Ht>$){if(!(D!==Ht||x.height!==Pe.height||ht<E||$e>C)){$e>E&&(Pe.width+=$e-E,Pe.x=E),ht<C&&(Pe.width=C-$e),f.splice(h,1);break}}else{Ht>D&&(Pe.height+=Ht-D,Pe.y=D),Bt<$&&(Pe.height=$-Ht),f.splice(h,1);break}}}return f},t.findHostInstance=lB,t.findHostInstanceWithNoPortals=function(f){return f=L(f),f=f!==null?Q(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return lB(f)},t.flushControlled=function(f){var h=Kt;Kt|=1;var x=vr.transition,E=En;try{vr.transition=null,En=1,f()}finally{En=E,vr.transition=x,Kt=h,Kt===0&&(ad(),sa())}},t.flushPassiveEffects=su,t.flushSync=$P,t.focusWithin=function(f,h){if(!X)throw Error(o(363));for(f=cA(f),h=YP(f,h),h=Array.from(h),f=0;f<h.length;){var x=h[f++];if(!be(x)){if(x.tag===5&&st(x.stateNode))return!0;for(x=x.child;x!==null;)h.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return En},t.getFindAllNodesFailureDescription=function(f,h){if(!X)throw Error(o(363));var x=0,E=[];f=[cA(f),0];for(var C=0;C<f.length;){var D=f[C++],$=f[C++],ue=h[$];if((D.tag!==5||!be(D))&&(uA(D,ue)&&(E.push(fA(ue)),$++,$>x&&(x=$)),$<h.length))for(D=D.child;D!==null;)f.push(D,$),D=D.sibling}if(x<h.length){for(f=[];x<h.length;x++)f.push(fA(h[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return K(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:C8,findFiberByHostInstance:f.findFiberByHostInstance||b8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)f=!0;else{try{N_=h.inject(f),ra=h}catch{}f=!!h.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,h,x,E){if(!X)throw Error(o(363));f=dA(f,h);var C=Fe(f,x,E).disconnect;return{disconnect:function(){C()}}},t.registerMutableSourceForHydration=function(f,h){var x=h._getVersion;x=x(h._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[h,x]:f.mutableSourceEagerHydrationData.push(h,x)},t.runWithPriority=function(f,h){var x=En;try{return En=f,h()}finally{En=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,h,x,E){var C=h.current,D=ki(),$=Nl(C);return x=aB(x),h.context===null?h.context=x:h.pendingContext=x,h=Ha(D,$),h.payload={element:f},E=E===void 0?null:E,E!==null&&(h.callback=E),Bl(C,h),f=so(C,$,D),f!==null&&z_(f,C,$),$},t};fH.exports=oQ;var aQ=fH.exports;const lQ=e_(aQ);var dH={exports:{}},hH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,Y){var O=F.length;F.push(Y);e:for(;0<O;){var ae=O-1>>>1,me=F[ae];if(0<i(me,Y))F[ae]=Y,F[O]=me,O=ae;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],O=F.pop();if(O!==Y){F[0]=O;e:for(var ae=0,me=F.length,Oe=me>>>1;ae<Oe;){var ce=2*(ae+1)-1,Se=F[ce],Ae=ce+1,Ee=F[Ae];if(0>i(Se,O))Ae<me&&0>i(Ee,Se)?(F[ae]=Ee,F[Ae]=O,ae=Ae):(F[ae]=Se,F[ce]=O,ae=ce);else if(Ae<me&&0>i(Ee,O))F[ae]=Ee,F[Ae]=O,ae=Ae;else break e}}return Y}function i(F,Y){var O=F.sortIndex-Y.sortIndex;return O!==0?O:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(F){for(var Y=t(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=F)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function w(F){if(y=!1,A(F),!g)if(t(l)!==null)g=!0,K(I);else{var Y=t(c);Y!==null&&te(w,Y.startTime-F)}}function I(F,Y){g=!1,y&&(y=!1,_(P),P=-1),m=!0;var O=p;try{for(A(Y),d=t(l);d!==null&&(!(d.expirationTime>Y)||F&&!L());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,p=d.priorityLevel;var me=ae(d.expirationTime<=Y);Y=n.unstable_now(),typeof me=="function"?d.callback=me:d===t(l)&&r(l),A(Y)}else r(l);d=t(l)}if(d!==null)var Oe=!0;else{var ce=t(c);ce!==null&&te(w,ce.startTime-Y),Oe=!1}return Oe}finally{d=null,p=O,m=!1}}var T=!1,R=null,P=-1,b=5,M=-1;function L(){return!(n.unstable_now()-M<b)}function H(){if(R!==null){var F=n.unstable_now();M=F;var Y=!0;try{Y=R(!0,F)}finally{Y?j():(T=!1,R=null)}}else T=!1}var j;if(typeof S=="function")j=function(){S(H)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ee=Q.port2;Q.port1.onmessage=H,j=function(){ee.postMessage(null)}}else j=function(){v(H,0)};function K(F){R=F,T||(T=!0,j())}function te(F,Y){P=v(function(){F(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,K(I))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var O=p;p=Y;try{return F()}finally{p=O}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var O=p;p=F;try{return Y()}finally{p=O}},n.unstable_scheduleCallback=function(F,Y,O){var ae=n.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ae+O:ae):O=ae,F){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=O+me,F={id:u++,callback:Y,priorityLevel:F,startTime:O,expirationTime:me,sortIndex:-1},O>ae?(F.sortIndex=O,e(c,F),t(l)===null&&F===t(c)&&(y?(_(P),P=-1):y=!0,te(w,O-ae))):(F.sortIndex=me,e(l,F),g||m||(g=!0,K(I))),F},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(F){var Y=p;return function(){var O=p;p=Y;try{return F.apply(this,arguments)}finally{p=O}}}})(hH);dH.exports=hH;var A2=dH.exports;const cQ=n=>typeof n=="object"&&typeof n.then=="function",Gu=[];function pH(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function mH(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Gu)if(pH(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Gu.indexOf(i);s!==-1&&Gu.splice(s,1)},promise:(cQ(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Gu.push(i),!t)throw i.promise}const uQ=(n,e,t)=>mH(n,e,!1,t),fQ=(n,e,t)=>void mH(n,e,!0,t),dQ=n=>{if(n===void 0||n.length===0)Gu.splice(0,Gu.length);else{const e=Gu.find(t=>pH(n,t.keys,t.equal));e&&e.remove()}},PR={},gH=n=>void Object.assign(PR,n);function hQ(n,e){function t(u,{args:d=[],attach:p,...m},g){let y=`${u[0].toUpperCase()}${u.slice(1)}`,v;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=m.object;v=Od(_,{type:u,root:g,attach:p,primitive:!0})}else{const _=PR[y];if(!_)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");v=Od(new _(...d),{type:u,root:g,attach:p,memoizedProps:{args:d}})}return v.__r3f.attach===void 0&&(v instanceof Vt?v.__r3f.attach="geometry":v instanceof Dr&&(v.__r3f.attach="material")),y!=="inject"&&QE(v,m),v}function r(u,d){let p=!1;if(d){var m,g;(m=d.__r3f)!=null&&m.attach?$E(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),p=!0),p||(g=u.__r3f)==null||g.objects.push(d),d.__r3f||Od(d,{}),d.__r3f.parent=u,DT(d),kd(d)}}function i(u,d,p){let m=!1;if(d){var g,y;if((g=d.__r3f)!=null&&g.attach)$E(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:d});const v=u.children.filter(S=>S!==d),_=v.indexOf(p);u.children=[...v.slice(0,_),d,...v.slice(_)],m=!0}m||(y=u.__r3f)==null||y.objects.push(d),d.__r3f||Od(d,{}),d.__r3f.parent=u,DT(d),kd(d)}}function s(u,d,p=!1){u&&[...u].forEach(m=>o(d,m,p))}function o(u,d,p){if(d){var m,g,y;if(d.__r3f&&(d.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(w=>w!==d)),(g=d.__r3f)!=null&&g.attach)C2(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var v;u.remove(d),(v=d.__r3f)!=null&&v.root&&SQ(Ny(d),d)}const S=(y=d.__r3f)==null?void 0:y.primitive,A=!S&&(p===void 0?d.dispose!==null:p);if(!S){var _;s((_=d.__r3f)==null?void 0:_.objects,d,A),s(d.children,d,A)}if(delete d.__r3f,A&&d.dispose&&d.type!=="Scene"){const w=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?A2.unstable_scheduleCallback(A2.unstable_IdlePriority,w):w()}kd(u)}}function a(u,d,p,m){var g;const y=(g=u.__r3f)==null?void 0:g.parent;if(!y)return;const v=t(d,p,u.__r3f.root);if(u.children){for(const _ of u.children)_.__r3f&&r(v,_);u.children=u.children.filter(_=>!_.__r3f)}u.__r3f.objects.forEach(_=>r(v,_)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(y,u),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(y,v),v.raycast&&v.__r3f.eventCount&&Ny(v).getState().internal.interaction.push(v),[m,m.alternate].forEach(_=>{_!==null&&(_.stateNode=v,_.ref&&(typeof _.ref=="function"?_.ref(v):_.ref.current=v))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:lQ({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,p)=>{if(!d||!p)return;const m=u.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,p,m){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:v=[],children:_,...S}=m,{args:A=[],children:w,...I}=p;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((R,P)=>R!==A[P]))return[!0];const T=EH(u,S,I,!0);return T.changes.length?[!1,T]:null}},commitUpdate(u,[d,p],m,g,y,v){d?a(u,m,y,v):QE(u,p)},commitMount(u,d,p,m){var g;const y=(g=u.__r3f)!=null?g:{};u.raycast&&y.handlers&&y.eventCount&&Ny(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Od(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:p,parent:m}=(d=u.__r3f)!=null?d:{};p&&m&&C2(m,u,p),u.isObject3D&&(u.visible=!1),kd(u)},unhideInstance(u,d){var p;const{attach:m,parent:g}=(p=u.__r3f)!=null?p:{};m&&g&&$E(g,u,m),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),kd(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():ih.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Hn.fun(performance.now)?performance.now:Hn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Hn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Hn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:QE}}var E2,w2;const qE=n=>"colorSpace"in n||"outputColorSpace"in n,_H=()=>{var n;return(n=PR.ColorManagement)!=null?n:null},vH=n=>n&&n.isOrthographicCamera,pQ=n=>n&&n.hasOwnProperty("current"),x_=typeof window<"u"&&((E2=window.document)!=null&&E2.createElement||((w2=window.navigator)==null?void 0:w2.product)==="ReactNative")?ie.useLayoutEffect:ie.useEffect;function yH(n){const e=ie.useRef(n);return x_(()=>void(e.current=n),[n]),e}function mQ({set:n}){return x_(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class xH extends ie.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}xH.getDerivedStateFromError=()=>({error:!0});const SH="__default",M2=new Map,gQ=n=>n&&!!n.memoized&&!!n.changes;function AH(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const om=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Ny(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Hn={obj:n=>n===Object(n)&&!Hn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Hn.str(n)||Hn.num(n)||Hn.boo(n))return n===e;const s=Hn.obj(n);if(s&&r==="reference")return n===e;const o=Hn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Hn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Hn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function _Q(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function vQ(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Od(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function BT(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const T2=/-\d+$/;function $E(n,e,t){if(Hn.str(t)){if(T2.test(t)){const s=t.replace(T2,""),{target:o,key:a}=BT(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=BT(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function C2(n,e,t){var r,i;if(Hn.str(t)){const{target:s,key:o}=BT(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function EH(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,d=Object.entries(i),p=[];if(c){const g=Object.keys(l);for(let y=0;y<g.length;y++)i.hasOwnProperty(g[y])||d.unshift([g[y],SH+"remove"])}d.forEach(([g,y])=>{var v;if((v=n.__r3f)!=null&&v.primitive&&g==="object"||Hn.equ(y,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return p.push([g,y,!0,[]]);let _=[];g.includes("-")&&(_=g.split("-")),p.push([g,y,!1,_]);for(const S in i){const A=i[S];S.startsWith(`${g}-`)&&p.push([S,A,!1,S.split("-")])}});const m={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:p}}const yQ=typeof process<"u"&&!1;function QE(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=gQ(e)?e:EH(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let u=0;u<a.length;u++){let[d,p,m,g]=a[u];if(qE(n)){const S="srgb",A="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?S:A):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?S:A)}let y=n,v=y[d];if(g.length&&(v=g.reduce((_,S)=>_[S],n),!(v&&v.set))){const[_,...S]=g.reverse();y=S.reverse().reduce((A,w)=>A[w],n),d=_}if(p===SH+"remove")if(y.constructor){let _=M2.get(y.constructor);_||(_=new y.constructor,M2.set(y.constructor,_)),p=_[d]}else p=0;if(m&&r)p?r.handlers[d]=p:delete r.handlers[d],r.eventCount=Object.keys(r.handlers).length;else if(v&&v.set&&(v.copy||v instanceof nf)){if(Array.isArray(p))v.fromArray?v.fromArray(p):v.set(...p);else if(v.copy&&p&&p.constructor&&(yQ?v.constructor.name===p.constructor.name:v.constructor===p.constructor))v.copy(p);else if(p!==void 0){const _=v instanceof et;!_&&v.setScalar?v.setScalar(p):v instanceof nf&&p instanceof nf?v.mask=p.mask:v.set(p),!_H()&&s&&!s.linear&&_&&v.convertSRGBToLinear()}}else if(y[d]=p,y[d]instanceof gn&&y[d].format===Br&&y[d].type===Js&&s){const _=y[d];qE(_)&&qE(s.gl)?_.colorSpace=s.gl.outputColorSpace:_.encoding=s.gl.outputEncoding}kd(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const u=Ny(n).getState().internal,d=u.interaction.indexOf(n);d>-1&&u.interaction.splice(d,1),r.eventCount&&u.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&DT(n),n}function kd(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function DT(n){n.onUpdate==null||n.onUpdate(n)}function wH(n,e){n.manual||(vH(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Nv(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function xQ(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ih.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ih.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ih.ContinuousEventPriority;default:return ih.DefaultEventPriority}}function MH(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function SQ(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{MH(t.capturedMap,e,r,i)})}function AQ(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=n.getState(),d=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let _=0;_<m.length;_++){const S=om(m[_]);S&&(S.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(_){const S=om(_);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var A;S.events.compute==null||S.events.compute(l,S,(A=S.previousRoot)==null?void 0:A.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(_,!0):[]}let y=m.flatMap(g).sort((_,S)=>{const A=om(_.object),w=om(S.object);return!A||!w?_.distance-S.distance:w.events.priority-A.events.priority||_.distance-S.distance}).filter(_=>{const S=Nv(_);return d.has(S)?!1:(d.add(S),!0)});u.events.filter&&(y=u.events.filter(y,u));for(const _ of y){let S=_.object;for(;S;){var v;(v=S.__r3f)!=null&&v.eventCount&&p.push({..._,eventObject:S}),S=S.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let _ of u.internal.capturedMap.get(l.pointerId).values())d.has(Nv(_.intersection))||p.push(_.intersection);return p}function i(l,c,u,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const g of l){const y=om(g.object)||p,{raycaster:v,pointer:_,camera:S,internal:A}=y,w=new G(_.x,_.y,0).unproject(S),I=M=>{var L,H;return(L=(H=A.capturedMap.get(M))==null?void 0:H.has(g.eventObject))!=null?L:!1},T=M=>{const L={intersection:g,target:c.target};A.capturedMap.has(M)?A.capturedMap.get(M).set(g.eventObject,L):A.capturedMap.set(M,new Map([[g.eventObject,L]])),c.target.setPointerCapture(M)},R=M=>{const L=A.capturedMap.get(M);L&&MH(A.capturedMap,g.eventObject,L,M)};let P={};for(let M in c){let L=c[M];typeof L!="function"&&(P[M]=L)}let b={...g,...P,pointer:_,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:w,ray:v.ray,camera:S,stopPropagation(){const M="pointerId"in c&&A.capturedMap.get(c.pointerId);if((!M||M.has(g.eventObject))&&(b.stopped=m.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(L=>L.eventObject===g.eventObject))){const L=l.slice(0,l.indexOf(g));s([...L,g])}},target:{hasPointerCapture:I,setPointerCapture:T,releasePointerCapture:R},currentTarget:{hasPointerCapture:I,setPointerCapture:T,releasePointerCapture:R},nativeEvent:c};if(d(b),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Nv(u)),p!=null&&p.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=r(u,m?t:void 0),_=g?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=v.map(A=>A.eventObject)),g&&!v.length&&_<=2&&(o(u,p.interaction),d&&d(u)),m&&s(v);function S(A){const w=A.eventObject,I=w.__r3f,T=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const R=Nv(A),P=p.hovered.get(R);P?P.stopped&&A.stopPropagation():(p.hovered.set(R,A),T.onPointerOver==null||T.onPointerOver(A),T.onPointerEnter==null||T.onPointerEnter(A))}T.onPointerMove==null||T.onPointerMove(A)}else{const R=T[l];R?(!g||p.initialHits.includes(w))&&(o(u,p.interaction.filter(P=>!p.initialHits.includes(P))),R(A)):g&&p.initialHits.includes(w)&&o(u,p.interaction.filter(P=>!p.initialHits.includes(P)))}}i(v,u,_,S)}}return{handlePointer:a}}const EQ=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],TH=n=>!!(n!=null&&n.render),qS=ie.createContext(null),wQ=(n,e)=>{const t=uH((a,l)=>{const c=new G,u=new G,d=new G;function p(_=l().camera,S=u,A=l().size){const{width:w,height:I,top:T,left:R}=A,P=w/I;S instanceof G?d.copy(S):d.set(...S);const b=_.getWorldPosition(c).distanceTo(d);if(vH(_))return{width:w/_.zoom,height:I/_.zoom,top:T,left:R,factor:1,distance:b,aspect:P};{const M=_.fov*Math.PI/180,L=2*Math.tan(M/2)*b,H=L*(w/I);return{width:H,height:L,top:T,left:R,factor:w/H,distance:b,aspect:P}}}let m;const g=_=>a(S=>({performance:{...S.performance,current:_}})),y=new De;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(l(),_),advance:(_,S)=>e(_,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new TR,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();m&&clearTimeout(m),_.performance.current!==_.performance.min&&g(_.performance.min),m=setTimeout(()=>g(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:_=>a(S=>({...S,events:{...S.events,..._}})),setSize:(_,S,A,w,I)=>{const T=l().camera,R={width:_,height:S,top:w||0,left:I||0,updateStyle:A};a(P=>({size:R,viewport:{...P.viewport,...p(T,u,R)}}))},setDpr:_=>a(S=>{const A=AH(_);return{viewport:{...S.viewport,dpr:A,initialDpr:S.viewport.initialDpr||A}}}),setFrameloop:(_="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,_!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ie.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,S,A)=>{const w=l().internal;return w.priority=w.priority+(S>0?1:0),w.subscribers.push({ref:_,priority:S,store:A}),w.subscribers=w.subscribers.sort((I,T)=>I.priority-T.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(S>0?1:0),I.subscribers=I.subscribers.filter(T=>T.ref!==_))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,wH(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Ov,MQ=new Set,TQ=new Set,CQ=new Set;function ZE(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function am(n,e){switch(n){case"before":return ZE(MQ,e);case"after":return ZE(TQ,e);case"tail":return ZE(CQ,e)}}let ew,tw;function nw(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),ew=e.internal.subscribers,Ov=0;Ov<ew.length;Ov++)tw=ew[Ov],tw.ref.current(tw.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function bQ(n){let e=!1,t=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,am("before",c),t=!0;for(const d of n.values()){var u;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=nw(c,s))}if(t=!1,am("after",c),r===0)return am("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var d;if(!c)return n.forEach(p=>a(p.store.getState(),u));(d=c.gl.xr)!=null&&d.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,d,p){if(u&&am("before",c),d)nw(c,d,p);else for(const m of n.values())nw(c,m.store.getState());u&&am("after",c)}return{loop:o,invalidate:a,advance:l}}function BR(){const n=ie.useContext(qS);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function mr(n=t=>t,e){return BR()(n,e)}function S_(n,e=0){const t=BR(),r=t.getState().internal.subscribe,i=yH(n);return x_(()=>r(i,e,t),[e,r,t]),null}const b2=new WeakMap;function CH(n,e){return function(t,...r){let i=b2.get(t);return i||(i=new t,b2.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,_Q(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Il(n,e,t,r){const i=Array.isArray(e)?e:[e],s=uQ(CH(t,r),[n,...i],{equal:Hn.equ});return Array.isArray(e)?s:s[0]}Il.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return fQ(CH(t),[n,...r])};Il.clear=function(n,e){const t=Array.isArray(e)?e:[e];return dQ([n,...t])};const jh=new Map,{invalidate:R2,advance:I2}=bQ(jh),{reconciler:Wg,applyProps:ol}=hQ(jh,xQ),Bd={objects:"shallow",strict:!1},RQ=(n,e)=>{const t=typeof n=="function"?n(e):n;return TH(t)?t:new sR({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function IQ(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function PQ(n){const e=jh.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||wQ(R2,I2),o=t||Wg.createContainer(s,ih.ConcurrentRoot,null,!1,null,"",i,null);e||jh.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:d,size:p,scene:m,events:g,onCreated:y,shadows:v=!1,linear:_=!1,flat:S=!1,legacy:A=!1,orthographic:w=!1,frameloop:I="always",dpr:T=[1,2],performance:R,raycaster:P,camera:b,onPointerMissed:M}=u,L=s.getState(),H=L.gl;L.gl||L.set({gl:H=RQ(d,n)});let j=L.raycaster;j||L.set({raycaster:j=new IR});const{params:Q,...ee}=P||{};if(Hn.equ(ee,j,Bd)||ol(j,{...ee}),Hn.equ(Q,j.params,Bd)||ol(j,{params:{...j.params,...Q}}),!L.camera||L.camera===c&&!Hn.equ(c,b,Bd)){c=b;const O=b instanceof c_,ae=O?b:w?new zs(0,0,0,0,.1,1e3):new jn(75,0,.1,1e3);O||(ae.position.z=5,b&&(ol(ae,b),("aspect"in b||"left"in b||"right"in b||"bottom"in b||"top"in b)&&(ae.manual=!0,ae.updateProjectionMatrix())),!L.camera&&!(b!=null&&b.rotation)&&ae.lookAt(0,0,0)),L.set({camera:ae}),j.camera=ae}if(!L.scene){let O;m instanceof Ef?O=m:(O=new Ef,m&&ol(O,m)),L.set({scene:Od(O)})}if(!L.xr){var K;const O=(Oe,ce)=>{const Se=s.getState();Se.frameloop!=="never"&&I2(Oe,!0,Se,ce)},ae=()=>{const Oe=s.getState();Oe.gl.xr.enabled=Oe.gl.xr.isPresenting,Oe.gl.xr.setAnimationLoop(Oe.gl.xr.isPresenting?O:null),Oe.gl.xr.isPresenting||R2(Oe)},me={connect(){const Oe=s.getState().gl;Oe.xr.addEventListener("sessionstart",ae),Oe.xr.addEventListener("sessionend",ae)},disconnect(){const Oe=s.getState().gl;Oe.xr.removeEventListener("sessionstart",ae),Oe.xr.removeEventListener("sessionend",ae)}};typeof((K=H.xr)==null?void 0:K.addEventListener)=="function"&&me.connect(),L.set({xr:me})}if(H.shadowMap){const O=H.shadowMap.enabled,ae=H.shadowMap.type;if(H.shadowMap.enabled=!!v,Hn.boo(v))H.shadowMap.type=zm;else if(Hn.str(v)){var te;const me={basic:rU,percentage:SS,soft:zm,variance:Ho};H.shadowMap.type=(te=me[v])!=null?te:zm}else Hn.obj(v)&&Object.assign(H.shadowMap,v);(O!==H.shadowMap.enabled||ae!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const F=_H();F&&("enabled"in F?F.enabled=!A:"legacyMode"in F&&(F.legacyMode=A)),l||ol(H,{outputEncoding:_?3e3:3001,toneMapping:S?Ia:Ub}),L.legacy!==A&&L.set(()=>({legacy:A})),L.linear!==_&&L.set(()=>({linear:_})),L.flat!==S&&L.set(()=>({flat:S})),d&&!Hn.fun(d)&&!TH(d)&&!Hn.equ(d,H,Bd)&&ol(H,d),g&&!L.events.handlers&&L.set({events:g(s)});const Y=IQ(n,p);return Hn.equ(Y,L.size,Bd)||L.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),T&&L.viewport.dpr!==AH(T)&&L.setDpr(T),L.frameloop!==I&&L.setFrameloop(I),L.onPointerMissed||L.set({onPointerMissed:M}),R&&!Hn.equ(R,L.performance,Bd)&&L.set(O=>({performance:{...O.performance,...R}})),a=y,l=!0,this},render(u){return l||this.configure(),Wg.updateContainer(se.jsx(BQ,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){bH(n)}}}function BQ({store:n,children:e,onCreated:t,rootElement:r}){return x_(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),se.jsx(qS.Provider,{value:n,children:e})}function bH(n,e){const t=jh.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Wg.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),vQ(i),jh.delete(n)}catch{}},500)})}}function RH(n,e,t){return se.jsx(DQ,{children:n,container:e,state:t},e.uuid)}function DQ({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=BR(),[a]=ie.useState(()=>new IR),[l]=ie.useState(()=>new De),c=ie.useCallback((d,p)=>{const m={...d};Object.keys(d).forEach(y=>{(EQ.includes(y)||d[y]!==p[y]&&p[y])&&delete m[y]});let g;if(p&&i){const y=p.camera;g=d.viewport.getCurrentViewport(y,new G,i),y!==d.camera&&wH(y,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...p==null?void 0:p.events,...r},size:{...d.size,...i},viewport:{...d.viewport,...g},...s}},[n]),[u]=ie.useState(()=>{const d=o.getState();return uH((m,g)=>({...d,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...r},size:{...d.size,...i},...s,set:m,get:g,setEvents:y=>m(v=>({...v,events:{...v.events,...y}}))}))});return ie.useEffect(()=>{const d=o.subscribe(p=>u.setState(m=>c(p,m)));return()=>{d()}},[c]),ie.useEffect(()=>{u.setState(d=>c(o.getState(),d))},[c]),ie.useEffect(()=>()=>{u.destroy()},[]),se.jsx(se.Fragment,{children:Wg.createPortal(se.jsx(qS.Provider,{value:u,children:e}),u,null)})}Wg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ie.version});function LT(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=t&&!r;return r||(r=setTimeout(l,e)),u&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}LT.debounce=LT;var LQ=LT;const P2=e_(LQ);function NQ(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=ie.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=ie.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=ie.useRef(!1);ie.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,g]=ie.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:A,top:w,width:I,height:T,bottom:R,right:P,x:b,y:M}=l.current.element.getBoundingClientRect(),L={left:A,top:w,width:I,height:T,bottom:R,right:P,x:b,y:M};l.current.element instanceof HTMLElement&&i&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),d.current&&!UQ(l.current.lastBounds,L)&&a(l.current.lastBounds=L)};return[S,u?P2(S,u):S,c?P2(S,c):S]},[a,i,c,u]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function v(){l.current.element&&(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",g,{capture:!0,passive:!0})))}const _=S=>{!S||S===l.current.element||(y(),l.current.element=S,l.current.scrollContainers=IH(S),v())};return kQ(g,!!t),OQ(m),ie.useEffect(()=>{y(),v()},[t,g,m]),ie.useEffect(()=>y,[]),[_,o,p]}function OQ(n){ie.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function kQ(n,e){ie.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function IH(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...IH(n.parentElement)]}const FQ=["x","y","top","bottom","left","right","width","height"],UQ=(n,e)=>FQ.every(t=>n[t]===e[t]);var zQ=Object.defineProperty,HQ=Object.defineProperties,GQ=Object.getOwnPropertyDescriptors,B2=Object.getOwnPropertySymbols,VQ=Object.prototype.hasOwnProperty,WQ=Object.prototype.propertyIsEnumerable,D2=(n,e,t)=>e in n?zQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L2=(n,e)=>{for(var t in e||(e={}))VQ.call(e,t)&&D2(n,t,e[t]);if(B2)for(var t of B2(e))WQ.call(e,t)&&D2(n,t,e[t]);return n},XQ=(n,e)=>HQ(n,GQ(e)),N2,O2;typeof window<"u"&&((N2=window.document)!=null&&N2.createElement||((O2=window.navigator)==null?void 0:O2.product)==="ReactNative")?ie.useLayoutEffect:ie.useEffect;function PH(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=PH(r,e,t);if(i)return i;r=r.sibling}}function BH(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const k2=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=k2;return}return k2.apply(this,arguments)};const DR=BH(ie.createContext(null));class DH extends ie.Component{render(){return ie.createElement(DR.Provider,{value:this._reactInternals},this.props.children)}}function jQ(){const n=ie.useContext(DR);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ie.useId();return ie.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=PH(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function JQ(){const n=jQ(),[e]=ie.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==DR&&!e.has(i)&&e.set(i,ie.useContext(BH(i)))}t=t.return}return e}function YQ(){const n=JQ();return ie.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>ie.createElement(e,null,ie.createElement(t.Provider,XQ(L2({},r),{value:n.get(t)}))),e=>ie.createElement(DH,L2({},e))),[n])}const rw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function KQ(n){const{handlePointer:e}=AQ(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(rw).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=rw[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=rw[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const qQ=ie.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=KQ,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:v,raycaster:_,camera:S,scene:A,onPointerMissed:w,onCreated:I,...T},R){ie.useMemo(()=>gH(tQ),[]);const P=YQ(),[b,M]=NQ({scroll:!0,debounce:{scroll:50,resize:0},...r}),L=ie.useRef(null),H=ie.useRef(null);ie.useImperativeHandle(R,()=>L.current);const j=yH(w),[Q,ee]=ie.useState(!1),[K,te]=ie.useState(!1);if(Q)throw Q;if(K)throw K;const F=ie.useRef(null);x_(()=>{const O=L.current;M.width>0&&M.height>0&&O&&(F.current||(F.current=PQ(O)),F.current.configure({gl:s,events:o,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:v,raycaster:_,camera:S,scene:A,size:M,onPointerMissed:(...ae)=>j.current==null?void 0:j.current(...ae),onCreated:ae=>{ae.events.connect==null||ae.events.connect(a?pQ(a)?a.current:a:H.current),l&&ae.setEvents({compute:(me,Oe)=>{const ce=me[l+"X"],Se=me[l+"Y"];Oe.pointer.set(ce/Oe.size.width*2-1,-(Se/Oe.size.height)*2+1),Oe.raycaster.setFromCamera(Oe.pointer,Oe.camera)}}),I==null||I(ae)}}),F.current.render(se.jsx(P,{children:se.jsx(xH,{set:te,children:se.jsx(ie.Suspense,{fallback:se.jsx(mQ,{set:ee}),children:e})})})))}),ie.useEffect(()=>{const O=L.current;if(O)return()=>bH(O)},[]);const Y=a?"none":"auto";return se.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...i},...T,children:se.jsx("div",{ref:b,style:{width:"100%",height:"100%"},children:se.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}),$Q=ie.forwardRef(function(e,t){return se.jsx(DH,{children:se.jsx(qQ,{...e,ref:t})})}),A_=new G,LR=new G,QQ=new G,F2=new De;function ZQ(n,e,t){const r=A_.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function eZ(n,e){const t=A_.setFromMatrixPosition(n.matrixWorld),r=LR.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(QQ);return i.angleTo(s)>Math.PI/2}function tZ(n,e,t,r){const i=A_.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),F2.set(s.x,s.y),t.setFromCamera(F2,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function nZ(n,e){if(e instanceof zs)return e.zoom;if(e instanceof jn){const t=A_.setFromMatrixPosition(n.matrixWorld),r=LR.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function rZ(n,e,t){if(e instanceof jn||e instanceof zs){const r=A_.setFromMatrixPosition(n.matrixWorld),i=LR.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const NT=n=>Math.abs(n)<1e-10?0:n;function LH(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=NT(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const iZ=(n=>e=>LH(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),sZ=(n=>(e,t)=>LH(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function oZ(n){return n&&typeof n=="object"&&"current"in n}const aZ=ie.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:g,material:y,geometry:v,zIndexRange:_=[16777271,0],calculatePosition:S=ZQ,as:A="div",wrapperClass:w,pointerEvents:I="auto",...T},R)=>{const{gl:P,camera:b,scene:M,size:L,raycaster:H,events:j,viewport:Q}=mr(),[ee]=ie.useState(()=>document.createElement(A)),K=ie.useRef(),te=ie.useRef(null),F=ie.useRef(0),Y=ie.useRef([0,0]),O=ie.useRef(null),ae=ie.useRef(null),me=(a==null?void 0:a.current)||j.connected||P.domElement.parentNode,Oe=ie.useRef(null),ce=ie.useRef(!1),Se=ie.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&oZ(d[0]),[d]);ie.useLayoutEffect(()=>{const tt=P.domElement;d&&d==="blending"?(tt.style.zIndex=`${Math.floor(_[0]/2)}`,tt.style.position="absolute",tt.style.pointerEvents="none"):(tt.style.zIndex=null,tt.style.position=null,tt.style.pointerEvents=null)},[d]),ie.useLayoutEffect(()=>{if(te.current){const tt=K.current=ZF(ee);if(M.updateMatrixWorld(),u)ee.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const q=S(te.current,b,L);ee.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${q[0]}px,${q[1]}px,0);transform-origin:0 0;`}return me&&(i?me.prepend(ee):me.appendChild(ee)),()=>{me&&me.removeChild(ee),tt.unmount()}}},[me,u]),ie.useLayoutEffect(()=>{w&&(ee.className=w)},[w]);const Ae=ie.useMemo(()=>u?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...t},[t,s,o,L,u]),Ee=ie.useMemo(()=>({position:"absolute",pointerEvents:I}),[I]);ie.useLayoutEffect(()=>{if(ce.current=!1,u){var tt;(tt=K.current)==null||tt.render(ie.createElement("div",{ref:O,style:Ae},ie.createElement("div",{ref:ae,style:Ee},ie.createElement("div",{ref:R,className:r,style:t,children:n}))))}else{var q;(q=K.current)==null||q.render(ie.createElement("div",{ref:R,style:Ae,className:r,children:n}))}});const Qe=ie.useRef(!0);S_(tt=>{if(te.current){b.updateMatrixWorld(),te.current.updateWorldMatrix(!0,!1);const q=u?Y.current:S(te.current,b,L);if(u||Math.abs(F.current-b.zoom)>e||Math.abs(Y.current[0]-q[0])>e||Math.abs(Y.current[1]-q[1])>e){const we=eZ(te.current,b);let he=!1;Se&&(Array.isArray(d)?he=d.map(ne=>ne.current):d!=="blending"&&(he=[M]));const Ce=Qe.current;if(he){const ne=tZ(te.current,b,H,he);Qe.current=ne&&!we}else Qe.current=!we;Ce!==Qe.current&&(p?p(!Qe.current):ee.style.display=Qe.current?"block":"none");const Le=Math.floor(_[0]/2),ke=d?Se?[_[0],Le]:[Le-1,0]:_;if(ee.style.zIndex=`${rZ(te.current,b,ke)}`,u){const[ne,We]=[L.width/2,L.height/2],je=b.projectionMatrix.elements[5]*We,{isOrthographicCamera:X,top:k,left:fe,bottom:ge,right:be}=b,Be=iZ(b.matrixWorldInverse),st=X?`scale(${je})translate(${NT(-(be+fe)/2)}px,${NT((k+ge)/2)}px)`:`translateZ(${je}px)`;let Fe=te.current.matrixWorld;c&&(Fe=b.matrixWorldInverse.clone().transpose().copyPosition(Fe).scale(te.current.scale),Fe.elements[3]=Fe.elements[7]=Fe.elements[11]=0,Fe.elements[15]=1),ee.style.width=L.width+"px",ee.style.height=L.height+"px",ee.style.perspective=X?"":`${je}px`,O.current&&ae.current&&(O.current.style.transform=`${st}${Be}translate(${ne}px,${We}px)`,ae.current.style.transform=sZ(Fe,1/((l||10)/400)))}else{const ne=l===void 0?1:nZ(te.current,b)*l;ee.style.transform=`translate3d(${q[0]}px,${q[1]}px,0) scale(${ne})`}Y.current=q,F.current=b.zoom}}if(!Se&&Oe.current&&!ce.current)if(u){if(O.current){const q=O.current.children[0];if(q!=null&&q.clientWidth&&q!=null&&q.clientHeight){const{isOrthographicCamera:we}=b;if(we||v)T.scale&&(Array.isArray(T.scale)?T.scale instanceof G?Oe.current.scale.copy(T.scale.clone().divideScalar(1)):Oe.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):Oe.current.scale.setScalar(1/T.scale));else{const he=(l||10)/400,Ce=q.clientWidth*he,Le=q.clientHeight*he;Oe.current.scale.set(Ce,Le,1)}ce.current=!0}}}else{const q=ee.children[0];if(q!=null&&q.clientWidth&&q!=null&&q.clientHeight){const we=1/Q.factor,he=q.clientWidth*we,Ce=q.clientHeight*we;Oe.current.scale.set(he,Ce,1),ce.current=!0}Oe.current.lookAt(tt.camera.position)}});const rt=ie.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return ie.createElement("group",Qo({},T,{ref:te}),d&&!Se&&ie.createElement("mesh",{castShadow:m,receiveShadow:g,ref:Oe},v||ie.createElement("planeGeometry",null),y||ie.createElement("shaderMaterial",{side:us,vertexShader:rt.vertexShader,fragmentShader:rt.fragmentShader})))});function U2(n,e){if(e===YU)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Cx||e===Yb){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===Cx)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const lZ=parseInt(lp.replace(/\D+/g,""));var _o=Uint8Array,dc=Uint16Array,OT=Uint32Array,NH=new _o([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),OH=new _o([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cZ=new _o([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kH=function(n,e){for(var t=new dc(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new OT(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},FH=kH(NH,2),UH=FH[0],uZ=FH[1];UH[28]=258,uZ[258]=28;var fZ=kH(OH,0),dZ=fZ[0],kT=new dc(32768);for(var Jn=0;Jn<32768;++Jn){var Yl=(Jn&43690)>>>1|(Jn&21845)<<1;Yl=(Yl&52428)>>>2|(Yl&13107)<<2,Yl=(Yl&61680)>>>4|(Yl&3855)<<4,kT[Jn]=((Yl&65280)>>>8|(Yl&255)<<8)>>>1}var Wm=function(n,e,t){for(var r=n.length,i=0,s=new dc(e);i<r;++i)++s[n[i]-1];var o=new dc(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new dc(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],d=o[n[i]-1]++<<u,p=d|(1<<u)-1;d<=p;++d)a[kT[d]>>>l]=c}else for(a=new dc(r),i=0;i<r;++i)n[i]&&(a[i]=kT[o[n[i]-1]++]>>>15-n[i]);return a},E_=new _o(288);for(var Jn=0;Jn<144;++Jn)E_[Jn]=8;for(var Jn=144;Jn<256;++Jn)E_[Jn]=9;for(var Jn=256;Jn<280;++Jn)E_[Jn]=7;for(var Jn=280;Jn<288;++Jn)E_[Jn]=8;var zH=new _o(32);for(var Jn=0;Jn<32;++Jn)zH[Jn]=5;var hZ=Wm(E_,9,1),pZ=Wm(zH,5,1),iw=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ko=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},sw=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},mZ=function(n){return(n/8|0)+(n&7&&1)},gZ=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof dc?dc:n instanceof OT?OT:_o)(t-e);return r.set(n.subarray(e,t)),r},_Z=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new _o(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new _o(r*3));var o=function(Ae){var Ee=e.length;if(Ae>Ee){var Qe=new _o(Math.max(Ee*2,Ae));Qe.set(e),e=Qe}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,p=t.m,m=t.n,g=r*8;do{if(!u){t.f=a=ko(n,l,1);var y=ko(n,l+1,3);if(l+=3,y)if(y==1)u=hZ,d=pZ,p=9,m=5;else if(y==2){var A=ko(n,l,31)+257,w=ko(n,l+10,15)+4,I=A+ko(n,l+5,31)+1;l+=14;for(var T=new _o(I),R=new _o(19),P=0;P<w;++P)R[cZ[P]]=ko(n,l+P*3,7);l+=w*3;for(var b=iw(R),M=(1<<b)-1,L=Wm(R,b,1),P=0;P<I;){var H=L[ko(n,l,M)];l+=H&15;var v=H>>>4;if(v<16)T[P++]=v;else{var j=0,Q=0;for(v==16?(Q=3+ko(n,l,3),l+=2,j=T[P-1]):v==17?(Q=3+ko(n,l,7),l+=3):v==18&&(Q=11+ko(n,l,127),l+=7);Q--;)T[P++]=j}}var ee=T.subarray(0,A),K=T.subarray(A);p=iw(ee),m=iw(K),u=Wm(ee,p,1),d=Wm(K,m,1)}else throw"invalid block type";else{var v=mZ(l)+4,_=n[v-4]|n[v-3]<<8,S=v+_;if(S>r){if(s)throw"unexpected EOF";break}i&&o(c+_),e.set(n.subarray(v,S),c),t.b=c+=_,t.p=l=S*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var te=(1<<p)-1,F=(1<<m)-1,Y=l;;Y=l){var j=u[sw(n,l)&te],O=j>>>4;if(l+=j&15,l>g){if(s)throw"unexpected EOF";break}if(!j)throw"invalid length/literal";if(O<256)e[c++]=O;else if(O==256){Y=l,u=null;break}else{var ae=O-254;if(O>264){var P=O-257,me=NH[P];ae=ko(n,l,(1<<me)-1)+UH[P],l+=me}var Oe=d[sw(n,l)&F],ce=Oe>>>4;if(!Oe)throw"invalid distance";l+=Oe&15;var K=dZ[ce];if(ce>3){var me=OH[ce];K+=sw(n,l)&(1<<me)-1,l+=me}if(l>g){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var Se=c+ae;c<Se;c+=4)e[c]=e[c-K],e[c+1]=e[c+1-K],e[c+2]=e[c+2-K],e[c+3]=e[c+3-K];c=Se}}t.l=u,t.p=Y,t.b=c,u&&(a=1,t.m=p,t.d=d,t.n=m)}while(!a);return c==e.length?e:gZ(e,0,c)},vZ=new _o(0),yZ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function kv(n,e){return _Z((yZ(n),n.subarray(2,-4)),e)}var xZ=typeof TextDecoder<"u"&&new TextDecoder,SZ=0;try{xZ.decode(vZ,{stream:!0}),SZ=1}catch{}const AZ=n=>n&&n.isCubeTexture;class EZ extends er{constructor(e,t){var r,i;const s=AZ(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),d=4*c,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(lp.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},v=new m_(1,16),_=new Es({uniforms:y,fragmentShader:g,vertexShader:m,side:us});super(v,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var wZ=Object.defineProperty,MZ=(n,e,t)=>e in n?wZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Lt=(n,e,t)=>(MZ(n,typeof e!="symbol"?e+"":e,t),t);const Fv=new Uf,z2=new sl,TZ=Math.cos(70*(Math.PI/180)),H2=(n,e)=>(n%e+e)%e;let CZ=class extends Fa{constructor(e,t){super(),Lt(this,"object"),Lt(this,"domElement"),Lt(this,"enabled",!0),Lt(this,"target",new G),Lt(this,"minDistance",0),Lt(this,"maxDistance",1/0),Lt(this,"minZoom",0),Lt(this,"maxZoom",1/0),Lt(this,"minPolarAngle",0),Lt(this,"maxPolarAngle",Math.PI),Lt(this,"minAzimuthAngle",-1/0),Lt(this,"maxAzimuthAngle",1/0),Lt(this,"enableDamping",!1),Lt(this,"dampingFactor",.05),Lt(this,"enableZoom",!0),Lt(this,"zoomSpeed",1),Lt(this,"enableRotate",!0),Lt(this,"rotateSpeed",1),Lt(this,"enablePan",!0),Lt(this,"panSpeed",1),Lt(this,"screenSpacePanning",!0),Lt(this,"keyPanSpeed",7),Lt(this,"zoomToCursor",!1),Lt(this,"autoRotate",!1),Lt(this,"autoRotateSpeed",2),Lt(this,"reverseOrbit",!1),Lt(this,"reverseHorizontalOrbit",!1),Lt(this,"reverseVerticalOrbit",!1),Lt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Lt(this,"mouseButtons",{LEFT:Mu.ROTATE,MIDDLE:Mu.DOLLY,RIGHT:Mu.PAN}),Lt(this,"touches",{ONE:Tu.ROTATE,TWO:Tu.DOLLY_PAN}),Lt(this,"target0"),Lt(this,"position0"),Lt(this,"zoom0"),Lt(this,"_domElementKeyEvents",null),Lt(this,"getPolarAngle"),Lt(this,"getAzimuthalAngle"),Lt(this,"setPolarAngle"),Lt(this,"setAzimuthalAngle"),Lt(this,"getDistance"),Lt(this,"listenToKeyEvents"),Lt(this,"stopListenToKeyEvents"),Lt(this,"saveState"),Lt(this,"reset"),Lt(this,"update"),Lt(this,"connect"),Lt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=re=>{let Re=H2(re,2*Math.PI),Ye=u.phi;Ye<0&&(Ye+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let Z=Math.abs(Re-Ye);2*Math.PI-Z<Z&&(Re<Ye?Re+=2*Math.PI:Ye+=2*Math.PI),d.phi=Re-Ye,r.update()},this.setAzimuthalAngle=re=>{let Re=H2(re,2*Math.PI),Ye=u.theta;Ye<0&&(Ye+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let Z=Math.abs(Re-Ye);2*Math.PI-Z<Z&&(Re<Ye?Re+=2*Math.PI:Ye+=2*Math.PI),d.theta=Re-Ye,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=re=>{re.addEventListener("keydown",Fe),this._domElementKeyEvents=re},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Fe),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const re=new G,Re=new G(0,1,0),Ye=new si().setFromUnitVectors(e.up,Re),Z=Ye.clone().invert(),Ie=new G,oe=new si,Te=2*Math.PI;return function(){const mt=r.object.position;Ye.setFromUnitVectors(e.up,Re),Z.copy(Ye).invert(),re.copy(mt).sub(r.target),re.applyQuaternion(Ye),u.setFromVector3(re),r.autoRotate&&l===a.NONE&&Q(H()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let bt=r.minAzimuthAngle,Ut=r.maxAzimuthAngle;isFinite(bt)&&isFinite(Ut)&&(bt<-Math.PI?bt+=Te:bt>Math.PI&&(bt-=Te),Ut<-Math.PI?Ut+=Te:Ut>Math.PI&&(Ut-=Te),bt<=Ut?u.theta=Math.max(bt,Math.min(Ut,u.theta)):u.theta=u.theta>(bt+Ut)/2?Math.max(bt,u.theta):Math.min(Ut,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&b||r.object.isOrthographicCamera?u.radius=me(u.radius):u.radius=me(u.radius*p),re.setFromSpherical(u),re.applyQuaternion(Z),mt.copy(r.target).add(re),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let Qt=!1;if(r.zoomToCursor&&b){let Nt=null;if(r.object instanceof jn&&r.object.isPerspectiveCamera){const gt=re.length();Nt=me(gt*p);const ut=gt-Nt;r.object.position.addScaledVector(R,ut),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const gt=new G(P.x,P.y,0);gt.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),Qt=!0;const ut=new G(P.x,P.y,0);ut.unproject(r.object),r.object.position.sub(ut).add(gt),r.object.updateMatrixWorld(),Nt=re.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Nt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Nt).add(r.object.position):(Fv.origin.copy(r.object.position),Fv.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Fv.direction))<TZ?e.lookAt(r.target):(z2.setFromNormalAndCoplanarPoint(r.object.up,r.target),Fv.intersectPlane(z2,r.target))))}else r.object instanceof zs&&r.object.isOrthographicCamera&&(Qt=p!==1,Qt&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,b=!1,Qt||Ie.distanceToSquared(r.object.position)>c||8*(1-oe.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Ie.copy(r.object.position),oe.copy(r.object.quaternion),Qt=!1,!0):!1}})(),this.connect=re=>{re===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=re,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ue),r.domElement.addEventListener("pointerdown",k),r.domElement.addEventListener("pointercancel",ge),r.domElement.addEventListener("wheel",st)},this.dispose=()=>{var re,Re,Ye,Z,Ie,oe;r.domElement&&(r.domElement.style.touchAction="auto"),(re=r.domElement)==null||re.removeEventListener("contextmenu",Ue),(Re=r.domElement)==null||Re.removeEventListener("pointerdown",k),(Ye=r.domElement)==null||Ye.removeEventListener("pointercancel",ge),(Z=r.domElement)==null||Z.removeEventListener("wheel",st),(Ie=r.domElement)==null||Ie.ownerDocument.removeEventListener("pointermove",fe),(oe=r.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",ge),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Fe)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new PT,d=new PT;let p=1;const m=new G,g=new De,y=new De,v=new De,_=new De,S=new De,A=new De,w=new De,I=new De,T=new De,R=new G,P=new De;let b=!1;const M=[],L={};function H(){return 2*Math.PI/60/60*r.autoRotateSpeed}function j(){return Math.pow(.95,r.zoomSpeed)}function Q(re){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=re:d.theta-=re}function ee(re){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=re:d.phi-=re}const K=(()=>{const re=new G;return function(Ye,Z){re.setFromMatrixColumn(Z,0),re.multiplyScalar(-Ye),m.add(re)}})(),te=(()=>{const re=new G;return function(Ye,Z){r.screenSpacePanning===!0?re.setFromMatrixColumn(Z,1):(re.setFromMatrixColumn(Z,0),re.crossVectors(r.object.up,re)),re.multiplyScalar(Ye),m.add(re)}})(),F=(()=>{const re=new G;return function(Ye,Z){const Ie=r.domElement;if(Ie&&r.object instanceof jn&&r.object.isPerspectiveCamera){const oe=r.object.position;re.copy(oe).sub(r.target);let Te=re.length();Te*=Math.tan(r.object.fov/2*Math.PI/180),K(2*Ye*Te/Ie.clientHeight,r.object.matrix),te(2*Z*Te/Ie.clientHeight,r.object.matrix)}else Ie&&r.object instanceof zs&&r.object.isOrthographicCamera?(K(Ye*(r.object.right-r.object.left)/r.object.zoom/Ie.clientWidth,r.object.matrix),te(Z*(r.object.top-r.object.bottom)/r.object.zoom/Ie.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Y(re){r.object instanceof jn&&r.object.isPerspectiveCamera||r.object instanceof zs&&r.object.isOrthographicCamera?p/=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function O(re){r.object instanceof jn&&r.object.isPerspectiveCamera||r.object instanceof zs&&r.object.isOrthographicCamera?p*=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ae(re){if(!r.zoomToCursor||!r.domElement)return;b=!0;const Re=r.domElement.getBoundingClientRect(),Ye=re.clientX-Re.left,Z=re.clientY-Re.top,Ie=Re.width,oe=Re.height;P.x=Ye/Ie*2-1,P.y=-(Z/oe)*2+1,R.set(P.x,P.y,1).unproject(r.object).sub(r.object.position).normalize()}function me(re){return Math.max(r.minDistance,Math.min(r.maxDistance,re))}function Oe(re){g.set(re.clientX,re.clientY)}function ce(re){ae(re),w.set(re.clientX,re.clientY)}function Se(re){_.set(re.clientX,re.clientY)}function Ae(re){y.set(re.clientX,re.clientY),v.subVectors(y,g).multiplyScalar(r.rotateSpeed);const Re=r.domElement;Re&&(Q(2*Math.PI*v.x/Re.clientHeight),ee(2*Math.PI*v.y/Re.clientHeight)),g.copy(y),r.update()}function Ee(re){I.set(re.clientX,re.clientY),T.subVectors(I,w),T.y>0?Y(j()):T.y<0&&O(j()),w.copy(I),r.update()}function Qe(re){S.set(re.clientX,re.clientY),A.subVectors(S,_).multiplyScalar(r.panSpeed),F(A.x,A.y),_.copy(S),r.update()}function rt(re){ae(re),re.deltaY<0?O(j()):re.deltaY>0&&Y(j()),r.update()}function tt(re){let Re=!1;switch(re.code){case r.keys.UP:F(0,r.keyPanSpeed),Re=!0;break;case r.keys.BOTTOM:F(0,-r.keyPanSpeed),Re=!0;break;case r.keys.LEFT:F(r.keyPanSpeed,0),Re=!0;break;case r.keys.RIGHT:F(-r.keyPanSpeed,0),Re=!0;break}Re&&(re.preventDefault(),r.update())}function q(){if(M.length==1)g.set(M[0].pageX,M[0].pageY);else{const re=.5*(M[0].pageX+M[1].pageX),Re=.5*(M[0].pageY+M[1].pageY);g.set(re,Re)}}function we(){if(M.length==1)_.set(M[0].pageX,M[0].pageY);else{const re=.5*(M[0].pageX+M[1].pageX),Re=.5*(M[0].pageY+M[1].pageY);_.set(re,Re)}}function he(){const re=M[0].pageX-M[1].pageX,Re=M[0].pageY-M[1].pageY,Ye=Math.sqrt(re*re+Re*Re);w.set(0,Ye)}function Ce(){r.enableZoom&&he(),r.enablePan&&we()}function Le(){r.enableZoom&&he(),r.enableRotate&&q()}function ke(re){if(M.length==1)y.set(re.pageX,re.pageY);else{const Ye=Ge(re),Z=.5*(re.pageX+Ye.x),Ie=.5*(re.pageY+Ye.y);y.set(Z,Ie)}v.subVectors(y,g).multiplyScalar(r.rotateSpeed);const Re=r.domElement;Re&&(Q(2*Math.PI*v.x/Re.clientHeight),ee(2*Math.PI*v.y/Re.clientHeight)),g.copy(y)}function ne(re){if(M.length==1)S.set(re.pageX,re.pageY);else{const Re=Ge(re),Ye=.5*(re.pageX+Re.x),Z=.5*(re.pageY+Re.y);S.set(Ye,Z)}A.subVectors(S,_).multiplyScalar(r.panSpeed),F(A.x,A.y),_.copy(S)}function We(re){const Re=Ge(re),Ye=re.pageX-Re.x,Z=re.pageY-Re.y,Ie=Math.sqrt(Ye*Ye+Z*Z);I.set(0,Ie),T.set(0,Math.pow(I.y/w.y,r.zoomSpeed)),Y(T.y),w.copy(I)}function je(re){r.enableZoom&&We(re),r.enablePan&&ne(re)}function X(re){r.enableZoom&&We(re),r.enableRotate&&ke(re)}function k(re){var Re,Ye;r.enabled!==!1&&(M.length===0&&((Re=r.domElement)==null||Re.ownerDocument.addEventListener("pointermove",fe),(Ye=r.domElement)==null||Ye.ownerDocument.addEventListener("pointerup",ge)),at(re),re.pointerType==="touch"?Je(re):be(re))}function fe(re){r.enabled!==!1&&(re.pointerType==="touch"?yt(re):Be(re))}function ge(re){var Re,Ye,Z;xt(re),M.length===0&&((Re=r.domElement)==null||Re.releasePointerCapture(re.pointerId),(Ye=r.domElement)==null||Ye.ownerDocument.removeEventListener("pointermove",fe),(Z=r.domElement)==null||Z.ownerDocument.removeEventListener("pointerup",ge)),r.dispatchEvent(o),l=a.NONE}function be(re){let Re;switch(re.button){case 0:Re=r.mouseButtons.LEFT;break;case 1:Re=r.mouseButtons.MIDDLE;break;case 2:Re=r.mouseButtons.RIGHT;break;default:Re=-1}switch(Re){case Mu.DOLLY:if(r.enableZoom===!1)return;ce(re),l=a.DOLLY;break;case Mu.ROTATE:if(re.ctrlKey||re.metaKey||re.shiftKey){if(r.enablePan===!1)return;Se(re),l=a.PAN}else{if(r.enableRotate===!1)return;Oe(re),l=a.ROTATE}break;case Mu.PAN:if(re.ctrlKey||re.metaKey||re.shiftKey){if(r.enableRotate===!1)return;Oe(re),l=a.ROTATE}else{if(r.enablePan===!1)return;Se(re),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Be(re){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Ae(re);break;case a.DOLLY:if(r.enableZoom===!1)return;Ee(re);break;case a.PAN:if(r.enablePan===!1)return;Qe(re);break}}function st(re){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(re.preventDefault(),r.dispatchEvent(s),rt(re),r.dispatchEvent(o))}function Fe(re){r.enabled===!1||r.enablePan===!1||tt(re)}function Je(re){switch(Et(re),M.length){case 1:switch(r.touches.ONE){case Tu.ROTATE:if(r.enableRotate===!1)return;q(),l=a.TOUCH_ROTATE;break;case Tu.PAN:if(r.enablePan===!1)return;we(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Tu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ce(),l=a.TOUCH_DOLLY_PAN;break;case Tu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Le(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function yt(re){switch(Et(re),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ke(re),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;ne(re),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;je(re),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;X(re),r.update();break;default:l=a.NONE}}function Ue(re){r.enabled!==!1&&re.preventDefault()}function at(re){M.push(re)}function xt(re){delete L[re.pointerId];for(let Re=0;Re<M.length;Re++)if(M[Re].pointerId==re.pointerId){M.splice(Re,1);return}}function Et(re){let Re=L[re.pointerId];Re===void 0&&(Re=new De,L[re.pointerId]=Re),Re.set(re.pageX,re.pageY)}function Ge(re){const Re=re.pointerId===M[0].pointerId?M[1]:M[0];return L[Re.pointerId]}t!==void 0&&this.connect(t),this.update()}};function Px(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Vu="srgb",gl="srgb-linear",G2=3001,bZ=3e3;class NR extends mi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new DZ(t)}),this.register(function(t){return new LZ(t)}),this.register(function(t){return new VZ(t)}),this.register(function(t){return new WZ(t)}),this.register(function(t){return new XZ(t)}),this.register(function(t){return new OZ(t)}),this.register(function(t){return new kZ(t)}),this.register(function(t){return new FZ(t)}),this.register(function(t){return new UZ(t)}),this.register(function(t){return new BZ(t)}),this.register(function(t){return new zZ(t)}),this.register(function(t){return new NZ(t)}),this.register(function(t){return new GZ(t)}),this.register(function(t){return new HZ(t)}),this.register(function(t){return new IZ(t)}),this.register(function(t){return new jZ(t)}),this.register(function(t){return new JZ(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Mc.extractUrlBase(e);o=Mc.resolveURL(c,this.path)}else o=Mc.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new hi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Px(new Uint8Array(e.slice(0,4)))===HH){try{o[rn.KHR_BINARY_GLTF]=new YZ(e)}catch(u){i&&i(u);return}s=JSON.parse(o[rn.KHR_BINARY_GLTF].content)}else s=JSON.parse(Px(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new aee(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(u){case rn.KHR_MATERIALS_UNLIT:o[u]=new PZ;break;case rn.KHR_DRACO_MESH_COMPRESSION:o[u]=new KZ(s,this.dracoLoader);break;case rn.KHR_TEXTURE_TRANSFORM:o[u]=new qZ;break;case rn.KHR_MESH_QUANTIZATION:o[u]=new $Z;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function RZ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const rn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class IZ{constructor(e){this.parser=e,this.name=rn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new et(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],gl);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new wR(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new ER(u),c.distance=d;break;case"spot":c=new AR(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,tl(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class PZ{constructor(){this.name=rn.KHR_MATERIALS_UNLIT}getMaterialType(){return ds}extendParams(e,t,r){const i=[];e.color=new et(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],gl),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Vu))}return Promise.all(i)}}class BZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class DZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new De(a,a)}return Promise.all(s)}}class LZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class NZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class OZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new et(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],gl)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Vu)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class kZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class FZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new et().setRGB(a[0],a[1],a[2],gl),Promise.all(s)}}class UZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class zZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new et().setRGB(a[0],a[1],a[2],gl),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,Vu)),Promise.all(s)}}class HZ{constructor(e){this.parser=e,this.name=rn.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class GZ{constructor(e){this.parser=e,this.name=rn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ro}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class VZ{constructor(e){this.parser=e,this.name=rn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class WZ{constructor(e){this.parser=e,this.name=rn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class XZ{constructor(e){this.parser=e,this.name=rn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class jZ{constructor(e){this.name=rn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,d=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(m),u,d,p,i.mode,i.filter),m})})}else return null}}class JZ{constructor(e){this.name=rn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==uo.TRIANGLES&&c.mode!==uo.TRIANGLE_STRIP&&c.mode!==uo.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const g of d){const y=new It,v=new G,_=new si,S=new G(1,1,1),A=new lR(g.geometry,g.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,w),l.SCALE&&S.fromBufferAttribute(l.SCALE,w),A.setMatrixAt(w,y.compose(v,_,S));for(const w in l)if(w==="_COLOR_0"){const I=l[w];A.instanceColor=new wf(I.array,I.itemSize,I.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&g.geometry.setAttribute(w,l[w]);vn.prototype.copy.call(A,g),this.parser.assignFinalMaterial(A),m.push(A)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const HH="glTF",lm=12,V2={JSON:1313821514,BIN:5130562};class YZ{constructor(e){this.name=rn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,lm);if(this.header={magic:Px(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==HH)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-lm,i=new DataView(e,lm);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===V2.JSON){const l=new Uint8Array(e,lm+s,o);this.content=Px(l)}else if(a===V2.BIN){const l=lm+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class KZ{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=rn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=FT[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=FT[u]||u.toLowerCase();if(o[u]!==void 0){const p=r.accessors[e.attributes[u]],m=Sh[p.componentType];c[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,p){i.decodeDracoFile(u,function(m){for(const g in m.attributes){const y=m.attributes[g],v=l[g];v!==void 0&&(y.normalized=v)}d(m)},a,c,gl,p)})})}}class qZ{constructor(){this.name=rn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class $Z{constructor(){this.name=rn.KHR_MESH_QUANTIZATION}}class GH extends dp{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-t,d=(r-t)/u,p=d*d,m=p*d,g=e*c,y=g-c,v=-2*m+3*p,_=m-p,S=1-v,A=_-p+d;for(let w=0;w!==a;w++){const I=o[y+w+a],T=o[y+w+l]*u,R=o[g+w+a],P=o[g+w]*u;s[w]=S*I+A*T+v*R+_*P}return s}}const QZ=new si;class ZZ extends GH{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return QZ.fromArray(s).normalize().toArray(s),s}}const uo={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Sh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},W2={9728:Gr,9729:mn,9984:AS,9985:yh,9986:Ou,9987:So},X2={33071:Er,33648:zh,10497:Oc},ow={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},FT={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...lZ>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Kl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},eee={CUBICSPLINE:void 0,LINEAR:Gh,STEP:Hh},aw={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function tee(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new v_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Oa})),n.DefaultMaterial}function Su(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function tl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function nee(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(r){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(i){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],p=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function ree(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function iee(n){let e;const t=n.extensions&&n.extensions[rn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+lw(t.attributes):e=n.indices+":"+lw(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+lw(n.targets[r]);return e}function lw(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function UT(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function see(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const oee=new It;class aee{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new RZ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new y_(this.options.manager):this.textureLoader=new iH(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new hi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return Su(s,a,i),tl(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[rn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Mc.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=ow[i.type],a=Sh[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new yn(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=ow[i.type],c=Sh[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let y,v;if(m&&m!==d){const _=Math.floor(p/m),S="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+_+":"+i.count;let A=t.cache.get(S);A||(y=new c(a,_*m,i.count*m/u),A=new d_(y,m/u),t.cache.add(S,A)),v=new Fc(A,l,p%m/u,g)}else a===null?y=new c(i.count*l):y=new c(a,p,i.count*l),v=new yn(y,l,g);if(i.sparse!==void 0){const _=ow.SCALAR,S=Sh[i.sparse.indices.componentType],A=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,I=new S(o[1],A,i.sparse.count*_),T=new c(o[2],w,i.sparse.count*l);a!==null&&(v=new yn(v.array.slice(),v.itemSize,v.normalized));for(let R=0,P=I.length;R<P;R++){const b=I[R];if(v.setX(b,T[R*l]),l>=2&&v.setY(b,T[R*l+1]),l>=3&&v.setZ(b,T[R*l+2]),l>=4&&v.setW(b,T[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=W2[p.magFilter]||mn,u.minFilter=W2[p.minFilter]||So,u.wrapS=X2[p.wrapS]||Oc,u.wrapT=X2[p.wrapT]||Oc,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let g=p;t.isImageBitmapLoader===!0&&(g=function(y){const v=new gn(y);v.needsUpdate=!0,p(v)}),t.load(Mc.resolveURL(d,s.path),g,void 0,m)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),tl(d,o),d.userData.mimeType=o.mimeType||see(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[rn.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[rn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[rn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===G2?Vu:gl),"colorSpace"in o?o.colorSpace=i:o.encoding=i===Vu?G2:bZ),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new DS,Dr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Li,Dr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return v_}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[rn.KHR_MATERIALS_UNLIT]){const d=i[rn.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new et(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],gl),a.opacity=p[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Vu)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=us);const u=s.alphaMode||aw.OPAQUE;if(u===aw.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===aw.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ds&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new De(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==ds&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ds){const d=s.emissiveFactor;a.emissive=new et().setRGB(d[0],d[1],d[2],gl)}return s.emissiveTexture!==void 0&&o!==ds&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Vu)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),tl(d,s),t.associations.set(d,{materials:e}),s.extensions&&Su(i,d,s),d})}createUniqueName(e){const t=hn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[rn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return j2(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=iee(c),d=i[u];if(d)o.push(d.promise);else{let p;c.extensions&&c.extensions[rn.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=j2(new Vt,c,t),i[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?tee(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let m=0,g=u.length;m<g;m++){const y=u[m],v=o[m];let _;const S=c[m];if(v.mode===uo.TRIANGLES||v.mode===uo.TRIANGLE_STRIP||v.mode===uo.TRIANGLE_FAN||v.mode===void 0)_=s.isSkinnedMesh===!0?new aR(y,S):new er(y,S),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),v.mode===uo.TRIANGLE_STRIP?_.geometry=U2(_.geometry,Yb):v.mode===uo.TRIANGLE_FAN&&(_.geometry=U2(_.geometry,Cx));else if(v.mode===uo.LINES)_=new Zo(y,S);else if(v.mode===uo.LINE_STRIP)_=new Ml(y,S);else if(v.mode===uo.LINE_LOOP)_=new cR(y,S);else if(v.mode===uo.POINTS)_=new uR(y,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(_.geometry.morphAttributes).length>0&&ree(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),tl(_,s),v.extensions&&Su(i,_,v),t.assignFinalMaterial(_),d.push(_)}for(let m=0,g=d.length;m<g;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&Su(i,d[0],s),d[0];const p=new Jo;s.extensions&&Su(i,p,s),t.associations.set(p,{meshes:e});for(let m=0,g=d.length;m<g;m++)p.add(d[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new jn(sz.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new zs(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),tl(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const p=new It;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new h_(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,p=i.channels.length;d<p;d++){const m=i.channels[d],g=i.samplers[m.sampler],y=m.target,v=y.node,_=i.parameters!==void 0?i.parameters[g.input]:g.input,S=i.parameters!==void 0?i.parameters[g.output]:g.output;y.node!==void 0&&(o.push(this.getDependency("node",v)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",S)),c.push(g),u.push(y))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const p=d[0],m=d[1],g=d[2],y=d[3],v=d[4],_=[];for(let S=0,A=p.length;S<A;S++){const w=p[S],I=m[S],T=g[S],R=y[S],P=v[S];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const b=r._createAnimationTracks(w,I,T,R,P);if(b)for(let M=0;M<b.length;M++)_.push(b[M])}return new Xh(s,void 0,_)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,oee)});for(let m=0,g=d.length;m<g;m++)u.add(d[m]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new BS:c.length>1?u=new Jo:c.length===1?u=c[0]:u=new vn,u!==c[0])for(let d=0,p=c.length;d<p;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),tl(u,s),s.extensions&&Su(r,u,s),s.matrix!==void 0){const d=new It;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Jo;r.name&&(s.name=i.createUniqueName(r.name)),tl(s,r),r.extensions&&Su(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);const c=u=>{const d=new Map;for(const[p,m]of i.associations)(p instanceof Dr||p instanceof gn)&&d.set(p,m);return u.traverse(p=>{const m=i.associations.get(p);m!=null&&d.set(p,m)}),d};return i.associations=c(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];Kl[s.path]===Kl.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(Kl[s.path]){case Kl.weights:c=Tf;break;case Kl.rotation:c=Cf;break;case Kl.position:case Kl.scale:c=bf;break;default:switch(r.itemSize){case 1:c=Tf;break;case 2:case 3:default:c=bf;break}break}const u=i.interpolation!==void 0?eee[i.interpolation]:Gh,d=this._getArrayFromAccessor(r);for(let p=0,m=l.length;p<m;p++){const g=new c(l[p]+"."+Kl[s.path],t.array,d,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=UT(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof Cf?ZZ:GH;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function lee(n,e,t){const r=e.attributes,i=new Pi;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new G(l[0],l[1],l[2]),new G(c[0],c[1],c[2])),a.normalized){const u=UT(Sh[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new G,l=new G;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,g=p.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),p.normalized){const y=UT(Sh[p.componentType]);l.multiplyScalar(y)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new di;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function j2(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=FT[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return tl(n,e),lee(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?nee(n,e.targets,t):n})}class cee extends xR{constructor(e){super(e),this.type=ti}parse(e){const o=function(P,b){switch(P){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(b||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(b||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(b||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(b||""))}},u=`
`,d=function(P,b,M){b=b||1024;let H=P.pos,j=-1,Q=0,ee="",K=String.fromCharCode.apply(null,new Uint16Array(P.subarray(H,H+128)));for(;0>(j=K.indexOf(u))&&Q<b&&H<P.byteLength;)ee+=K,Q+=K.length,H+=128,K+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(H,H+128)));return-1<j?(P.pos+=Q+j+1,ee+K.slice(0,j)):!1},p=function(P){const b=/^#\?(\S+)/,M=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,L=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,H=/^\s*FORMAT=(\S+)\s*$/,j=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Q={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ee,K;for((P.pos>=P.byteLength||!(ee=d(P)))&&o(1,"no header found"),(K=ee.match(b))||o(3,"bad initial token"),Q.valid|=1,Q.programtype=K[1],Q.string+=ee+`
`;ee=d(P),ee!==!1;){if(Q.string+=ee+`
`,ee.charAt(0)==="#"){Q.comments+=ee+`
`;continue}if((K=ee.match(M))&&(Q.gamma=parseFloat(K[1])),(K=ee.match(L))&&(Q.exposure=parseFloat(K[1])),(K=ee.match(H))&&(Q.valid|=2,Q.format=K[1]),(K=ee.match(j))&&(Q.valid|=4,Q.height=parseInt(K[1],10),Q.width=parseInt(K[2],10)),Q.valid&2&&Q.valid&4)break}return Q.valid&2||o(3,"missing format specifier"),Q.valid&4||o(3,"missing image size specifier"),Q},m=function(P,b,M){const L=b;if(L<8||L>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);L!==(P[2]<<8|P[3])&&o(3,"wrong scanline width");const H=new Uint8Array(4*b*M);H.length||o(4,"unable to allocate buffer space");let j=0,Q=0;const ee=4*L,K=new Uint8Array(4),te=new Uint8Array(ee);let F=M;for(;F>0&&Q<P.byteLength;){Q+4>P.byteLength&&o(1),K[0]=P[Q++],K[1]=P[Q++],K[2]=P[Q++],K[3]=P[Q++],(K[0]!=2||K[1]!=2||(K[2]<<8|K[3])!=L)&&o(3,"bad rgbe scanline format");let Y=0,O;for(;Y<ee&&Q<P.byteLength;){O=P[Q++];const me=O>128;if(me&&(O-=128),(O===0||Y+O>ee)&&o(3,"bad scanline data"),me){const Oe=P[Q++];for(let ce=0;ce<O;ce++)te[Y++]=Oe}else te.set(P.subarray(Q,Q+O),Y),Y+=O,Q+=O}const ae=L;for(let me=0;me<ae;me++){let Oe=0;H[j]=te[me+Oe],Oe+=L,H[j+1]=te[me+Oe],Oe+=L,H[j+2]=te[me+Oe],Oe+=L,H[j+3]=te[me+Oe],j+=4}F--}return H},g=function(P,b,M,L){const H=P[b+3],j=Math.pow(2,H-128)/255;M[L+0]=P[b+0]*j,M[L+1]=P[b+1]*j,M[L+2]=P[b+2]*j,M[L+3]=1},y=function(P,b,M,L){const H=P[b+3],j=Math.pow(2,H-128)/255;M[L+0]=zu.toHalfFloat(Math.min(P[b+0]*j,65504)),M[L+1]=zu.toHalfFloat(Math.min(P[b+1]*j,65504)),M[L+2]=zu.toHalfFloat(Math.min(P[b+2]*j,65504)),M[L+3]=zu.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const _=p(v),S=_.width,A=_.height,w=m(v.subarray(v.pos),S,A);let I,T,R;switch(this.type){case ar:R=w.length/4;const P=new Float32Array(R*4);for(let M=0;M<R;M++)g(w,M*4,P,M*4);I=P,T=ar;break;case ti:R=w.length/4;const b=new Uint16Array(R*4);for(let M=0;M<R;M++)y(w,M*4,b,M*4);I=b,T=ti;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:S,height:A,data:I,header:_.string,gamma:_.gamma,exposure:_.exposure,type:T}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case ar:case ti:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=mn,o.magFilter=mn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const cm="colorSpace"in new gn;class uee extends xR{constructor(e){super(e),this.type=ti}parse(e){const b=Math.pow(2.7182818,2.2);function M(N,z){for(var B=0,U=0;U<65536;++U)(U==0||N[U>>3]&1<<(U&7))&&(z[B++]=U);for(var V=B-1;B<65536;)z[B++]=0;return V}function L(N){for(var z=0;z<16384;z++)N[z]={},N[z].len=0,N[z].lit=0,N[z].p=null}const H={l:0,c:0,lc:0};function j(N,z,B,U,V){for(;B<N;)z=z<<8|re(U,V),B+=8;B-=N,H.l=z>>B&(1<<N)-1,H.c=z,H.lc=B}const Q=new Array(59);function ee(N){for(var z=0;z<=58;++z)Q[z]=0;for(var z=0;z<65537;++z)Q[N[z]]+=1;for(var B=0,z=58;z>0;--z){var U=B+Q[z]>>1;Q[z]=B,B=U}for(var z=0;z<65537;++z){var V=N[z];V>0&&(N[z]=V|Q[V]++<<6)}}function K(N,z,B,U,V,W,J){for(var le=B,pe=0,_e=0;V<=W;V++){if(le.value-B.value>U)return!1;j(6,pe,_e,N,le);var xe=H.l;if(pe=H.c,_e=H.lc,J[V]=xe,xe==63){if(le.value-B.value>U)throw"Something wrong with hufUnpackEncTable";j(8,pe,_e,N,le);var ve=H.l+6;if(pe=H.c,_e=H.lc,V+ve>W+1)throw"Something wrong with hufUnpackEncTable";for(;ve--;)J[V++]=0;V--}else if(xe>=59){var ve=xe-59+2;if(V+ve>W+1)throw"Something wrong with hufUnpackEncTable";for(;ve--;)J[V++]=0;V--}}ee(J)}function te(N){return N&63}function F(N){return N>>6}function Y(N,z,B,U){for(;z<=B;z++){var V=F(N[z]),W=te(N[z]);if(V>>W)throw"Invalid table entry";if(W>14){var J=U[V>>W-14];if(J.len)throw"Invalid table entry";if(J.lit++,J.p){var le=J.p;J.p=new Array(J.lit);for(var pe=0;pe<J.lit-1;++pe)J.p[pe]=le[pe]}else J.p=new Array(1);J.p[J.lit-1]=z}else if(W)for(var _e=0,pe=1<<14-W;pe>0;pe--){var J=U[(V<<14-W)+_e];if(J.len||J.p)throw"Invalid table entry";J.len=W,J.lit=z,_e++}}return!0}const O={c:0,lc:0};function ae(N,z,B,U){N=N<<8|re(B,U),z+=8,O.c=N,O.lc=z}const me={c:0,lc:0};function Oe(N,z,B,U,V,W,J,le,pe,_e){if(N==z){U<8&&(ae(B,U,V,J),B=O.c,U=O.lc),U-=8;var xe=B>>U,xe=new Uint8Array([xe])[0];if(pe.value+xe>_e)return!1;for(var ve=le[pe.value-1];xe-- >0;)le[pe.value++]=ve}else if(pe.value<_e)le[pe.value++]=N;else return!1;me.c=B,me.lc=U}function ce(N){return N&65535}function Se(N){var z=ce(N);return z>32767?z-65536:z}const Ae={a:0,b:0};function Ee(N,z){var B=Se(N),U=Se(z),V=U,W=B+(V&1)+(V>>1),J=W,le=W-V;Ae.a=J,Ae.b=le}function Qe(N,z){var B=ce(N),U=ce(z),V=B-(U>>1)&65535,W=U+V-32768&65535;Ae.a=W,Ae.b=V}function rt(N,z,B,U,V,W,J){for(var le=J<16384,pe=B>V?V:B,_e=1,xe;_e<=pe;)_e<<=1;for(_e>>=1,xe=_e,_e>>=1;_e>=1;){for(var ve=0,Xe=ve+W*(V-xe),Ne=W*_e,qe=W*xe,ft=U*_e,lt=U*xe,Mt,ct,ze,_t;ve<=Xe;ve+=qe){for(var vt=ve,tn=ve+U*(B-xe);vt<=tn;vt+=lt){var Ot=vt+ft,un=vt+Ne,Mr=un+ft;le?(Ee(N[vt+z],N[un+z]),Mt=Ae.a,ze=Ae.b,Ee(N[Ot+z],N[Mr+z]),ct=Ae.a,_t=Ae.b,Ee(Mt,ct),N[vt+z]=Ae.a,N[Ot+z]=Ae.b,Ee(ze,_t),N[un+z]=Ae.a,N[Mr+z]=Ae.b):(Qe(N[vt+z],N[un+z]),Mt=Ae.a,ze=Ae.b,Qe(N[Ot+z],N[Mr+z]),ct=Ae.a,_t=Ae.b,Qe(Mt,ct),N[vt+z]=Ae.a,N[Ot+z]=Ae.b,Qe(ze,_t),N[un+z]=Ae.a,N[Mr+z]=Ae.b)}if(B&_e){var un=vt+Ne;le?Ee(N[vt+z],N[un+z]):Qe(N[vt+z],N[un+z]),Mt=Ae.a,N[un+z]=Ae.b,N[vt+z]=Mt}}if(V&_e)for(var vt=ve,tn=ve+U*(B-xe);vt<=tn;vt+=lt){var Ot=vt+ft;le?Ee(N[vt+z],N[Ot+z]):Qe(N[vt+z],N[Ot+z]),Mt=Ae.a,N[Ot+z]=Ae.b,N[vt+z]=Mt}xe=_e,_e>>=1}return ve}function tt(N,z,B,U,V,W,J,le,pe,_e){for(var xe=0,ve=0,Xe=le,Ne=Math.trunc(V.value+(W+7)/8);V.value<Ne;)for(ae(xe,ve,B,V),xe=O.c,ve=O.lc;ve>=14;){var qe=xe>>ve-14&16383,ft=z[qe];if(ft.len)ve-=ft.len,Oe(ft.lit,J,xe,ve,B,U,V,pe,_e,Xe),xe=me.c,ve=me.lc;else{if(!ft.p)throw"hufDecode issues";var lt;for(lt=0;lt<ft.lit;lt++){for(var Mt=te(N[ft.p[lt]]);ve<Mt&&V.value<Ne;)ae(xe,ve,B,V),xe=O.c,ve=O.lc;if(ve>=Mt&&F(N[ft.p[lt]])==(xe>>ve-Mt&(1<<Mt)-1)){ve-=Mt,Oe(ft.p[lt],J,xe,ve,B,U,V,pe,_e,Xe),xe=me.c,ve=me.lc;break}}if(lt==ft.lit)throw"hufDecode issues"}}var ct=8-W&7;for(xe>>=ct,ve-=ct;ve>0;){var ft=z[xe<<14-ve&16383];if(ft.len)ve-=ft.len,Oe(ft.lit,J,xe,ve,B,U,V,pe,_e,Xe),xe=me.c,ve=me.lc;else throw"hufDecode issues"}return!0}function q(N,z,B,U,V,W){var J={value:0},le=B.value,pe=Ge(z,B),_e=Ge(z,B);B.value+=4;var xe=Ge(z,B);if(B.value+=4,pe<0||pe>=65537||_e<0||_e>=65537)throw"Something wrong with HUF_ENCSIZE";var ve=new Array(65537),Xe=new Array(16384);L(Xe);var Ne=U-(B.value-le);if(K(N,z,B,Ne,pe,_e,ve),xe>8*(U-(B.value-le)))throw"Something wrong with hufUncompress";Y(ve,pe,_e,Xe),tt(ve,Xe,N,z,B,xe,_e,W,V,J)}function we(N,z,B){for(var U=0;U<B;++U)z[U]=N[z[U]]}function he(N){for(var z=1;z<N.length;z++){var B=N[z-1]+N[z]-128;N[z]=B}}function Ce(N,z){for(var B=0,U=Math.floor((N.length+1)/2),V=0,W=N.length-1;!(V>W||(z[V++]=N[B++],V>W));)z[V++]=N[U++]}function Le(N){for(var z=N.byteLength,B=new Array,U=0,V=new DataView(N);z>0;){var W=V.getInt8(U++);if(W<0){var J=-W;z-=J+1;for(var le=0;le<J;le++)B.push(V.getUint8(U++))}else{var J=W;z-=2;for(var pe=V.getUint8(U++),le=0;le<J+1;le++)B.push(pe)}}return B}function ke(N,z,B,U,V,W){var Ot=new DataView(W.buffer),J=B[N.idx[0]].width,le=B[N.idx[0]].height,pe=3,_e=Math.floor(J/8),xe=Math.ceil(J/8),ve=Math.ceil(le/8),Xe=J-(xe-1)*8,Ne=le-(ve-1)*8,qe={value:0},ft=new Array(pe),lt=new Array(pe),Mt=new Array(pe),ct=new Array(pe),ze=new Array(pe);for(let fn=0;fn<pe;++fn)ze[fn]=z[N.idx[fn]],ft[fn]=fn<1?0:ft[fn-1]+xe*ve,lt[fn]=new Float32Array(64),Mt[fn]=new Uint16Array(64),ct[fn]=new Uint16Array(xe*64);for(let fn=0;fn<ve;++fn){var _t=8;fn==ve-1&&(_t=Ne);var vt=8;for(let xn=0;xn<xe;++xn){xn==xe-1&&(vt=Xe);for(let dn=0;dn<pe;++dn)Mt[dn].fill(0),Mt[dn][0]=V[ft[dn]++],ne(qe,U,Mt[dn]),We(Mt[dn],lt[dn]),je(lt[dn]);X(lt);for(let dn=0;dn<pe;++dn)k(lt[dn],ct[dn],xn*64)}let An=0;for(let xn=0;xn<pe;++xn){const dn=B[N.idx[xn]].type;for(let Dn=8*fn;Dn<8*fn+_t;++Dn){An=ze[xn][Dn];for(let Ua=0;Ua<_e;++Ua){const Ni=Ua*64+(Dn&7)*8;Ot.setUint16(An+0*2*dn,ct[xn][Ni+0],!0),Ot.setUint16(An+1*2*dn,ct[xn][Ni+1],!0),Ot.setUint16(An+2*2*dn,ct[xn][Ni+2],!0),Ot.setUint16(An+3*2*dn,ct[xn][Ni+3],!0),Ot.setUint16(An+4*2*dn,ct[xn][Ni+4],!0),Ot.setUint16(An+5*2*dn,ct[xn][Ni+5],!0),Ot.setUint16(An+6*2*dn,ct[xn][Ni+6],!0),Ot.setUint16(An+7*2*dn,ct[xn][Ni+7],!0),An+=8*2*dn}}if(_e!=xe)for(let Dn=8*fn;Dn<8*fn+_t;++Dn){const Ua=ze[xn][Dn]+8*_e*2*dn,Ni=_e*64+(Dn&7)*8;for(let na=0;na<vt;++na)Ot.setUint16(Ua+na*2*dn,ct[xn][Ni+na],!0)}}}for(var tn=new Uint16Array(J),Ot=new DataView(W.buffer),un=0;un<pe;++un){B[N.idx[un]].decoded=!0;var Mr=B[N.idx[un]].type;if(B[un].type==2)for(var Yt=0;Yt<le;++Yt){const fn=ze[un][Yt];for(var kn=0;kn<J;++kn)tn[kn]=Ot.getUint16(fn+kn*2*Mr,!0);for(var kn=0;kn<J;++kn)Ot.setFloat32(fn+kn*2*Mr,oe(tn[kn]),!0)}}}function ne(N,z,B){for(var U,V=1;V<64;)U=z[N.value],U==65280?V=64:U>>8==255?V+=U&255:(B[V]=U,V++),N.value++}function We(N,z){z[0]=oe(N[0]),z[1]=oe(N[1]),z[2]=oe(N[5]),z[3]=oe(N[6]),z[4]=oe(N[14]),z[5]=oe(N[15]),z[6]=oe(N[27]),z[7]=oe(N[28]),z[8]=oe(N[2]),z[9]=oe(N[4]),z[10]=oe(N[7]),z[11]=oe(N[13]),z[12]=oe(N[16]),z[13]=oe(N[26]),z[14]=oe(N[29]),z[15]=oe(N[42]),z[16]=oe(N[3]),z[17]=oe(N[8]),z[18]=oe(N[12]),z[19]=oe(N[17]),z[20]=oe(N[25]),z[21]=oe(N[30]),z[22]=oe(N[41]),z[23]=oe(N[43]),z[24]=oe(N[9]),z[25]=oe(N[11]),z[26]=oe(N[18]),z[27]=oe(N[24]),z[28]=oe(N[31]),z[29]=oe(N[40]),z[30]=oe(N[44]),z[31]=oe(N[53]),z[32]=oe(N[10]),z[33]=oe(N[19]),z[34]=oe(N[23]),z[35]=oe(N[32]),z[36]=oe(N[39]),z[37]=oe(N[45]),z[38]=oe(N[52]),z[39]=oe(N[54]),z[40]=oe(N[20]),z[41]=oe(N[22]),z[42]=oe(N[33]),z[43]=oe(N[38]),z[44]=oe(N[46]),z[45]=oe(N[51]),z[46]=oe(N[55]),z[47]=oe(N[60]),z[48]=oe(N[21]),z[49]=oe(N[34]),z[50]=oe(N[37]),z[51]=oe(N[47]),z[52]=oe(N[50]),z[53]=oe(N[56]),z[54]=oe(N[59]),z[55]=oe(N[61]),z[56]=oe(N[35]),z[57]=oe(N[36]),z[58]=oe(N[48]),z[59]=oe(N[49]),z[60]=oe(N[57]),z[61]=oe(N[58]),z[62]=oe(N[62]),z[63]=oe(N[63])}function je(N){const z=.5*Math.cos(.7853975),B=.5*Math.cos(3.14159/16),U=.5*Math.cos(3.14159/8),V=.5*Math.cos(3*3.14159/16),W=.5*Math.cos(5*3.14159/16),J=.5*Math.cos(3*3.14159/8),le=.5*Math.cos(7*3.14159/16);for(var pe=new Array(4),_e=new Array(4),xe=new Array(4),ve=new Array(4),Xe=0;Xe<8;++Xe){var Ne=Xe*8;pe[0]=U*N[Ne+2],pe[1]=J*N[Ne+2],pe[2]=U*N[Ne+6],pe[3]=J*N[Ne+6],_e[0]=B*N[Ne+1]+V*N[Ne+3]+W*N[Ne+5]+le*N[Ne+7],_e[1]=V*N[Ne+1]-le*N[Ne+3]-B*N[Ne+5]-W*N[Ne+7],_e[2]=W*N[Ne+1]-B*N[Ne+3]+le*N[Ne+5]+V*N[Ne+7],_e[3]=le*N[Ne+1]-W*N[Ne+3]+V*N[Ne+5]-B*N[Ne+7],xe[0]=z*(N[Ne+0]+N[Ne+4]),xe[3]=z*(N[Ne+0]-N[Ne+4]),xe[1]=pe[0]+pe[3],xe[2]=pe[1]-pe[2],ve[0]=xe[0]+xe[1],ve[1]=xe[3]+xe[2],ve[2]=xe[3]-xe[2],ve[3]=xe[0]-xe[1],N[Ne+0]=ve[0]+_e[0],N[Ne+1]=ve[1]+_e[1],N[Ne+2]=ve[2]+_e[2],N[Ne+3]=ve[3]+_e[3],N[Ne+4]=ve[3]-_e[3],N[Ne+5]=ve[2]-_e[2],N[Ne+6]=ve[1]-_e[1],N[Ne+7]=ve[0]-_e[0]}for(var qe=0;qe<8;++qe)pe[0]=U*N[16+qe],pe[1]=J*N[16+qe],pe[2]=U*N[48+qe],pe[3]=J*N[48+qe],_e[0]=B*N[8+qe]+V*N[24+qe]+W*N[40+qe]+le*N[56+qe],_e[1]=V*N[8+qe]-le*N[24+qe]-B*N[40+qe]-W*N[56+qe],_e[2]=W*N[8+qe]-B*N[24+qe]+le*N[40+qe]+V*N[56+qe],_e[3]=le*N[8+qe]-W*N[24+qe]+V*N[40+qe]-B*N[56+qe],xe[0]=z*(N[qe]+N[32+qe]),xe[3]=z*(N[qe]-N[32+qe]),xe[1]=pe[0]+pe[3],xe[2]=pe[1]-pe[2],ve[0]=xe[0]+xe[1],ve[1]=xe[3]+xe[2],ve[2]=xe[3]-xe[2],ve[3]=xe[0]-xe[1],N[0+qe]=ve[0]+_e[0],N[8+qe]=ve[1]+_e[1],N[16+qe]=ve[2]+_e[2],N[24+qe]=ve[3]+_e[3],N[32+qe]=ve[3]-_e[3],N[40+qe]=ve[2]-_e[2],N[48+qe]=ve[1]-_e[1],N[56+qe]=ve[0]-_e[0]}function X(N){for(var z=0;z<64;++z){var B=N[0][z],U=N[1][z],V=N[2][z];N[0][z]=B+1.5747*V,N[1][z]=B-.1873*U-.4682*V,N[2][z]=B+1.8556*U}}function k(N,z,B){for(var U=0;U<64;++U)z[B+U]=zu.toHalfFloat(fe(N[U]))}function fe(N){return N<=1?Math.sign(N)*Math.pow(Math.abs(N),2.2):Math.sign(N)*Math.pow(b,Math.abs(N)-1)}function ge(N){return new DataView(N.array.buffer,N.offset.value,N.size)}function be(N){var z=N.viewer.buffer.slice(N.offset.value,N.offset.value+N.size),B=new Uint8Array(Le(z)),U=new Uint8Array(B.length);return he(B),Ce(B,U),new DataView(U.buffer)}function Be(N){var z=N.array.slice(N.offset.value,N.offset.value+N.size),B=kv(z),U=new Uint8Array(B.length);return he(B),Ce(B,U),new DataView(U.buffer)}function st(N){for(var z=N.viewer,B={value:N.offset.value},U=new Uint16Array(N.width*N.scanlineBlockSize*(N.channels*N.type)),V=new Uint8Array(8192),W=0,J=new Array(N.channels),le=0;le<N.channels;le++)J[le]={},J[le].start=W,J[le].end=J[le].start,J[le].nx=N.width,J[le].ny=N.lines,J[le].size=N.type,W+=J[le].nx*J[le].ny*J[le].size;var pe=Te(z,B),_e=Te(z,B);if(_e>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(pe<=_e)for(var le=0;le<_e-pe+1;le++)V[le+pe]=Re(z,B);var xe=new Uint16Array(65536),ve=M(V,xe),Xe=Ge(z,B);q(N.array,z,B,Xe,U,W);for(var le=0;le<N.channels;++le)for(var Ne=J[le],qe=0;qe<J[le].size;++qe)rt(U,Ne.start+qe,Ne.nx,Ne.size,Ne.ny,Ne.nx*Ne.size,ve);we(xe,U,W);for(var ft=0,lt=new Uint8Array(U.buffer.byteLength),Mt=0;Mt<N.lines;Mt++)for(var ct=0;ct<N.channels;ct++){var Ne=J[ct],ze=Ne.nx*Ne.size,_t=new Uint8Array(U.buffer,Ne.end*2,ze*2);lt.set(_t,ft),ft+=ze*2,Ne.end+=ze}return new DataView(lt.buffer)}function Fe(N){var z=N.array.slice(N.offset.value,N.offset.value+N.size),B=kv(z);const U=N.lines*N.channels*N.width,V=N.type==1?new Uint16Array(U):new Uint32Array(U);let W=0,J=0;const le=new Array(4);for(let pe=0;pe<N.lines;pe++)for(let _e=0;_e<N.channels;_e++){let xe=0;switch(N.type){case 1:le[0]=W,le[1]=le[0]+N.width,W=le[1]+N.width;for(let ve=0;ve<N.width;++ve){const Xe=B[le[0]++]<<8|B[le[1]++];xe+=Xe,V[J]=xe,J++}break;case 2:le[0]=W,le[1]=le[0]+N.width,le[2]=le[1]+N.width,W=le[2]+N.width;for(let ve=0;ve<N.width;++ve){const Xe=B[le[0]++]<<24|B[le[1]++]<<16|B[le[2]++]<<8;xe+=Xe,V[J]=xe,J++}break}}return new DataView(V.buffer)}function Je(N){var z=N.viewer,B={value:N.offset.value},U=new Uint8Array(N.width*N.lines*(N.channels*N.type*2)),V={version:Ye(z,B),unknownUncompressedSize:Ye(z,B),unknownCompressedSize:Ye(z,B),acCompressedSize:Ye(z,B),dcCompressedSize:Ye(z,B),rleCompressedSize:Ye(z,B),rleUncompressedSize:Ye(z,B),rleRawSize:Ye(z,B),totalAcUncompressedCount:Ye(z,B),totalDcUncompressedCount:Ye(z,B),acCompression:Ye(z,B)};if(V.version<2)throw"EXRLoader.parse: "+Pt.compression+" version "+V.version+" is unsupported";for(var W=new Array,J=Te(z,B)-2;J>0;){var le=yt(z.buffer,B),pe=Re(z,B),_e=pe>>2&3,xe=(pe>>4)-1,ve=new Int8Array([xe])[0],Xe=Re(z,B);W.push({name:le,index:ve,type:Xe,compression:_e}),J-=le.length+3}for(var Ne=Pt.channels,qe=new Array(N.channels),ft=0;ft<N.channels;++ft){var lt=qe[ft]={},Mt=Ne[ft];lt.name=Mt.name,lt.compression=0,lt.decoded=!1,lt.type=Mt.pixelType,lt.pLinear=Mt.pLinear,lt.width=N.width,lt.height=N.lines}for(var ct={idx:new Array(3)},ze=0;ze<N.channels;++ze)for(var lt=qe[ze],ft=0;ft<W.length;++ft){var _t=W[ft];lt.name==_t.name&&(lt.compression=_t.compression,_t.index>=0&&(ct.idx[_t.index]=ze),lt.offset=ze)}if(V.acCompressedSize>0)switch(V.acCompression){case 0:var Ot=new Uint16Array(V.totalAcUncompressedCount);q(N.array,z,B,V.acCompressedSize,Ot,V.totalAcUncompressedCount);break;case 1:var vt=N.array.slice(B.value,B.value+V.totalAcUncompressedCount),tn=kv(vt),Ot=new Uint16Array(tn.buffer);B.value+=V.totalAcUncompressedCount;break}if(V.dcCompressedSize>0){var un={array:N.array,offset:B,size:V.dcCompressedSize},Mr=new Uint16Array(Be(un).buffer);B.value+=V.dcCompressedSize}if(V.rleRawSize>0){var vt=N.array.slice(B.value,B.value+V.rleCompressedSize),tn=kv(vt),Yt=Le(tn.buffer);B.value+=V.rleCompressedSize}for(var kn=0,fn=new Array(qe.length),ft=0;ft<fn.length;++ft)fn[ft]=new Array;for(var An=0;An<N.lines;++An)for(var xn=0;xn<qe.length;++xn)fn[xn].push(kn),kn+=qe[xn].width*N.type*2;ke(ct,fn,qe,Ot,Mr,U);for(var ft=0;ft<qe.length;++ft){var lt=qe[ft];if(!lt.decoded)switch(lt.compression){case 2:for(var dn=0,Dn=0,An=0;An<N.lines;++An){for(var Ua=fn[ft][dn],Ni=0;Ni<lt.width;++Ni){for(var na=0;na<2*lt.type;++na)U[Ua++]=Yt[Dn+na*lt.width*lt.height];Dn++}dn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(U.buffer)}function yt(N,z){for(var B=new Uint8Array(N),U=0;B[z.value+U]!=0;)U+=1;var V=new TextDecoder().decode(B.slice(z.value,z.value+U));return z.value=z.value+U+1,V}function Ue(N,z,B){var U=new TextDecoder().decode(new Uint8Array(N).slice(z.value,z.value+B));return z.value=z.value+B,U}function at(N,z){var B=Et(N,z),U=Ge(N,z);return[B,U]}function xt(N,z){var B=Ge(N,z),U=Ge(N,z);return[B,U]}function Et(N,z){var B=N.getInt32(z.value,!0);return z.value=z.value+4,B}function Ge(N,z){var B=N.getUint32(z.value,!0);return z.value=z.value+4,B}function re(N,z){var B=N[z.value];return z.value=z.value+1,B}function Re(N,z){var B=N.getUint8(z.value);return z.value=z.value+1,B}const Ye=function(N,z){let B;return"getBigInt64"in DataView.prototype?B=Number(N.getBigInt64(z.value,!0)):B=N.getUint32(z.value+4,!0)+Number(N.getUint32(z.value,!0)<<32),z.value+=8,B};function Z(N,z){var B=N.getFloat32(z.value,!0);return z.value+=4,B}function Ie(N,z){return zu.toHalfFloat(Z(N,z))}function oe(N){var z=(N&31744)>>10,B=N&1023;return(N>>15?-1:1)*(z?z===31?B?NaN:1/0:Math.pow(2,z-15)*(1+B/1024):6103515625e-14*(B/1024))}function Te(N,z){var B=N.getUint16(z.value,!0);return z.value+=2,B}function Ve(N,z){return oe(Te(N,z))}function mt(N,z,B,U){for(var V=B.value,W=[];B.value<V+U-1;){var J=yt(z,B),le=Et(N,B),pe=Re(N,B);B.value+=3;var _e=Et(N,B),xe=Et(N,B);W.push({name:J,pixelType:le,pLinear:pe,xSampling:_e,ySampling:xe})}return B.value+=1,W}function bt(N,z){var B=Z(N,z),U=Z(N,z),V=Z(N,z),W=Z(N,z),J=Z(N,z),le=Z(N,z),pe=Z(N,z),_e=Z(N,z);return{redX:B,redY:U,greenX:V,greenY:W,blueX:J,blueY:le,whiteX:pe,whiteY:_e}}function Ut(N,z){var B=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],U=Re(N,z);return B[U]}function Qt(N,z){var B=Ge(N,z),U=Ge(N,z),V=Ge(N,z),W=Ge(N,z);return{xMin:B,yMin:U,xMax:V,yMax:W}}function Nt(N,z){var B=["INCREASING_Y"],U=Re(N,z);return B[U]}function gt(N,z){var B=Z(N,z),U=Z(N,z);return[B,U]}function ut(N,z){var B=Z(N,z),U=Z(N,z),V=Z(N,z);return[B,U,V]}function zt(N,z,B,U,V){if(U==="string"||U==="stringvector"||U==="iccProfile")return Ue(z,B,V);if(U==="chlist")return mt(N,z,B,V);if(U==="chromaticities")return bt(N,B);if(U==="compression")return Ut(N,B);if(U==="box2i")return Qt(N,B);if(U==="lineOrder")return Nt(N,B);if(U==="float")return Z(N,B);if(U==="v2f")return gt(N,B);if(U==="v3f")return ut(N,B);if(U==="int")return Et(N,B);if(U==="rational")return at(N,B);if(U==="timecode")return xt(N,B);if(U==="preview")return B.value+=V,"skipped";B.value+=V}function Ze(N,z,B){const U={};if(N.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";U.version=N.getUint8(4);const V=N.getUint8(5);U.spec={singleTile:!!(V&2),longName:!!(V&4),deepFormat:!!(V&8),multiPart:!!(V&16)},B.value=8;for(var W=!0;W;){var J=yt(z,B);if(J==0)W=!1;else{var le=yt(z,B),pe=Ge(N,B),_e=zt(N,z,B,le,pe);_e===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${le}'.`):U[J]=_e}}if(V&-5)throw console.error("EXRHeader:",U),"THREE.EXRLoader: provided file is currently unsupported.";return U}function Dt(N,z,B,U,V){const W={size:0,viewer:z,array:B,offset:U,width:N.dataWindow.xMax-N.dataWindow.xMin+1,height:N.dataWindow.yMax-N.dataWindow.yMin+1,channels:N.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:N.channels[0].pixelType,uncompress:null,getter:null,format:null,[cm?"colorSpace":"encoding"]:null};switch(N.compression){case"NO_COMPRESSION":W.lines=1,W.uncompress=ge;break;case"RLE_COMPRESSION":W.lines=1,W.uncompress=be;break;case"ZIPS_COMPRESSION":W.lines=1,W.uncompress=Be;break;case"ZIP_COMPRESSION":W.lines=16,W.uncompress=Be;break;case"PIZ_COMPRESSION":W.lines=32,W.uncompress=st;break;case"PXR24_COMPRESSION":W.lines=16,W.uncompress=Fe;break;case"DWAA_COMPRESSION":W.lines=32,W.uncompress=Je;break;case"DWAB_COMPRESSION":W.lines=256,W.uncompress=Je;break;default:throw"EXRLoader.parse: "+N.compression+" is unsupported"}if(W.scanlineBlockSize=W.lines,W.type==1)switch(V){case ar:W.getter=Ve,W.inputSize=2;break;case ti:W.getter=Te,W.inputSize=2;break}else if(W.type==2)switch(V){case ar:W.getter=Z,W.inputSize=4;break;case ti:W.getter=Ie,W.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+W.type+" for "+N.compression+".";W.blockCount=(N.dataWindow.yMax+1)/W.scanlineBlockSize;for(var J=0;J<W.blockCount;J++)Ye(z,U);W.outputChannels=W.channels==3?4:W.channels;const le=W.width*W.height*W.outputChannels;switch(V){case ar:W.byteArray=new Float32Array(le),W.channels<W.outputChannels&&W.byteArray.fill(1,0,le);break;case ti:W.byteArray=new Uint16Array(le),W.channels<W.outputChannels&&W.byteArray.fill(15360,0,le);break;default:console.error("THREE.EXRLoader: unsupported type: ",V);break}return W.bytesPerLine=W.width*W.inputSize*W.channels,W.outputChannels==4?W.format=Br:W.format=wS,cm?W.colorSpace="srgb-linear":W.encoding=3e3,W}const St=new DataView(e),Rt=new Uint8Array(e),bn={value:0},Pt=Ze(St,e,bn),At=Dt(Pt,St,Rt,bn,this.type),Kn={value:0},Bn={R:0,G:1,B:2,A:3,Y:0};for(let N=0;N<At.height/At.scanlineBlockSize;N++){const z=Ge(St,bn);At.size=Ge(St,bn),At.lines=z+At.scanlineBlockSize>At.height?At.height-z:At.scanlineBlockSize;const U=At.size<At.lines*At.bytesPerLine?At.uncompress(At):ge(At);bn.value+=At.size;for(let V=0;V<At.scanlineBlockSize;V++){const W=V+N*At.scanlineBlockSize;if(W>=At.height)break;for(let J=0;J<At.channels;J++){const le=Bn[Pt.channels[J].name];for(let pe=0;pe<At.width;pe++){Kn.value=(V*(At.channels*At.width)+J*At.width+pe)*At.inputSize;const _e=(At.height-1-W)*(At.width*At.outputChannels)+pe*At.outputChannels+le;At.byteArray[_e]=At.getter(U,Kn)}}}}return{header:Pt,width:At.width,height:At.height,data:At.byteArray,format:At.format,[cm?"colorSpace":"encoding"]:At[cm?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){cm?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=mn,o.magFilter=mn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const cw=new WeakMap;class fee extends mi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new hi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(cw.has(e)){const l=cw.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),cw.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Vt;e.index&&t.setIndex(new yn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new yn(o,a))}return t}_loadLibrary(e,t){const r=new hi(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=dee.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function dee(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const d=u.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=t(d,p,m,c),y=g.attributes.map(v=>v.array.buffer);g.index&&y.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},y)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,c){const u=c.attributeIDs,d=c.attributeTypes;let p,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(g===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const y={index:null,attributes:[]};for(const v in u){const _=self[d[v]];let S,A;if(c.useUniqueIDs)A=u[v],S=a.GetAttributeByUniqueId(p,A);else{if(A=a.GetAttributeId(p,o[u[v]]),A===-1)continue;S=a.GetAttribute(p,A)}y.attributes.push(i(o,a,p,v,_,S))}return g===o.TRIANGULAR_MESH&&(y.index=r(o,a,p)),o.destroy(p),y}function r(o,a,l){const u=l.num_faces()*3,d=u*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,u).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,u,d){const p=d.num_components(),g=l.num_points()*p,y=g*u.BYTES_PER_ELEMENT,v=s(o,u),_=o._malloc(y);a.GetAttributeDataArrayForAllPoints(l,d,v,y,_);const S=new u(o.HEAPF32.buffer,_,g).slice();return o._free(_),{name:c,array:S,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Uv;const uw=()=>{if(Uv)return Uv;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let g=0;g<d.length;++g){const y=d.charCodeAt(g);p[g]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let m=0;for(let g=0;g<d.length;++g)p[m++]=p[g]<60?r[p[g]]:(p[g]-60)*64+p[++g];return p.buffer.slice(0,m)}function l(d,p,m,g,y,v){const _=s.exports.sbrk,S=m+3&-4,A=_(S*g),w=_(y.length),I=new Uint8Array(s.exports.memory.buffer);I.set(y,w);const T=d(A,m,g,w,y.length);if(T===0&&v&&v(A,S,g),p.set(I.subarray(A,A+m*g)),_(A-_(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Uv={ready:o,supported:!0,decodeVertexBuffer(d,p,m,g,y){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,g,s.exports[c[y]])},decodeIndexBuffer(d,p,m,g){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,g)},decodeIndexSequence(d,p,m,g){l(s.exports.meshopt_decodeIndexSequence,d,p,m,g)},decodeGltfBuffer(d,p,m,g,y,v){l(s.exports[u[y]],d,p,m,g,s.exports[c[v]])}},Uv},fw=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function OR(n,e){const t=mr(s=>s.gl),r=Il(y_,fw(n)?Object.values(n):n);return ie.useLayoutEffect(()=>{e==null||e(r)},[e]),ie.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(r)?s=r:r instanceof gn?s=[r]:fw(r)&&(s=Object.values(r)),s.forEach(o=>{o instanceof gn&&t.initTexture(o)})}},[t,r]),ie.useMemo(()=>{if(fw(n)){const s={};let o=0;for(const a in n)s[a]=r[o++];return console.log("keyed",s),s}else return r},[n,r])}OR.preload=n=>Il.preload(y_,n);OR.clear=n=>Il.clear(y_,n);let zv=null,VH="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function WH(n,e,t){return r=>{t&&t(r),n&&(zv||(zv=new fee),zv.setDecoderPath(typeof n=="string"?n:VH),r.setDRACOLoader(zv)),e&&r.setMeshoptDecoder(typeof uw=="function"?uw():uw)}}function w_(n,e=!0,t=!0,r){return Il(NR,n,WH(e,t,r))}w_.preload=(n,e=!0,t=!0,r)=>Il.preload(NR,n,WH(e,t,r));w_.clear=n=>Il.clear(NR,n);w_.setDecoderPath=n=>{VH=n};function hee(n,e,t){const r=mr(p=>p.size),i=mr(p=>p.viewport),s=typeof n=="number"?n:r.width*i.dpr,o=r.height*i.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...u}=a,d=ie.useMemo(()=>{const p=new As(s,o,{minFilter:mn,magFilter:mn,type:ti,...u});return c&&(p.depthTexture=new bS(s,o,ar)),p.samples=l,p},[]);return ie.useLayoutEffect(()=>{d.setSize(s,o),l&&(d.samples=l)},[l,d,s,o]),ie.useEffect(()=>()=>d.dispose(),[]),d}const pee=n=>typeof n=="function",mee=ie.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:r,children:i,...s},o)=>{const a=mr(({set:v})=>v),l=mr(({camera:v})=>v),c=mr(({size:v})=>v),u=ie.useRef(null);ie.useImperativeHandle(o,()=>u.current,[]);const d=ie.useRef(null),p=hee(e);ie.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),ie.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let m=0,g=null;const y=pee(i);return S_(v=>{y&&(t===1/0||m<t)&&(d.current.visible=!1,v.gl.setRenderTarget(p),g=v.scene.background,n&&(v.scene.background=n),v.gl.render(v.scene,u.current),v.scene.background=g,v.gl.setRenderTarget(null),d.current.visible=!0,m++)}),ie.useLayoutEffect(()=>{if(r){const v=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:v}))}},[u,r,a]),ie.createElement(ie.Fragment,null,ie.createElement("perspectiveCamera",Qo({ref:u},s),!y&&i),ie.createElement("group",{ref:d},y&&i(p.texture)))}),gee=ie.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const d=mr(T=>T.invalidate),p=mr(T=>T.camera),m=mr(T=>T.gl),g=mr(T=>T.events),y=mr(T=>T.setEvents),v=mr(T=>T.set),_=mr(T=>T.get),S=mr(T=>T.performance),A=e||p,w=r||g.connected||m.domElement,I=ie.useMemo(()=>new CZ(A),[A]);return S_(()=>{I.enabled&&I.update()},-1),ie.useEffect(()=>(s&&I.connect(s===!0?w:s),I.connect(w),()=>void I.dispose()),[s,w,t,I,d]),ie.useEffect(()=>{const T=b=>{d(),t&&S.regress(),o&&o(b)},R=b=>{a&&a(b)},P=b=>{l&&l(b)};return I.addEventListener("change",T),I.addEventListener("start",R),I.addEventListener("end",P),()=>{I.removeEventListener("start",R),I.removeEventListener("end",P),I.removeEventListener("change",T)}},[o,a,l,I,d,y]),ie.useEffect(()=>{if(n){const T=_().controls;return v({controls:I}),()=>v({controls:T})}},[n,I]),ie.createElement("primitive",Qo({ref:u,object:I,enableDamping:i},c))}),_ee=3e3,vee=3001,XH=(n,e,t)=>{let r;switch(n){case Js:r=new Uint8ClampedArray(e*t*4);break;case ti:r=new Uint16Array(e*t*4);break;case kc:r=new Uint32Array(e*t*4);break;case zb:r=new Int8Array(e*t*4);break;case Hb:r=new Int16Array(e*t*4);break;case ES:r=new Int32Array(e*t*4);break;case ar:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let Hv;const yee=(n,e,t,r)=>{if(Hv!==void 0)return Hv;const i=new As(1,1,r);e.setRenderTarget(i);const s=new er(new Kc,new ds({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=XH(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),Hv=o[0]!==0,Hv};class kR{constructor(e){var t,r,i,s,o,a,l,c,u,d,p,m,g,y,v,_;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(A){throw this._renderer.setRenderTarget(null),A}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const S={format:Br,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:mn,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:mn,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples:void 0,wrapS:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:Er,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapT:Er};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=kR.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Ef,this._camera=new zs,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!yee(this._type,this._renderer,this._camera,S)){let A;switch(this._type){case ti:A=this._renderer.extensions.has("EXT_color_buffer_float")?ar:void 0;break}A!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ar}`),this._type=A):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new er(new Kc,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new As(this.width,this.height,S),this._renderTarget.texture.mapping=((v=e.renderTargetOptions)===null||v===void 0?void 0:v.mapping)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping:Lc}static instantiateRenderer(){const e=new sR;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=XH(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Pa(this.toArray(),this.width,this.height,Br,this._type,(e==null?void 0:e.mapping)||Lc,(e==null?void 0:e.wrapS)||Er,(e==null?void 0:e.wrapT)||Er,(e==null?void 0:e.magFilter)||mn,(e==null?void 0:e.minFilter)||mn,(e==null?void 0:e.anisotropy)||1,Co);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Es&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof gn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof gn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const xee=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,See=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Aee extends Es{constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:xee,fragmentShader:See,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new G(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new G().fromArray(t)},offsetSdr:{value:new G().fromArray(r)},gainMapMin:{value:new G().fromArray(i)},gainMapMax:{value:new G().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:Ra,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class jH extends Error{}class JH extends Error{}const um=(n,e,t)=>{var r;let i;const s=(r=n.attributes.getNamedItem(e))===null||r===void 0?void 0:r.nodeValue;if(s)i=s;else{const o=n.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)i=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return i},Eee=n=>{var e,t;let r;typeof TextDecoder<"u"?r=new TextDecoder().decode(n):r=n.toString();let i=r.indexOf("<x:xmpmeta");const s=new DOMParser;for(;i!==-1;){const o=r.indexOf("x:xmpmeta>",i);r.slice(i,o+10);const a=r.slice(i,o+10);try{const c=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],u=um(c,"hdrgm:GainMapMin","0"),d=um(c,"hdrgm:GainMapMax"),p=um(c,"hdrgm:Gamma","1"),m=um(c,"hdrgm:OffsetSDR","0.015625"),g=um(c,"hdrgm:OffsetHDR","0.015625");let y=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;y||(y="0");const v=(t=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!v)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(u)?u.map(_=>parseFloat(_)):[parseFloat(u),parseFloat(u),parseFloat(u)],gainMapMax:Array.isArray(d)?d.map(_=>parseFloat(_)):[parseFloat(d),parseFloat(d),parseFloat(d)],gamma:Array.isArray(p)?p.map(_=>parseFloat(_)):[parseFloat(p),parseFloat(p),parseFloat(p)],offsetSdr:Array.isArray(m)?m.map(_=>parseFloat(_)):[parseFloat(m),parseFloat(m),parseFloat(m)],offsetHdr:Array.isArray(g)?g.map(_=>parseFloat(_)):[parseFloat(g),parseFloat(g),parseFloat(g)],hdrCapacityMin:parseFloat(y),hdrCapacityMax:parseFloat(v)}}catch{}i=r.indexOf("<x:xmpmeta",o)}};class wee{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){r(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){r(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),i&&console.log(`Marker: ${c.toString(16)}`),c===226){i&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const d=u+4;let p;if(s.getUint16(d)===18761)p=!1;else if(s.getUint16(d)===19789)p=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(d+2,!p)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(d+4,!p);if(m<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=d+m,y=s.getUint16(g,!p),v=g+2;let _=0;for(let I=v;I<v+12*y;I+=12)s.getUint16(I,!p)===45057&&(_=s.getUint32(I+8,!p));const A=g+2+y*12+4,w=[];for(let I=A;I<A+_*16;I+=16){const T={MPType:s.getUint32(I,!p),size:s.getUint32(I+4,!p),dataOffset:s.getUint32(I+8,!p),dependantImages:s.getUint32(I+12,!p),start:-1,end:-1,isFII:!1};T.dataOffset?(T.start=d+T.dataOffset,T.isFII=!1):(T.start=0,T.isFII=!0),T.end=T.start+T.size,w.push(T)}if(this.options.extractNonFII&&w.length){const I=new Blob([s]),T=[];for(const R of w){if(R.isFII&&!this.options.extractFII)continue;const P=I.slice(R.start,R.end+1,"image/jpeg");T.push(P)}t(T)}}}a+=2+s.getUint16(a+2)}})}}const Mee=async n=>{const e=Eee(n);if(!e)throw new JH("Gain map XMP metadata not found");const r=await new wee({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new jH("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},J2=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class YH extends mi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new YS}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Aee({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new gn,sdr:new gn});return new kR({width:16,height:16,type:ti,colorSpace:Co,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,r,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([r],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([s?J2(s):Promise.resolve(void 0),J2(o)]);l=p[0],a=p[1],c=!0}else{const p=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=p[0],a=p[1]}const u=new gn(l||new ImageData(2,2),Lc,Er,Er,mn,KM,Br,Js,1,Co);u.flipY=c,u.needsUpdate=!0;const d=new gn(a,Lc,Er,Er,mn,KM,Br,Js,1,Ls);d.flipY=c,d.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Tee extends YH{load([e,t,r],i,s,o){const a=this.prepareQuadRenderer();let l,c,u;const d=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(b){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof o=="function"&&o(b),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),a.disposeOnDemandRenderer()}};let p=!0,m=0,g=0,y=!0,v=0,_=0,S=!0,A=0,w=0;const I=()=>{if(typeof s=="function"){const b=m+v+A,M=g+_+w,L=p&&y&&S;s(new ProgressEvent("progress",{lengthComputable:L,loaded:M,total:b}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const T=new hi(this._internalLoadingManager);T.setResponseType("arraybuffer"),T.setRequestHeader(this.requestHeader),T.setPath(this.path),T.setWithCredentials(this.withCredentials),T.load(e,async b=>{if(typeof b=="string")throw new Error("Invalid sdr buffer");l=b,await d()},b=>{p=b.lengthComputable,g=b.loaded,m=b.total,I()},b=>{this.manager.itemError(e),typeof o=="function"&&o(b)});const R=new hi(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(t,async b=>{if(typeof b=="string")throw new Error("Invalid gainmap buffer");c=b,await d()},b=>{y=b.lengthComputable,_=b.loaded,v=b.total,I()},b=>{this.manager.itemError(t),typeof o=="function"&&o(b)});const P=new hi(this._internalLoadingManager);return P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(r,async b=>{if(typeof b!="string")throw new Error("Invalid metadata string");u=JSON.parse(b),await d()},b=>{S=b.lengthComputable,w=b.loaded,A=b.total,I()},b=>{this.manager.itemError(r),typeof o=="function"&&o(b)}),a}}class Cee extends YH{load(e,t,r,i){const s=this.prepareQuadRenderer(),o=new hi(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,d;try{const p=await Mee(l);c=p.sdr,u=p.gainMap,d=p.metadata}catch(p){if(p instanceof JH||p instanceof jH)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),d={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw p}try{await this.render(s,d,c,u)}catch(p){this.manager.itemError(e),typeof i=="function"&&i(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},r,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const dw={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},bee="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Gv=n=>Array.isArray(n);function KH({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(t){if(!(t in dw))throw new Error("Preset must be one of: "+Object.keys(dw).join(", "));n=dw[t],e=bee}const c=Gv(n)&&n.length===6,u=Gv(n)&&n.length===3&&n.some(v=>v.endsWith("json")),d=Gv(n)?n[0]:n;if(a=Gv(n),l=c?"cube":u?"webp":d.startsWith("data:application/exr")?"exr":d.startsWith("data:application/hdr")?"hdr":d.startsWith("data:image/jpeg")?"jpg":(s=d.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=l==="cube"?qz:l==="hdr"?cee:l==="exr"?uee:l==="jpg"||l==="jpeg"?Cee:l==="webp"?Tee:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const p=mr(v=>v.gl),m=Il(o,a?[n]:n,v=>{(l==="webp"||l==="jpg"||l==="jpeg")&&v.setRenderer(p),v.setPath==null||v.setPath(e),i&&i(v)});let g=a?m[0]:m;if(l==="jpg"||l==="jpeg"||l==="webp"){var y;g=(y=g.renderTarget)==null?void 0:y.texture}return g.mapping=c?ka:Uh,"colorSpace"in g?g.colorSpace=r??c?"srgb":"srgb-linear":g.encoding=r??c?vee:_ee,g}const Ree=n=>n.current&&n.current.isScene,Iee=n=>Ree(n)?n.current:n;function FR(n,e,t,r,i={}){var s,o,a,l,c;i={backgroundBlurriness:(s=i.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=Iee(e||t),d=u.background,p=u.environment,m={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(o=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(u.environment=r),n&&(u.background=r),ol(u,i),()=>{n!=="only"&&(u.environment=p),n&&(u.background=d),ol(u,m)}}function UR({scene:n,background:e=!1,map:t,...r}){const i=mr(s=>s.scene);return ie.useLayoutEffect(()=>{if(t)return FR(e,n,i,t,r)}),null}function qH({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=KH(l),u=mr(d=>d.scene);return ie.useLayoutEffect(()=>FR(n,e,u,c,{blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function Pee({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:d,environmentRotation:p,scene:m,files:g,path:y,preset:v=void 0,extensions:_}){const S=mr(P=>P.gl),A=mr(P=>P.scene),w=ie.useRef(null),[I]=ie.useState(()=>new Ef),T=ie.useMemo(()=>{const P=new tR(r);return P.texture.type=ti,P},[r]);ie.useLayoutEffect(()=>(i===1&&w.current.update(S,I),FR(o,m,A,T.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:d,environmentRotation:p})),[n,I,T.texture,m,A,o,i,S]);let R=1;return S_(()=>{(i===1/0||R<i)&&(w.current.update(S,I),R++)}),ie.createElement(ie.Fragment,null,RH(ie.createElement(ie.Fragment,null,n,ie.createElement("cubeCamera",{ref:w,args:[e,t,T]}),g||v?ie.createElement(qH,{background:!0,files:g,preset:v,path:y,extensions:_}):s?ie.createElement(UR,{background:!0,map:s,extensions:_}):null),I))}function Bee(n){var e,t,r,i;const s=KH(n),o=n.map||s;ie.useMemo(()=>gH({GroundProjectedEnvImpl:EZ}),[]);const a=ie.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return ie.createElement(ie.Fragment,null,ie.createElement(UR,Qo({},n,{map:o})),ie.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function Dee(n){return n.ground?ie.createElement(Bee,n):n.map?ie.createElement(UR,n):n.children?ie.createElement(Pee,n):ie.createElement(qH,n)}const hw=ie.forwardRef(({args:n,map:e,toneMapped:t=!1,color:r="white",form:i="rect",intensity:s=1,scale:o=1,target:a,children:l,...c},u)=>{const d=ie.useRef(null);return ie.useImperativeHandle(u,()=>d.current,[]),ie.useLayoutEffect(()=>{!l&&!c.material&&(ol(d.current.material,{color:r}),d.current.material.color.multiplyScalar(s))},[r,s,l,c.material]),ie.useLayoutEffect(()=>{a&&d.current.lookAt(Array.isArray(a)?new G(...a):a)},[a]),o=Array.isArray(o)&&o.length===2?[o[0],o[1],1]:o,ie.createElement("mesh",Qo({ref:d,scale:o},c),i==="circle"?ie.createElement("ringGeometry",{args:[0,1,64]}):i==="ring"?ie.createElement("ringGeometry",{args:[.5,1,64]}):i==="rect"?ie.createElement("planeGeometry",null):ie.createElement(i,{args:n}),l||(c.material?null:ie.createElement("meshBasicMaterial",{toneMapped:t,map:e,side:us})))});var Lee={BASE_URL:"/Apple-website/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Y2=n=>{let e;const t=new Set,r=(u,d)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const m=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(g=>g(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(t.add(u),()=>t.delete(u)),destroy:()=>{(Lee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=n(r,i,l);return l},Nee=n=>n?Y2(n):Y2;var $H={exports:{}},QH={},ZH={exports:{}},eG={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh=ie;function Oee(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var kee=typeof Object.is=="function"?Object.is:Oee,Fee=Jh.useState,Uee=Jh.useEffect,zee=Jh.useLayoutEffect,Hee=Jh.useDebugValue;function Gee(n,e){var t=e(),r=Fee({inst:{value:t,getSnapshot:e}}),i=r[0].inst,s=r[1];return zee(function(){i.value=t,i.getSnapshot=e,pw(i)&&s({inst:i})},[n,t,e]),Uee(function(){return pw(i)&&s({inst:i}),n(function(){pw(i)&&s({inst:i})})},[n]),Hee(t),t}function pw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!kee(n,t)}catch{return!0}}function Vee(n,e){return e()}var Wee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Vee:Gee;eG.useSyncExternalStore=Jh.useSyncExternalStore!==void 0?Jh.useSyncExternalStore:Wee;ZH.exports=eG;var Xee=ZH.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $S=ie,jee=Xee;function Jee(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Yee=typeof Object.is=="function"?Object.is:Jee,Kee=jee.useSyncExternalStore,qee=$S.useRef,$ee=$S.useEffect,Qee=$S.useMemo,Zee=$S.useDebugValue;QH.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var s=qee(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Qee(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),i!==void 0&&o.hasValue){var g=o.value;if(i(g,m))return d=g}return d=m}if(g=d,Yee(u,m))return g;var y=r(m);return i!==void 0&&i(g,y)?g:(u=m,d=y)}var c=!1,u,d,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,r,i]);var a=Kee(n,s[0],s[1]);return $ee(function(){o.hasValue=!0,o.value=a},[a]),Zee(a),a};$H.exports=QH;var ete=$H.exports;const tte=e_(ete);var tG={BASE_URL:"/Apple-website/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:nte}=hf,{useSyncExternalStoreWithSelector:rte}=tte;let K2=!1;const ite=n=>n;function ste(n,e=ite,t){(tG?"production":void 0)!=="production"&&t&&!K2&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),K2=!0);const r=rte(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return nte(r),r}const q2=n=>{(tG?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?Nee(n):n,t=(r,i)=>ste(e,r,i);return Object.assign(t,e),t},ote=n=>n?q2(n):q2;var $2,Q2;const Z2=typeof window<"u"&&(($2=window.document)!=null&&$2.createElement||((Q2=window.navigator)==null?void 0:Q2.product)==="ReactNative")?hf.useLayoutEffect:hf.useEffect;function ate(){const n=ote(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{const t=n(i=>i.set),r=n(i=>i.version);return Z2(()=>{t(i=>({version:i.version+1}))},[]),Z2(()=>(t(({current:i})=>({current:[...i,e]})),()=>t(({current:i})=>({current:i.filter(s=>s!==e)}))),[e,r]),null},Out:()=>{const e=n(t=>t.current);return hf.createElement(hf.Fragment,null,e)}}}const lte=n=>n&&n.isOrthographicCamera,eN=new et,nG=ate();function rG(n){return"top"in n}function mw(n,e){const{right:t,top:r,left:i,bottom:s,width:o,height:a}=e,l=e.bottom<0||r>n.height||t<0||e.left>n.width;if(rG(n)){const d=n.top+n.height-s,p=i-n.left;return{position:{width:o,height:a,left:p,top:r,bottom:d,right:t},isOffscreen:l}}const c=n.height-s;return{position:{width:o,height:a,top:r,left:i,bottom:c,right:t},isOffscreen:l}}function gw(n,{left:e,bottom:t,width:r,height:i}){let s;const o=r/i;return lte(n.camera)?(n.camera.left!==r/-2||n.camera.right!==r/2||n.camera.top!==i/2||n.camera.bottom!==i/-2)&&(Object.assign(n.camera,{left:r/-2,right:r/2,top:i/2,bottom:i/-2}),n.camera.updateProjectionMatrix()):n.camera.aspect!==o&&(n.camera.aspect=o,n.camera.updateProjectionMatrix()),s=n.gl.autoClear,n.gl.autoClear=!1,n.gl.setViewport(e,t,r,i),n.gl.setScissor(e,t,r,i),n.gl.setScissorTest(!0),s}function _w(n,e){n.gl.setScissorTest(!1),n.gl.autoClear=e}function tN(n){n.gl.getClearColor(eN),n.gl.setClearColor(eN,n.gl.getClearAlpha()),n.gl.clear(!0,!0)}function cte({visible:n=!0,canvasSize:e,scene:t,index:r,children:i,frames:s,rect:o,track:a}){const l=mr(),[c,u]=ie.useState(!1);let d=0;return S_(p=>{if(s===1/0||d<=s){var m;a&&(o.current=(m=a.current)==null?void 0:m.getBoundingClientRect()),d++}if(o.current){const{position:g,isOffscreen:y}=mw(e,o.current);if(c!==y&&u(y),n&&!c&&o.current){const v=gw(p,g);p.gl.render(i?p.scene:t,p.camera),_w(p,v)}}},r),ie.useLayoutEffect(()=>{const p=o.current;if(p&&(!n||!c)){const{position:m}=mw(e,p),g=gw(l,m);tN(l),_w(l,g)}},[n,c]),ie.useEffect(()=>{if(!a)return;const p=o.current,m=l.get().events.connected;return l.setEvents({connected:a.current}),()=>{if(p){const{position:g}=mw(e,p),y=gw(l,g);tN(l),_w(l,y)}l.setEvents({connected:m})}},[a]),ie.useEffect(()=>{rG(e)||console.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),ie.createElement(ie.Fragment,null,i,ie.createElement("group",{onPointerOver:()=>null}))}const iG=ie.forwardRef(({track:n,visible:e=!0,index:t=1,id:r,style:i,className:s,frames:o=1/0,children:a,...l},c)=>{var u,d,p,m;const g=ie.useRef(null),{size:y,scene:v}=mr(),[_]=ie.useState(()=>new Ef),[S,A]=ie.useReducer(()=>!0,!1),w=ie.useCallback((I,T)=>{if(g.current&&n&&n.current&&I.target===n.current){const{width:R,height:P,left:b,top:M}=g.current,L=I.clientX-b,H=I.clientY-M;T.pointer.set(L/R*2-1,-(H/P)*2+1),T.raycaster.setFromCamera(T.pointer,T.camera)}},[g,n]);return ie.useEffect(()=>{var I;n&&(g.current=(I=n.current)==null?void 0:I.getBoundingClientRect()),A()},[n]),ie.createElement("group",Qo({ref:c},l),S&&RH(ie.createElement(cte,{visible:e,canvasSize:y,frames:o,scene:v,track:n,rect:g,index:t},a),_,{events:{compute:w,priority:t},size:{width:(u=g.current)==null?void 0:u.width,height:(d=g.current)==null?void 0:d.height,top:(p=g.current)==null?void 0:p.top,left:(m=g.current)==null?void 0:m.left}}))}),ute=ie.forwardRef(({as:n="div",id:e,visible:t,className:r,style:i,index:s=1,track:o,frames:a=1/0,children:l,...c},u)=>{const d=ie.useId(),p=ie.useRef(null);return ie.useImperativeHandle(u,()=>p.current),ie.createElement(ie.Fragment,null,ie.createElement(n,Qo({ref:p,id:e,className:r,style:i},c)),ie.createElement(nG.In,null,ie.createElement(iG,{visible:t,key:d,track:p,frames:a,index:s},l)))}),zR=ie.forwardRef((n,e)=>ie.useContext(qS)?ie.createElement(iG,Qo({ref:e},n)):ie.createElement(ute,Qo({ref:e},n)));zR.Port=()=>ie.createElement(nG.Out,null);const fte=()=>se.jsxs("group",{name:"lights",children:[se.jsx(Dee,{resolution:256,children:se.jsxs("group",{children:[se.jsx(hw,{form:"rect",intensity:10,position:[-1,0,-10],scale:10,color:"#495057"}),se.jsx(hw,{form:"rect",intensity:10,position:[-10,2,1],scale:10,"rotation-y":Math.PI/2}),se.jsx(hw,{form:"rect",intensity:10,position:[10,0,1],scale:10,"rotation-y":Math.PI/2})]})}),se.jsx("spotLight",{position:[-2,10,5],angle:.15,penumbra:1,decay:0,intensity:Math.PI*.2,color:"#f8f9fa"}),se.jsx("spotLight",{position:[0,-25,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI*.2,color:"#f8f9fa"}),se.jsx("spotLight",{position:[0,15,5],angle:.15,penumbra:1,decay:.1,intensity:Math.PI*3})]});function dte(n){const{nodes:e,materials:t}=w_("./models/scene.glb"),r=OR(n.item.img);return ie.useEffect(()=>{Object.entries(t).map(i=>{i[0]!=="zFdeDaGNRwzccye"&&i[0]!=="ujsvqBWRMnqdwPx"&&i[0]!=="hUlRcbieVuIiOXG"&&i[0]!=="jlzuBkUzuJqgiAK"&&i[0]!=="xNrofRCqOXXHVZt"&&(i[1].color=new et(n.item.color[0])),i[1].needsUpdate=!0})},[t,n.item]),se.jsxs("group",{...n,dispose:null,children:[se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.ttmRoLdJipiIOmf.geometry,material:t.hUlRcbieVuIiOXG,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.DjsDkGiopeiEJZK.geometry,material:t.PaletteMaterial001,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.buRWvyqhBBgcJFo.geometry,material:t.PaletteMaterial002,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.MrMmlCAsAxJpYqQ_0.geometry,material:t.dxCVrUCvYhjVxqy,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.wqbHSzWaUxBCwxY_0.geometry,material:t.MHFGNLrDQbTNima,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.QvGDcbDApaGssma.geometry,material:t.kUhjpatHUvkBwfM,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.vFwJFNASGvEHWhs.geometry,material:t.RJoymvEsaIItifI,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.evAxFwhaQUwXuua.geometry,material:t.KSIxMqttXxxmOYl,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.USxQiqZgxHbRvqB.geometry,material:t.mcPrzcBUcdqUybC,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.TvgBVmqNmSrFVfW.geometry,material:t.pIhYLPqiSQOZTjn,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.GuYJryuYunhpphO.geometry,material:t.eShKpuMNVJTRrgg,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pvdHknDTGDzVpwc.geometry,material:t.xdyiJLYTYRfJffH,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.CfghdUoyzvwzIum.geometry,material:t.jpGaQNgTtEGkTfo,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.DjdhycfQYjKMDyn.geometry,material:t.ujsvqBWRMnqdwPx,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.usFLmqcyrnltBUr.geometry,material:t.sxNzrmuTqVeaXdg,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.xXDHkMplTIDAXLN.geometry,material:t.pIJKfZsazmcpEiU,scale:.01,children:se.jsx("meshStandardMaterial",{roughness:1,map:r})}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.vELORlCJixqPHsZ.geometry,material:t.zFdeDaGNRwzccye,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.EbQGKrWAqhBHiMv.geometry,material:t.TBLSREBUyLMVtJa,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.EddVrWkqZTlvmci.geometry,material:t.xNrofRCqOXXHVZt,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.KSWlaxBcnPDpFCs.geometry,material:t.yQQySPTfbEJufve,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.TakBsdEjEytCAMK.geometry,material:t.PaletteMaterial003,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.IykfmVvLplTsTEW.geometry,material:t.PaletteMaterial004,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.wLfSXtbwRlBrwof.geometry,material:t.oZRkkORNzkufnGD,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.WJwwVjsahIXbJpU.geometry,material:t.yhcAXNGcJWCqtIS,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.YfrJNXgMvGOAfzz.geometry,material:t.bCgzXjHOanGdTFV,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.DCLCbjzqejuvsqH.geometry,material:t.vhaEJjZoqGtyLdo,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.CdalkzDVnwgdEhS.geometry,material:t.jlzuBkUzuJqgiAK,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.NtjcIgolNGgYlCg.geometry,material:t.PpwUTnTFZJXxCoE,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.pXBNoLiaMwsDHRF.geometry,material:t.yiDkEwDSyEhavuP,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.IkoiNqATMVoZFKD.geometry,material:t.hiVunnLeAHkwGEo,scale:.01}),se.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.rqgRAGHOwnuBypi.geometry,material:t.HGhEhpqSBZRnjHC,scale:.01})]})}w_.preload("./models/scene.glb");const hte=()=>se.jsx(aZ,{children:se.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex justify-center items-center",children:se.jsx("div",{className:"w-[10vw] h-[10vw] rounded-full",children:"Loading..."})})}),nN=({index:n,groupRef:e,gsapType:t,controlRef:r,setRotationState:i,size:s,item:o})=>se.jsxs(zR,{index:n,id:t,className:` w-full h-full absolute ${n===2?"right-[-100%]":""}`,children:[se.jsx("ambientLight",{intensity:.3}),se.jsx(mee,{makeDefault:!0,position:[0,0,4]}),se.jsx(fte,{}),se.jsx(gee,{makeDefault:!0,ref:r,enableZoom:!1,enablePan:!1,rotateSpeed:.4,target:new G(0,0,0),onEnd:()=>i(r.current.getAzimuthalAngle())}),se.jsx("group",{ref:e,name:`${n===1?"small":"large"}`,position:[0,0,0],children:se.jsx(ie.Suspense,{fallback:se.jsx(hte,{}),children:se.jsx(dte,{scale:n===1?[15,15,15]:[17,17,17],item:o,size:s})})})]});function pte(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function mte(n,e,t){return e&&pte(n.prototype,e),n}/*!
 * Observer 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ui,Oy,ks,hc,pc,Ah,sG,Ru,Xm,oG,pl,Fo,aG,lG=function(){return ui||typeof window<"u"&&(ui=window.gsap)&&ui.registerPlugin&&ui},cG=1,sh=[],nn=[],Da=[],jm=Date.now,zT=function(e,t){return t},gte=function(){var e=Xm.core,t=e.bridge||{},r=e._scrollers,i=e._proxies;r.push.apply(r,nn),i.push.apply(i,Da),nn=r,Da=i,zT=function(o,a){return t[o](a)}},Tc=function(e,t){return~Da.indexOf(e)&&Da[Da.indexOf(e)+1][t]},Jm=function(e){return!!~oG.indexOf(e)},zi=function(e,t,r,i,s){return e.addEventListener(t,r,{passive:i!==!1,capture:!!s})},Ui=function(e,t,r,i){return e.removeEventListener(t,r,!!i)},Vv="scrollLeft",Wv="scrollTop",HT=function(){return pl&&pl.isPressed||nn.cache++},Bx=function(e,t){var r=function i(s){if(s||s===0){cG&&(ks.history.scrollRestoration="manual");var o=pl&&pl.isPressed;s=i.v=Math.round(s)||(pl&&pl.iOS?1:0),e(s),i.cacheID=nn.cache,o&&zT("ss",s)}else(t||nn.cache!==i.cacheID||zT("ref"))&&(i.cacheID=nn.cache,i.v=e());return i.v+i.offset};return r.offset=0,e&&r},Ki={s:Vv,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Bx(function(n){return arguments.length?ks.scrollTo(n,Fr.sc()):ks.pageXOffset||hc[Vv]||pc[Vv]||Ah[Vv]||0})},Fr={s:Wv,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Ki,sc:Bx(function(n){return arguments.length?ks.scrollTo(Ki.sc(),n):ks.pageYOffset||hc[Wv]||pc[Wv]||Ah[Wv]||0})},as=function(e,t){return(t&&t._ctx&&t._ctx.selector||ui.utils.toArray)(e)[0]||(typeof e=="string"&&ui.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Uc=function(e,t){var r=t.s,i=t.sc;Jm(e)&&(e=hc.scrollingElement||pc);var s=nn.indexOf(e),o=i===Fr.sc?1:2;!~s&&(s=nn.push(e)-1),nn[s+o]||zi(e,"scroll",HT);var a=nn[s+o],l=a||(nn[s+o]=Bx(Tc(e,r),!0)||(Jm(e)?i:Bx(function(c){return arguments.length?e[r]=c:e[r]})));return l.target=e,a||(l.smooth=ui.getProperty(e,"scrollBehavior")==="smooth"),l},GT=function(e,t,r){var i=e,s=e,o=jm(),a=o,l=t||50,c=Math.max(500,l*3),u=function(g,y){var v=jm();y||v-o>l?(s=i,i=g,a=o,o=v):r?i+=g:i=s+(g-s)/(v-a)*(o-a)},d=function(){s=i=r?0:i,a=o=0},p=function(g){var y=a,v=s,_=jm();return(g||g===0)&&g!==i&&u(g),o===a||_-a>c?0:(i+(r?v:-v))/((r?_:o)-y)*1e3};return{update:u,reset:d,getVelocity:p}},fm=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},rN=function(e){var t=Math.max.apply(Math,e),r=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(r)?t:r},uG=function(){Xm=ui.core.globals().ScrollTrigger,Xm&&Xm.core&&gte()},fG=function(e){return ui=e||lG(),!Oy&&ui&&typeof document<"u"&&document.body&&(ks=window,hc=document,pc=hc.documentElement,Ah=hc.body,oG=[ks,hc,pc,Ah],ui.utils.clamp,aG=ui.core.context||function(){},Ru="onpointerenter"in Ah?"pointer":"mouse",sG=wr.isTouch=ks.matchMedia&&ks.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in ks||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Fo=wr.eventTypes=("ontouchstart"in pc?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in pc?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return cG=0},500),uG(),Oy=1),Oy};Ki.op=Fr;nn.cache=0;var wr=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(r){Oy||fG(ui)||console.warn("Please gsap.registerPlugin(Observer)"),Xm||uG();var i=r.tolerance,s=r.dragMinimum,o=r.type,a=r.target,l=r.lineHeight,c=r.debounce,u=r.preventDefault,d=r.onStop,p=r.onStopDelay,m=r.ignore,g=r.wheelSpeed,y=r.event,v=r.onDragStart,_=r.onDragEnd,S=r.onDrag,A=r.onPress,w=r.onRelease,I=r.onRight,T=r.onLeft,R=r.onUp,P=r.onDown,b=r.onChangeX,M=r.onChangeY,L=r.onChange,H=r.onToggleX,j=r.onToggleY,Q=r.onHover,ee=r.onHoverEnd,K=r.onMove,te=r.ignoreCheck,F=r.isNormalizer,Y=r.onGestureStart,O=r.onGestureEnd,ae=r.onWheel,me=r.onEnable,Oe=r.onDisable,ce=r.onClick,Se=r.scrollSpeed,Ae=r.capture,Ee=r.allowClicks,Qe=r.lockAxis,rt=r.onLockAxis;this.target=a=as(a)||pc,this.vars=r,m&&(m=ui.utils.toArray(m)),i=i||1e-9,s=s||0,g=g||1,Se=Se||1,o=o||"wheel,touch,pointer",c=c!==!1,l||(l=parseFloat(ks.getComputedStyle(Ah).lineHeight)||22);var tt,q,we,he,Ce,Le,ke,ne=this,We=0,je=0,X=r.passive||!u,k=Uc(a,Ki),fe=Uc(a,Fr),ge=k(),be=fe(),Be=~o.indexOf("touch")&&!~o.indexOf("pointer")&&Fo[0]==="pointerdown",st=Jm(a),Fe=a.ownerDocument||hc,Je=[0,0,0],yt=[0,0,0],Ue=0,at=function(){return Ue=jm()},xt=function(ut,zt){return(ne.event=ut)&&m&&~m.indexOf(ut.target)||zt&&Be&&ut.pointerType!=="touch"||te&&te(ut,zt)},Et=function(){ne._vx.reset(),ne._vy.reset(),q.pause(),d&&d(ne)},Ge=function(){var ut=ne.deltaX=rN(Je),zt=ne.deltaY=rN(yt),Ze=Math.abs(ut)>=i,Dt=Math.abs(zt)>=i;L&&(Ze||Dt)&&L(ne,ut,zt,Je,yt),Ze&&(I&&ne.deltaX>0&&I(ne),T&&ne.deltaX<0&&T(ne),b&&b(ne),H&&ne.deltaX<0!=We<0&&H(ne),We=ne.deltaX,Je[0]=Je[1]=Je[2]=0),Dt&&(P&&ne.deltaY>0&&P(ne),R&&ne.deltaY<0&&R(ne),M&&M(ne),j&&ne.deltaY<0!=je<0&&j(ne),je=ne.deltaY,yt[0]=yt[1]=yt[2]=0),(he||we)&&(K&&K(ne),we&&(S(ne),we=!1),he=!1),Le&&!(Le=!1)&&rt&&rt(ne),Ce&&(ae(ne),Ce=!1),tt=0},re=function(ut,zt,Ze){Je[Ze]+=ut,yt[Ze]+=zt,ne._vx.update(ut),ne._vy.update(zt),c?tt||(tt=requestAnimationFrame(Ge)):Ge()},Re=function(ut,zt){Qe&&!ke&&(ne.axis=ke=Math.abs(ut)>Math.abs(zt)?"x":"y",Le=!0),ke!=="y"&&(Je[2]+=ut,ne._vx.update(ut,!0)),ke!=="x"&&(yt[2]+=zt,ne._vy.update(zt,!0)),c?tt||(tt=requestAnimationFrame(Ge)):Ge()},Ye=function(ut){if(!xt(ut,1)){ut=fm(ut,u);var zt=ut.clientX,Ze=ut.clientY,Dt=zt-ne.x,St=Ze-ne.y,Rt=ne.isDragging;ne.x=zt,ne.y=Ze,(Rt||Math.abs(ne.startX-zt)>=s||Math.abs(ne.startY-Ze)>=s)&&(S&&(we=!0),Rt||(ne.isDragging=!0),Re(Dt,St),Rt||v&&v(ne))}},Z=ne.onPress=function(gt){xt(gt,1)||gt&&gt.button||(ne.axis=ke=null,q.pause(),ne.isPressed=!0,gt=fm(gt),We=je=0,ne.startX=ne.x=gt.clientX,ne.startY=ne.y=gt.clientY,ne._vx.reset(),ne._vy.reset(),zi(F?a:Fe,Fo[1],Ye,X,!0),ne.deltaX=ne.deltaY=0,A&&A(ne))},Ie=ne.onRelease=function(gt){if(!xt(gt,1)){Ui(F?a:Fe,Fo[1],Ye,!0);var ut=!isNaN(ne.y-ne.startY),zt=ne.isDragging,Ze=zt&&(Math.abs(ne.x-ne.startX)>3||Math.abs(ne.y-ne.startY)>3),Dt=fm(gt);!Ze&&ut&&(ne._vx.reset(),ne._vy.reset(),u&&Ee&&ui.delayedCall(.08,function(){if(jm()-Ue>300&&!gt.defaultPrevented){if(gt.target.click)gt.target.click();else if(Fe.createEvent){var St=Fe.createEvent("MouseEvents");St.initMouseEvent("click",!0,!0,ks,1,Dt.screenX,Dt.screenY,Dt.clientX,Dt.clientY,!1,!1,!1,!1,0,null),gt.target.dispatchEvent(St)}}})),ne.isDragging=ne.isGesturing=ne.isPressed=!1,d&&zt&&!F&&q.restart(!0),_&&zt&&_(ne),w&&w(ne,Ze)}},oe=function(ut){return ut.touches&&ut.touches.length>1&&(ne.isGesturing=!0)&&Y(ut,ne.isDragging)},Te=function(){return(ne.isGesturing=!1)||O(ne)},Ve=function(ut){if(!xt(ut)){var zt=k(),Ze=fe();re((zt-ge)*Se,(Ze-be)*Se,1),ge=zt,be=Ze,d&&q.restart(!0)}},mt=function(ut){if(!xt(ut)){ut=fm(ut,u),ae&&(Ce=!0);var zt=(ut.deltaMode===1?l:ut.deltaMode===2?ks.innerHeight:1)*g;re(ut.deltaX*zt,ut.deltaY*zt,0),d&&!F&&q.restart(!0)}},bt=function(ut){if(!xt(ut)){var zt=ut.clientX,Ze=ut.clientY,Dt=zt-ne.x,St=Ze-ne.y;ne.x=zt,ne.y=Ze,he=!0,d&&q.restart(!0),(Dt||St)&&Re(Dt,St)}},Ut=function(ut){ne.event=ut,Q(ne)},Qt=function(ut){ne.event=ut,ee(ne)},Nt=function(ut){return xt(ut)||fm(ut,u)&&ce(ne)};q=ne._dc=ui.delayedCall(p||.25,Et).pause(),ne.deltaX=ne.deltaY=0,ne._vx=GT(0,50,!0),ne._vy=GT(0,50,!0),ne.scrollX=k,ne.scrollY=fe,ne.isDragging=ne.isGesturing=ne.isPressed=!1,aG(this),ne.enable=function(gt){return ne.isEnabled||(zi(st?Fe:a,"scroll",HT),o.indexOf("scroll")>=0&&zi(st?Fe:a,"scroll",Ve,X,Ae),o.indexOf("wheel")>=0&&zi(a,"wheel",mt,X,Ae),(o.indexOf("touch")>=0&&sG||o.indexOf("pointer")>=0)&&(zi(a,Fo[0],Z,X,Ae),zi(Fe,Fo[2],Ie),zi(Fe,Fo[3],Ie),Ee&&zi(a,"click",at,!0,!0),ce&&zi(a,"click",Nt),Y&&zi(Fe,"gesturestart",oe),O&&zi(Fe,"gestureend",Te),Q&&zi(a,Ru+"enter",Ut),ee&&zi(a,Ru+"leave",Qt),K&&zi(a,Ru+"move",bt)),ne.isEnabled=!0,gt&&gt.type&&Z(gt),me&&me(ne)),ne},ne.disable=function(){ne.isEnabled&&(sh.filter(function(gt){return gt!==ne&&Jm(gt.target)}).length||Ui(st?Fe:a,"scroll",HT),ne.isPressed&&(ne._vx.reset(),ne._vy.reset(),Ui(F?a:Fe,Fo[1],Ye,!0)),Ui(st?Fe:a,"scroll",Ve,Ae),Ui(a,"wheel",mt,Ae),Ui(a,Fo[0],Z,Ae),Ui(Fe,Fo[2],Ie),Ui(Fe,Fo[3],Ie),Ui(a,"click",at,!0),Ui(a,"click",Nt),Ui(Fe,"gesturestart",oe),Ui(Fe,"gestureend",Te),Ui(a,Ru+"enter",Ut),Ui(a,Ru+"leave",Qt),Ui(a,Ru+"move",bt),ne.isEnabled=ne.isPressed=ne.isDragging=!1,Oe&&Oe(ne))},ne.kill=ne.revert=function(){ne.disable();var gt=sh.indexOf(ne);gt>=0&&sh.splice(gt,1),pl===ne&&(pl=0)},sh.push(ne),F&&Jm(a)&&(pl=ne),ne.enable(y)},mte(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();wr.version="3.12.5";wr.create=function(n){return new wr(n)};wr.register=fG;wr.getAll=function(){return sh.slice()};wr.getById=function(n){return sh.filter(function(e){return e.vars.id===n})[0]};lG()&&ui.registerPlugin(wr);/*!
 * ScrollTrigger 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var pt,Fd,ln,nr,Xo,Xn,dG,Dx,Xg,Ym,Em,Xv,Mi,QS,VT,Xi,iN,sN,Ud,hG,vw,pG,Vi,WT,mG,gG,ql,XT,HR,Eh,GR,Lx,jT,yw,jv=1,Ti=Date.now,xw=Ti(),Eo=0,wm=0,oN=function(e,t,r){var i=Bs(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return r["_"+t+"Clamp"]=i,i?e.substr(6,e.length-7):e},aN=function(e,t){return t&&(!Bs(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},_te=function n(){return wm&&requestAnimationFrame(n)},lN=function(){return QS=1},cN=function(){return QS=0},ma=function(e){return e},Mm=function(e){return Math.round(e*1e5)/1e5||0},_G=function(){return typeof window<"u"},vG=function(){return pt||_G()&&(pt=window.gsap)&&pt.registerPlugin&&pt},Rf=function(e){return!!~dG.indexOf(e)},yG=function(e){return(e==="Height"?GR:ln["inner"+e])||Xo["client"+e]||Xn["client"+e]},xG=function(e){return Tc(e,"getBoundingClientRect")||(Rf(e)?function(){return Hy.width=ln.innerWidth,Hy.height=GR,Hy}:function(){return ul(e)})},vte=function(e,t,r){var i=r.d,s=r.d2,o=r.a;return(o=Tc(e,"getBoundingClientRect"))?function(){return o()[i]}:function(){return(t?yG(s):e["client"+s])||0}},yte=function(e,t){return!t||~Da.indexOf(e)?xG(e):function(){return Hy}},Ea=function(e,t){var r=t.s,i=t.d2,s=t.d,o=t.a;return Math.max(0,(r="scroll"+i)&&(o=Tc(e,r))?o()-xG(e)()[s]:Rf(e)?(Xo[r]||Xn[r])-yG(i):e[r]-e["offset"+i])},Jv=function(e,t){for(var r=0;r<Ud.length;r+=3)(!t||~t.indexOf(Ud[r+1]))&&e(Ud[r],Ud[r+1],Ud[r+2])},Bs=function(e){return typeof e=="string"},qi=function(e){return typeof e=="function"},Tm=function(e){return typeof e=="number"},Iu=function(e){return typeof e=="object"},dm=function(e,t,r){return e&&e.progress(t?0:1)&&r&&e.pause()},Sw=function(e,t){if(e.enabled){var r=e._ctx?e._ctx.add(function(){return t(e)}):t(e);r&&r.totalTime&&(e.callbackAnimation=r)}},Dd=Math.abs,SG="left",AG="top",VR="right",WR="bottom",sf="width",of="height",Km="Right",qm="Left",$m="Top",Qm="Bottom",Rr="padding",po="margin",Yh="Width",XR="Height",Or="px",mo=function(e){return ln.getComputedStyle(e)},xte=function(e){var t=mo(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},uN=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},ul=function(e,t){var r=t&&mo(e)[VT]!=="matrix(1, 0, 0, 1, 0, 0)"&&pt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return r&&r.progress(0).kill(),i},Nx=function(e,t){var r=t.d2;return e["offset"+r]||e["client"+r]||0},EG=function(e){var t=[],r=e.labels,i=e.duration(),s;for(s in r)t.push(r[s]/i);return t},Ste=function(e){return function(t){return pt.utils.snap(EG(e),t)}},jR=function(e){var t=pt.utils.snap(e),r=Array.isArray(e)&&e.slice(0).sort(function(i,s){return i-s});return r?function(i,s,o){o===void 0&&(o=.001);var a;if(!s)return t(i);if(s>0){for(i-=o,a=0;a<r.length;a++)if(r[a]>=i)return r[a];return r[a-1]}else for(a=r.length,i+=o;a--;)if(r[a]<=i)return r[a];return r[0]}:function(i,s,o){o===void 0&&(o=.001);var a=t(i);return!s||Math.abs(a-i)<o||a-i<0==s<0?a:t(s<0?i-e:i+e)}},Ate=function(e){return function(t,r){return jR(EG(e))(t,r.direction)}},Yv=function(e,t,r,i){return r.split(",").forEach(function(s){return e(t,s,i)})},$r=function(e,t,r,i,s){return e.addEventListener(t,r,{passive:!i,capture:!!s})},Kr=function(e,t,r,i){return e.removeEventListener(t,r,!!i)},Kv=function(e,t,r){r=r&&r.wheelHandler,r&&(e(t,"wheel",r),e(t,"touchmove",r))},fN={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},qv={toggleActions:"play",anticipatePin:0},Ox={top:0,left:0,center:.5,bottom:1,right:1},ky=function(e,t){if(Bs(e)){var r=e.indexOf("="),i=~r?+(e.charAt(r-1)+1)*parseFloat(e.substr(r+1)):0;~r&&(e.indexOf("%")>r&&(i*=t/100),e=e.substr(0,r-1)),e=i+(e in Ox?Ox[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},$v=function(e,t,r,i,s,o,a,l){var c=s.startColor,u=s.endColor,d=s.fontSize,p=s.indent,m=s.fontWeight,g=nr.createElement("div"),y=Rf(r)||Tc(r,"pinType")==="fixed",v=e.indexOf("scroller")!==-1,_=y?Xn:r,S=e.indexOf("start")!==-1,A=S?c:u,w="border-color:"+A+";font-size:"+d+";color:"+A+";font-weight:"+m+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((v||l)&&y?"fixed;":"absolute;"),(v||l||!y)&&(w+=(i===Fr?VR:WR)+":"+(o+parseFloat(p))+"px;"),a&&(w+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),g._isStart=S,g.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),g.style.cssText=w,g.innerText=t||t===0?e+"-"+t:e,_.children[0]?_.insertBefore(g,_.children[0]):_.appendChild(g),g._offset=g["offset"+i.op.d2],Fy(g,0,i,S),g},Fy=function(e,t,r,i){var s={display:"block"},o=r[i?"os2":"p2"],a=r[i?"p2":"os2"];e._isFlipped=i,s[r.a+"Percent"]=i?-100:0,s[r.a]=i?"1px":0,s["border"+o+Yh]=1,s["border"+a+Yh]=0,s[r.p]=t+"px",pt.set(e,s)},Zt=[],JT={},jg,dN=function(){return Ti()-Eo>34&&(jg||(jg=requestAnimationFrame(_l)))},Ld=function(){(!Vi||!Vi.isPressed||Vi.startX>Xn.clientWidth)&&(nn.cache++,Vi?jg||(jg=requestAnimationFrame(_l)):_l(),Eo||Pf("scrollStart"),Eo=Ti())},Aw=function(){gG=ln.innerWidth,mG=ln.innerHeight},Cm=function(){nn.cache++,!Mi&&!pG&&!nr.fullscreenElement&&!nr.webkitFullscreenElement&&(!WT||gG!==ln.innerWidth||Math.abs(ln.innerHeight-mG)>ln.innerHeight*.25)&&Dx.restart(!0)},If={},Ete=[],wG=function n(){return Kr(an,"scrollEnd",n)||Wu(!0)},Pf=function(e){return If[e]&&If[e].map(function(t){return t()})||Ete},Is=[],MG=function(e){for(var t=0;t<Is.length;t+=5)(!e||Is[t+4]&&Is[t+4].query===e)&&(Is[t].style.cssText=Is[t+1],Is[t].getBBox&&Is[t].setAttribute("transform",Is[t+2]||""),Is[t+3].uncache=1)},JR=function(e,t){var r;for(Xi=0;Xi<Zt.length;Xi++)r=Zt[Xi],r&&(!t||r._ctx===t)&&(e?r.kill(1):r.revert(!0,!0));Lx=!0,t&&MG(t),t||Pf("revert")},TG=function(e,t){nn.cache++,(t||!ji)&&nn.forEach(function(r){return qi(r)&&r.cacheID++&&(r.rec=0)}),Bs(e)&&(ln.history.scrollRestoration=HR=e)},ji,af=0,hN,wte=function(){if(hN!==af){var e=hN=af;requestAnimationFrame(function(){return e===af&&Wu(!0)})}},CG=function(){Xn.appendChild(Eh),GR=!Vi&&Eh.offsetHeight||ln.innerHeight,Xn.removeChild(Eh)},pN=function(e){return Xg(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Wu=function(e,t){if(Eo&&!e&&!Lx){$r(an,"scrollEnd",wG);return}CG(),ji=an.isRefreshing=!0,nn.forEach(function(i){return qi(i)&&++i.cacheID&&(i.rec=i())});var r=Pf("refreshInit");hG&&an.sort(),t||JR(),nn.forEach(function(i){qi(i)&&(i.smooth&&(i.target.style.scrollBehavior="auto"),i(0))}),Zt.slice(0).forEach(function(i){return i.refresh()}),Lx=!1,Zt.forEach(function(i){if(i._subPinOffset&&i.pin){var s=i.vars.horizontal?"offsetWidth":"offsetHeight",o=i.pin[s];i.revert(!0,1),i.adjustPinSpacing(i.pin[s]-o),i.refresh()}}),jT=1,pN(!0),Zt.forEach(function(i){var s=Ea(i.scroller,i._dir),o=i.vars.end==="max"||i._endClamp&&i.end>s,a=i._startClamp&&i.start>=s;(o||a)&&i.setPositions(a?s-1:i.start,o?Math.max(a?s:i.start+1,s):i.end,!0)}),pN(!1),jT=0,r.forEach(function(i){return i&&i.render&&i.render(-1)}),nn.forEach(function(i){qi(i)&&(i.smooth&&requestAnimationFrame(function(){return i.target.style.scrollBehavior="smooth"}),i.rec&&i(i.rec))}),TG(HR,1),Dx.pause(),af++,ji=2,_l(2),Zt.forEach(function(i){return qi(i.vars.onRefresh)&&i.vars.onRefresh(i)}),ji=an.isRefreshing=!1,Pf("refresh")},YT=0,Uy=1,Zm,_l=function(e){if(e===2||!ji&&!Lx){an.isUpdating=!0,Zm&&Zm.update(0);var t=Zt.length,r=Ti(),i=r-xw>=50,s=t&&Zt[0].scroll();if(Uy=YT>s?-1:1,ji||(YT=s),i&&(Eo&&!QS&&r-Eo>200&&(Eo=0,Pf("scrollEnd")),Em=xw,xw=r),Uy<0){for(Xi=t;Xi-- >0;)Zt[Xi]&&Zt[Xi].update(0,i);Uy=1}else for(Xi=0;Xi<t;Xi++)Zt[Xi]&&Zt[Xi].update(0,i);an.isUpdating=!1}jg=0},KT=[SG,AG,WR,VR,po+Qm,po+Km,po+$m,po+qm,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],zy=KT.concat([sf,of,"boxSizing","max"+Yh,"max"+XR,"position",po,Rr,Rr+$m,Rr+Km,Rr+Qm,Rr+qm]),Mte=function(e,t,r){wh(r);var i=e._gsap;if(i.spacerIsNative)wh(i.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},Ew=function(e,t,r,i){if(!e._gsap.swappedIn){for(var s=KT.length,o=t.style,a=e.style,l;s--;)l=KT[s],o[l]=r[l];o.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(o.display="inline-block"),a[WR]=a[VR]="auto",o.flexBasis=r.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[sf]=Nx(e,Ki)+Or,o[of]=Nx(e,Fr)+Or,o[Rr]=a[po]=a[AG]=a[SG]="0",wh(i),a[sf]=a["max"+Yh]=r[sf],a[of]=a["max"+XR]=r[of],a[Rr]=r[Rr],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},Tte=/([A-Z])/g,wh=function(e){if(e){var t=e.t.style,r=e.length,i=0,s,o;for((e.t._gsap||pt.core.getCache(e.t)).uncache=1;i<r;i+=2)o=e[i+1],s=e[i],o?t[s]=o:t[s]&&t.removeProperty(s.replace(Tte,"-$1").toLowerCase())}},Qv=function(e){for(var t=zy.length,r=e.style,i=[],s=0;s<t;s++)i.push(zy[s],r[zy[s]]);return i.t=e,i},Cte=function(e,t,r){for(var i=[],s=e.length,o=r?8:0,a;o<s;o+=2)a=e[o],i.push(a,a in t?t[a]:e[o+1]);return i.t=e.t,i},Hy={left:0,top:0},mN=function(e,t,r,i,s,o,a,l,c,u,d,p,m,g){qi(e)&&(e=e(l)),Bs(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?ky("0"+e.substr(3),r):0));var y=m?m.time():0,v,_,S;if(m&&m.seek(0),isNaN(e)||(e=+e),Tm(e))m&&(e=pt.utils.mapRange(m.scrollTrigger.start,m.scrollTrigger.end,0,p,e)),a&&Fy(a,r,i,!0);else{qi(t)&&(t=t(l));var A=(e||"0").split(" "),w,I,T,R;S=as(t,l)||Xn,w=ul(S)||{},(!w||!w.left&&!w.top)&&mo(S).display==="none"&&(R=S.style.display,S.style.display="block",w=ul(S),R?S.style.display=R:S.style.removeProperty("display")),I=ky(A[0],w[i.d]),T=ky(A[1]||"0",r),e=w[i.p]-c[i.p]-u+I+s-T,a&&Fy(a,T,i,r-T<20||a._isStart&&T>20),r-=r-T}if(g&&(l[g]=e||-.001,e<0&&(e=0)),o){var P=e+r,b=o._isStart;v="scroll"+i.d2,Fy(o,P,i,b&&P>20||!b&&(d?Math.max(Xn[v],Xo[v]):o.parentNode[v])<=P+1),d&&(c=ul(a),d&&(o.style[i.op.p]=c[i.op.p]-i.op.m-o._offset+Or))}return m&&S&&(v=ul(S),m.seek(p),_=ul(S),m._caScrollDist=v[i.p]-_[i.p],e=e/m._caScrollDist*p),m&&m.seek(y),m?e:Math.round(e)},bte=/(webkit|moz|length|cssText|inset)/i,gN=function(e,t,r,i){if(e.parentNode!==t){var s=e.style,o,a;if(t===Xn){e._stOrig=s.cssText,a=mo(e);for(o in a)!+o&&!bte.test(o)&&a[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=a[o]);s.top=r,s.left=i}else s.cssText=e._stOrig;pt.core.getCache(e).uncache=1,t.appendChild(e)}},bG=function(e,t,r){var i=t,s=i;return function(o){var a=Math.round(e());return a!==i&&a!==s&&Math.abs(a-i)>3&&Math.abs(a-s)>3&&(o=a,r&&r()),s=i,i=o,o}},Zv=function(e,t,r){var i={};i[t.p]="+="+r,pt.set(e,i)},_N=function(e,t){var r=Uc(e,t),i="_scroll"+t.p2,s=function o(a,l,c,u,d){var p=o.tween,m=l.onComplete,g={};c=c||r();var y=bG(r,c,function(){p.kill(),o.tween=0});return d=u&&d||0,u=u||a-c,p&&p.kill(),l[i]=a,l.inherit=!1,l.modifiers=g,g[i]=function(){return y(c+u*p.ratio+d*p.ratio*p.ratio)},l.onUpdate=function(){nn.cache++,o.tween&&_l()},l.onComplete=function(){o.tween=0,m&&m.call(p)},p=o.tween=pt.to(e,l),p};return e[i]=r,r.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},$r(e,"wheel",r.wheelHandler),an.isTouch&&$r(e,"touchmove",r.wheelHandler),s},an=function(){function n(t,r){Fd||n.register(pt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),XT(this),this.init(t,r)}var e=n.prototype;return e.init=function(r,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!wm){this.update=this.refresh=this.kill=ma;return}r=uN(Bs(r)||Tm(r)||r.nodeType?{trigger:r}:r,qv);var s=r,o=s.onUpdate,a=s.toggleClass,l=s.id,c=s.onToggle,u=s.onRefresh,d=s.scrub,p=s.trigger,m=s.pin,g=s.pinSpacing,y=s.invalidateOnRefresh,v=s.anticipatePin,_=s.onScrubComplete,S=s.onSnapComplete,A=s.once,w=s.snap,I=s.pinReparent,T=s.pinSpacer,R=s.containerAnimation,P=s.fastScrollEnd,b=s.preventOverlaps,M=r.horizontal||r.containerAnimation&&r.horizontal!==!1?Ki:Fr,L=!d&&d!==0,H=as(r.scroller||ln),j=pt.core.getCache(H),Q=Rf(H),ee=("pinType"in r?r.pinType:Tc(H,"pinType")||Q&&"fixed")==="fixed",K=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],te=L&&r.toggleActions.split(" "),F="markers"in r?r.markers:qv.markers,Y=Q?0:parseFloat(mo(H)["border"+M.p2+Yh])||0,O=this,ae=r.onRefreshInit&&function(){return r.onRefreshInit(O)},me=vte(H,Q,M),Oe=yte(H,Q),ce=0,Se=0,Ae=0,Ee=Uc(H,M),Qe,rt,tt,q,we,he,Ce,Le,ke,ne,We,je,X,k,fe,ge,be,Be,st,Fe,Je,yt,Ue,at,xt,Et,Ge,re,Re,Ye,Z,Ie,oe,Te,Ve,mt,bt,Ut,Qt;if(O._startClamp=O._endClamp=!1,O._dir=M,v*=45,O.scroller=H,O.scroll=R?R.time.bind(R):Ee,q=Ee(),O.vars=r,i=i||r.animation,"refreshPriority"in r&&(hG=1,r.refreshPriority===-9999&&(Zm=O)),j.tweenScroll=j.tweenScroll||{top:_N(H,Fr),left:_N(H,Ki)},O.tweenTo=Qe=j.tweenScroll[M.p],O.scrubDuration=function(Ze){oe=Tm(Ze)&&Ze,oe?Ie?Ie.duration(Ze):Ie=pt.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:oe,paused:!0,onComplete:function(){return _&&_(O)}}):(Ie&&Ie.progress(1).kill(),Ie=0)},i&&(i.vars.lazy=!1,i._initted&&!O.isReverted||i.vars.immediateRender!==!1&&r.immediateRender!==!1&&i.duration()&&i.render(0,!0,!0),O.animation=i.pause(),i.scrollTrigger=O,O.scrubDuration(d),Ye=0,l||(l=i.vars.id)),w&&((!Iu(w)||w.push)&&(w={snapTo:w}),"scrollBehavior"in Xn.style&&pt.set(Q?[Xn,Xo]:H,{scrollBehavior:"auto"}),nn.forEach(function(Ze){return qi(Ze)&&Ze.target===(Q?nr.scrollingElement||Xo:H)&&(Ze.smooth=!1)}),tt=qi(w.snapTo)?w.snapTo:w.snapTo==="labels"?Ste(i):w.snapTo==="labelsDirectional"?Ate(i):w.directional!==!1?function(Ze,Dt){return jR(w.snapTo)(Ze,Ti()-Se<500?0:Dt.direction)}:pt.utils.snap(w.snapTo),Te=w.duration||{min:.1,max:2},Te=Iu(Te)?Ym(Te.min,Te.max):Ym(Te,Te),Ve=pt.delayedCall(w.delay||oe/2||.1,function(){var Ze=Ee(),Dt=Ti()-Se<500,St=Qe.tween;if((Dt||Math.abs(O.getVelocity())<10)&&!St&&!QS&&ce!==Ze){var Rt=(Ze-he)/k,bn=i&&!L?i.totalProgress():Rt,Pt=Dt?0:(bn-Z)/(Ti()-Em)*1e3||0,At=pt.utils.clamp(-Rt,1-Rt,Dd(Pt/2)*Pt/.185),Kn=Rt+(w.inertia===!1?0:At),Bn,N,z=w,B=z.onStart,U=z.onInterrupt,V=z.onComplete;if(Bn=tt(Kn,O),Tm(Bn)||(Bn=Kn),N=Math.round(he+Bn*k),Ze<=Ce&&Ze>=he&&N!==Ze){if(St&&!St._initted&&St.data<=Dd(N-Ze))return;w.inertia===!1&&(At=Bn-Rt),Qe(N,{duration:Te(Dd(Math.max(Dd(Kn-bn),Dd(Bn-bn))*.185/Pt/.05||0)),ease:w.ease||"power3",data:Dd(N-Ze),onInterrupt:function(){return Ve.restart(!0)&&U&&U(O)},onComplete:function(){O.update(),ce=Ee(),i&&(Ie?Ie.resetTo("totalProgress",Bn,i._tTime/i._tDur):i.progress(Bn)),Ye=Z=i&&!L?i.totalProgress():O.progress,S&&S(O),V&&V(O)}},Ze,At*k,N-Ze-At*k),B&&B(O,Qe.tween)}}else O.isActive&&ce!==Ze&&Ve.restart(!0)}).pause()),l&&(JT[l]=O),p=O.trigger=as(p||m!==!0&&m),Qt=p&&p._gsap&&p._gsap.stRevert,Qt&&(Qt=Qt(O)),m=m===!0?p:as(m),Bs(a)&&(a={targets:p,className:a}),m&&(g===!1||g===po||(g=!g&&m.parentNode&&m.parentNode.style&&mo(m.parentNode).display==="flex"?!1:Rr),O.pin=m,rt=pt.core.getCache(m),rt.spacer?fe=rt.pinState:(T&&(T=as(T),T&&!T.nodeType&&(T=T.current||T.nativeElement),rt.spacerIsNative=!!T,T&&(rt.spacerState=Qv(T))),rt.spacer=Be=T||nr.createElement("div"),Be.classList.add("pin-spacer"),l&&Be.classList.add("pin-spacer-"+l),rt.pinState=fe=Qv(m)),r.force3D!==!1&&pt.set(m,{force3D:!0}),O.spacer=Be=rt.spacer,Re=mo(m),at=Re[g+M.os2],Fe=pt.getProperty(m),Je=pt.quickSetter(m,M.a,Or),Ew(m,Be,Re),be=Qv(m)),F){je=Iu(F)?uN(F,fN):fN,ne=$v("scroller-start",l,H,M,je,0),We=$v("scroller-end",l,H,M,je,0,ne),st=ne["offset"+M.op.d2];var Nt=as(Tc(H,"content")||H);Le=this.markerStart=$v("start",l,Nt,M,je,st,0,R),ke=this.markerEnd=$v("end",l,Nt,M,je,st,0,R),R&&(Ut=pt.quickSetter([Le,ke],M.a,Or)),!ee&&!(Da.length&&Tc(H,"fixedMarkers")===!0)&&(xte(Q?Xn:H),pt.set([ne,We],{force3D:!0}),Et=pt.quickSetter(ne,M.a,Or),re=pt.quickSetter(We,M.a,Or))}if(R){var gt=R.vars.onUpdate,ut=R.vars.onUpdateParams;R.eventCallback("onUpdate",function(){O.update(0,0,1),gt&&gt.apply(R,ut||[])})}if(O.previous=function(){return Zt[Zt.indexOf(O)-1]},O.next=function(){return Zt[Zt.indexOf(O)+1]},O.revert=function(Ze,Dt){if(!Dt)return O.kill(!0);var St=Ze!==!1||!O.enabled,Rt=Mi;St!==O.isReverted&&(St&&(mt=Math.max(Ee(),O.scroll.rec||0),Ae=O.progress,bt=i&&i.progress()),Le&&[Le,ke,ne,We].forEach(function(bn){return bn.style.display=St?"none":"block"}),St&&(Mi=O,O.update(St)),m&&(!I||!O.isActive)&&(St?Mte(m,Be,fe):Ew(m,Be,mo(m),xt)),St||O.update(St),Mi=Rt,O.isReverted=St)},O.refresh=function(Ze,Dt,St,Rt){if(!((Mi||!O.enabled)&&!Dt)){if(m&&Ze&&Eo){$r(n,"scrollEnd",wG);return}!ji&&ae&&ae(O),Mi=O,Qe.tween&&!St&&(Qe.tween.kill(),Qe.tween=0),Ie&&Ie.pause(),y&&i&&i.revert({kill:!1}).invalidate(),O.isReverted||O.revert(!0,!0),O._subPinOffset=!1;var bn=me(),Pt=Oe(),At=R?R.duration():Ea(H,M),Kn=k<=.01,Bn=0,N=Rt||0,z=Iu(St)?St.end:r.end,B=r.endTrigger||p,U=Iu(St)?St.start:r.start||(r.start===0||!p?0:m?"0 0":"0 100%"),V=O.pinnedContainer=r.pinnedContainer&&as(r.pinnedContainer,O),W=p&&Math.max(0,Zt.indexOf(O))||0,J=W,le,pe,_e,xe,ve,Xe,Ne,qe,ft,lt,Mt,ct,ze;for(F&&Iu(St)&&(ct=pt.getProperty(ne,M.p),ze=pt.getProperty(We,M.p));J--;)Xe=Zt[J],Xe.end||Xe.refresh(0,1)||(Mi=O),Ne=Xe.pin,Ne&&(Ne===p||Ne===m||Ne===V)&&!Xe.isReverted&&(lt||(lt=[]),lt.unshift(Xe),Xe.revert(!0,!0)),Xe!==Zt[J]&&(W--,J--);for(qi(U)&&(U=U(O)),U=oN(U,"start",O),he=mN(U,p,bn,M,Ee(),Le,ne,O,Pt,Y,ee,At,R,O._startClamp&&"_startClamp")||(m?-.001:0),qi(z)&&(z=z(O)),Bs(z)&&!z.indexOf("+=")&&(~z.indexOf(" ")?z=(Bs(U)?U.split(" ")[0]:"")+z:(Bn=ky(z.substr(2),bn),z=Bs(U)?U:(R?pt.utils.mapRange(0,R.duration(),R.scrollTrigger.start,R.scrollTrigger.end,he):he)+Bn,B=p)),z=oN(z,"end",O),Ce=Math.max(he,mN(z||(B?"100% 0":At),B,bn,M,Ee()+Bn,ke,We,O,Pt,Y,ee,At,R,O._endClamp&&"_endClamp"))||-.001,Bn=0,J=W;J--;)Xe=Zt[J],Ne=Xe.pin,Ne&&Xe.start-Xe._pinPush<=he&&!R&&Xe.end>0&&(le=Xe.end-(O._startClamp?Math.max(0,Xe.start):Xe.start),(Ne===p&&Xe.start-Xe._pinPush<he||Ne===V)&&isNaN(U)&&(Bn+=le*(1-Xe.progress)),Ne===m&&(N+=le));if(he+=Bn,Ce+=Bn,O._startClamp&&(O._startClamp+=Bn),O._endClamp&&!ji&&(O._endClamp=Ce||-.001,Ce=Math.min(Ce,Ea(H,M))),k=Ce-he||(he-=.01)&&.001,Kn&&(Ae=pt.utils.clamp(0,1,pt.utils.normalize(he,Ce,mt))),O._pinPush=N,Le&&Bn&&(le={},le[M.a]="+="+Bn,V&&(le[M.p]="-="+Ee()),pt.set([Le,ke],le)),m&&!(jT&&O.end>=Ea(H,M)))le=mo(m),xe=M===Fr,_e=Ee(),yt=parseFloat(Fe(M.a))+N,!At&&Ce>1&&(Mt=(Q?nr.scrollingElement||Xo:H).style,Mt={style:Mt,value:Mt["overflow"+M.a.toUpperCase()]},Q&&mo(Xn)["overflow"+M.a.toUpperCase()]!=="scroll"&&(Mt.style["overflow"+M.a.toUpperCase()]="scroll")),Ew(m,Be,le),be=Qv(m),pe=ul(m,!0),qe=ee&&Uc(H,xe?Ki:Fr)(),g?(xt=[g+M.os2,k+N+Or],xt.t=Be,J=g===Rr?Nx(m,M)+k+N:0,J&&(xt.push(M.d,J+Or),Be.style.flexBasis!=="auto"&&(Be.style.flexBasis=J+Or)),wh(xt),V&&Zt.forEach(function(_t){_t.pin===V&&_t.vars.pinSpacing!==!1&&(_t._subPinOffset=!0)}),ee&&Ee(mt)):(J=Nx(m,M),J&&Be.style.flexBasis!=="auto"&&(Be.style.flexBasis=J+Or)),ee&&(ve={top:pe.top+(xe?_e-he:qe)+Or,left:pe.left+(xe?qe:_e-he)+Or,boxSizing:"border-box",position:"fixed"},ve[sf]=ve["max"+Yh]=Math.ceil(pe.width)+Or,ve[of]=ve["max"+XR]=Math.ceil(pe.height)+Or,ve[po]=ve[po+$m]=ve[po+Km]=ve[po+Qm]=ve[po+qm]="0",ve[Rr]=le[Rr],ve[Rr+$m]=le[Rr+$m],ve[Rr+Km]=le[Rr+Km],ve[Rr+Qm]=le[Rr+Qm],ve[Rr+qm]=le[Rr+qm],ge=Cte(fe,ve,I),ji&&Ee(0)),i?(ft=i._initted,vw(1),i.render(i.duration(),!0,!0),Ue=Fe(M.a)-yt+k+N,Ge=Math.abs(k-Ue)>1,ee&&Ge&&ge.splice(ge.length-2,2),i.render(0,!0,!0),ft||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),vw(0)):Ue=k,Mt&&(Mt.value?Mt.style["overflow"+M.a.toUpperCase()]=Mt.value:Mt.style.removeProperty("overflow-"+M.a));else if(p&&Ee()&&!R)for(pe=p.parentNode;pe&&pe!==Xn;)pe._pinOffset&&(he-=pe._pinOffset,Ce-=pe._pinOffset),pe=pe.parentNode;lt&&lt.forEach(function(_t){return _t.revert(!1,!0)}),O.start=he,O.end=Ce,q=we=ji?mt:Ee(),!R&&!ji&&(q<mt&&Ee(mt),O.scroll.rec=0),O.revert(!1,!0),Se=Ti(),Ve&&(ce=-1,Ve.restart(!0)),Mi=0,i&&L&&(i._initted||bt)&&i.progress()!==bt&&i.progress(bt||0,!0).render(i.time(),!0,!0),(Kn||Ae!==O.progress||R||y)&&(i&&!L&&i.totalProgress(R&&he<-.001&&!Ae?pt.utils.normalize(he,Ce,0):Ae,!0),O.progress=Kn||(q-he)/k===Ae?0:Ae),m&&g&&(Be._pinOffset=Math.round(O.progress*Ue)),Ie&&Ie.invalidate(),isNaN(ct)||(ct-=pt.getProperty(ne,M.p),ze-=pt.getProperty(We,M.p),Zv(ne,M,ct),Zv(Le,M,ct-(Rt||0)),Zv(We,M,ze),Zv(ke,M,ze-(Rt||0))),Kn&&!ji&&O.update(),u&&!ji&&!X&&(X=!0,u(O),X=!1)}},O.getVelocity=function(){return(Ee()-we)/(Ti()-Em)*1e3||0},O.endAnimation=function(){dm(O.callbackAnimation),i&&(Ie?Ie.progress(1):i.paused()?L||dm(i,O.direction<0,1):dm(i,i.reversed()))},O.labelToScroll=function(Ze){return i&&i.labels&&(he||O.refresh()||he)+i.labels[Ze]/i.duration()*k||0},O.getTrailing=function(Ze){var Dt=Zt.indexOf(O),St=O.direction>0?Zt.slice(0,Dt).reverse():Zt.slice(Dt+1);return(Bs(Ze)?St.filter(function(Rt){return Rt.vars.preventOverlaps===Ze}):St).filter(function(Rt){return O.direction>0?Rt.end<=he:Rt.start>=Ce})},O.update=function(Ze,Dt,St){if(!(R&&!St&&!Ze)){var Rt=ji===!0?mt:O.scroll(),bn=Ze?0:(Rt-he)/k,Pt=bn<0?0:bn>1?1:bn||0,At=O.progress,Kn,Bn,N,z,B,U,V,W;if(Dt&&(we=q,q=R?Ee():Rt,w&&(Z=Ye,Ye=i&&!L?i.totalProgress():Pt)),v&&m&&!Mi&&!jv&&Eo&&(!Pt&&he<Rt+(Rt-we)/(Ti()-Em)*v?Pt=1e-4:Pt===1&&Ce>Rt+(Rt-we)/(Ti()-Em)*v&&(Pt=.9999)),Pt!==At&&O.enabled){if(Kn=O.isActive=!!Pt&&Pt<1,Bn=!!At&&At<1,U=Kn!==Bn,B=U||!!Pt!=!!At,O.direction=Pt>At?1:-1,O.progress=Pt,B&&!Mi&&(N=Pt&&!At?0:Pt===1?1:At===1?2:3,L&&(z=!U&&te[N+1]!=="none"&&te[N+1]||te[N],W=i&&(z==="complete"||z==="reset"||z in i))),b&&(U||W)&&(W||d||!i)&&(qi(b)?b(O):O.getTrailing(b).forEach(function(_e){return _e.endAnimation()})),L||(Ie&&!Mi&&!jv?(Ie._dp._time-Ie._start!==Ie._time&&Ie.render(Ie._dp._time-Ie._start),Ie.resetTo?Ie.resetTo("totalProgress",Pt,i._tTime/i._tDur):(Ie.vars.totalProgress=Pt,Ie.invalidate().restart())):i&&i.totalProgress(Pt,!!(Mi&&(Se||Ze)))),m){if(Ze&&g&&(Be.style[g+M.os2]=at),!ee)Je(Mm(yt+Ue*Pt));else if(B){if(V=!Ze&&Pt>At&&Ce+1>Rt&&Rt+1>=Ea(H,M),I)if(!Ze&&(Kn||V)){var J=ul(m,!0),le=Rt-he;gN(m,Xn,J.top+(M===Fr?le:0)+Or,J.left+(M===Fr?0:le)+Or)}else gN(m,Be);wh(Kn||V?ge:be),Ge&&Pt<1&&Kn||Je(yt+(Pt===1&&!V?Ue:0))}}w&&!Qe.tween&&!Mi&&!jv&&Ve.restart(!0),a&&(U||A&&Pt&&(Pt<1||!yw))&&Xg(a.targets).forEach(function(_e){return _e.classList[Kn||A?"add":"remove"](a.className)}),o&&!L&&!Ze&&o(O),B&&!Mi?(L&&(W&&(z==="complete"?i.pause().totalProgress(1):z==="reset"?i.restart(!0).pause():z==="restart"?i.restart(!0):i[z]()),o&&o(O)),(U||!yw)&&(c&&U&&Sw(O,c),K[N]&&Sw(O,K[N]),A&&(Pt===1?O.kill(!1,1):K[N]=0),U||(N=Pt===1?1:3,K[N]&&Sw(O,K[N]))),P&&!Kn&&Math.abs(O.getVelocity())>(Tm(P)?P:2500)&&(dm(O.callbackAnimation),Ie?Ie.progress(1):dm(i,z==="reverse"?1:!Pt,1))):L&&o&&!Mi&&o(O)}if(re){var pe=R?Rt/R.duration()*(R._caScrollDist||0):Rt;Et(pe+(ne._isFlipped?1:0)),re(pe)}Ut&&Ut(-Rt/R.duration()*(R._caScrollDist||0))}},O.enable=function(Ze,Dt){O.enabled||(O.enabled=!0,$r(H,"resize",Cm),Q||$r(H,"scroll",Ld),ae&&$r(n,"refreshInit",ae),Ze!==!1&&(O.progress=Ae=0,q=we=ce=Ee()),Dt!==!1&&O.refresh())},O.getTween=function(Ze){return Ze&&Qe?Qe.tween:Ie},O.setPositions=function(Ze,Dt,St,Rt){if(R){var bn=R.scrollTrigger,Pt=R.duration(),At=bn.end-bn.start;Ze=bn.start+At*Ze/Pt,Dt=bn.start+At*Dt/Pt}O.refresh(!1,!1,{start:aN(Ze,St&&!!O._startClamp),end:aN(Dt,St&&!!O._endClamp)},Rt),O.update()},O.adjustPinSpacing=function(Ze){if(xt&&Ze){var Dt=xt.indexOf(M.d)+1;xt[Dt]=parseFloat(xt[Dt])+Ze+Or,xt[1]=parseFloat(xt[1])+Ze+Or,wh(xt)}},O.disable=function(Ze,Dt){if(O.enabled&&(Ze!==!1&&O.revert(!0,!0),O.enabled=O.isActive=!1,Dt||Ie&&Ie.pause(),mt=0,rt&&(rt.uncache=1),ae&&Kr(n,"refreshInit",ae),Ve&&(Ve.pause(),Qe.tween&&Qe.tween.kill()&&(Qe.tween=0)),!Q)){for(var St=Zt.length;St--;)if(Zt[St].scroller===H&&Zt[St]!==O)return;Kr(H,"resize",Cm),Q||Kr(H,"scroll",Ld)}},O.kill=function(Ze,Dt){O.disable(Ze,Dt),Ie&&!Dt&&Ie.kill(),l&&delete JT[l];var St=Zt.indexOf(O);St>=0&&Zt.splice(St,1),St===Xi&&Uy>0&&Xi--,St=0,Zt.forEach(function(Rt){return Rt.scroller===O.scroller&&(St=1)}),St||ji||(O.scroll.rec=0),i&&(i.scrollTrigger=null,Ze&&i.revert({kill:!1}),Dt||i.kill()),Le&&[Le,ke,ne,We].forEach(function(Rt){return Rt.parentNode&&Rt.parentNode.removeChild(Rt)}),Zm===O&&(Zm=0),m&&(rt&&(rt.uncache=1),St=0,Zt.forEach(function(Rt){return Rt.pin===m&&St++}),St||(rt.spacer=0)),r.onKill&&r.onKill(O)},Zt.push(O),O.enable(!1,!1),Qt&&Qt(O),i&&i.add&&!k){var zt=O.update;O.update=function(){O.update=zt,he||Ce||O.refresh()},pt.delayedCall(.01,O.update),k=.01,he=Ce=0}else O.refresh();m&&wte()},n.register=function(r){return Fd||(pt=r||vG(),_G()&&window.document&&n.enable(),Fd=wm),Fd},n.defaults=function(r){if(r)for(var i in r)qv[i]=r[i];return qv},n.disable=function(r,i){wm=0,Zt.forEach(function(o){return o[i?"kill":"disable"](r)}),Kr(ln,"wheel",Ld),Kr(nr,"scroll",Ld),clearInterval(Xv),Kr(nr,"touchcancel",ma),Kr(Xn,"touchstart",ma),Yv(Kr,nr,"pointerdown,touchstart,mousedown",lN),Yv(Kr,nr,"pointerup,touchend,mouseup",cN),Dx.kill(),Jv(Kr);for(var s=0;s<nn.length;s+=3)Kv(Kr,nn[s],nn[s+1]),Kv(Kr,nn[s],nn[s+2])},n.enable=function(){if(ln=window,nr=document,Xo=nr.documentElement,Xn=nr.body,pt&&(Xg=pt.utils.toArray,Ym=pt.utils.clamp,XT=pt.core.context||ma,vw=pt.core.suppressOverwrites||ma,HR=ln.history.scrollRestoration||"auto",YT=ln.pageYOffset,pt.core.globals("ScrollTrigger",n),Xn)){wm=1,Eh=document.createElement("div"),Eh.style.height="100vh",Eh.style.position="absolute",CG(),_te(),wr.register(pt),n.isTouch=wr.isTouch,ql=wr.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),WT=wr.isTouch===1,$r(ln,"wheel",Ld),dG=[ln,nr,Xo,Xn],pt.matchMedia?(n.matchMedia=function(l){var c=pt.matchMedia(),u;for(u in l)c.add(u,l[u]);return c},pt.addEventListener("matchMediaInit",function(){return JR()}),pt.addEventListener("matchMediaRevert",function(){return MG()}),pt.addEventListener("matchMedia",function(){Wu(0,1),Pf("matchMedia")}),pt.matchMedia("(orientation: portrait)",function(){return Aw(),Aw})):console.warn("Requires GSAP 3.11.0 or later"),Aw(),$r(nr,"scroll",Ld);var r=Xn.style,i=r.borderTopStyle,s=pt.core.Animation.prototype,o,a;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",o=ul(Xn),Fr.m=Math.round(o.top+Fr.sc())||0,Ki.m=Math.round(o.left+Ki.sc())||0,i?r.borderTopStyle=i:r.removeProperty("border-top-style"),Xv=setInterval(dN,250),pt.delayedCall(.5,function(){return jv=0}),$r(nr,"touchcancel",ma),$r(Xn,"touchstart",ma),Yv($r,nr,"pointerdown,touchstart,mousedown",lN),Yv($r,nr,"pointerup,touchend,mouseup",cN),VT=pt.utils.checkPrefix("transform"),zy.push(VT),Fd=Ti(),Dx=pt.delayedCall(.2,Wu).pause(),Ud=[nr,"visibilitychange",function(){var l=ln.innerWidth,c=ln.innerHeight;nr.hidden?(iN=l,sN=c):(iN!==l||sN!==c)&&Cm()},nr,"DOMContentLoaded",Wu,ln,"load",Wu,ln,"resize",Cm],Jv($r),Zt.forEach(function(l){return l.enable(0,1)}),a=0;a<nn.length;a+=3)Kv(Kr,nn[a],nn[a+1]),Kv(Kr,nn[a],nn[a+2])}},n.config=function(r){"limitCallbacks"in r&&(yw=!!r.limitCallbacks);var i=r.syncInterval;i&&clearInterval(Xv)||(Xv=i)&&setInterval(dN,i),"ignoreMobileResize"in r&&(WT=n.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&(Jv(Kr)||Jv($r,r.autoRefreshEvents||"none"),pG=(r.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(r,i){var s=as(r),o=nn.indexOf(s),a=Rf(s);~o&&nn.splice(o,a?6:2),i&&(a?Da.unshift(ln,i,Xn,i,Xo,i):Da.unshift(s,i))},n.clearMatchMedia=function(r){Zt.forEach(function(i){return i._ctx&&i._ctx.query===r&&i._ctx.kill(!0,!0)})},n.isInViewport=function(r,i,s){var o=(Bs(r)?as(r):r).getBoundingClientRect(),a=o[s?sf:of]*i||0;return s?o.right-a>0&&o.left+a<ln.innerWidth:o.bottom-a>0&&o.top+a<ln.innerHeight},n.positionInViewport=function(r,i,s){Bs(r)&&(r=as(r));var o=r.getBoundingClientRect(),a=o[s?sf:of],l=i==null?a/2:i in Ox?Ox[i]*a:~i.indexOf("%")?parseFloat(i)*a/100:parseFloat(i)||0;return s?(o.left+l)/ln.innerWidth:(o.top+l)/ln.innerHeight},n.killAll=function(r){if(Zt.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),r!==!0){var i=If.killAll||[];If={},i.forEach(function(s){return s()})}},n}();an.version="3.12.5";an.saveStyles=function(n){return n?Xg(n).forEach(function(e){if(e&&e.style){var t=Is.indexOf(e);t>=0&&Is.splice(t,5),Is.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),pt.core.getCache(e),XT())}}):Is};an.revert=function(n,e){return JR(!n,e)};an.create=function(n,e){return new an(n,e)};an.refresh=function(n){return n?Cm():(Fd||an.register())&&Wu(!0)};an.update=function(n){return++nn.cache&&_l(n===!0?2:0)};an.clearScrollMemory=TG;an.maxScroll=function(n,e){return Ea(n,e?Ki:Fr)};an.getScrollFunc=function(n,e){return Uc(as(n),e?Ki:Fr)};an.getById=function(n){return JT[n]};an.getAll=function(){return Zt.filter(function(n){return n.vars.id!=="ScrollSmoother"})};an.isScrolling=function(){return!!Eo};an.snapDirectional=jR;an.addEventListener=function(n,e){var t=If[n]||(If[n]=[]);~t.indexOf(e)||t.push(e)};an.removeEventListener=function(n,e){var t=If[n],r=t&&t.indexOf(e);r>=0&&t.splice(r,1)};an.batch=function(n,e){var t=[],r={},i=e.interval||.016,s=e.batchMax||1e9,o=function(c,u){var d=[],p=[],m=pt.delayedCall(i,function(){u(d,p),d=[],p=[]}).pause();return function(g){d.length||m.restart(!0),d.push(g.trigger),p.push(g),s<=d.length&&m.progress(1)}},a;for(a in e)r[a]=a.substr(0,2)==="on"&&qi(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return qi(s)&&(s=s(),$r(an,"refresh",function(){return s=e.batchMax()})),Xg(n).forEach(function(l){var c={};for(a in r)c[a]=r[a];c.trigger=l,t.push(an.create(c))}),t};var vN=function(e,t,r,i){return t>i?e(i):t<0&&e(0),r>i?(i-t)/(r-t):r<0?t/(t-r):1},ww=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(wr.isTouch?" pinch-zoom":""):"none",e===Xo&&n(Xn,t)},ey={auto:1,scroll:1},Rte=function(e){var t=e.event,r=e.target,i=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||pt.core.getCache(s),a=Ti(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==Xn&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(ey[(l=mo(s)).overflowY]||ey[l.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==r&&!Rf(s)&&(ey[(l=mo(s)).overflowY]||ey[l.overflowX]),o._isScrollT=a}(o._isScroll||i==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},RG=function(e,t,r,i){return wr.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:i=i&&Rte,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return r&&$r(nr,wr.eventTypes[0],xN,!1,!0)},onDisable:function(){return Kr(nr,wr.eventTypes[0],xN,!0)}})},Ite=/(input|label|select|textarea)/i,yN,xN=function(e){var t=Ite.test(e.target.tagName);(t||yN)&&(e._gsapAllow=!0,yN=t)},Pte=function(e){Iu(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,r=t.normalizeScrollX,i=t.momentum,s=t.allowNestedScroll,o=t.onRelease,a,l,c=as(e.target)||Xo,u=pt.core.globals().ScrollSmoother,d=u&&u.get(),p=ql&&(e.content&&as(e.content)||d&&e.content!==!1&&!d.smooth()&&d.content()),m=Uc(c,Fr),g=Uc(c,Ki),y=1,v=(wr.isTouch&&ln.visualViewport?ln.visualViewport.scale*ln.visualViewport.width:ln.outerWidth)/ln.innerWidth,_=0,S=qi(i)?function(){return i(a)}:function(){return i||2.8},A,w,I=RG(c,e.type,!0,s),T=function(){return w=!1},R=ma,P=ma,b=function(){l=Ea(c,Fr),P=Ym(ql?1:0,l),r&&(R=Ym(0,Ea(c,Ki))),A=af},M=function(){p._gsap.y=Mm(parseFloat(p._gsap.y)+m.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",m.offset=m.cacheID=0},L=function(){if(w){requestAnimationFrame(T);var F=Mm(a.deltaY/2),Y=P(m.v-F);if(p&&Y!==m.v+m.offset){m.offset=Y-m.v;var O=Mm((parseFloat(p&&p._gsap.y)||0)-m.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+O+", 0, 1)",p._gsap.y=O+"px",m.cacheID=nn.cache,_l()}return!0}m.offset&&M(),w=!0},H,j,Q,ee,K=function(){b(),H.isActive()&&H.vars.scrollY>l&&(m()>l?H.progress(1)&&m(l):H.resetTo("scrollY",l))};return p&&pt.set(p,{y:"+=0"}),e.ignoreCheck=function(te){return ql&&te.type==="touchmove"&&L()||y>1.05&&te.type!=="touchstart"||a.isGesturing||te.touches&&te.touches.length>1},e.onPress=function(){w=!1;var te=y;y=Mm((ln.visualViewport&&ln.visualViewport.scale||1)/v),H.pause(),te!==y&&ww(c,y>1.01?!0:r?!1:"x"),j=g(),Q=m(),b(),A=af},e.onRelease=e.onGestureStart=function(te,F){if(m.offset&&M(),!F)ee.restart(!0);else{nn.cache++;var Y=S(),O,ae;r&&(O=g(),ae=O+Y*.05*-te.velocityX/.227,Y*=vN(g,O,ae,Ea(c,Ki)),H.vars.scrollX=R(ae)),O=m(),ae=O+Y*.05*-te.velocityY/.227,Y*=vN(m,O,ae,Ea(c,Fr)),H.vars.scrollY=P(ae),H.invalidate().duration(Y).play(.01),(ql&&H.vars.scrollY>=l||O>=l-1)&&pt.to({},{onUpdate:K,duration:Y})}o&&o(te)},e.onWheel=function(){H._ts&&H.pause(),Ti()-_>1e3&&(A=0,_=Ti())},e.onChange=function(te,F,Y,O,ae){if(af!==A&&b(),F&&r&&g(R(O[2]===F?j+(te.startX-te.x):g()+F-O[1])),Y){m.offset&&M();var me=ae[2]===Y,Oe=me?Q+te.startY-te.y:m()+Y-ae[1],ce=P(Oe);me&&Oe!==ce&&(Q+=ce-Oe),m(ce)}(Y||F)&&_l()},e.onEnable=function(){ww(c,r?!1:"x"),an.addEventListener("refresh",K),$r(ln,"resize",K),m.smooth&&(m.target.style.scrollBehavior="auto",m.smooth=g.smooth=!1),I.enable()},e.onDisable=function(){ww(c,!0),Kr(ln,"resize",K),an.removeEventListener("refresh",K),I.kill()},e.lockAxis=e.lockAxis!==!1,a=new wr(e),a.iOS=ql,ql&&!m()&&m(1),ql&&pt.ticker.add(ma),ee=a._dc,H=pt.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:bG(m,m(),function(){return H.pause()})},onUpdate:_l,onComplete:ee.vars.onComplete}),a};an.sort=function(n){return Zt.sort(n||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})};an.observe=function(n){return new wr(n)};an.normalizeScroll=function(n){if(typeof n>"u")return Vi;if(n===!0&&Vi)return Vi.enable();if(n===!1){Vi&&Vi.kill(),Vi=n;return}var e=n instanceof wr?n:Pte(n);return Vi&&Vi.target===e.target&&Vi.kill(),Rf(e.target)&&(Vi=e),e};an.core={_getVelocityProp:GT,_inputObserver:RG,_scrollers:nn,_proxies:Da,bridge:{ss:function(){Eo||Pf("scrollStart"),Eo=Ti()},ref:function(){return Mi}}};vG()&&pt.registerPlugin(an);xr.registerPlugin(an);const Gy=(n,e,t)=>{xr.to(n,{...e,scrollTrigger:{trigger:n,toggleActions:"restart reverse restart reverse",start:"top 85%",...t}})},SN=(n,e,t,r,i,s)=>{n.to(e.current.rotation,{y:t,duration:1,ease:"power2.inOut"}),n.to(r,{...s,ease:"power2.inOut"},"<"),n.to(i,{...s,ease:"power2.inOut"},"<")},Bte=()=>{const[n,e]=ie.useState("small"),[t,r]=ie.useState({title:"iPhone 15 Pro in Nutural Taitanium",color:["#8F8A81","#FFE7B9","#6F6C64"],img:e3}),i=ie.useRef(),s=ie.useRef(),o=ie.useRef(new Jo),a=ie.useRef(new Jo),[l,c]=ie.useState(0),[u,d]=ie.useState(0),p=xr.timeline();return ie.useEffect(()=>{n==="large"&&SN(p,o,l,"#view1","#view2",{transform:"translateX(-100%)",duration:2}),n==="small"&&SN(p,a,u,"#view2","#view1",{transform:"translateX(0)",duration:2})},[n]),Jc(()=>{xr.to("#heading",{y:0,opacity:1})},[]),se.jsx("section",{className:"common-padding overflow-hidden",children:se.jsxs("div",{className:"screen-max-width",children:[se.jsx("h1",{id:"heading",className:"section-heading",children:"Take a closer look"}),se.jsxs("div",{className:"flex flex-col items-center mt-5",children:[se.jsxs("div",{className:"w-full h-[75vh] md:h-[90vh] overflow-hidden relative",children:[se.jsx(nN,{index:1,grouRef:o,gsapType:"view1",controlRef:i,setRotationState:c,item:t,size:n}),se.jsx(nN,{index:2,grouRef:a,gsapType:"view2",controlRef:s,setRotationState:d,item:t,size:n}),se.jsx($Q,{className:"w-full h-full",style:{position:"fixed",top:0,left:0,bottom:0,right:0,overflow:"hidden"},eventSource:document.getElementById("root"),children:se.jsx(zR.Port,{})})]}),se.jsxs("div",{className:"mx-auto w-full",children:[se.jsx("p",{className:"text-sm font-light text-center mb-5",children:t.title}),se.jsxs("div",{className:"flex-center",children:[se.jsx("ul",{className:"color-container",children:K6.map((m,g)=>se.jsx("li",{className:"w-6 h-6 rounded-full mx-2 cursor-pointer",style:{backgroundColor:m.color[0]},onClick:()=>r(m)},g))}),se.jsx("button",{className:"size-btn-container",children:q6.map(({label:m,value:g})=>se.jsx("span",{className:"size-btn",style:{backgroundColor:n===g?"white":"transparent",color:n===g?"black":"white"},onClick:()=>e(g),children:m},m))})]})]})]})]})})},IG=Object.prototype.toString;function YR(n){switch(IG.call(n)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Tl(n,Error)}}function hp(n,e){return IG.call(n)===`[object ${e}]`}function PG(n){return hp(n,"ErrorEvent")}function AN(n){return hp(n,"DOMError")}function Dte(n){return hp(n,"DOMException")}function vl(n){return hp(n,"String")}function KR(n){return typeof n=="object"&&n!==null&&"__sentry_template_string__"in n&&"__sentry_template_values__"in n}function qR(n){return n===null||KR(n)||typeof n!="object"&&typeof n!="function"}function Kh(n){return hp(n,"Object")}function ZS(n){return typeof Event<"u"&&Tl(n,Event)}function Lte(n){return typeof Element<"u"&&Tl(n,Element)}function Nte(n){return hp(n,"RegExp")}function e1(n){return!!(n&&n.then&&typeof n.then=="function")}function Ote(n){return Kh(n)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n}function Tl(n,e){try{return n instanceof e}catch{return!1}}function BG(n){return!!(typeof n=="object"&&n!==null&&(n.__isVue||n._isVue))}function Mh(n,e=0){return typeof n!="string"||e===0||n.length<=e?n:`${n.slice(0,e)}...`}function EN(n,e){if(!Array.isArray(n))return"";const t=[];for(let r=0;r<n.length;r++){const i=n[r];try{BG(i)?t.push("[VueViewModel]"):t.push(String(i))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}function kte(n,e,t=!1){return vl(n)?Nte(e)?e.test(n):vl(e)?t?n===e:n.includes(e):!1:!1}function Cc(n,e=[],t=!1){return e.some(r=>kte(n,r,t))}function Fte(n,e,t=250,r,i,s,o){if(!s.exception||!s.exception.values||!o||!Tl(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=Ute(qT(n,e,i,o.originalException,r,s.exception.values,a,0),t))}function qT(n,e,t,r,i,s,o,a){if(s.length>=t+1)return s;let l=[...s];if(Tl(r[i],Error)){wN(o,a);const c=n(e,r[i]),u=l.length;MN(c,i,u,a),l=qT(n,e,t,r[i],i,[c,...l],c,u)}return Array.isArray(r.errors)&&r.errors.forEach((c,u)=>{if(Tl(c,Error)){wN(o,a);const d=n(e,c),p=l.length;MN(d,`errors[${u}]`,p,a),l=qT(n,e,t,c,i,[d,...l],d,p)}}),l}function wN(n,e){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,...n.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function MN(n,e,t,r){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,type:"chained",source:e,exception_id:t,parent_id:r}}function Ute(n,e){return n.map(t=>(t.value&&(t.value=Mh(t.value,e)),t))}const lf="8.11.0",_n=globalThis;function $R(n,e,t){const r=_n,i=r.__SENTRY__=r.__SENTRY__||{},s=i[lf]=i[lf]||{};return s[n]||(s[n]=e())}const Th=_n,zte=80;function zc(n,e={}){if(!n)return"<unknown>";try{let t=n;const r=5,i=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||zte;for(;t&&s++<r&&(c=Hte(t,u),!(c==="html"||s>1&&o+i.length*l+c.length>=d));)i.push(c),o+=c.length,t=t.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function Hte(n,e){const t=n,r=[];if(!t||!t.tagName)return"";if(Th.HTMLElement&&t instanceof HTMLElement&&t.dataset){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}r.push(t.tagName.toLowerCase());const i=e&&e.length?e.filter(o=>t.getAttribute(o)).map(o=>[o,t.getAttribute(o)]):null;if(i&&i.length)i.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{t.id&&r.push(`#${t.id}`);const o=t.className;if(o&&vl(o)){const a=o.split(/\s+/);for(const l of a)r.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=t.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function DG(){try{return Th.document.location.href}catch{return""}}function Gte(n){return Th.document&&Th.document.querySelector?Th.document.querySelector(n):null}function LG(n){if(!Th.HTMLElement)return null;let e=n;const t=5;for(let r=0;r<t;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}const pp=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Vte="Sentry Logger ",$T=["debug","info","warn","error","log","assert","trace"],kx={};function Bf(n){if(!("console"in _n))return n();const e=_n.console,t={},r=Object.keys(kx);r.forEach(i=>{const s=kx[i];t[i]=e[i],e[i]=s});try{return n()}finally{r.forEach(i=>{e[i]=t[i]})}}function Wte(){let n=!1;const e={enable:()=>{n=!0},disable:()=>{n=!1},isEnabled:()=>n};return pp?$T.forEach(t=>{e[t]=(...r)=>{n&&Bf(()=>{_n.console[t](`${Vte}[${t}]:`,...r)})}}):$T.forEach(t=>{e[t]=()=>{}}),e}const He=Wte(),Xte=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function jte(n){return n==="http"||n==="https"}function M_(n,e=!1){const{host:t,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:l}=n;return`${a}://${l}${e&&i?`:${i}`:""}@${t}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function Jte(n){const e=Xte.exec(n);if(!e){Bf(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});return}const[t,r,i="",s="",o="",a=""]=e.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return NG({host:s,pass:i,path:l,projectId:c,port:o,protocol:t,publicKey:r})}function NG(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}function Yte(n){if(!pp)return!0;const{port:e,projectId:t,protocol:r}=n;return["protocol","publicKey","host","projectId"].find(o=>n[o]?!1:(He.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:t.match(/^\d+$/)?jte(r)?e&&isNaN(parseInt(e,10))?(He.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(He.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(He.error(`Invalid Sentry Dsn: Invalid projectId ${t}`),!1)}function Kte(n){const e=typeof n=="string"?Jte(n):NG(n);if(!(!e||!Yte(e)))return e}class xa extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function ni(n,e,t){if(!(e in n))return;const r=n[e],i=t(r);typeof i=="function"&&OG(i,r),n[e]=i}function bo(n,e,t){try{Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0})}catch{pp&&He.log(`Failed to add non-enumerable property "${e}" to object`,n)}}function OG(n,e){try{const t=e.prototype||{};n.prototype=e.prototype=t,bo(n,"__sentry_original__",e)}catch{}}function QR(n){return n.__sentry_original__}function qte(n){return Object.keys(n).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`).join("&")}function kG(n){if(YR(n))return{message:n.message,name:n.name,stack:n.stack,...CN(n)};if(ZS(n)){const e={type:n.type,target:TN(n.target),currentTarget:TN(n.currentTarget),...CN(n)};return typeof CustomEvent<"u"&&Tl(n,CustomEvent)&&(e.detail=n.detail),e}else return n}function TN(n){try{return Lte(n)?zc(n):Object.prototype.toString.call(n)}catch{return"<unknown>"}}function CN(n){if(typeof n=="object"&&n!==null){const e={};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}else return{}}function $te(n,e=40){const t=Object.keys(kG(n));t.sort();const r=t[0];if(!r)return"[object has no keys]";if(r.length>=e)return Mh(r,e);for(let i=t.length;i>0;i--){const s=t.slice(0,i).join(", ");if(!(s.length>e))return i===t.length?s:Mh(s,e)}return""}function ri(n){return QT(n,new Map)}function QT(n,e){if(Qte(n)){const t=e.get(n);if(t!==void 0)return t;const r={};e.set(n,r);for(const i of Object.keys(n))typeof n[i]<"u"&&(r[i]=QT(n[i],e));return r}if(Array.isArray(n)){const t=e.get(n);if(t!==void 0)return t;const r=[];return e.set(n,r),n.forEach(i=>{r.push(QT(i,e))}),r}return n}function Qte(n){if(!Kh(n))return!1;try{const e=Object.getPrototypeOf(n).constructor.name;return!e||e==="Object"}catch{return!0}}const FG=50,Df="?",bN=/\(error: (.*)\)/,RN=/captureMessage|captureException/;function UG(...n){const e=n.sort((t,r)=>t[0]-r[0]).map(t=>t[1]);return(t,r=0,i=0)=>{const s=[],o=t.split(`
`);for(let a=r;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=bN.test(l)?l.replace(bN,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of e){const d=u(c);if(d){s.push(d);break}}if(s.length>=FG+i)break}}return ene(s.slice(i))}}function Zte(n){return Array.isArray(n)?UG(...n):n}function ene(n){if(!n.length)return[];const e=Array.from(n);return/sentryWrapped/.test(ty(e).function||"")&&e.pop(),e.reverse(),RN.test(ty(e).function||"")&&(e.pop(),RN.test(ty(e).function||"")&&e.pop()),e.slice(0,FG).map(t=>({...t,filename:t.filename||ty(e).filename,function:t.function||Df}))}function ty(n){return n[n.length-1]||{}}const Mw="<anonymous>";function Cl(n){try{return!n||typeof n!="function"?Mw:n.name||Mw}catch{return Mw}}function IN(n){const e=n.exception;if(e){const t=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&t.push(...r.stacktrace.frames)}),t}catch{return}}}const Vy={},PN={};function Wf(n,e){Vy[n]=Vy[n]||[],Vy[n].push(e)}function Xf(n,e){PN[n]||(e(),PN[n]=!0)}function qo(n,e){const t=n&&Vy[n];if(t)for(const r of t)try{r(e)}catch(i){pp&&He.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${Cl(r)}
Error:`,i)}}function tne(n){const e="console";Wf(e,n),Xf(e,nne)}function nne(){"console"in _n&&$T.forEach(function(n){n in _n.console&&ni(_n.console,n,function(e){return kx[n]=e,function(...t){qo("console",{args:t,level:n});const i=kx[n];i&&i.apply(_n.console,t)}})})}const ZT=_n;function zG(){if(!("fetch"in ZT))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function eC(n){return n&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString())}function rne(){if(typeof EdgeRuntime=="string")return!0;if(!zG())return!1;if(eC(ZT.fetch))return!0;let n=!1;const e=ZT.document;if(e&&typeof e.createElement=="function")try{const t=e.createElement("iframe");t.hidden=!0,e.head.appendChild(t),t.contentWindow&&t.contentWindow.fetch&&(n=eC(t.contentWindow.fetch)),e.head.removeChild(t)}catch(t){pp&&He.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return n}const HG=1e3;function T_(){return Date.now()/HG}function ine(){const{performance:n}=_n;if(!n||!n.now)return T_;const e=Date.now()-n.now(),t=n.timeOrigin==null?e:n.timeOrigin;return()=>(t+n.now())/HG}const Bi=ine(),Ks=(()=>{const{performance:n}=_n;if(!n||!n.now)return;const e=3600*1e3,t=n.now(),r=Date.now(),i=n.timeOrigin?Math.abs(n.timeOrigin+t-r):e,s=i<e,o=n.timing&&n.timing.navigationStart,l=typeof o=="number"?Math.abs(o+t-r):e,c=l<e;return s||c?i<=l?n.timeOrigin:o:r})();function GG(n){const e="fetch";Wf(e,n),Xf(e,sne)}function sne(){rne()&&ni(_n,"fetch",function(n){return function(...e){const{method:t,url:r}=one(e),i={args:e,fetchData:{method:t,url:r},startTimestamp:Bi()*1e3};qo("fetch",{...i});const s=new Error().stack;return n.apply(_n,e).then(o=>{const a={...i,endTimestamp:Bi()*1e3,response:o};return qo("fetch",a),o},o=>{const a={...i,endTimestamp:Bi()*1e3,error:o};throw qo("fetch",a),YR(o)&&o.stack===void 0&&(o.stack=s,bo(o,"framesToPop",1)),o})}})}function tC(n,e){return!!n&&typeof n=="object"&&!!n[e]}function BN(n){return typeof n=="string"?n:n?tC(n,"url")?n.url:n.toString?n.toString():"":""}function one(n){if(n.length===0)return{method:"GET",url:""};if(n.length===2){const[t,r]=n;return{url:BN(t),method:tC(r,"method")?String(r.method).toUpperCase():"GET"}}const e=n[0];return{url:BN(e),method:tC(e,"method")?String(e.method).toUpperCase():"GET"}}let ny=null;function VG(n){const e="error";Wf(e,n),Xf(e,ane)}function ane(){ny=_n.onerror,_n.onerror=function(n,e,t,r,i){return qo("error",{column:r,error:i,line:t,msg:n,url:e}),ny&&!ny.__SENTRY_LOADER__?ny.apply(this,arguments):!1},_n.onerror.__SENTRY_INSTRUMENTED__=!0}let ry=null;function WG(n){const e="unhandledrejection";Wf(e,n),Xf(e,lne)}function lne(){ry=_n.onunhandledrejection,_n.onunhandledrejection=function(n){return qo("unhandledrejection",n),ry&&!ry.__SENTRY_LOADER__?ry.apply(this,arguments):!0},_n.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function cne(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function une(){return"npm"}function fne(){return!cne()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function DN(){return typeof window<"u"&&(!fne()||dne())}function dne(){return _n.process!==void 0&&_n.process.type==="renderer"}function hne(){const n=typeof WeakSet=="function",e=n?new WeakSet:[];function t(i){if(n)return e.has(i)?!0:(e.add(i),!1);for(let s=0;s<e.length;s++)if(e[s]===i)return!0;return e.push(i),!1}function r(i){if(n)e.delete(i);else for(let s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[t,r]}function Zn(){const n=_n,e=n.crypto||n.msCrypto;let t=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(t=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(t()&15)>>r/4).toString(16))}function XG(n){return n.exception&&n.exception.values?n.exception.values[0]:void 0}function Zl(n){const{message:e,event_id:t}=n;if(e)return e;const r=XG(n);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||t||"<unknown>":t||"<unknown>"}function nC(n,e,t){const r=n.exception=n.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function Jg(n,e){const t=XG(n);if(!t)return;const r={type:"generic",handled:!0},i=t.mechanism;if(t.mechanism={...r,...i,...e},e&&"data"in e){const s={...i&&i.data,...e.data};t.mechanism.data=s}}function LN(n){if(n&&n.__sentry_captured__)return!0;try{bo(n,"__sentry_captured__",!0)}catch{}return!1}function jG(n){return Array.isArray(n)?n:[n]}function ga(n,e=100,t=1/0){try{return rC("",n,e,t)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function JG(n,e=3,t=100*1024){const r=ga(n,e);return _ne(r)>t?JG(n,e-1,t):r}function rC(n,e,t=1/0,r=1/0,i=hne()){const[s,o]=i;if(e==null||["number","boolean","string"].includes(typeof e)&&!Number.isNaN(e))return e;const a=pne(n,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:t;if(l===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const m=c.toJSON();return rC("",m,l-1,r,i)}catch{}const u=Array.isArray(e)?[]:{};let d=0;const p=kG(e);for(const m in p){if(!Object.prototype.hasOwnProperty.call(p,m))continue;if(d>=r){u[m]="[MaxProperties ~]";break}const g=p[m];u[m]=rC(m,g,l-1,r,i),d++}return o(e),u}function pne(n,e){try{if(n==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(n==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(BG(e))return"[VueViewModel]";if(Ote(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${Cl(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const t=mne(e);return/^HTML(\w*)Element$/.test(t)?`[HTMLElement: ${t}]`:`[object ${t}]`}catch(t){return`**non-serializable** (${t})`}}function mne(n){const e=Object.getPrototypeOf(n);return e?e.constructor.name:"null prototype"}function gne(n){return~-encodeURI(n).split(/%..|./).length}function _ne(n){return gne(JSON.stringify(n))}var nl;(function(n){n[n.PENDING=0]="PENDING";const t=1;n[n.RESOLVED=t]="RESOLVED";const r=2;n[n.REJECTED=r]="REJECTED"})(nl||(nl={}));function bl(n){return new go(e=>{e(n)})}function Fx(n){return new go((e,t)=>{t(n)})}class go{constructor(e){go.prototype.__init.call(this),go.prototype.__init2.call(this),go.prototype.__init3.call(this),go.prototype.__init4.call(this),this._state=nl.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new go((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(o){i(o)}},s=>{if(!t)i(s);else try{r(t(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(t=>t,e)}finally(e){return new go((t,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{if(s){r(i);return}t(i)})})}__init(){this._resolve=e=>{this._setResult(nl.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(nl.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{if(this._state===nl.PENDING){if(e1(t)){t.then(this._resolve,this._reject);return}this._state=e,this._value=t,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===nl.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(t=>{t[0]||(this._state===nl.RESOLVED&&t[1](this._value),this._state===nl.REJECTED&&t[2](this._value),t[0]=!0)})}}}function vne(n){const e=[];function t(){return n===void 0||e.length<n}function r(o){return e.splice(e.indexOf(o),1)[0]||Promise.resolve(void 0)}function i(o){if(!t())return Fx(new xa("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new go((a,l)=>{let c=e.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(d=>{bl(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:e,add:i,drain:s}}function cf(n){if(!n)return{};const e=n.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const t=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:t,hash:r,relative:e[5]+t+r}}const yne=["fatal","error","warning","log","info","debug"];function xne(n){return n==="warn"?"warning":yne.includes(n)?n:"log"}const iC="baggage",YG="sentry-",Sne=/^sentry-/,Ane=8192;function KG(n){const e=Ene(n);if(!e)return;const t=Object.entries(e).reduce((r,[i,s])=>{if(i.match(Sne)){const o=i.slice(YG.length);r[o]=s}return r},{});if(Object.keys(t).length>0)return t}function qG(n){if(!n)return;const e=Object.entries(n).reduce((t,[r,i])=>(i&&(t[`${YG}${r}`]=i),t),{});return wne(e)}function Ene(n){if(!(!n||!vl(n)&&!Array.isArray(n)))return Array.isArray(n)?n.reduce((e,t)=>{const r=NN(t);return Object.entries(r).forEach(([i,s])=>{e[i]=s}),e},{}):NN(n)}function NN(n){return n.split(",").map(e=>e.split("=").map(t=>decodeURIComponent(t.trim()))).reduce((e,[t,r])=>(t&&r&&(e[t]=r),e),{})}function wne(n){if(Object.keys(n).length!==0)return Object.entries(n).reduce((e,[t,r],i)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(r)}`,o=i===0?s:`${e},${s}`;return o.length>Ane?(pp&&He.warn(`Not adding key: ${t} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const Mne=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Tne(n){if(!n)return;const e=n.match(Mne);if(!e)return;let t;return e[3]==="1"?t=!0:e[3]==="0"&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}function Cne(n,e){const t=Tne(n),r=KG(e),{traceId:i,parentSpanId:s,parentSampled:o}=t||{};return t?{traceId:i||Zn(),parentSpanId:s||Zn().substring(16),spanId:Zn().substring(16),sampled:o,dsc:r||{}}:{traceId:i||Zn(),spanId:Zn().substring(16)}}function ZR(n=Zn(),e=Zn().substring(16),t){let r="";return t!==void 0&&(r=t?"-1":"-0"),`${n}-${e}${r}`}function jf(n,e=[]){return[n,e]}function bne(n,e){const[t,r]=n;return[t,[...r,e]]}function ON(n,e){const t=n[1];for(const r of t){const i=r[0].type;if(e(r,i))return!0}return!1}function sC(n){return _n.__SENTRY__&&_n.__SENTRY__.encodePolyfill?_n.__SENTRY__.encodePolyfill(n):new TextEncoder().encode(n)}function Rne(n){const[e,t]=n;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[sC(r),s]:r.push(typeof s=="string"?sC(s):s)}for(const s of t){const[o,a]=s;if(i(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(ga(a))}i(l)}}return typeof r=="string"?r:Ine(r)}function Ine(n){const e=n.reduce((i,s)=>i+s.length,0),t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}function Pne(n){return[{type:"span"},n]}function Bne(n){const e=typeof n.data=="string"?sC(n.data):n.data;return[ri({type:"attachment",length:e.length,filename:n.filename,content_type:n.contentType,attachment_type:n.attachmentType}),e]}const Dne={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function kN(n){return Dne[n]}function eI(n){if(!n||!n.sdk)return;const{name:e,version:t}=n.sdk;return{name:e,version:t}}function $G(n,e,t,r){const i=n.sdkProcessingMetadata&&n.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:n.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!t&&r&&{dsn:M_(r)},...i&&{trace:ri({...i})}}}function Lne(n,e,t){const r=[{type:"client_report"},{timestamp:T_(),discarded_events:n}];return jf(e?{dsn:e}:{},[r])}const Nne=60*1e3;function One(n,e=Date.now()){const t=parseInt(`${n}`,10);if(!isNaN(t))return t*1e3;const r=Date.parse(`${n}`);return isNaN(r)?Nne:r-e}function kne(n,e){return n[e]||n.all||0}function QG(n,e,t=Date.now()){return kne(n,e)>t}function ZG(n,{statusCode:e,headers:t},r=Date.now()){const i={...n},s=t&&t["x-sentry-rate-limits"],o=t&&t["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),p=(isNaN(d)?60:d)*1e3;if(!c)i.all=r+p;else for(const m of c.split(";"))m==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(i[m]=r+p):i[m]=r+p}else o?i.all=r+One(o,r):e===429&&(i.all=r+60*1e3);return i}function Fne(n,e){return n??e()}function Tw(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}function Ux(){return{traceId:Zn(),spanId:Zn().substring(16)}}const iy=_n;function Une(){const n=iy.chrome,e=n&&n.app&&n.app.runtime,t="history"in iy&&!!iy.history.pushState&&!!iy.history.replaceState;return!e&&t}const en=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function mp(){return tI(_n),_n}function tI(n){const e=n.__SENTRY__=n.__SENTRY__||{};return e.version=e.version||lf,e[lf]=e[lf]||{}}function zne(n){const e=Bi(),t={sid:Zn(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Gne(t)};return n&&qh(t,n),t}function qh(n,e={}){if(e.user&&(!n.ipAddress&&e.user.ip_address&&(n.ipAddress=e.user.ip_address),!n.did&&!e.did&&(n.did=e.user.id||e.user.email||e.user.username)),n.timestamp=e.timestamp||Bi(),e.abnormal_mechanism&&(n.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(n.ignoreDuration=e.ignoreDuration),e.sid&&(n.sid=e.sid.length===32?e.sid:Zn()),e.init!==void 0&&(n.init=e.init),!n.did&&e.did&&(n.did=`${e.did}`),typeof e.started=="number"&&(n.started=e.started),n.ignoreDuration)n.duration=void 0;else if(typeof e.duration=="number")n.duration=e.duration;else{const t=n.timestamp-n.started;n.duration=t>=0?t:0}e.release&&(n.release=e.release),e.environment&&(n.environment=e.environment),!n.ipAddress&&e.ipAddress&&(n.ipAddress=e.ipAddress),!n.userAgent&&e.userAgent&&(n.userAgent=e.userAgent),typeof e.errors=="number"&&(n.errors=e.errors),e.status&&(n.status=e.status)}function Hne(n,e){let t={};n.status==="ok"&&(t={status:"exited"}),qh(n,t)}function Gne(n){return ri({sid:`${n.sid}`,init:n.init,started:new Date(n.started*1e3).toISOString(),timestamp:new Date(n.timestamp*1e3).toISOString(),status:n.status,errors:n.errors,did:typeof n.did=="number"||typeof n.did=="string"?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})}const oC="_sentrySpan";function Yg(n,e){e?bo(n,oC,e):delete n[oC]}function zx(n){return n[oC]}const Vne=100;class nI{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Ux()}clone(){const e=new nI;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Yg(e,zx(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&qh(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return t===null?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t=typeof e=="function"?e(this):e,[r,i]=t instanceof Lf?[t.getScopeData(),t.getRequestSession()]:Kh(t)?[e,e.requestSession]:[],{tags:s,extra:o,user:a,contexts:l,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Yg(this,void 0),this._attachments=[],this._propagationContext=Ux(),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const r=typeof t=="number"?t:Vne;if(r<=0)return this;const i={timestamp:T_(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:zx(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t&&t.event_id?t.event_id:Zn();if(!this._client)return He.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:r},this),r}captureMessage(e,t,r){const i=r&&r.event_id?r.event_id:Zn();if(!this._client)return He.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,t){const r=t&&t.event_id?t.event_id:Zn();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(He.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Lf=nI;function Wne(){return $R("defaultCurrentScope",()=>new Lf)}function Xne(){return $R("defaultIsolationScope",()=>new Lf)}class jne{constructor(e,t){let r;e?r=e:r=new Lf;let i;t?i=t:i=new Lf,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const t=this._pushScope();let r;try{r=e(t)}catch(i){throw this._popScope(),i}return e1(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}_popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}}function $h(){const n=mp(),e=tI(n);return e.stack=e.stack||new jne(Wne(),Xne())}function Jne(n){return $h().withScope(n)}function Yne(n,e){const t=$h();return t.withScope(()=>(t.getStackTop().scope=n,e(n)))}function FN(n){return $h().withScope(()=>n($h().getIsolationScope()))}function Kne(){return{withIsolationScope:FN,withScope:Jne,withSetScope:Yne,withSetIsolationScope:(n,e)=>FN(e),getCurrentScope:()=>$h().getScope(),getIsolationScope:()=>$h().getIsolationScope()}}function C_(n){const e=tI(n);return e.acs?e.acs:Kne()}function ur(){const n=mp();return C_(n).getCurrentScope()}function Io(){const n=mp();return C_(n).getIsolationScope()}function qne(){return $R("globalScope",()=>new Lf)}function rI(...n){const e=mp(),t=C_(e);if(n.length===2){const[r,i]=n;return r?t.withSetScope(r,i):t.withScope(i)}return t.withScope(n[0])}function sn(){return ur().getClient()}const $ne="_sentryMetrics";function aC(n){const e=n[$ne];if(!e)return;const t={};for(const[,[r,i]]of e)(t[r]||(t[r]=[])).push(ri(i));return t}const wa="sentry.source",e4="sentry.sample_rate",Qh="sentry.op",Lr="sentry.origin",lC="sentry.idle_span_finish_reason",iI="sentry.measurement_unit",sI="sentry.measurement_value",Qne="sentry.profile_id",t4="sentry.exclusive_time",Zne=0,n4=1,qr=2;function ere(n){if(n<400&&n>=100)return{code:n4};if(n>=400&&n<500)switch(n){case 401:return{code:qr,message:"unauthenticated"};case 403:return{code:qr,message:"permission_denied"};case 404:return{code:qr,message:"not_found"};case 409:return{code:qr,message:"already_exists"};case 413:return{code:qr,message:"failed_precondition"};case 429:return{code:qr,message:"resource_exhausted"};case 499:return{code:qr,message:"cancelled"};default:return{code:qr,message:"invalid_argument"}}if(n>=500&&n<600)switch(n){case 501:return{code:qr,message:"unimplemented"};case 503:return{code:qr,message:"unavailable"};case 504:return{code:qr,message:"deadline_exceeded"};default:return{code:qr,message:"internal_error"}}return{code:qr,message:"unknown_error"}}function r4(n,e){n.setAttribute("http.response.status_code",e);const t=ere(e);t.message!=="unknown_error"&&n.setStatus(t)}const i4=0,s4=1;function tre(n){const{spanId:e,traceId:t}=n.spanContext(),{data:r,op:i,parent_span_id:s,status:o,origin:a}=Cn(n);return ri({parent_span_id:s,span_id:e,trace_id:t,data:r,op:i,status:o,origin:a})}function nre(n){const{spanId:e,traceId:t}=n.spanContext(),{parent_span_id:r}=Cn(n);return ri({parent_span_id:r,span_id:e,trace_id:t})}function o4(n){const{traceId:e,spanId:t}=n.spanContext(),r=Jf(n);return ZR(e,t,r)}function uf(n){return typeof n=="number"?UN(n):Array.isArray(n)?n[0]+n[1]/1e9:n instanceof Date?UN(n.getTime()):Bi()}function UN(n){return n>9999999999?n/1e3:n}function Cn(n){if(ire(n))return n.getSpanJSON();try{const{spanId:e,traceId:t}=n.spanContext();if(rre(n)){const{attributes:r,startTime:i,name:s,endTime:o,parentSpanId:a,status:l}=n;return ri({span_id:e,trace_id:t,data:r,description:s,parent_span_id:a,start_timestamp:uf(i),timestamp:uf(o)||void 0,status:a4(l),op:r[Qh],origin:r[Lr],_metrics_summary:aC(n)})}return{span_id:e,trace_id:t}}catch{return{}}}function rre(n){const e=n;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function ire(n){return typeof n.getSpanJSON=="function"}function Jf(n){const{traceFlags:e}=n.spanContext();return e===s4}function a4(n){if(!(!n||n.code===Zne))return n.code===n4?"ok":n.message||"unknown_error"}const ff="_sentryChildSpans",cC="_sentryRootSpan";function l4(n,e){const t=n[cC]||n;bo(e,cC,t),n[ff]?n[ff].add(e):bo(n,ff,new Set([e]))}function sre(n,e){n[ff]&&n[ff].delete(e)}function Wy(n){const e=new Set;function t(r){if(!e.has(r)&&Jf(r)){e.add(r);const i=r[ff]?Array.from(r[ff]):[];for(const s of i)t(s)}}return t(n),Array.from(e)}function es(n){return n[cC]||n}function Qs(){const n=mp(),e=C_(n);return e.getActiveSpan?e.getActiveSpan():zx(ur())}let zN=!1;function ore(){zN||(zN=!0,VG(uC),WG(uC))}function uC(){const n=Qs(),e=n&&es(n);if(e){const t="internal_error";en&&He.log(`[Tracing] Root span: ${t} -> Global error occured`),e.setStatus({code:qr,message:t})}}uC.tag="sentry_tracingErrorCallback";const c4="_sentryScope",u4="_sentryIsolationScope";function are(n,e,t){n&&(bo(n,u4,t),bo(n,c4,e))}function HN(n){return{scope:n[c4],isolationScope:n[u4]}}function Hc(n){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=n||lre();return!!e&&(e.enableTracing||"tracesSampleRate"in e||"tracesSampler"in e)}function lre(){const n=sn();return n&&n.getOptions()}class gp{constructor(e={}){this._traceId=e.traceId||Zn(),this._spanId=e.spanId||Zn().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:i4}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,r){return this}}const oI="production",f4="_frozenDsc";function GN(n,e){bo(n,f4,e)}function t1(n,e){const t=e.getOptions(),{publicKey:r}=e.getDsn()||{},i=ri({environment:t.environment||oI,release:t.release,public_key:r,trace_id:n});return e.emit("createDsc",i),i}function Yf(n){const e=sn();if(!e)return{};const t=t1(Cn(n).trace_id||"",e),r=es(n),i=r[f4];if(i)return i;const s=r.spanContext().traceState,o=s&&s.get("sentry.dsc"),a=o&&KG(o);if(a)return a;const l=Cn(r),c=l.data||{},u=c[e4];u!=null&&(t.sample_rate=`${u}`);const d=c[wa],p=l.description;return d!=="url"&&p&&(t.transaction=p),t.sampled=String(Jf(r)),e.emit("createDsc",t,r),t}function cre(n){if(!en)return;const{description:e="< unknown name >",op:t="< unknown op >",parent_span_id:r}=Cn(n),{spanId:i}=n.spanContext(),s=Jf(n),o=es(n),a=o===n,l=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,c=[`op: ${t}`,`name: ${e}`,`ID: ${i}`];if(r&&c.push(`parent ID: ${r}`),!a){const{op:u,description:d}=Cn(o);c.push(`root ID: ${o.spanContext().spanId}`),u&&c.push(`root op: ${u}`),d&&c.push(`root description: ${d}`)}He.log(`${l}
  ${c.join(`
  `)}`)}function ure(n){if(!en)return;const{description:e="< unknown name >",op:t="< unknown op >"}=Cn(n),{spanId:r}=n.spanContext(),s=es(n)===n,o=`[Tracing] Finishing "${t}" ${s?"root ":""}span "${e}" with ID ${r}`;He.log(o)}function Hx(n){if(typeof n=="boolean")return Number(n);const e=typeof n=="string"?parseFloat(n):n;if(typeof e!="number"||isNaN(e)||e<0||e>1){en&&He.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`);return}return e}function fre(n,e){if(!Hc(n))return[!1];let t;typeof n.tracesSampler=="function"?t=n.tracesSampler(e):e.parentSampled!==void 0?t=e.parentSampled:typeof n.tracesSampleRate<"u"?t=n.tracesSampleRate:t=1;const r=Hx(t);return r===void 0?(en&&He.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):r?Math.random()<r?[!0,r]:(en&&He.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(t)})`),[!1,r]):(en&&He.log(`[Tracing] Discarding transaction because ${typeof n.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,r])}function dre(n,e){return e&&(n.sdk=n.sdk||{},n.sdk.name=n.sdk.name||e.name,n.sdk.version=n.sdk.version||e.version,n.sdk.integrations=[...n.sdk.integrations||[],...e.integrations||[]],n.sdk.packages=[...n.sdk.packages||[],...e.packages||[]]),n}function hre(n,e,t,r){const i=eI(t),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:M_(e)}},o="aggregates"in n?[{type:"sessions"},n]:[{type:"session"},n.toJSON()];return jf(s,[o])}function pre(n,e,t,r){const i=eI(t),s=n.type&&n.type!=="replay_event"?n.type:"event";dre(n,t&&t.sdk);const o=$G(n,i,r,e);return delete n.sdkProcessingMetadata,jf(o,[[{type:s},n]])}function mre(n,e){function t(u){return!!u.trace_id&&!!u.public_key}const r=Yf(n[0]),i=e&&e.getDsn(),s=e&&e.getOptions().tunnel,o={sent_at:new Date().toISOString(),...t(r)&&{trace:r},...!!s&&i&&{dsn:M_(i)}},a=e&&e.getOptions().beforeSendSpan,l=a?u=>a(Cn(u)):u=>Cn(u),c=[];for(const u of n){const d=l(u);d&&c.push(Pne(d))}return jf(o,c)}function gre(n,e,t){const r=Qs(),i=r&&es(r);i&&i.addEvent(n,{[sI]:e,[iI]:t})}function VN(n){if(!n||n.length===0)return;const e={};return n.forEach(t=>{const r=t.attributes||{},i=r[iI],s=r[sI];typeof i=="string"&&typeof s=="number"&&(e[t.name]={value:s,unit:i})}),e}const WN=1e3;class aI{constructor(e={}){this._traceId=e.traceId||Zn(),this._spanId=e.spanId||Zn().substring(16),this._startTime=e.startTimestamp||Bi(),this._attributes={},this.setAttributes({[Lr]:"manual",[Qh]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}spanContext(){const{_spanId:e,_traceId:t,_sampled:r}=this;return{spanId:e,traceId:t,traceFlags:r?s4:i4}}setAttribute(e,t){t===void 0?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach(t=>this.setAttribute(t,e[t]))}updateStartTime(e){this._startTime=uf(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this}end(e){this._endTime||(this._endTime=uf(e),ure(this),this._onSpanEnded())}getSpanJSON(){return ri({data:this._attributes,description:this._name,op:this._attributes[Qh],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:a4(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Lr],_metrics_summary:aC(this),profile_id:this._attributes[Qne],exclusive_time:this._attributes[t4],measurements:VN(this._events),is_segment:this._isStandaloneSpan&&es(this)===this||void 0,segment_id:this._isStandaloneSpan?es(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,r){en&&He.log("[Tracing] Adding an event to span:",e);const i=XN(t)?t:r||Bi(),s=XN(t)?{}:t||{},o={name:e,time:uf(i),attributes:s};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=sn();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===es(this)))return;if(this._isStandaloneSpan){this._sampled?vre(mre([this],e)):(en&&He.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(HN(this).scope||ur()).captureEvent(r)}_convertSpanToTransaction(){if(!jN(Cn(this)))return;this._name||(en&&He.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=HN(this),i=(e||ur()).getClient()||sn();if(this._sampled!==!0){en&&He.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),i&&i.recordDroppedEvent("sample_rate","transaction");return}const o=Wy(this).filter(d=>d!==this&&!_re(d)).map(d=>Cn(d)).filter(jN),a=this._attributes[wa],l={contexts:{trace:tre(this)},spans:o.length>WN?o.sort((d,p)=>d.start_timestamp-p.start_timestamp).slice(0,WN):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,...ri({dynamicSamplingContext:Yf(this)})},_metrics_summary:aC(this),...a&&{transaction_info:{source:a}}},c=VN(this._events);return c&&Object.keys(c).length&&(en&&He.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function XN(n){return n&&typeof n=="number"||n instanceof Date||Array.isArray(n)}function jN(n){return!!n.start_timestamp&&!!n.timestamp&&!!n.span_id&&!!n.trace_id}function _re(n){return n instanceof aI&&n.isStandaloneSpan()}function vre(n){const e=sn();if(!e)return;const t=n[1];if(!t||t.length===0){e.recordDroppedEvent("before_send","span");return}const r=e.getTransport();r&&r.send(n).then(null,i=>{en&&He.error("Error while sending span:",i)})}const d4="__SENTRY_SUPPRESS_TRACING__";function La(n){const e=h4();if(e.startInactiveSpan)return e.startInactiveSpan(n);const t=xre(n),{forceTransaction:r,parentSpan:i}=n;return(n.scope?o=>rI(n.scope,o):i?o=>Gx(i,o):o=>o())(()=>{const o=ur(),a=Are(o);return n.onlyIfParent&&!a?new gp:yre({parentSpan:a,spanArguments:t,forceTransaction:r,scope:o})})}function Gx(n,e){const t=h4();return t.withActiveSpan?t.withActiveSpan(n,e):rI(r=>(Yg(r,n||void 0),e(r)))}function yre({parentSpan:n,spanArguments:e,forceTransaction:t,scope:r}){if(!Hc())return new gp;const i=Io();let s;if(n&&!t)s=Sre(n,r,e),l4(n,s);else if(n){const o=Yf(n),{traceId:a,spanId:l}=n.spanContext(),c=Jf(n);s=JN({traceId:a,parentSpanId:l,...e},r,c),GN(s,o)}else{const{traceId:o,dsc:a,parentSpanId:l,sampled:c}={...i.getPropagationContext(),...r.getPropagationContext()};s=JN({traceId:o,parentSpanId:l,...e},r,c),a&&GN(s,a)}return cre(s),are(s,r,i),s}function xre(n){const t={isStandalone:(n.experimental||{}).standalone,...n};if(n.startTime){const r={...t};return r.startTimestamp=uf(n.startTime),delete r.startTime,r}return t}function h4(){const n=mp();return C_(n)}function JN(n,e,t){const r=sn(),i=r&&r.getOptions()||{},{name:s="",attributes:o}=n,[a,l]=e.getScopeData().sdkProcessingMetadata[d4]?[!1]:fre(i,{name:s,parentSampled:t,attributes:o,transactionContext:{name:s,parentSampled:t}}),c=new aI({...n,attributes:{[wa]:"custom",...n.attributes},sampled:a});return l!==void 0&&c.setAttribute(e4,l),r&&r.emit("spanStart",c),c}function Sre(n,e,t){const{spanId:r,traceId:i}=n.spanContext(),s=e.getScopeData().sdkProcessingMetadata[d4]?!1:Jf(n),o=s?new aI({...t,parentSpanId:r,traceId:i,sampled:s}):new gp({traceId:i});l4(n,o);const a=sn();return a&&(a.emit("spanStart",o),t.endTimestamp&&a.emit("spanEnd",o)),o}function Are(n){const e=zx(n);if(!e)return;const t=sn();return(t?t.getOptions():{}).parentSpanIsAlwaysRootSpan?es(e):e}const Xy={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Ere="heartbeatFailed",wre="idleTimeout",Mre="finalTimeout",Tre="externalFinish";function p4(n,e={}){const t=new Map;let r=!1,i,s=Tre,o=!e.disableAutoFinish;const{idleTimeout:a=Xy.idleTimeout,finalTimeout:l=Xy.finalTimeout,childSpanTimeout:c=Xy.childSpanTimeout,beforeSpanEnd:u}=e,d=sn();if(!d||!Hc())return new gp;const p=ur(),m=Qs(),g=Cre(n);g.end=new Proxy(g.end,{apply(I,T,R){u&&u(g);const[P,...b]=R,M=P||Bi(),L=uf(M),H=Wy(g).filter(te=>te!==g);if(!H.length)return w(L),Reflect.apply(I,T,[L,...b]);const j=H.map(te=>Cn(te).timestamp).filter(te=>!!te),Q=j.length?Math.max(...j):void 0,ee=Cn(g).start_timestamp,K=Math.min(ee?ee+l/1e3:1/0,Math.max(ee||-1/0,Math.min(L,Q||1/0)));return w(K),Reflect.apply(I,T,[K,...b])}});function y(){i&&(clearTimeout(i),i=void 0)}function v(I){y(),i=setTimeout(()=>{!r&&t.size===0&&o&&(s=wre,g.end(I))},a)}function _(I){i=setTimeout(()=>{!r&&o&&(s=Ere,g.end(I))},c)}function S(I){y(),t.set(I,!0);const T=Bi();_(T+c/1e3)}function A(I){if(t.has(I)&&t.delete(I),t.size===0){const T=Bi();v(T+a/1e3)}}function w(I){r=!0,t.clear(),Yg(p,m);const T=Cn(g),{start_timestamp:R}=T;if(!R)return;(T.data||{})[lC]||g.setAttribute(lC,s),He.log(`[Tracing] Idle span "${T.op}" finished`);const b=Wy(g).filter(L=>L!==g);let M=0;b.forEach(L=>{L.isRecording()&&(L.setStatus({code:qr,message:"cancelled"}),L.end(I),en&&He.log("[Tracing] Cancelling span since span ended early",JSON.stringify(L,void 0,2)));const H=Cn(L),{timestamp:j=0,start_timestamp:Q=0}=H,ee=Q<=I,K=(l+a)/1e3,te=j-Q<=K;if(en){const F=JSON.stringify(L,void 0,2);ee?te||He.log("[Tracing] Discarding span since it finished after idle span final timeout",F):He.log("[Tracing] Discarding span since it happened after idle span was finished",F)}(!te||!ee)&&(sre(g,L),M++)}),M>0&&g.setAttribute("sentry.idle_span_discarded_spans",M)}return d.on("spanStart",I=>{if(r||I===g||Cn(I).timestamp)return;Wy(g).includes(I)&&S(I.spanContext().spanId)}),d.on("spanEnd",I=>{r||A(I.spanContext().spanId)}),d.on("idleSpanEnableAutoFinish",I=>{I===g&&(o=!0,v(),t.size&&_())}),e.disableAutoFinish||v(),setTimeout(()=>{r||(g.setStatus({code:qr,message:"deadline_exceeded"}),s=Mre,g.end())},l),g}function Cre(n){const e=La(n);return Yg(ur(),e),en&&He.log("[Tracing] Started span is an idle span"),e}function fC(n,e,t,r=0){return new go((i,s)=>{const o=n[r];if(e===null||typeof o!="function")i(e);else{const a=o({...e},t);en&&o.id&&a===null&&He.log(`Event processor "${o.id}" dropped event`),e1(a)?a.then(l=>fC(n,l,t,r+1).then(i)).then(null,s):fC(n,a,t,r+1).then(i).then(null,s)}})}function bre(n,e){const{fingerprint:t,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;Rre(n,e),r&&Bre(n,r),Dre(n,t),Ire(n,i),Pre(n,s)}function YN(n,e){const{extra:t,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:p,transactionName:m,span:g}=e;hm(n,"extra",t),hm(n,"tags",r),hm(n,"user",i),hm(n,"contexts",s),hm(n,"sdkProcessingMetadata",a),o&&(n.level=o),m&&(n.transactionName=m),g&&(n.span=g),l.length&&(n.breadcrumbs=[...n.breadcrumbs,...l]),c.length&&(n.fingerprint=[...n.fingerprint,...c]),u.length&&(n.eventProcessors=[...n.eventProcessors,...u]),d.length&&(n.attachments=[...n.attachments,...d]),n.propagationContext={...n.propagationContext,...p}}function hm(n,e,t){if(t&&Object.keys(t).length){n[e]={...n[e]};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[e][r]=t[r])}}function Rre(n,e){const{extra:t,tags:r,user:i,contexts:s,level:o,transactionName:a}=e,l=ri(t);l&&Object.keys(l).length&&(n.extra={...l,...n.extra});const c=ri(r);c&&Object.keys(c).length&&(n.tags={...c,...n.tags});const u=ri(i);u&&Object.keys(u).length&&(n.user={...u,...n.user});const d=ri(s);d&&Object.keys(d).length&&(n.contexts={...d,...n.contexts}),o&&(n.level=o),a&&n.type!=="transaction"&&(n.transaction=a)}function Ire(n,e){const t=[...n.breadcrumbs||[],...e];n.breadcrumbs=t.length?t:void 0}function Pre(n,e){n.sdkProcessingMetadata={...n.sdkProcessingMetadata,...e}}function Bre(n,e){n.contexts={trace:nre(e),...n.contexts},n.sdkProcessingMetadata={dynamicSamplingContext:Yf(e),...n.sdkProcessingMetadata};const t=es(e),r=Cn(t).description;r&&!n.transaction&&n.type==="transaction"&&(n.transaction=r)}function Dre(n,e){n.fingerprint=n.fingerprint?jG(n.fingerprint):[],e&&(n.fingerprint=n.fingerprint.concat(e)),n.fingerprint&&!n.fingerprint.length&&delete n.fingerprint}function m4(n,e,t,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=n,l={...e,event_id:e.event_id||t.event_id||Zn(),timestamp:e.timestamp||T_()},c=t.integrations||n.integrations.map(v=>v.name);Lre(l,n),kre(l,c),e.type===void 0&&Nre(l,n.stackParser);const u=Ure(r,t.captureContext);t.mechanism&&Jg(l,t.mechanism);const d=i?i.getEventProcessors():[],p=qne().getScopeData();if(s){const v=s.getScopeData();YN(p,v)}if(u){const v=u.getScopeData();YN(p,v)}const m=[...t.attachments||[],...p.attachments];m.length&&(t.attachments=m),bre(l,p);const g=[...d,...p.eventProcessors];return fC(g,l,t).then(v=>(v&&Ore(v),typeof o=="number"&&o>0?Fre(v,o,a):v))}function Lre(n,e){const{environment:t,release:r,dist:i,maxValueLength:s=250}=e;"environment"in n||(n.environment="environment"in e?t:oI),n.release===void 0&&r!==void 0&&(n.release=r),n.dist===void 0&&i!==void 0&&(n.dist=i),n.message&&(n.message=Mh(n.message,s));const o=n.exception&&n.exception.values&&n.exception.values[0];o&&o.value&&(o.value=Mh(o.value,s));const a=n.request;a&&a.url&&(a.url=Mh(a.url,s))}const KN=new WeakMap;function Nre(n,e){const t=_n._sentryDebugIds;if(!t)return;let r;const i=KN.get(e);i?r=i:(r=new Map,KN.set(e,r));const s=Object.entries(t).reduce((o,[a,l])=>{let c;const u=r.get(a);u?c=u:(c=e(a),r.set(a,c));for(let d=c.length-1;d>=0;d--){const p=c[d];if(p.filename){o[p.filename]=l;break}}return o},{});try{n.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function Ore(n){const e={};try{n.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(e).length===0)return;n.debug_meta=n.debug_meta||{},n.debug_meta.images=n.debug_meta.images||[];const t=n.debug_meta.images;Object.entries(e).forEach(([r,i])=>{t.push({type:"sourcemap",code_file:r,debug_id:i})})}function kre(n,e){e.length>0&&(n.sdk=n.sdk||{},n.sdk.integrations=[...n.sdk.integrations||[],...e])}function Fre(n,e,t){if(!n)return null;const r={...n,...n.breadcrumbs&&{breadcrumbs:n.breadcrumbs.map(i=>({...i,...i.data&&{data:ga(i.data,e,t)}}))},...n.user&&{user:ga(n.user,e,t)},...n.contexts&&{contexts:ga(n.contexts,e,t)},...n.extra&&{extra:ga(n.extra,e,t)}};return n.contexts&&n.contexts.trace&&r.contexts&&(r.contexts.trace=n.contexts.trace,n.contexts.trace.data&&(r.contexts.trace.data=ga(n.contexts.trace.data,e,t))),n.spans&&(r.spans=n.spans.map(i=>({...i,...i.data&&{data:ga(i.data,e,t)}}))),r}function Ure(n,e){if(!e)return n;const t=n?n.clone():new Lf;return t.update(e),t}function lI(n,e){return ur().captureException(n,void 0)}function g4(n,e){return ur().captureEvent(n,e)}function _4(n,e){Io().setContext(n,e)}function zre(n){Io().addEventProcessor(n)}function qN(n){const e=sn(),t=Io(),r=ur(),{release:i,environment:s=oI}=e&&e.getOptions()||{},{userAgent:o}=_n.navigator||{},a=zne({release:i,environment:s,user:r.getUser()||t.getUser(),...o&&{userAgent:o},...n}),l=t.getSession();return l&&l.status==="ok"&&qh(l,{status:"exited"}),v4(),t.setSession(a),r.setSession(a),a}function v4(){const n=Io(),e=ur(),t=e.getSession()||n.getSession();t&&Hne(t),y4(),n.setSession(),e.setSession()}function y4(){const n=Io(),e=ur(),t=sn(),r=e.getSession()||n.getSession();r&&t&&t.captureSession(r)}function $N(n=!1){if(n){v4();return}y4()}const Hre="7";function Gre(n){const e=n.protocol?`${n.protocol}:`:"",t=n.port?`:${n.port}`:"";return`${e}//${n.host}${t}${n.path?`/${n.path}`:""}/api/`}function Vre(n){return`${Gre(n)}${n.projectId}/envelope/`}function Wre(n,e){return qte({sentry_key:n.publicKey,sentry_version:Hre,...e&&{sentry_client:`${e.name}/${e.version}`}})}function Xre(n,e,t){return e||`${Vre(n)}?${Wre(n,t)}`}const QN=[];function jre(n){const e={};return n.forEach(t=>{const{name:r}=t,i=e[r];i&&!i.isDefaultInstance&&t.isDefaultInstance||(e[r]=t)}),Object.values(e)}function Jre(n){const e=n.defaultIntegrations||[],t=n.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(t)?r=[...e,...t]:typeof t=="function"?r=jG(t(e)):r=e;const i=jre(r),s=i.findIndex(o=>o.name==="Debug");if(s>-1){const[o]=i.splice(s,1);i.push(o)}return i}function Yre(n,e){const t={};return e.forEach(r=>{r&&x4(n,r,t)}),t}function ZN(n,e){for(const t of e)t&&t.afterAllSetup&&t.afterAllSetup(n)}function x4(n,e,t){if(t[e.name]){en&&He.log(`Integration skipped because it was already installed: ${e.name}`);return}if(t[e.name]=e,QN.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),QN.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(n),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);n.on("preprocessEvent",(i,s)=>r(i,s,n))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,o)=>r(s,o,n),{id:e.name});n.addEventProcessor(i)}en&&He.log(`Integration installed: ${e.name}`)}const eO="Not capturing exception because it's already been captured.";class Kre{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Kte(e.dsn):en&&He.warn("No DSN provided, client will not send events."),this._dsn){const t=Xre(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){const i=Zn();if(LN(e))return en&&He.log(eO),i;const s={event_id:i,...t};return this._process(this.eventFromException(e,s).then(o=>this._captureEvent(o,s,r))),s.event_id}captureMessage(e,t,r,i){const s={event_id:Zn(),...r},o=KR(e)?e:String(e),a=qR(e)?this.eventFromMessage(o,t,s):this.eventFromException(e,s);return this._process(a.then(l=>this._captureEvent(l,s,i))),s.event_id}captureEvent(e,t,r){const i=Zn();if(t&&t.originalException&&LN(t.originalException))return en&&He.log(eO),i;const s={event_id:i,...t},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,a||r)),s.event_id}captureSession(e){typeof e.release!="string"?en&&He.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),qh(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>t.flush(e).then(i=>r&&i))):bl(!0)}close(e){return this.flush(e).then(t=>(this.getOptions().enabled=!1,this.emit("close"),t))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];x4(this,e,this._integrations),t||ZN(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=pre(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of t.attachments||[])r=bne(r,Bne(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const t=hre(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const i=`${e}:${t}`;en&&He.log(`Adding outcome: "${i}"`),this._outcomes[i]=(this._outcomes[i]||0)+1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){const r=this._hooks[e];r&&r.forEach(i=>i(...t))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,t=>(en&&He.error("Error while sending event:",t),t)):(en&&He.error("Transport disabled"),bl({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=Yre(this,e),ZN(this,e)}_updateSessionFromEvent(e,t){let r=!1,i=!1;const s=t.exception&&t.exception.values;if(s){i=!0;for(const l of s){const c=l.mechanism;if(c&&c.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(qh(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new go(t=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),t(!0)):(r+=i,e&&r>=e&&(clearInterval(s),t(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,t,r,i=Io()){const s=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit("preprocessEvent",e,t),e.type||i.setLastEventId(e.event_id||t.event_id),m4(s,e,t,r,this,i).then(a=>{if(a===null)return a;const l={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&l){const{traceId:u,spanId:d,parentSpanId:p,dsc:m}=l;a.contexts={trace:ri({trace_id:u,span_id:d,parent_span_id:p}),...a.contexts};const g=m||t1(u,this);a.sdkProcessingMetadata={dynamicSamplingContext:g,...a.sdkProcessingMetadata}}return a})}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then(i=>i.event_id,i=>{if(en){const s=i;s.logLevel==="log"?He.log(s.message):He.warn(s)}})}_processEvent(e,t,r){const i=this.getOptions(),{sampleRate:s}=i,o=A4(e),a=S4(e),l=e.type||"error",c=`before send for type \`${l}\``,u=typeof s>"u"?void 0:Hx(s);if(a&&typeof u=="number"&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error",e),Fx(new xa(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const d=l==="replay_event"?"replay":l,m=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,r,m).then(g=>{if(g===null)throw this.recordDroppedEvent("event_processor",d,e),new xa("An event processor returned `null`, will not send event.","log");if(t.data&&t.data.__sentry__===!0)return g;const v=$re(i,g,t);return qre(v,c)}).then(g=>{if(g===null)throw this.recordDroppedEvent("before_send",d,e),new xa(`${c} returned \`null\`, will not send event.`,"log");const y=r&&r.getSession();!o&&y&&this._updateSessionFromEvent(y,g);const v=g.transaction_info;if(o&&v&&g.transaction!==e.transaction){const _="custom";g.transaction_info={...v,source:_}}return this.sendEvent(g,t),g}).then(null,g=>{throw g instanceof xa?g:(this.captureException(g,{data:{__sentry__:!0},originalException:g}),new xa(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${g}`))})}_process(e){this._numProcessing++,e.then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([t,r])=>{const[i,s]=t.split(":");return{reason:i,category:s,quantity:r}})}}function qre(n,e){const t=`${e} must return \`null\` or a valid event.`;if(e1(n))return n.then(r=>{if(!Kh(r)&&r!==null)throw new xa(t);return r},r=>{throw new xa(`${e} rejected with ${r}`)});if(!Kh(n)&&n!==null)throw new xa(t);return n}function $re(n,e,t){const{beforeSend:r,beforeSendTransaction:i,beforeSendSpan:s}=n;if(S4(e)&&r)return r(e,t);if(A4(e)){if(e.spans&&s){const o=[];for(const a of e.spans){const l=s(a);l&&o.push(l)}e.spans=o}if(i)return i(e,t)}return e}function S4(n){return n.type===void 0}function A4(n){return n.type==="transaction"}function Qre(n,e){e.debug===!0&&(en?He.enable():Bf(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ur().update(e.initialScope);const r=new n(e);Zre(r),r.init()}function Zre(n){ur().setClient(n)}const eie=64;function tie(n,e,t=vne(n.bufferSize||eie)){let r={};const i=o=>t.drain(o);function s(o){const a=[];if(ON(o,(d,p)=>{const m=kN(p);if(QG(r,m)){const g=tO(d,p);n.recordDroppedEvent("ratelimit_backoff",m,g)}else a.push(d)}),a.length===0)return bl({});const l=jf(o[0],a),c=d=>{ON(l,(p,m)=>{const g=tO(p,m);n.recordDroppedEvent(d,kN(m),g)})},u=()=>e({body:Rne(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&en&&He.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=ZG(r,d),d),d=>{throw c("network_error"),d});return t.add(u).then(d=>d,d=>{if(d instanceof xa)return en&&He.error("Skipped sending event because buffer is full."),c("queue_overflow"),bl({});throw d})}return{send:s,flush:i}}function tO(n,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(n)?n[1]:void 0}function nie(n,e){const t=e&&e.getDsn(),r=e&&e.getOptions().tunnel;return iie(n,t)||rie(n,r)}function rie(n,e){return e?nO(n)===nO(e):!1}function iie(n,e){return e?n.includes(e.host):!1}function nO(n){return n[n.length-1]==="/"?n.slice(0,-1):n}function E4(n,e,t=[e],r="npm"){const i=n._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:t.map(s=>({name:`${r}:@sentry/${s}`,version:lf})),version:lf}),n._metadata=i}const sie=100;function Gc(n,e){const t=sn(),r=Io();if(!t)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=sie}=t.getOptions();if(s<=0)return;const a={timestamp:T_(),...n},l=i?Bf(()=>i(a,e)):a;l!==null&&(t.emit&&t.emit("beforeAddBreadcrumb",l,e),r.addBreadcrumb(l,s))}let rO;const oie="FunctionToString",iO=new WeakMap,aie=()=>({name:oie,setupOnce(){rO=Function.prototype.toString;try{Function.prototype.toString=function(...n){const e=QR(this),t=iO.has(sn())&&e!==void 0?e:this;return rO.apply(t,n)}}catch{}},setup(n){iO.set(n,!0)}}),lie=aie,cie=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],uie="InboundFilters",fie=(n={})=>({name:uie,processEvent(e,t,r){const i=r.getOptions(),s=hie(n,i);return pie(e,s)?null:e}}),die=fie;function hie(n={},e={}){return{allowUrls:[...n.allowUrls||[],...e.allowUrls||[]],denyUrls:[...n.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...n.ignoreErrors||[],...e.ignoreErrors||[],...n.disableErrorDefaults?[]:cie],ignoreTransactions:[...n.ignoreTransactions||[],...e.ignoreTransactions||[]],ignoreInternal:n.ignoreInternal!==void 0?n.ignoreInternal:!0}}function pie(n,e){return e.ignoreInternal&&xie(n)?(en&&He.warn(`Event dropped due to being internal Sentry Error.
Event: ${Zl(n)}`),!0):mie(n,e.ignoreErrors)?(en&&He.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Zl(n)}`),!0):Aie(n)?(en&&He.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Zl(n)}`),!0):gie(n,e.ignoreTransactions)?(en&&He.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Zl(n)}`),!0):_ie(n,e.denyUrls)?(en&&He.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Zl(n)}.
Url: ${Vx(n)}`),!0):vie(n,e.allowUrls)?!1:(en&&He.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Zl(n)}.
Url: ${Vx(n)}`),!0)}function mie(n,e){return n.type||!e||!e.length?!1:yie(n).some(t=>Cc(t,e))}function gie(n,e){if(n.type!=="transaction"||!e||!e.length)return!1;const t=n.transaction;return t?Cc(t,e):!1}function _ie(n,e){if(!e||!e.length)return!1;const t=Vx(n);return t?Cc(t,e):!1}function vie(n,e){if(!e||!e.length)return!0;const t=Vx(n);return t?Cc(t,e):!0}function yie(n){const e=[];n.message&&e.push(n.message);let t;try{t=n.exception.values[n.exception.values.length-1]}catch{}return t&&t.value&&(e.push(t.value),t.type&&e.push(`${t.type}: ${t.value}`)),e}function xie(n){try{return n.exception.values[0].type==="SentryError"}catch{}return!1}function Sie(n=[]){for(let e=n.length-1;e>=0;e--){const t=n[e];if(t&&t.filename!=="<anonymous>"&&t.filename!=="[native code]")return t.filename||null}return null}function Vx(n){try{let e;try{e=n.exception.values[0].stacktrace.frames}catch{}return e?Sie(e):null}catch{return en&&He.error(`Cannot extract url for event ${Zl(n)}`),null}}function Aie(n){return n.type||!n.exception||!n.exception.values||n.exception.values.length===0?!1:!n.message&&!n.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value)}const Eie="Dedupe",wie=()=>{let n;return{name:Eie,processEvent(e){if(e.type)return e;try{if(Tie(e,n))return en&&He.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return n=e}}},Mie=wie;function Tie(n,e){return e?!!(Cie(n,e)||bie(n,e)):!1}function Cie(n,e){const t=n.message,r=e.message;return!(!t&&!r||t&&!r||!t&&r||t!==r||!M4(n,e)||!w4(n,e))}function bie(n,e){const t=sO(e),r=sO(n);return!(!t||!r||t.type!==r.type||t.value!==r.value||!M4(n,e)||!w4(n,e))}function w4(n,e){let t=IN(n),r=IN(e);if(!t&&!r)return!0;if(t&&!r||!t&&r||(t=t,r=r,r.length!==t.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=t[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function M4(n,e){let t=n.fingerprint,r=e.fingerprint;if(!t&&!r)return!0;if(t&&!r||!t&&r)return!1;t=t,r=r;try{return t.join("")===r.join("")}catch{return!1}}function sO(n){return n.exception&&n.exception.values&&n.exception.values[0]}function Rie(n,e,t,r,i="auto.http.browser"){if(!n.fetchData)return;const s=Hc()&&e(n.fetchData.url);if(n.endTimestamp&&s){const g=n.fetchData.__span;if(!g)return;const y=r[g];y&&(Bie(y,n),delete r[g]);return}const o=ur(),a=sn(),{method:l,url:c}=n.fetchData,u=Pie(c),d=u?cf(u).host:void 0,p=!!Qs(),m=s&&p?La({name:`${l} ${c}`,attributes:{url:c,type:"fetch","http.method":l,"http.url":u,"server.address":d,[Lr]:i,[Qh]:"http.client"}}):new gp;if(n.fetchData.__span=m.spanContext().spanId,r[m.spanContext().spanId]=m,t(n.fetchData.url)&&a){const g=n.args[0];n.args[1]=n.args[1]||{};const y=n.args[1];y.headers=Iie(g,a,o,y,Hc()&&p?m:void 0)}return m}function Iie(n,e,t,r,i){const s=Io(),{traceId:o,spanId:a,sampled:l,dsc:c}={...s.getPropagationContext(),...t.getPropagationContext()},u=i?o4(i):ZR(o,a,l),d=qG(c||(i?Yf(i):t1(o,e))),p=r.headers||(typeof Request<"u"&&Tl(n,Request)?n.headers:void 0);if(p)if(typeof Headers<"u"&&Tl(p,Headers)){const m=new Headers(p);return m.append("sentry-trace",u),d&&m.append(iC,d),m}else if(Array.isArray(p)){const m=[...p,["sentry-trace",u]];return d&&m.push([iC,d]),m}else{const m="baggage"in p?p.baggage:void 0,g=[];return Array.isArray(m)?g.push(...m):m&&g.push(m),d&&g.push(d),{...p,"sentry-trace":u,baggage:g.length>0?g.join(","):void 0}}else return{"sentry-trace":u,baggage:d}}function Pie(n){try{return new URL(n).href}catch{return}}function Bie(n,e){if(e.response){r4(n,e.response.status);const t=e.response&&e.response.headers&&e.response.headers.get("content-length");if(t){const r=parseInt(t);r>0&&n.setAttribute("http.response_content_length",r)}}else e.error&&n.setStatus({code:qr,message:"internal_error"});n.end()}const kt=_n;let dC=0;function T4(){return dC>0}function Die(){dC++,setTimeout(()=>{dC--})}function Zh(n,e={},t){if(typeof n!="function")return n;try{const i=n.__sentry_wrapped__;if(i)return i;if(QR(n))return n}catch{return n}const r=function(){const i=Array.prototype.slice.call(arguments);try{const s=i.map(o=>Zh(o,e));return n.apply(this,s)}catch(s){throw Die(),rI(o=>{o.addEventProcessor(a=>(e.mechanism&&(nC(a,void 0),Jg(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),lI(s)}),s}};try{for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}catch{}OG(r,n),bo(n,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return n.name}})}catch{}return r}const hs=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function cI(n,e){const t=uI(n,e),r={type:e&&e.name,value:Fie(e)};return t.length&&(r.stacktrace={frames:t}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Lie(n,e,t,r){const i=sn(),s=i&&i.getOptions().normalizeDepth,o=Vie(e),a={__serialized__:JG(e,s)};if(o)return{exception:{values:[cI(n,o)]},extra:a};const l={exception:{values:[{type:ZS(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:Hie(e,{isUnhandledRejection:r})}]},extra:a};if(t){const c=uI(n,t);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function Cw(n,e){return{exception:{values:[cI(n,e)]}}}function uI(n,e){const t=e.stacktrace||e.stack||"",r=Oie(e),i=kie(e);try{return n(t,r,i)}catch{}return[]}const Nie=/Minified React error #\d+;/i;function Oie(n){return n&&Nie.test(n.message)?1:0}function kie(n){return typeof n.framesToPop=="number"?n.framesToPop:0}function Fie(n){const e=n&&n.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Uie(n,e,t,r){const i=t&&t.syntheticException||void 0,s=fI(n,e,i,r);return Jg(s),s.level="error",t&&t.event_id&&(s.event_id=t.event_id),bl(s)}function zie(n,e,t="info",r,i){const s=r&&r.syntheticException||void 0,o=hC(n,e,s,i);return o.level=t,r&&r.event_id&&(o.event_id=r.event_id),bl(o)}function fI(n,e,t,r,i){let s;if(PG(e)&&e.error)return Cw(n,e.error);if(AN(e)||Dte(e)){const o=e;if("stack"in e)s=Cw(n,e);else{const a=o.name||(AN(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=hC(n,l,t,r),nC(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return YR(e)?Cw(n,e):Kh(e)||ZS(e)?(s=Lie(n,e,t,i),Jg(s,{synthetic:!0}),s):(s=hC(n,e,t,r),nC(s,`${e}`),Jg(s,{synthetic:!0}),s)}function hC(n,e,t,r){const i={};if(r&&t){const s=uI(n,t);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}if(KR(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return i.logentry={message:s,params:o},i}return i.message=e,i}function Hie(n,{isUnhandledRejection:e}){const t=$te(n),r=e?"promise rejection":"exception";return PG(n)?`Event \`ErrorEvent\` captured as ${r} with message \`${n.message}\``:ZS(n)?`Event \`${Gie(n)}\` (type=${n.type}) captured as ${r}`:`Object captured as ${r} with keys: ${t}`}function Gie(n){try{const e=Object.getPrototypeOf(n);return e?e.constructor.name:void 0}catch{}}function Vie(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const t=n[e];if(t instanceof Error)return t}}function Wie(n,{metadata:e,tunnel:t,dsn:r}){const i={event_id:n.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!t&&!!r&&{dsn:M_(r)}},s=Xie(n);return jf(i,[s])}function Xie(n){return[{type:"user_report"},n]}class jie extends Kre{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e},r=kt.SENTRY_SDK_SOURCE||une();E4(t,"browser",["browser"],r),super(t),t.sendClientReports&&kt.document&&kt.document.addEventListener("visibilitychange",()=>{kt.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,t){return Uie(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return zie(this._options.stackParser,e,t,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){hs&&He.warn("SDK not enabled, will not capture user feedback.");return}const t=Wie(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){hs&&He.log("No outcomes to send");return}if(!this._dsn){hs&&He.log("No dsn provided, will not send outcomes");return}hs&&He.log("Sending outcomes:",e);const t=Lne(e,this._options.tunnel&&M_(this._dsn));this.sendEnvelope(t)}}const Hs=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Jie=(n,e)=>n>e[1]?"poor":n>e[0]?"needs-improvement":"good",_p=(n,e,t,r)=>{let i,s;return o=>{e.value>=0&&(o||r)&&(s=e.value-(i||0),(s||i===void 0)&&(i=e.value,e.delta=s,e.rating=Jie(e.value,t),n(e)))}},Ft=_n,Yie=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,n1=()=>Ft.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],r1=()=>{const n=n1();return n&&n.activationStart||0},vp=(n,e)=>{const t=n1();let r="navigate";return t&&(Ft.document&&Ft.document.prerendering||r1()>0?r="prerender":Ft.document&&Ft.document.wasDiscarded?r="restore":t.type&&(r=t.type.replace(/_/g,"-"))),{name:n,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:Yie(),navigationType:r}},Kf=(n,e,t)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(n)){const r=new PerformanceObserver(i=>{Promise.resolve().then(()=>{e(i.getEntries())})});return r.observe(Object.assign({type:n,buffered:!0},t||{})),r}}catch{}},i1=n=>{const e=t=>{(t.type==="pagehide"||Ft.document&&Ft.document.visibilityState==="hidden")&&n(t)};Ft.document&&(addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},dI=n=>{let e=!1;return t=>{e||(n(t),e=!0)}};let Kg=-1;const Kie=()=>{Kg=Ft.document.visibilityState==="hidden"&&!Ft.document.prerendering?0:1/0},Wx=n=>{Ft.document.visibilityState==="hidden"&&Kg>-1&&(Kg=n.type==="visibilitychange"?n.timeStamp:0,removeEventListener("visibilitychange",Wx,!0),removeEventListener("prerenderingchange",Wx,!0))},qie=()=>{addEventListener("visibilitychange",Wx,!0),addEventListener("prerenderingchange",Wx,!0)},s1=()=>(Ft.document&&Kg<0&&(Kie(),qie()),{get firstHiddenTime(){return Kg}}),b_=n=>{Ft.document&&Ft.document.prerendering?addEventListener("prerenderingchange",()=>n(),!0):n()},$ie=[1800,3e3],Qie=(n,e={})=>{b_(()=>{const t=s1(),r=vp("FCP");let i;const o=Kf("paint",a=>{a.forEach(l=>{l.name==="first-contentful-paint"&&(o.disconnect(),l.startTime<t.firstHiddenTime&&(r.value=Math.max(l.startTime-r1(),0),r.entries.push(l),i(!0)))})});o&&(i=_p(n,r,$ie,e.reportAllChanges))})},Zie=[.1,.25],ese=(n,e={})=>{Qie(dI(()=>{const t=vp("CLS",0);let r,i=0,s=[];const o=l=>{l.forEach(c=>{if(!c.hadRecentInput){const u=s[0],d=s[s.length-1];i&&u&&d&&c.startTime-d.startTime<1e3&&c.startTime-u.startTime<5e3?(i+=c.value,s.push(c)):(i=c.value,s=[c])}}),i>t.value&&(t.value=i,t.entries=s,r())},a=Kf("layout-shift",o);a&&(r=_p(n,t,Zie,e.reportAllChanges),i1(()=>{o(a.takeRecords()),r(!0)}),setTimeout(r,0))}))},tse=[100,300],nse=(n,e={})=>{b_(()=>{const t=s1(),r=vp("FID");let i;const s=l=>{l.startTime<t.firstHiddenTime&&(r.value=l.processingStart-l.startTime,r.entries.push(l),i(!0))},o=l=>{l.forEach(s)},a=Kf("first-input",o);i=_p(n,r,tse,e.reportAllChanges),a&&i1(dI(()=>{o(a.takeRecords()),a.disconnect()}))})};let C4=0,bw=1/0,sy=0;const rse=n=>{n.forEach(e=>{e.interactionId&&(bw=Math.min(bw,e.interactionId),sy=Math.max(sy,e.interactionId),C4=sy?(sy-bw)/7+1:0)})};let pC;const ise=()=>pC?C4:performance.interactionCount||0,sse=()=>{"interactionCount"in performance||pC||(pC=Kf("event",rse,{type:"event",buffered:!0,durationThreshold:0}))},ose=[200,500],ase=0,b4=()=>ise()-ase,oO=10,al=[],Rw={},aO=n=>{const e=al[al.length-1],t=Rw[n.interactionId];if(t||al.length<oO||e&&n.duration>e.latency){if(t)t.entries.push(n),t.latency=Math.max(t.latency,n.duration);else{const r={id:n.interactionId,latency:n.duration,entries:[n]};Rw[r.id]=r,al.push(r)}al.sort((r,i)=>i.latency-r.latency),al.splice(oO).forEach(r=>{delete Rw[r.id]})}},lse=()=>{const n=Math.min(al.length-1,Math.floor(b4()/50));return al[n]},cse=(n,e={})=>{b_(()=>{sse();const t=vp("INP");let r;const i=o=>{o.forEach(l=>{l.interactionId&&aO(l),l.entryType==="first-input"&&!al.some(u=>u.entries.some(d=>l.duration===d.duration&&l.startTime===d.startTime))&&aO(l)});const a=lse();a&&a.latency!==t.value&&(t.value=a.latency,t.entries=a.entries,r())},s=Kf("event",i,{durationThreshold:e.durationThreshold!=null?e.durationThreshold:40});r=_p(n,t,ose,e.reportAllChanges),s&&("PerformanceEventTiming"in Ft&&"interactionId"in PerformanceEventTiming.prototype&&s.observe({type:"first-input",buffered:!0}),i1(()=>{i(s.takeRecords()),t.value<0&&b4()>0&&(t.value=0,t.entries=[]),r(!0)}))})},use=[2500,4e3],lO={},fse=(n,e={})=>{b_(()=>{const t=s1(),r=vp("LCP");let i;const s=a=>{const l=a[a.length-1];l&&l.startTime<t.firstHiddenTime&&(r.value=Math.max(l.startTime-r1(),0),r.entries=[l],i())},o=Kf("largest-contentful-paint",s);if(o){i=_p(n,r,use,e.reportAllChanges);const a=dI(()=>{lO[r.id]||(s(o.takeRecords()),o.disconnect(),lO[r.id]=!0,i(!0))});["keydown","click"].forEach(l=>{Ft.document&&addEventListener(l,()=>setTimeout(a,0),!0)}),i1(a)}})},dse=[800,1800],mC=n=>{Ft.document&&Ft.document.prerendering?b_(()=>mC(n)):Ft.document&&Ft.document.readyState!=="complete"?addEventListener("load",()=>mC(n),!0):setTimeout(n,0)},hse=(n,e={})=>{const t=vp("TTFB"),r=_p(n,t,dse,e.reportAllChanges);mC(()=>{const i=n1();if(i){const s=i.responseStart;if(s<=0||s>performance.now())return;t.value=Math.max(s-r1(),0),t.entries=[i],r(!0)}})},eg={},Xx={};let R4,I4,P4,B4,D4;function L4(n,e=!1){return R_("cls",n,mse,R4,e)}function N4(n,e=!1){return R_("lcp",n,_se,P4,e)}function O4(n){return R_("fid",n,gse,I4)}function pse(n){return R_("ttfb",n,vse,B4)}function k4(n){return R_("inp",n,yse,D4)}function ep(n,e){return F4(n,e),Xx[n]||(xse(n),Xx[n]=!0),U4(n,e)}function yp(n,e){const t=eg[n];if(!(!t||!t.length))for(const r of t)try{r(e)}catch(i){Hs&&He.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${Cl(r)}
Error:`,i)}}function mse(){return ese(n=>{yp("cls",{metric:n}),R4=n},{reportAllChanges:!0})}function gse(){return nse(n=>{yp("fid",{metric:n}),I4=n})}function _se(){return fse(n=>{yp("lcp",{metric:n}),P4=n},{reportAllChanges:!0})}function vse(){return hse(n=>{yp("ttfb",{metric:n}),B4=n})}function yse(){return cse(n=>{yp("inp",{metric:n}),D4=n})}function R_(n,e,t,r,i=!1){F4(n,e);let s;return Xx[n]||(s=t(),Xx[n]=!0),r&&e({metric:r}),U4(n,e,i?s:void 0)}function xse(n){const e={};n==="event"&&(e.durationThreshold=0),Kf(n,t=>{yp(n,{entries:t})},e)}function F4(n,e){eg[n]=eg[n]||[],eg[n].push(e)}function U4(n,e,t){return()=>{t&&t();const r=eg[n];if(!r)return;const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}function Sse(n){return"duration"in n}function Iw(n){return typeof n=="number"&&isFinite(n)}function tp(n,e,t,{...r}){const i=Cn(n).start_timestamp;return i&&i>e&&typeof n.updateStartTime=="function"&&n.updateStartTime(e),Gx(n,()=>{const s=La({startTime:e,...r});return s&&s.end(t),s})}function hI(){return Ft&&Ft.addEventListener&&Ft.performance}function zr(n){return n/1e3}const Ase=2147483647;let cO=0,Qr={},ha,tg;function Ese(){const n=hI();if(n&&Ks){n.mark&&Ft.performance.mark("sentry-tracing-init");const e=bse(),t=Tse(),r=Cse(),i=Rse();return()=>{e(),t(),r(),i()}}return()=>{}}function wse(){ep("longtask",({entries:n})=>{for(const e of n){if(!Qs())return;const t=zr(Ks+e.startTime),r=zr(e.duration),i=La({name:"Main UI thread blocked",op:"ui.long-task",startTime:t,attributes:{[Lr]:"auto.ui.browser.metrics"}});i&&i.end(t+r)}})}function Mse(){ep("event",({entries:n})=>{for(const e of n){if(!Qs())return;if(e.name==="click"){const t=zr(Ks+e.startTime),r=zr(e.duration),i={name:zc(e.target),op:`ui.interaction.${e.name}`,startTime:t,attributes:{[Lr]:"auto.ui.browser.metrics"}},s=LG(e.target);s&&(i.attributes["ui.component_name"]=s);const o=La(i);o&&o.end(t+r)}}})}function Tse(){return L4(({metric:n})=>{const e=n.entries[n.entries.length-1];e&&(Hs&&He.log("[Measurements] Adding CLS"),Qr.cls={value:n.value,unit:""},tg=e)},!0)}function Cse(){return N4(({metric:n})=>{const e=n.entries[n.entries.length-1];e&&(Hs&&He.log("[Measurements] Adding LCP"),Qr.lcp={value:n.value,unit:"millisecond"},ha=e)},!0)}function bse(){return O4(({metric:n})=>{const e=n.entries[n.entries.length-1];if(!e)return;const t=zr(Ks),r=zr(e.startTime);Hs&&He.log("[Measurements] Adding FID"),Qr.fid={value:n.value,unit:"millisecond"},Qr["mark.fid"]={value:t+r,unit:"second"}})}function Rse(){return pse(({metric:n})=>{n.entries[n.entries.length-1]&&(Hs&&He.log("[Measurements] Adding TTFB"),Qr.ttfb={value:n.value,unit:"millisecond"})})}function Ise(n){const e=hI();if(!e||!Ft.performance.getEntries||!Ks)return;Hs&&He.log("[Tracing] Adding & adjusting spans using Performance API");const t=zr(Ks),r=e.getEntries(),{op:i,start_timestamp:s}=Cn(n);if(r.slice(cO).forEach(o=>{const a=zr(o.startTime),l=zr(o.duration);if(!(i==="navigation"&&s&&t+a<s))switch(o.entryType){case"navigation":{Bse(n,o,t);break}case"mark":case"paint":case"measure":{Pse(n,o,a,l,t);const c=s1(),u=o.startTime<c.firstHiddenTime;o.name==="first-paint"&&u&&(Hs&&He.log("[Measurements] Adding FP"),Qr.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&u&&(Hs&&He.log("[Measurements] Adding FCP"),Qr.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{Lse(n,o,o.name,a,l,t);break}}}),cO=Math.max(r.length-1,0),Nse(n),i==="pageload"){kse(Qr),["fcp","fp","lcp"].forEach(a=>{const l=Qr[a];if(!l||!s||t>=s)return;const c=l.value,u=t+zr(c),d=Math.abs((u-s)*1e3),p=d-c;Hs&&He.log(`[Measurements] Normalized ${a} from ${c} to ${d} (${p})`),l.value=d});const o=Qr["mark.fid"];o&&Qr.fid&&(tp(n,o.value,o.value+zr(Qr.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Lr]:"auto.ui.browser.metrics"}}),delete Qr["mark.fid"]),"fcp"in Qr||delete Qr.cls,Object.entries(Qr).forEach(([a,l])=>{gre(a,l.value,l.unit)}),Ose(n)}ha=void 0,tg=void 0,Qr={}}function Pse(n,e,t,r,i){const s=i+t,o=s+r;return tp(n,s,o,{name:e.name,op:e.entryType,attributes:{[Lr]:"auto.resource.browser.metrics"}}),s}function Bse(n,e,t){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{oy(n,e,r,t)}),oy(n,e,"secureConnection",t,"TLS/SSL","connectEnd"),oy(n,e,"fetch",t,"cache","domainLookupStart"),oy(n,e,"domainLookup",t,"DNS"),Dse(n,e,t)}function oy(n,e,t,r,i,s){const o=s?e[s]:e[`${t}End`],a=e[`${t}Start`];!a||!o||tp(n,r+zr(a),r+zr(o),{op:"browser",name:i||t,attributes:{[Lr]:"auto.ui.browser.metrics"}})}function Dse(n,e,t){e.responseEnd&&(tp(n,t+zr(e.requestStart),t+zr(e.responseEnd),{op:"browser",name:"request",attributes:{[Lr]:"auto.ui.browser.metrics"}}),tp(n,t+zr(e.responseStart),t+zr(e.responseEnd),{op:"browser",name:"response",attributes:{[Lr]:"auto.ui.browser.metrics"}}))}function Lse(n,e,t,r,i,s){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o=cf(t),a={[Lr]:"auto.resource.browser.metrics"};Pw(a,e,"transferSize","http.response_transfer_size"),Pw(a,e,"encodedBodySize","http.response_content_length"),Pw(a,e,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in e&&(a["resource.render_blocking_status"]=e.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=t.includes(Ft.location.origin);const l=s+r,c=l+i;tp(n,l,c,{name:t.replace(Ft.location.origin,""),op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",attributes:a})}function Nse(n){const e=Ft.navigator;if(!e)return;const t=e.connection;t&&(t.effectiveType&&n.setAttribute("effectiveConnectionType",t.effectiveType),t.type&&n.setAttribute("connectionType",t.type),Iw(t.rtt)&&(Qr["connection.rtt"]={value:t.rtt,unit:"millisecond"})),Iw(e.deviceMemory)&&n.setAttribute("deviceMemory",`${e.deviceMemory} GB`),Iw(e.hardwareConcurrency)&&n.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function Ose(n){ha&&(Hs&&He.log("[Measurements] Adding LCP Data"),ha.element&&n.setAttribute("lcp.element",zc(ha.element)),ha.id&&n.setAttribute("lcp.id",ha.id),ha.url&&n.setAttribute("lcp.url",ha.url.trim().slice(0,200)),n.setAttribute("lcp.size",ha.size)),tg&&tg.sources&&(Hs&&He.log("[Measurements] Adding CLS Data"),tg.sources.forEach((e,t)=>n.setAttribute(`cls.source.${t+1}`,zc(e.node))))}function Pw(n,e,t,r){const i=e[t];i!=null&&i<Ase&&(n[r]=i)}function kse(n){const e=n1();if(!e)return;const{responseStart:t,requestStart:r}=e;r<=t&&(Hs&&He.log("[Measurements] Adding TTFB Request Time"),n["ttfb.requestTime"]={value:t-r,unit:"millisecond"})}const Fse=1e3;let uO,gC,_C;function z4(n){const e="dom";Wf(e,n),Xf(e,Use)}function Use(){if(!Ft.document)return;const n=qo.bind(null,"dom"),e=fO(n,!0);Ft.document.addEventListener("click",e,!1),Ft.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(t=>{const r=Ft[t]&&Ft[t].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(ni(r,"addEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},u=c[s]=c[s]||{refCount:0};if(!u.handler){const d=fO(n);u.handler=d,i.call(this,s,d,a)}u.refCount++}catch{}return i.call(this,s,o,a)}}),ni(r,"removeEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__||{},u=c[s];u&&(u.refCount--,u.refCount<=0&&(i.call(this,s,u.handler,a),u.handler=void 0,delete c[s]),Object.keys(c).length===0&&delete l.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,o,a)}}))})}function zse(n){if(n.type!==gC)return!1;try{if(!n.target||n.target._sentryId!==_C)return!1}catch{}return!0}function Hse(n,e){return n!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}function fO(n,e=!1){return t=>{if(!t||t._sentryCaptured)return;const r=Gse(t);if(Hse(t.type,r))return;bo(t,"_sentryCaptured",!0),r&&!r._sentryId&&bo(r,"_sentryId",Zn());const i=t.type==="keypress"?"input":t.type;zse(t)||(n({event:t,name:i,global:e}),gC=t.type,_C=r?r._sentryId:void 0),clearTimeout(uO),uO=Ft.setTimeout(()=>{_C=void 0,gC=void 0},Fse)}}function Gse(n){try{return n.target}catch{return null}}let ay;function o1(n){const e="history";Wf(e,n),Xf(e,Vse)}function Vse(){if(!Une())return;const n=Ft.onpopstate;Ft.onpopstate=function(...t){const r=Ft.location.href,i=ay;if(ay=r,qo("history",{from:i,to:r}),n)try{return n.apply(this,t)}catch{}};function e(t){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=ay,o=String(i);ay=o,qo("history",{from:s,to:o})}return t.apply(this,r)}}ni(Ft.history,"pushState",e),ni(Ft.history,"replaceState",e)}const jy={};function H4(n){const e=jy[n];if(e)return e;let t=Ft[n];if(eC(t))return jy[n]=t.bind(Ft);const r=Ft.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const s=i.contentWindow;s&&s[n]&&(t=s[n]),r.head.removeChild(i)}catch(i){Hs&&He.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,i)}return t&&(jy[n]=t.bind(Ft))}function dO(n){jy[n]=void 0}function Nf(...n){return H4("setTimeout")(...n)}const Xu="__sentry_xhr_v3__";function G4(n){const e="xhr";Wf(e,n),Xf(e,Wse)}function Wse(){if(!Ft.XMLHttpRequest)return;const n=XMLHttpRequest.prototype;ni(n,"open",function(e){return function(...t){const r=Bi()*1e3,i=vl(t[0])?t[0].toUpperCase():void 0,s=Xse(t[1]);if(!i||!s)return e.apply(this,t);this[Xu]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[Xu];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const l={endTimestamp:Bi()*1e3,startTimestamp:r,xhr:this};qo("xhr",l)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?ni(this,"onreadystatechange",function(a){return function(...l){return o(),a.apply(this,l)}}):this.addEventListener("readystatechange",o),ni(this,"setRequestHeader",function(a){return function(...l){const[c,u]=l,d=this[Xu];return d&&vl(c)&&vl(u)&&(d.request_headers[c.toLowerCase()]=u),a.apply(this,l)}}),e.apply(this,t)}}),ni(n,"send",function(e){return function(...t){const r=this[Xu];if(!r)return e.apply(this,t);t[0]!==void 0&&(r.body=t[0]);const i={startTimestamp:Bi()*1e3,xhr:this};return qo("xhr",i),e.apply(this,t)}})}function Xse(n){if(vl(n))return n;try{return n.toString()}catch{}}const Bw=[],Jy=new Map;function jse(){if(hI()&&Ks){const e=Jse();return()=>{e()}}return()=>{}}const hO={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Jse(){return k4(({metric:n})=>{const e=sn();if(!e||n.value==null)return;const t=n.entries.find(I=>I.duration===n.value&&hO[I.name]);if(!t)return;const{interactionId:r}=t,i=hO[t.name],s=e.getOptions(),o=zr(Ks+t.startTime),a=zr(n.value),l=ur(),c=Qs(),u=c?es(c):void 0,p=(r!=null?Jy.get(r):void 0)||(u?Cn(u).description:l.getScopeData().transactionName),m=l.getUser(),g=e.getIntegrationByName("Replay"),y=g&&g.getReplayId(),v=m!==void 0?m.email||m.id||m.ip_address:void 0;let _;try{_=l.getScopeData().contexts.profile.profile_id}catch{}const S=zc(t.target),A=ri({release:s.release,environment:s.environment,transaction:p,[t4]:n.value,[Lr]:"auto.http.browser.inp",user:v||void 0,profile_id:_||void 0,replay_id:y||void 0}),w=La({name:S,op:`ui.interaction.${i}`,attributes:A,startTime:o,experimental:{standalone:!0}});w.addEvent("inp",{[iI]:"millisecond",[sI]:n.value}),w.end(o+a)})}function Yse(n){const e=({entries:t})=>{t.forEach(r=>{if(!Sse(r)||!n.name)return;const i=r.interactionId;if(i!=null&&!Jy.has(i)){if(Bw.length>10){const s=Bw.shift();Jy.delete(s)}Bw.push(i),Jy.set(i,n.name)}})};ep("event",e),ep("first-input",e)}function Kse(n,e=H4("fetch")){let t=0,r=0;function i(s){const o=s.body.length;t+=o,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:n.headers,keepalive:t<=6e4&&r<15,...n.fetchOptions};if(!e)return dO("fetch"),Fx("No fetch implementation available");try{return e(n.url,a).then(l=>(t-=o,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return dO("fetch"),t-=o,r--,Fx(l)}}return tie(n,i)}const qse=30,$se=50;function vC(n,e,t,r){const i={filename:n,function:e==="<anonymous>"?Df:e,in_app:!0};return t!==void 0&&(i.lineno=t),r!==void 0&&(i.colno=r),i}const Qse=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Zse=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,eoe=/\((\S*)(?::(\d+))(?::(\d+))\)/,toe=n=>{const e=Qse.exec(n);if(e){const[,r,i,s]=e;return vC(r,Df,+i,+s)}const t=Zse.exec(n);if(t){if(t[2]&&t[2].indexOf("eval")===0){const o=eoe.exec(t[2]);o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3])}const[i,s]=V4(t[1]||Df,t[2]);return vC(s,i,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},noe=[qse,toe],roe=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ioe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,soe=n=>{const e=roe.exec(n);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=ioe.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||Df;return[i,r]=V4(i,r),vC(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},ooe=[$se,soe],aoe=[noe,ooe],loe=UG(...aoe),V4=(n,e)=>{const t=n.indexOf("safari-extension")!==-1,r=n.indexOf("safari-web-extension")!==-1;return t||r?[n.indexOf("@")!==-1?n.split("@")[0]:Df,t?`safari-extension:${e}`:`safari-web-extension:${e}`]:[n,e]},ly=1024,coe="Breadcrumbs",uoe=(n={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...n};return{name:coe,setup(t){e.console&&tne(poe(t)),e.dom&&z4(hoe(t,e.dom)),e.xhr&&G4(moe(t)),e.fetch&&GG(goe(t)),e.history&&o1(_oe(t)),e.sentry&&t.on("beforeSendEvent",doe(t))}}},foe=uoe;function doe(n){return function(t){sn()===n&&Gc({category:`sentry.${t.type==="transaction"?"transaction":"event"}`,event_id:t.event_id,level:t.level,message:Zl(t)},{event:t})}}function hoe(n,e){return function(r){if(sn()!==n)return;let i,s,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>ly&&(hs&&He.warn(`\`dom.maxStringLength\` cannot exceed ${ly}, but a value of ${a} was configured. Sentry will use ${ly} instead.`),a=ly),typeof o=="string"&&(o=[o]);try{const c=r.event,u=voe(c)?c.target:c;i=zc(u,{keyAttrs:o,maxStringLength:a}),s=LG(u)}catch{i="<unknown>"}if(i.length===0)return;const l={category:`ui.${r.name}`,message:i};s&&(l.data={"ui.component_name":s}),Gc(l,{event:r.event,name:r.name,global:r.global})}}function poe(n){return function(t){if(sn()!==n)return;const r={category:"console",data:{arguments:t.args,logger:"console"},level:xne(t.level),message:EN(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)r.message=`Assertion failed: ${EN(t.args.slice(1)," ")||"console.assert"}`,r.data.arguments=t.args.slice(1);else return;Gc(r,{input:t.args,level:t.level})}}function moe(n){return function(t){if(sn()!==n)return;const{startTimestamp:r,endTimestamp:i}=t,s=t.xhr[Xu];if(!r||!i||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},d={xhr:t.xhr,input:c,startTimestamp:r,endTimestamp:i};Gc({category:"xhr",data:u,type:"http"},d)}}function goe(n){return function(t){if(sn()!==n)return;const{startTimestamp:r,endTimestamp:i}=t;if(i&&!(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"))if(t.error){const s=t.fetchData,o={data:t.error,input:t.args,startTimestamp:r,endTimestamp:i};Gc({category:"fetch",data:s,level:"error",type:"http"},o)}else{const s=t.response,o={...t.fetchData,status_code:s&&s.status},a={input:t.args,response:s,startTimestamp:r,endTimestamp:i};Gc({category:"fetch",data:o,type:"http"},a)}}}function _oe(n){return function(t){if(sn()!==n)return;let r=t.from,i=t.to;const s=cf(kt.location.href);let o=r?cf(r):void 0;const a=cf(i);(!o||!o.path)&&(o=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),Gc({category:"navigation",data:{from:r,to:i}})}}function voe(n){return!!n&&!!n.target}const yoe=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],xoe="BrowserApiErrors",Soe=(n={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...n};return{name:xoe,setupOnce(){e.setTimeout&&ni(kt,"setTimeout",pO),e.setInterval&&ni(kt,"setInterval",pO),e.requestAnimationFrame&&ni(kt,"requestAnimationFrame",Eoe),e.XMLHttpRequest&&"XMLHttpRequest"in kt&&ni(XMLHttpRequest.prototype,"send",woe);const t=e.eventTarget;t&&(Array.isArray(t)?t:yoe).forEach(Moe)}}},Aoe=Soe;function pO(n){return function(...e){const t=e[0];return e[0]=Zh(t,{mechanism:{data:{function:Cl(n)},handled:!1,type:"instrument"}}),n.apply(this,e)}}function Eoe(n){return function(e){return n.apply(this,[Zh(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Cl(n)},handled:!1,type:"instrument"}})])}}function woe(n){return function(...e){const t=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in t&&typeof t[i]=="function"&&ni(t,i,function(s){const o={mechanism:{data:{function:i,handler:Cl(s)},handled:!1,type:"instrument"}},a=QR(s);return a&&(o.mechanism.data.handler=Cl(a)),Zh(s,o)})}),n.apply(this,e)}}function Moe(n){const e=kt,t=e[n]&&e[n].prototype;!t||!t.hasOwnProperty||!t.hasOwnProperty("addEventListener")||(ni(t,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=Zh(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Cl(s),target:n},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,Zh(s,{mechanism:{data:{function:"addEventListener",handler:Cl(s),target:n},handled:!1,type:"instrument"}}),o])}}),ni(t,"removeEventListener",function(r){return function(i,s,o){const a=s;try{const l=a&&a.__sentry_wrapped__;l&&r.call(this,i,l,o)}catch{}return r.call(this,i,a,o)}}))}const Toe="GlobalHandlers",Coe=(n={})=>{const e={onerror:!0,onunhandledrejection:!0,...n};return{name:Toe,setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(Roe(t),mO("onerror")),e.onunhandledrejection&&(Ioe(t),mO("onunhandledrejection"))}}},boe=Coe;function Roe(n){VG(e=>{const{stackParser:t,attachStacktrace:r}=W4();if(sn()!==n||T4())return;const{msg:i,url:s,line:o,column:a,error:l}=e,c=Doe(fI(t,l||i,void 0,r,!1),s,o,a);c.level="error",g4(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function Ioe(n){WG(e=>{const{stackParser:t,attachStacktrace:r}=W4();if(sn()!==n||T4())return;const i=Poe(e),s=qR(i)?Boe(i):fI(t,i,void 0,r,!0);s.level="error",g4(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Poe(n){if(qR(n))return n;try{if("reason"in n)return n.reason;if("detail"in n&&"reason"in n.detail)return n.detail.reason}catch{}return n}function Boe(n){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(n)}`}]}}}function Doe(n,e,t,r){const i=n.exception=n.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(t,10))?void 0:t,d=vl(e)&&e.length>0?e:DG();return l.length===0&&l.push({colno:c,filename:d,function:Df,in_app:!0,lineno:u}),n}function mO(n){hs&&He.log(`Global Handler attached: ${n}`)}function W4(){const n=sn();return n&&n.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Loe=()=>({name:"HttpContext",preprocessEvent(n){if(!kt.navigator&&!kt.location&&!kt.document)return;const e=n.request&&n.request.url||kt.location&&kt.location.href,{referrer:t}=kt.document||{},{userAgent:r}=kt.navigator||{},i={...n.request&&n.request.headers,...t&&{Referer:t},...r&&{"User-Agent":r}},s={...n.request,...e&&{url:e},headers:i};n.request=s}}),Noe="cause",Ooe=5,koe="LinkedErrors",Foe=(n={})=>{const e=n.limit||Ooe,t=n.key||Noe;return{name:koe,preprocessEvent(r,i,s){const o=s.getOptions();Fte(cI,o.stackParser,o.maxValueLength,t,e,r,i)}}},Uoe=Foe;function zoe(n){return[die(),lie(),Aoe(),foe(),boe(),Uoe(),Mie(),Loe()]}function Hoe(n={}){return{...{defaultIntegrations:zoe(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:kt.SENTRY_RELEASE&&kt.SENTRY_RELEASE.id?kt.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0},...n}}function Goe(){const n=kt,e=n.chrome?"chrome":"browser",t=n[e],r=t&&t.runtime&&t.runtime.id,i=kt.location&&kt.location.href||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:"],o=!!r&&kt===kt.top&&s.some(a=>i.startsWith(`${a}//`));return!!r&&!o}function Voe(n={}){const e=Hoe(n);if(Goe()){Bf(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}hs&&(zG()||He.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const t={...e,stackParser:Zte(e.stackParser||loe),integrations:Jre(e),transport:e.transport||Kse};Qre(jie,t),e.autoSessionTracking&&Woe()}function Woe(){if(typeof kt.document>"u"){hs&&He.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}qN({ignoreDuration:!0}),$N(),o1(({from:n,to:e})=>{n!==void 0&&n!==e&&(qN({ignoreDuration:!0}),$N())})}const zn=_n,pI="sentryReplaySession",Xoe="replay_event",mI="Unable to send Replay",joe=3e5,Joe=9e5,Yoe=5e3,Koe=5500,qoe=6e4,$oe=5e3,Qoe=3,gO=15e4,cy=5e3,Zoe=3e3,eae=300,gI=2e7,tae=4999,nae=15e3,_O=36e5;function rae(n,e){return n??e()}function jx(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}var Ur;(function(n){n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment"})(Ur||(Ur={}));function iae(n){return n.nodeType===n.ELEMENT_NODE}function ng(n){const e=jx([n,"optionalAccess",t=>t.host]);return jx([e,"optionalAccess",t=>t.shadowRoot])===n}function rg(n){return Object.prototype.toString.call(n)==="[object ShadowRoot]"}function sae(n){return n.includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n}function oae(n){const{cssText:e}=n;if(e.split('"').length<3)return e;const t=["@import",`url(${JSON.stringify(n.href)})`];return n.layerName===""?t.push("layer"):n.layerName&&t.push(`layer(${n.layerName})`),n.supportsText&&t.push(`supports(${n.supportsText})`),n.media.length&&t.push(n.media.mediaText),t.join(" ")+";"}function Jx(n){try{const e=n.rules||n.cssRules;return e?sae(Array.from(e,X4).join("")):null}catch{return null}}function X4(n){let e;if(lae(n))try{e=Jx(n.styleSheet)||oae(n)}catch{}else if(cae(n)&&n.selectorText.includes(":"))return aae(n.cssText);return e||n.cssText}function aae(n){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return n.replace(e,"$1\\$2")}function lae(n){return"styleSheet"in n}function cae(n){return"selectorText"in n}class j4{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=jx([this,"access",r=>r.getMeta,"call",r=>r(e),"optionalAccess",r=>r.id]);return rae(t,()=>-1)}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function uae(){return new j4}function a1({maskInputOptions:n,tagName:e,type:t}){return e==="OPTION"&&(e="SELECT"),!!(n[e.toLowerCase()]||t&&n[t]||t==="password"||e==="INPUT"&&!t&&n.text)}function qg({isMasked:n,element:e,value:t,maskInputFn:r}){let i=t||"";return n?(r&&(i=r(i,e)),"*".repeat(i.length)):i}function np(n){return n.toLowerCase()}function yC(n){return n.toUpperCase()}const vO="__rrweb_original__";function fae(n){const e=n.getContext("2d");if(!e)return!0;const t=50;for(let r=0;r<n.width;r+=t)for(let i=0;i<n.height;i+=t){const s=e.getImageData,o=vO in s?s[vO]:s;if(new Uint32Array(o.call(e,r,i,Math.min(t,n.width-r),Math.min(t,n.height-i)).data.buffer).some(l=>l!==0))return!1}return!0}function _I(n){const e=n.type;return n.hasAttribute("data-rr-is-password")?"password":e?np(e):null}function Yx(n,e,t){return e==="INPUT"&&(t==="radio"||t==="checkbox")?n.getAttribute("value")||"":n.value}let dae=1;const hae=new RegExp("[^a-z0-9-_:]"),$g=-2;function vI(){return dae++}function pae(n){if(n instanceof HTMLFormElement)return"form";const e=np(n.tagName);return hae.test(e)?"div":e}function mae(n){let e="";return n.indexOf("//")>-1?e=n.split("/").slice(0,3).join("/"):e=n.split("/")[0],e=e.split("?")[0],e}let Nd,yO;const gae=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,_ae=/^(?:[a-z+]+:)?\/\//i,vae=/^www\..*/i,yae=/^(data:)([^,]*),(.*)/i;function Kx(n,e){return(n||"").replace(gae,(t,r,i,s,o,a)=>{const l=i||o||a,c=r||s||"";if(!l)return t;if(_ae.test(l)||vae.test(l))return`url(${c}${l}${c})`;if(yae.test(l))return`url(${c}${l}${c})`;if(l[0]==="/")return`url(${c}${mae(e)+l}${c})`;const u=e.split("/"),d=l.split("/");u.pop();for(const p of d)p!=="."&&(p===".."?u.pop():u.push(p));return`url(${c}${u.join("/")}${c})`})}const xae=/^[^ \t\n\r\u000c]+/,Sae=/^[, \t\n\r\u000c]+/;function Aae(n,e){if(e.trim()==="")return e;let t=0;function r(s){let o;const a=s.exec(e.substring(t));return a?(o=a[0],t+=o.length,o):""}const i=[];for(;r(Sae),!(t>=e.length);){let s=r(xae);if(s.slice(-1)===",")s=oh(n,s.substring(0,s.length-1)),i.push(s);else{let o="";s=oh(n,s);let a=!1;for(;;){const l=e.charAt(t);if(l===""){i.push((s+o).trim());break}else if(a)l===")"&&(a=!1);else if(l===","){t+=1,i.push((s+o).trim());break}else l==="("&&(a=!0);o+=l,t+=1}}}return i.join(", ")}function oh(n,e){if(!e||e.trim()==="")return e;const t=n.createElement("a");return t.href=e,t.href}function Eae(n){return!!(n.tagName==="svg"||n.ownerSVGElement)}function yI(){const n=document.createElement("a");return n.href="",n.href}function J4(n,e,t,r,i,s){return r&&(t==="src"||t==="href"&&!(e==="use"&&r[0]==="#")||t==="xlink:href"&&r[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?oh(n,r):t==="srcset"?Aae(n,r):t==="style"?Kx(r,yI()):e==="object"&&t==="data"?oh(n,r):typeof s=="function"?s(t,r,i):r)}function Y4(n,e,t){return(n==="video"||n==="audio")&&e==="autoplay"}function wae(n,e,t,r){try{if(r&&n.matches(r))return!1;if(typeof e=="string"){if(n.classList.contains(e))return!0}else for(let i=n.classList.length;i--;){const s=n.classList[i];if(e.test(s))return!0}if(t)return n.matches(t)}catch{}return!1}function Mae(n,e){for(let t=n.classList.length;t--;){const r=n.classList[t];if(e.test(r))return!0}return!1}function ju(n,e,t=1/0,r=0){return!n||n.nodeType!==n.ELEMENT_NODE||r>t?-1:e(n)?r:ju(n.parentNode,e,t,r+1)}function ah(n,e){return t=>{const r=t;if(r===null)return!1;try{if(n){if(typeof n=="string"){if(r.matches(`.${n}`))return!0}else if(Mae(r,n))return!0}return!!(e&&r.matches(e))}catch{return!1}}}function rp(n,e,t,r,i,s){try{const o=n.nodeType===n.ELEMENT_NODE?n:n.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const c=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(c))return!0}let a=-1,l=-1;if(s){if(l=ju(o,ah(r,i)),l<0)return!0;a=ju(o,ah(e,t),l>=0?l:1/0)}else{if(a=ju(o,ah(e,t)),a<0)return!1;l=ju(o,ah(r,i),a>=0?a:1/0)}return a>=0?l>=0?a<=l:!0:l>=0?!1:!!s}catch{}return!!s}function Tae(n,e,t){const r=n.contentWindow;if(!r)return;let i=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const a=setTimeout(()=>{i||(e(),i=!0)},t);n.addEventListener("load",()=>{clearTimeout(a),i=!0,e()});return}const o="about:blank";if(r.location.href!==o||n.src===o||n.src==="")return setTimeout(e,0),n.addEventListener("load",e);n.addEventListener("load",e)}function Cae(n,e,t){let r=!1,i;try{i=n.sheet}catch{return}if(i)return;const s=setTimeout(()=>{r||(e(),r=!0)},t);n.addEventListener("load",()=>{clearTimeout(s),r=!0,e()})}function bae(n,e){const{doc:t,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:g={},maskTextFn:y,maskInputFn:v,dataURLOptions:_={},inlineImages:S,recordCanvas:A,keepIframeSrcFn:w,newlyAddedElement:I=!1}=e,T=Rae(t,r);switch(n.nodeType){case n.DOCUMENT_NODE:return n.compatMode!=="CSS1Compat"?{type:Ur.Document,childNodes:[],compatMode:n.compatMode}:{type:Ur.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:Ur.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:T};case n.ELEMENT_NODE:return Pae(n,{doc:t,blockClass:i,blockSelector:s,unblockSelector:o,inlineStylesheet:m,maskAttributeFn:l,maskInputOptions:g,maskInputFn:v,dataURLOptions:_,inlineImages:S,recordCanvas:A,keepIframeSrcFn:w,newlyAddedElement:I,rootId:T,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case n.TEXT_NODE:return Iae(n,{maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:y,maskInputOptions:g,maskInputFn:v,rootId:T});case n.CDATA_SECTION_NODE:return{type:Ur.CDATA,textContent:"",rootId:T};case n.COMMENT_NODE:return{type:Ur.Comment,textContent:n.textContent||"",rootId:T};default:return!1}}function Rae(n,e){if(!e.hasNode(n))return;const t=e.getId(n);return t===1?void 0:t}function Iae(n,e){const{maskAllText:t,maskTextClass:r,unmaskTextClass:i,maskTextSelector:s,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:l,maskInputFn:c,rootId:u}=e,d=n.parentNode&&n.parentNode.tagName;let p=n.textContent;const m=d==="STYLE"?!0:void 0,g=d==="SCRIPT"?!0:void 0,y=d==="TEXTAREA"?!0:void 0;if(m&&p){try{n.nextSibling||n.previousSibling||jx([n,"access",_=>_.parentNode,"access",_=>_.sheet,"optionalAccess",_=>_.cssRules])&&(p=Jx(n.parentNode.sheet))}catch(_){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${_}`,n)}p=Kx(p,yI())}g&&(p="SCRIPT_PLACEHOLDER");const v=rp(n,r,s,i,o,t);if(!m&&!g&&!y&&p&&v&&(p=a?a(p,n.parentElement):p.replace(/[\S]/g,"*")),y&&p&&(l.textarea||v)&&(p=c?c(p,n.parentNode):p.replace(/[\S]/g,"*")),d==="OPTION"&&p){const _=a1({type:null,tagName:d,maskInputOptions:l});p=qg({isMasked:rp(n,r,s,i,o,_),element:n,value:p,maskInputFn:c})}return{type:Ur.Text,textContent:p||"",isStyle:m,rootId:u}}function Pae(n,e){const{doc:t,blockClass:r,blockSelector:i,unblockSelector:s,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:m,newlyAddedElement:g=!1,rootId:y,maskAllText:v,maskTextClass:_,unmaskTextClass:S,maskTextSelector:A,unmaskTextSelector:w}=e,I=wae(n,r,i,s),T=pae(n);let R={};const P=n.attributes.length;for(let M=0;M<P;M++){const L=n.attributes[M];L.name&&!Y4(T,L.name,L.value)&&(R[L.name]=J4(t,T,np(L.name),L.value,n,l))}if(T==="link"&&o){const M=Array.from(t.styleSheets).find(H=>H.href===n.href);let L=null;M&&(L=Jx(M)),L&&(delete R.rel,delete R.href,R._cssText=Kx(L,M.href))}if(T==="style"&&n.sheet&&!(n.innerText||n.textContent||"").trim().length){const M=Jx(n.sheet);M&&(R._cssText=Kx(M,yI()))}if(T==="input"||T==="textarea"||T==="select"||T==="option"){const M=n,L=_I(M),H=Yx(M,yC(T),L),j=M.checked;if(L!=="submit"&&L!=="button"&&H){const Q=rp(M,_,A,S,w,a1({type:L,tagName:yC(T),maskInputOptions:a}));R.value=qg({isMasked:Q,element:M,value:H,maskInputFn:c})}j&&(R.checked=j)}if(T==="option"&&(n.selected&&!a.select?R.selected=!0:delete R.selected),T==="canvas"&&p){if(n.__context==="2d")fae(n)||(R.rr_dataURL=n.toDataURL(u.type,u.quality));else if(!("__context"in n)){const M=n.toDataURL(u.type,u.quality),L=document.createElement("canvas");L.width=n.width,L.height=n.height;const H=L.toDataURL(u.type,u.quality);M!==H&&(R.rr_dataURL=M)}}if(T==="img"&&d){Nd||(Nd=t.createElement("canvas"),yO=Nd.getContext("2d"));const M=n,L=M.crossOrigin;M.crossOrigin="anonymous";const H=()=>{M.removeEventListener("load",H);try{Nd.width=M.naturalWidth,Nd.height=M.naturalHeight,yO.drawImage(M,0,0),R.rr_dataURL=Nd.toDataURL(u.type,u.quality)}catch(j){console.warn(`Cannot inline img src=${M.currentSrc}! Error: ${j}`)}L?R.crossOrigin=L:M.removeAttribute("crossorigin")};M.complete&&M.naturalWidth!==0?H():M.addEventListener("load",H)}if((T==="audio"||T==="video")&&(R.rr_mediaState=n.paused?"paused":"played",R.rr_mediaCurrentTime=n.currentTime),g||(n.scrollLeft&&(R.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(R.rr_scrollTop=n.scrollTop)),I){const{width:M,height:L}=n.getBoundingClientRect();R={class:R.class,rr_width:`${M}px`,rr_height:`${L}px`}}T==="iframe"&&!m(R.src)&&(n.contentDocument||(R.rr_src=R.src),delete R.src);let b;try{customElements.get(T)&&(b=!0)}catch{}return{type:Ur.Element,tagName:T,attributes:R,childNodes:[],isSVG:Eae(n)||void 0,needBlock:I,rootId:y,isCustom:b}}function Fn(n){return n==null?"":n.toLowerCase()}function Bae(n,e){if(e.comment&&n.type===Ur.Comment)return!0;if(n.type===Ur.Element){if(e.script&&(n.tagName==="script"||n.tagName==="link"&&(n.attributes.rel==="preload"||n.attributes.rel==="modulepreload")&&n.attributes.as==="script"||n.tagName==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&n.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&(n.tagName==="link"&&n.attributes.rel==="shortcut icon"||n.tagName==="meta"&&(Fn(n.attributes.name).match(/^msapplication-tile(image|color)$/)||Fn(n.attributes.name)==="application-name"||Fn(n.attributes.rel)==="icon"||Fn(n.attributes.rel)==="apple-touch-icon"||Fn(n.attributes.rel)==="shortcut icon")))return!0;if(n.tagName==="meta"){if(e.headMetaDescKeywords&&Fn(n.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Fn(n.attributes.property).match(/^(og|twitter|fb):/)||Fn(n.attributes.name).match(/^(og|twitter):/)||Fn(n.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(Fn(n.attributes.name)==="robots"||Fn(n.attributes.name)==="googlebot"||Fn(n.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&n.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(Fn(n.attributes.name)==="author"||Fn(n.attributes.name)==="generator"||Fn(n.attributes.name)==="framework"||Fn(n.attributes.name)==="publisher"||Fn(n.attributes.name)==="progid"||Fn(n.attributes.property).match(/^article:/)||Fn(n.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(Fn(n.attributes.name)==="google-site-verification"||Fn(n.attributes.name)==="yandex-verification"||Fn(n.attributes.name)==="csrf-token"||Fn(n.attributes.name)==="p:domain_verify"||Fn(n.attributes.name)==="verify-v1"||Fn(n.attributes.name)==="verification"||Fn(n.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function lh(n,e){const{doc:t,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:m=!0,maskInputOptions:g={},maskAttributeFn:y,maskTextFn:v,maskInputFn:_,slimDOMOptions:S,dataURLOptions:A={},inlineImages:w=!1,recordCanvas:I=!1,onSerialize:T,onIframeLoad:R,iframeLoadTimeout:P=5e3,onStylesheetLoad:b,stylesheetLoadTimeout:M=5e3,keepIframeSrcFn:L=()=>!1,newlyAddedElement:H=!1}=e;let{preserveWhiteSpace:j=!0}=e;const Q=bae(n,{doc:t,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:y,maskTextFn:v,maskInputFn:_,dataURLOptions:A,inlineImages:w,recordCanvas:I,keepIframeSrcFn:L,newlyAddedElement:H});if(!Q)return console.warn(n,"not serialized"),null;let ee;r.hasNode(n)?ee=r.getId(n):Bae(Q,S)||!j&&Q.type===Ur.Text&&!Q.isStyle&&!Q.textContent.replace(/^\s+|\s+$/gm,"").length?ee=$g:ee=vI();const K=Object.assign(Q,{id:ee});if(r.add(n,K),ee===$g)return null;T&&T(n);let te=!p;if(K.type===Ur.Element){te=te&&!K.needBlock,delete K.needBlock;const F=n.shadowRoot;F&&rg(F)&&(K.isShadowHost=!0)}if((K.type===Ur.Document||K.type===Ur.Element)&&te){S.headWhitespace&&K.type===Ur.Element&&K.tagName==="head"&&(j=!1);const F={doc:t,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:y,maskTextFn:v,maskInputFn:_,slimDOMOptions:S,dataURLOptions:A,inlineImages:w,recordCanvas:I,preserveWhiteSpace:j,onSerialize:T,onIframeLoad:R,iframeLoadTimeout:P,onStylesheetLoad:b,stylesheetLoadTimeout:M,keepIframeSrcFn:L};for(const Y of Array.from(n.childNodes)){const O=lh(Y,F);O&&K.childNodes.push(O)}if(iae(n)&&n.shadowRoot)for(const Y of Array.from(n.shadowRoot.childNodes)){const O=lh(Y,F);O&&(rg(n.shadowRoot)&&(O.isShadow=!0),K.childNodes.push(O))}}return n.parentNode&&ng(n.parentNode)&&rg(n.parentNode)&&(K.isShadow=!0),K.type===Ur.Element&&K.tagName==="iframe"&&Tae(n,()=>{const F=n.contentDocument;if(F&&R){const Y=lh(F,{doc:F,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:y,maskTextFn:v,maskInputFn:_,slimDOMOptions:S,dataURLOptions:A,inlineImages:w,recordCanvas:I,preserveWhiteSpace:j,onSerialize:T,onIframeLoad:R,iframeLoadTimeout:P,onStylesheetLoad:b,stylesheetLoadTimeout:M,keepIframeSrcFn:L});Y&&R(n,Y)}},P),K.type===Ur.Element&&K.tagName==="link"&&K.attributes.rel==="stylesheet"&&Cae(n,()=>{if(b){const F=lh(n,{doc:t,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:y,maskTextFn:v,maskInputFn:_,slimDOMOptions:S,dataURLOptions:A,inlineImages:w,recordCanvas:I,preserveWhiteSpace:j,onSerialize:T,onIframeLoad:R,iframeLoadTimeout:P,onStylesheetLoad:b,stylesheetLoadTimeout:M,keepIframeSrcFn:L});F&&b(n,F)}},M),K}function Dae(n,e){const{mirror:t=new j4,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:s=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:m=!1,maskAllInputs:g=!1,maskAttributeFn:y,maskTextFn:v,maskInputFn:_,slimDOM:S=!1,dataURLOptions:A,preserveWhiteSpace:w,onSerialize:I,onIframeLoad:T,iframeLoadTimeout:R,onStylesheetLoad:P,stylesheetLoadTimeout:b,keepIframeSrcFn:M=()=>!1}=e||{};return lh(n,{doc:n,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:o,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:g===!1?{}:g,maskAttributeFn:y,maskTextFn:v,maskInputFn:_,slimDOMOptions:S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:S==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:S===!1?{}:S,dataURLOptions:A,inlineImages:p,recordCanvas:m,preserveWhiteSpace:w,onSerialize:I,onIframeLoad:T,iframeLoadTimeout:R,onStylesheetLoad:P,stylesheetLoadTimeout:b,keepIframeSrcFn:M,newlyAddedElement:!1})}function ec(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}function $i(n,e,t=document){const r={capture:!0,passive:!0};return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}const zd=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let xO={map:{},getId(){return console.error(zd),-1},getNode(){return console.error(zd),null},removeNodeFromMap(){console.error(zd)},has(){return console.error(zd),!1},reset(){console.error(zd)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(xO=new Proxy(xO,{get(n,e,t){return e==="map"&&console.error(zd),Reflect.get(n,e,t)}}));function Qg(n,e,t={}){let r=null,i=0;return function(...s){const o=Date.now();!i&&t.leading===!1&&(i=o);const a=e-(o-i),l=this;a<=0||a>e?(r&&(zae(r),r=null),i=o,n.apply(l,s)):!r&&t.trailing!==!1&&(r=l1(()=>{i=t.leading===!1?0:Date.now(),r=null,n.apply(l,s)},a))}}function K4(n,e,t,r,i=window){const s=i.Object.getOwnPropertyDescriptor(n,e);return i.Object.defineProperty(n,e,r?t:{set(o){l1(()=>{t.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>K4(n,e,s||{},!0)}function xI(n,e,t){try{if(!(e in n))return()=>{};const r=n[e],i=t(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}let qx=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(qx=()=>new Date().getTime());function q4(n){const e=n.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:n.pageXOffset!==void 0?n.pageXOffset:ec([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollLeft])||ec([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollLeft])||ec([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollLeft])||0,top:e.scrollingElement?e.scrollingElement.scrollTop:n.pageYOffset!==void 0?n.pageYOffset:ec([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollTop])||ec([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollTop])||ec([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollTop])||0}}function $4(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Q4(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Z4(n){return n?n.nodeType===n.ELEMENT_NODE?n:n.parentElement:null}function jo(n,e,t,r,i){if(!n)return!1;const s=Z4(n);if(!s)return!1;const o=ah(e,t);if(!i){const c=r&&s.matches(r);return o(s)&&!c}const a=ju(s,o);let l=-1;return a<0?!1:(r&&(l=ju(s,ah(null,r))),a>-1&&l<0?!0:a<l)}function Lae(n,e){return e.getId(n)!==-1}function Dw(n,e){return e.getId(n)===$g}function e5(n,e){if(ng(n))return!1;const t=e.getId(n);return e.has(t)?n.parentNode&&n.parentNode.nodeType===n.DOCUMENT_NODE?!1:n.parentNode?e5(n.parentNode,e):!0:!0}function xC(n){return!!n.changedTouches}function Nae(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===t)return!0;while(t=t&&t.parentNode);return!1})}function t5(n,e){return!!(n.nodeName==="IFRAME"&&e.getMeta(n))}function n5(n,e){return!!(n.nodeName==="LINK"&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&n.getAttribute("rel")==="stylesheet"&&e.getMeta(n))}function SC(n){return!!ec([n,"optionalAccess",e=>e.shadowRoot])}class Oae{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return Fne(this.styleIDMap.get(e),()=>-1)}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return t===void 0?r=this.id++:r=t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function r5(n){let e=null;return ec([n,"access",t=>t.getRootNode,"optionalCall",t=>t(),"optionalAccess",t=>t.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&n.getRootNode().host&&(e=n.getRootNode().host),e}function kae(n){let e=n,t;for(;t=r5(e);)e=t;return e}function Fae(n){const e=n.ownerDocument;if(!e)return!1;const t=kae(n);return e.contains(t)}function i5(n){const e=n.ownerDocument;return e?e.contains(n)||Fae(n):!1}const SO={};function SI(n){const e=SO[n];if(e)return e;const t=window.document;let r=window[n];if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i);const s=i.contentWindow;s&&s[n]&&(r=s[n]),t.head.removeChild(i)}catch{}return SO[n]=r.bind(window)}function Uae(...n){return SI("requestAnimationFrame")(...n)}function l1(...n){return SI("setTimeout")(...n)}function zae(...n){return SI("clearTimeout")(...n)}var qt=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))(qt||{}),$t=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n))($t||{}),Gi=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(Gi||{}),Qa=(n=>(n[n.Mouse=0]="Mouse",n[n.Pen=1]="Pen",n[n.Touch=2]="Touch",n))(Qa||{});function Hae(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}function AO(n){return"__ln"in n}class Gae{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++)t=Hae([t,"optionalAccess",i=>i.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&AO(e.previousSibling)){const r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&AO(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const EO=(n,e)=>`${n}@${e}`;class Vae{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,r=new Gae,i=l=>{let c=l,u=$g;for(;u===$g;)c=c&&c.nextSibling,u=c&&this.mirror.getId(c);return u},s=l=>{if(!l.parentNode||!i5(l))return;const c=ng(l.parentNode)?this.mirror.getId(r5(l)):this.mirror.getId(l.parentNode),u=i(l);if(c===-1||u===-1)return r.addNode(l);const d=lh(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{t5(p,this.mirror)&&this.iframeManager.addIframe(p),n5(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),SC(l)&&this.shadowDomManager.addShadowRoot(l.shadowRoot,this.doc)},onIframeLoad:(p,m)=>{this.iframeManager.attachIframe(p,m),this.shadowDomManager.observeAttachShadow(p)},onStylesheetLoad:(p,m)=>{this.stylesheetManager.attachLinkElement(p,m)}});d&&(e.push({parentId:c,nextId:u,node:d}),t.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const l of this.movedSet)wO(this.removes,l,this.mirror)&&!this.movedSet.has(l.parentNode)||s(l);for(const l of this.addedSet)!MO(this.droppedSet,l)&&!wO(this.removes,l,this.mirror)||MO(this.movedSet,l)?s(l):this.droppedSet.add(l);let o=null;for(;r.length;){let l=null;if(o){const c=this.mirror.getId(o.value.parentNode),u=i(o.value);c!==-1&&u!==-1&&(l=o)}if(!l){let c=r.tail;for(;c;){const u=c;if(c=c.previous,u){const d=this.mirror.getId(u.value.parentNode);if(i(u.value)===-1)continue;if(d!==-1){l=u;break}else{const m=u.value;if(m.parentNode&&m.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const g=m.parentNode.host;if(this.mirror.getId(g)!==-1){l=u;break}}}}}}if(!l){for(;r.head;)r.removeNode(r.head.value);break}o=l.previous,r.removeNode(l.value),s(l.value)}const a={texts:this.texts.map(l=>({id:this.mirror.getId(l.node),value:l.value})).filter(l=>!t.has(l.id)).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>{const{attributes:c}=l;if(typeof c.style=="string"){const u=JSON.stringify(l.styleDiff),d=JSON.stringify(l._unchangedStyles);u.length<c.style.length&&(u+d).split("var(").length===c.style.split("var(").length&&(c.style=l.styleDiff)}return{id:this.mirror.getId(l.node),attributes:c}}).filter(l=>!t.has(l.id)).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!Dw(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;!jo(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:rp(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,Z4(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let r=e.attributeName,i=e.target.getAttribute(r);if(r==="value"){const o=_I(t),a=t.tagName;i=Yx(t,a,o);const l=a1({maskInputOptions:this.maskInputOptions,tagName:a,type:o}),c=rp(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,l);i=qg({isMasked:c,element:t,value:i,maskInputFn:this.maskInputFn})}if(jo(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===e.oldValue)return;let s=this.attributeMap.get(e.target);if(t.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(i))if(!t.contentDocument)r="rr_src";else return;if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),r==="type"&&t.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&t.setAttribute("data-rr-is-password","true"),!Y4(t.tagName,r)&&(s.attributes[r]=J4(this.doc,np(t.tagName),np(r),i,t,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(const a of Array.from(t.style)){const l=t.style.getPropertyValue(a),c=t.style.getPropertyPriority(a);l!==o.style.getPropertyValue(a)||c!==o.style.getPropertyPriority(a)?c===""?s.styleDiff[a]=l:s.styleDiff[a]=[l,c]:s._unchangedStyles[a]=[l,c]}for(const a of Array.from(o.style))t.style.getPropertyValue(a)===""&&(s.styleDiff[a]=!1)}break}case"childList":{if(jo(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const r=this.mirror.getId(t),i=ng(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);jo(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Dw(t,this.mirror)||!Lae(t,this.mirror)||(this.addedSet.has(t)?(AC(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&r===-1||e5(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[EO(r,i)]?AC(this.movedSet,t):this.removes.push({parentId:i,id:r,isShadow:ng(e.target)&&rg(e.target)?!0:void 0})),this.mapRemoves.push(t))});break}}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(Dw(e,this.mirror))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&r!==-1&&(this.movedMap[EO(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);jo(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach(r=>this.genAdds(r)),SC(e)&&e.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function AC(n,e){n.delete(e),e.childNodes.forEach(t=>AC(n,t))}function wO(n,e,t){return n.length===0?!1:s5(n,e,t)}function s5(n,e,t){const{parentNode:r}=e;if(!r)return!1;const i=t.getId(r);return n.some(s=>s.id===i)?!0:s5(n,r,t)}function MO(n,e){return n.size===0?!1:o5(n,e)}function o5(n,e){const{parentNode:t}=e;return t?n.has(t)?!0:o5(n,t):!1}let ig;function Wae(n){ig=n}function Xae(){ig=void 0}const pn=n=>ig?(...t)=>{try{return n(...t)}catch(r){if(ig&&ig(r)===!0)return()=>{};throw r}}:n;function _a(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}const ch=[];function I_(n){try{if("composedPath"in n){const e=n.composedPath();if(e.length)return e[0]}else if("path"in n&&n.path.length)return n.path[0]}catch{}return n&&n.target}function a5(n,e){const t=new Vae;ch.push(t),t.init(n);let r=window.MutationObserver||window.__rrMutationObserver;const i=_a([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);i&&window[i]&&(r=window[i]);const s=new r(pn(o=>{n.onMutation&&n.onMutation(o)===!1||t.processMutations.bind(t)(o)}));return s.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function jae({mousemoveCb:n,sampling:e,doc:t,mirror:r}){if(e.mousemove===!1)return()=>{};const i=typeof e.mousemove=="number"?e.mousemove:50,s=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],a;const l=Qg(pn(d=>{const p=Date.now()-a;n(o.map(m=>(m.timeOffset-=p,m)),d),o=[],a=null}),s),c=pn(Qg(pn(d=>{const p=I_(d),{clientX:m,clientY:g}=xC(d)?d.changedTouches[0]:d;a||(a=qx()),o.push({x:m,y:g,id:r.getId(p),timeOffset:qx()-a}),l(typeof DragEvent<"u"&&d instanceof DragEvent?$t.Drag:d instanceof MouseEvent?$t.MouseMove:$t.TouchMove)}),i,{trailing:!1})),u=[$i("mousemove",c,t),$i("touchmove",c,t),$i("drag",c,t)];return pn(()=>{u.forEach(d=>d())})}function Jae({mouseInteractionCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,l=[];let c=null;const u=d=>p=>{const m=I_(p);if(jo(m,r,i,s,!0))return;let g=null,y=d;if("pointerType"in p){switch(p.pointerType){case"mouse":g=Qa.Mouse;break;case"touch":g=Qa.Touch;break;case"pen":g=Qa.Pen;break}g===Qa.Touch?Gi[d]===Gi.MouseDown?y="TouchStart":Gi[d]===Gi.MouseUp&&(y="TouchEnd"):Qa.Pen}else xC(p)&&(g=Qa.Touch);g!==null?(c=g,(y.startsWith("Touch")&&g===Qa.Touch||y.startsWith("Mouse")&&g===Qa.Mouse)&&(g=null)):Gi[d]===Gi.Click&&(g=c,c=null);const v=xC(p)?p.changedTouches[0]:p;if(!v)return;const _=t.getId(m),{clientX:S,clientY:A}=v;pn(n)({type:Gi[y],id:_,x:S,y:A,...g!==null&&{pointerType:g}})};return Object.keys(Gi).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let p=np(d);const m=u(d);if(window.PointerEvent)switch(Gi[d]){case Gi.MouseDown:case Gi.MouseUp:p=p.replace("mouse","pointer");break;case Gi.TouchStart:case Gi.TouchEnd:return}l.push($i(p,m,e))}),pn(()=>{l.forEach(d=>d())})}function l5({scrollCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){const a=pn(Qg(pn(l=>{const c=I_(l);if(!c||jo(c,r,i,s,!0))return;const u=t.getId(c);if(c===e&&e.defaultView){const d=q4(e.defaultView);n({id:u,x:d.left,y:d.top})}else n({id:u,x:c.scrollLeft,y:c.scrollTop})}),o.scroll||100));return $i("scroll",a,e)}function Yae({viewportResizeCb:n},{win:e}){let t=-1,r=-1;const i=pn(Qg(pn(()=>{const s=$4(),o=Q4();(t!==s||r!==o)&&(n({width:Number(o),height:Number(s)}),t=s,r=o)}),200));return $i("resize",i,e)}const Kae=["INPUT","TEXTAREA","SELECT"],TO=new WeakMap;function qae({inputCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,ignoreClass:o,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:m,maskTextSelector:g,unmaskTextSelector:y}){function v(R){let P=I_(R);const b=R.isTrusted,M=P&&yC(P.tagName);if(M==="OPTION"&&(P=P.parentElement),!P||!M||Kae.indexOf(M)<0||jo(P,r,i,s,!0))return;const L=P;if(L.classList.contains(o)||a&&L.matches(a))return;const H=_I(P);let j=Yx(L,M,H),Q=!1;const ee=a1({maskInputOptions:l,tagName:M,type:H}),K=rp(P,p,g,m,y,ee);(H==="radio"||H==="checkbox")&&(Q=P.checked),j=qg({isMasked:K,element:P,value:j,maskInputFn:c}),_(P,d?{text:j,isChecked:Q,userTriggered:b}:{text:j,isChecked:Q});const te=P.name;H==="radio"&&te&&Q&&e.querySelectorAll(`input[type="radio"][name="${te}"]`).forEach(F=>{if(F!==P){const Y=qg({isMasked:K,element:F,value:Yx(F,M,H),maskInputFn:c});_(F,d?{text:Y,isChecked:!Q,userTriggered:!1}:{text:Y,isChecked:!Q})}})}function _(R,P){const b=TO.get(R);if(!b||b.text!==P.text||b.isChecked!==P.isChecked){TO.set(R,P);const M=t.getId(R);pn(n)({...P,id:M})}}const A=(u.input==="last"?["change"]:["input","change"]).map(R=>$i(R,pn(v),e)),w=e.defaultView;if(!w)return()=>{A.forEach(R=>R())};const I=w.Object.getOwnPropertyDescriptor(w.HTMLInputElement.prototype,"value"),T=[[w.HTMLInputElement.prototype,"value"],[w.HTMLInputElement.prototype,"checked"],[w.HTMLSelectElement.prototype,"value"],[w.HTMLTextAreaElement.prototype,"value"],[w.HTMLSelectElement.prototype,"selectedIndex"],[w.HTMLOptionElement.prototype,"selected"]];return I&&I.set&&A.push(...T.map(R=>K4(R[0],R[1],{set(){pn(v)({target:this,isTrusted:!1})}},!1,w))),pn(()=>{A.forEach(R=>R())})}function $x(n){const e=[];function t(r,i){if(uy("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||uy("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||uy("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||uy("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(o)}return i}return t(n,e)}function tc(n,e,t){let r,i;return n?(n.ownerNode?r=e.getId(n.ownerNode):i=t.getId(n),{styleId:i,id:r}):{}}function $ae({styleSheetRuleCb:n,mirror:e,stylesheetManager:t},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:pn((u,d,p)=>{const[m,g]=p,{id:y,styleId:v}=tc(d,e,t.styleMirror);return(y&&y!==-1||v&&v!==-1)&&n({id:y,styleId:v,adds:[{rule:m,index:g}]}),u.apply(d,p)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:pn((u,d,p)=>{const[m]=p,{id:g,styleId:y}=tc(d,e,t.styleMirror);return(g&&g!==-1||y&&y!==-1)&&n({id:g,styleId:y,removes:[{index:m}]}),u.apply(d,p)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:pn((u,d,p)=>{const[m]=p,{id:g,styleId:y}=tc(d,e,t.styleMirror);return(g&&g!==-1||y&&y!==-1)&&n({id:g,styleId:y,replace:m}),u.apply(d,p)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:pn((u,d,p)=>{const[m]=p,{id:g,styleId:y}=tc(d,e,t.styleMirror);return(g&&g!==-1||y&&y!==-1)&&n({id:g,styleId:y,replaceSync:m}),u.apply(d,p)})}));const l={};fy("CSSGroupingRule")?l.CSSGroupingRule=r.CSSGroupingRule:(fy("CSSMediaRule")&&(l.CSSMediaRule=r.CSSMediaRule),fy("CSSConditionRule")&&(l.CSSConditionRule=r.CSSConditionRule),fy("CSSSupportsRule")&&(l.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(l).forEach(([u,d])=>{c[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(c[u].insertRule,{apply:pn((p,m,g)=>{const[y,v]=g,{id:_,styleId:S}=tc(m.parentStyleSheet,e,t.styleMirror);return(_&&_!==-1||S&&S!==-1)&&n({id:_,styleId:S,adds:[{rule:y,index:[...$x(m),v||0]}]}),p.apply(m,g)})}),d.prototype.deleteRule=new Proxy(c[u].deleteRule,{apply:pn((p,m,g)=>{const[y]=g,{id:v,styleId:_}=tc(m.parentStyleSheet,e,t.styleMirror);return(v&&v!==-1||_&&_!==-1)&&n({id:v,styleId:_,removes:[{index:[...$x(m),y]}]}),p.apply(m,g)})})}),pn(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=s,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([u,d])=>{d.prototype.insertRule=c[u].insertRule,d.prototype.deleteRule=c[u].deleteRule})})}function c5({mirror:n,stylesheetManager:e},t){let r=null;t.nodeName==="#document"?r=n.getId(t):r=n.getId(t.host);const i=t.nodeName==="#document"?_a([t,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]):_a([t,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),s=_a([i,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(_a([i,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!i||!s?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return _a([s,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const a=_a([s,"access",l=>l.set,"optionalAccess",l=>l.call,"call",l=>l(this,o)]);if(r!==null&&r!==-1)try{e.adoptStyleSheets(o,r)}catch{}return a}}),pn(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function Qae({styleDeclarationCb:n,mirror:e,ignoreCSSAttributes:t,stylesheetManager:r},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:pn((a,l,c)=>{const[u,d,p]=c;if(t.has(u))return s.apply(l,[u,d,p]);const{id:m,styleId:g}=tc(_a([l,"access",y=>y.parentRule,"optionalAccess",y=>y.parentStyleSheet]),e,r.styleMirror);return(m&&m!==-1||g&&g!==-1)&&n({id:m,styleId:g,set:{property:u,value:d,priority:p},index:$x(l.parentRule)}),a.apply(l,c)})});const o=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:pn((a,l,c)=>{const[u]=c;if(t.has(u))return o.apply(l,[u]);const{id:d,styleId:p}=tc(_a([l,"access",m=>m.parentRule,"optionalAccess",m=>m.parentStyleSheet]),e,r.styleMirror);return(d&&d!==-1||p&&p!==-1)&&n({id:d,styleId:p,remove:{property:u},index:$x(l.parentRule)}),a.apply(l,c)})}),pn(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=o})}function Zae({mediaInteractionCb:n,blockClass:e,blockSelector:t,unblockSelector:r,mirror:i,sampling:s,doc:o}){const a=pn(c=>Qg(pn(u=>{const d=I_(u);if(!d||jo(d,e,t,r,!0))return;const{currentTime:p,volume:m,muted:g,playbackRate:y}=d;n({type:c,id:i.getId(d),currentTime:p,volume:m,muted:g,playbackRate:y})}),s.media||500)),l=[$i("play",a(0),o),$i("pause",a(1),o),$i("seeked",a(2),o),$i("volumechange",a(3),o),$i("ratechange",a(4),o)];return pn(()=>{l.forEach(c=>c())})}function ele({fontCb:n,doc:e}){const t=e.defaultView;if(!t)return()=>{};const r=[],i=new WeakMap,s=t.FontFace;t.FontFace=function(l,c,u){const d=new s(l,c,u);return i.set(d,{family:l,buffer:typeof c!="string",descriptors:u,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),d};const o=xI(e.fonts,"add",function(a){return function(l){return l1(pn(()=>{const c=i.get(l);c&&(n(c),i.delete(l))}),0),a.apply(this,[l])}});return r.push(()=>{t.FontFace=s}),r.push(o),pn(()=>{r.forEach(a=>a())})}function tle(n){const{doc:e,mirror:t,blockClass:r,blockSelector:i,unblockSelector:s,selectionCb:o}=n;let a=!0;const l=pn(()=>{const c=e.getSelection();if(!c||a&&_a([c,"optionalAccess",p=>p.isCollapsed]))return;a=c.isCollapsed||!1;const u=[],d=c.rangeCount||0;for(let p=0;p<d;p++){const m=c.getRangeAt(p),{startContainer:g,startOffset:y,endContainer:v,endOffset:_}=m;jo(g,r,i,s,!0)||jo(v,r,i,s,!0)||u.push({start:t.getId(g),startOffset:y,end:t.getId(v),endOffset:_})}o({ranges:u})});return l(),$i("selectionchange",l)}function nle({doc:n,customElementCb:e}){const t=n.defaultView;return!t||!t.customElements?()=>{}:xI(t.customElements,"define",function(i){return function(s,o,a){try{e({define:{name:s}})}catch{}return i.apply(this,[s,o,a])}})}function rle(n,e={}){const t=n.doc.defaultView;if(!t)return()=>{};const r=a5(n,n.doc),i=jae(n),s=Jae(n),o=l5(n),a=Yae(n,{win:t}),l=qae(n),c=Zae(n),u=$ae(n,{win:t}),d=c5(n,n.doc),p=Qae(n,{win:t}),m=n.collectFonts?ele(n):()=>{},g=tle(n),y=nle(n),v=[];for(const _ of n.plugins)v.push(_.observer(_.callback,t,_.options));return pn(()=>{ch.forEach(_=>_.reset()),r.disconnect(),i(),s(),o(),a(),l(),c(),u(),d(),p(),m(),g(),y(),v.forEach(_=>_())})}function uy(n){return typeof window[n]<"u"}function fy(n){return!!(typeof window[n]<"u"&&window[n].prototype&&"insertRule"in window[n].prototype&&"deleteRule"in window[n].prototype)}class EC{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,r,i){const s=r||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e);let a=s.get(t);return a||(a=this.generateIdFn(),s.set(t,a),o.set(a,t)),a}getIds(e,t){const r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(s=>this.getId(e,s,r,i))}getRemoteId(e,t,r){const i=r||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;const s=i.get(t);return s||-1}getRemoteIds(e,t){const r=this.getRemoteIdToIdMap(e);return t.map(i=>this.getRemoteId(e,i,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function CO(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}class ile{constructor(){this.crossOriginIframeMirror=new EC(vI),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class sle{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new EC(vI),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new EC(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),CO([this,"access",r=>r.loadListener,"optionalCall",r=>r(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if(t.data.type!=="rrweb"||t.origin!==t.data.origin||!e.source)return;const i=this.crossOriginIframeMap.get(e.source);if(!i)return;const s=this.transformCrossOriginEvent(i,t.data.event);s&&this.wrappedEmit(s,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case qt.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const r=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(t.data.node,r),{timestamp:t.timestamp,type:qt.IncrementalSnapshot,data:{source:$t.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case qt.Meta:case qt.Load:case qt.DomContentLoaded:return!1;case qt.Plugin:return t;case qt.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case qt.IncrementalSnapshot:switch(t.data.source){case $t.Mutation:return t.data.adds.forEach(r=>{this.replaceIds(r,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,e);const i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(r.node,i)}),t.data.removes.forEach(r=>{this.replaceIds(r,e,["parentId","id"])}),t.data.attributes.forEach(r=>{this.replaceIds(r,e,["id"])}),t.data.texts.forEach(r=>{this.replaceIds(r,e,["id"])}),t;case $t.Drag:case $t.TouchMove:case $t.MouseMove:return t.data.positions.forEach(r=>{this.replaceIds(r,e,["id"])}),t;case $t.ViewportResize:return!1;case $t.MediaInteraction:case $t.MouseInteraction:case $t.Scroll:case $t.CanvasMutation:case $t.Input:return this.replaceIds(t.data,e,["id"]),t;case $t.StyleSheetRule:case $t.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case $t.Font:return t;case $t.Selection:return t.data.ranges.forEach(r=>{this.replaceIds(r,e,["start","end"])}),t;case $t.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),CO([t,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(i=>{this.replaceStyleIds(i,e,["styleId"])})]),t}}return!1}replace(e,t,r,i){for(const s of i)!Array.isArray(t[s])&&typeof t[s]!="number"||(Array.isArray(t[s])?t[s]=e.getIds(r,t[s]):t[s]=e.getId(r,t[s]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,t)})}patchRootIdOnNode(e,t){e.type!==Ur.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,t)})}}class ole{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class ale{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!rg(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const r=a5({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(l5({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),l1(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(c5({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const r=this;this.restoreHandlers.push(xI(e.prototype,"attachShadow",function(i){return function(s){const o=i.call(this,s);return this.shadowRoot&&i5(this)&&r.addShadowRoot(this.shadowRoot,t),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class bO{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class lle{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Oae,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;const r={id:t,styleIds:[]},i=[];for(const s of e){let o;this.styleMirror.has(s)?o=this.styleMirror.getId(s):(o=this.styleMirror.add(s),i.push({styleId:o,rules:Array.from(s.rules||CSSRule,(a,l)=>({rule:X4(a),index:l}))})),r.styleIds.push(o)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class cle{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){Uae(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,t){const r=this.nodeMap.get(e);return r&&Array.from(r).some(i=>i!==t)}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let hr,Qx;const Uo=uae();function bc(n={}){const{emit:e,checkoutEveryNms:t,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:m=null,inlineStylesheet:g=!0,maskAllInputs:y,maskInputOptions:v,slimDOMOptions:_,maskAttributeFn:S,maskInputFn:A,maskTextFn:w,maxCanvasSize:I=null,packFn:T,sampling:R={},dataURLOptions:P={},mousemoveWait:b,recordCanvas:M=!1,recordCrossOriginIframes:L=!1,recordAfter:H=n.recordAfter==="DOMContentLoaded"?n.recordAfter:"load",userTriggeredOnInput:j=!1,collectFonts:Q=!1,inlineImages:ee=!1,plugins:K,keepIframeSrcFn:te=()=>!1,ignoreCSSAttributes:F=new Set([]),errorHandler:Y,onMutation:O,getCanvasManager:ae}=n;Wae(Y);const me=L?window.parent===window:!0;let Oe=!1;if(!me)try{window.parent.document&&(Oe=!1)}catch{Oe=!0}if(me&&!e)throw new Error("emit function is required");b!==void 0&&R.mousemove===void 0&&(R.mousemove=b),Uo.reset();const ce=y===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:v!==void 0?v:{},Se=_===!0||_==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:_==="all",headMetaDescKeywords:_==="all"}:_||{};Nae();let Ae,Ee=0;const Qe=je=>{for(const X of K||[])X.eventProcessor&&(je=X.eventProcessor(je));return T&&!Oe&&(je=T(je)),je};hr=(je,X)=>{const k=je;if(k.timestamp=qx(),Tw([ch,"access",fe=>fe[0],"optionalAccess",fe=>fe.isFrozen,"call",fe=>fe()])&&k.type!==qt.FullSnapshot&&!(k.type===qt.IncrementalSnapshot&&k.data.source===$t.Mutation)&&ch.forEach(fe=>fe.unfreeze()),me)Tw([e,"optionalCall",fe=>fe(Qe(k),X)]);else if(Oe){const fe={type:"rrweb",event:Qe(k),origin:window.location.origin,isCheckout:X};window.parent.postMessage(fe,"*")}if(k.type===qt.FullSnapshot)Ae=k,Ee=0;else if(k.type===qt.IncrementalSnapshot){if(k.data.source===$t.Mutation&&k.data.isAttachIframe)return;Ee++;const fe=r&&Ee>=r,ge=t&&Ae&&k.timestamp-Ae.timestamp>t;(fe||ge)&&We(!0)}};const rt=je=>{hr({type:qt.IncrementalSnapshot,data:{source:$t.Mutation,...je}})},tt=je=>hr({type:qt.IncrementalSnapshot,data:{source:$t.Scroll,...je}}),q=je=>hr({type:qt.IncrementalSnapshot,data:{source:$t.CanvasMutation,...je}}),we=je=>hr({type:qt.IncrementalSnapshot,data:{source:$t.AdoptedStyleSheet,...je}}),he=new lle({mutationCb:rt,adoptedStyleSheetCb:we}),Ce=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new ile:new sle({mirror:Uo,mutationCb:rt,stylesheetManager:he,recordCrossOriginIframes:L,wrappedEmit:hr});for(const je of K||[])je.getMirror&&je.getMirror({nodeMirror:Uo,crossOriginIframeMirror:Ce.crossOriginIframeMirror,crossOriginIframeStyleMirror:Ce.crossOriginIframeStyleMirror});const Le=new cle,ke=fle(ae,{mirror:Uo,win:window,mutationCb:je=>hr({type:qt.IncrementalSnapshot,data:{source:$t.CanvasMutation,...je}}),recordCanvas:M,blockClass:i,blockSelector:s,unblockSelector:o,maxCanvasSize:I,sampling:R.canvas,dataURLOptions:P,errorHandler:Y}),ne=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new ole:new ale({mutationCb:rt,scrollCb:tt,bypassOptions:{onMutation:O,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskInputOptions:ce,dataURLOptions:P,maskAttributeFn:S,maskTextFn:w,maskInputFn:A,recordCanvas:M,inlineImages:ee,sampling:R,slimDOMOptions:Se,iframeManager:Ce,stylesheetManager:he,canvasManager:ke,keepIframeSrcFn:te,processedNodeManager:Le},mirror:Uo}),We=(je=!1)=>{hr({type:qt.Meta,data:{href:window.location.href,width:Q4(),height:$4()}},je),he.reset(),ne.init(),ch.forEach(k=>k.lock());const X=Dae(document,{mirror:Uo,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskAllInputs:ce,maskAttributeFn:S,maskInputFn:A,maskTextFn:w,slimDOM:Se,dataURLOptions:P,recordCanvas:M,inlineImages:ee,onSerialize:k=>{t5(k,Uo)&&Ce.addIframe(k),n5(k,Uo)&&he.trackLinkElement(k),SC(k)&&ne.addShadowRoot(k.shadowRoot,document)},onIframeLoad:(k,fe)=>{Ce.attachIframe(k,fe),ne.observeAttachShadow(k)},onStylesheetLoad:(k,fe)=>{he.attachLinkElement(k,fe)},keepIframeSrcFn:te});if(!X)return console.warn("Failed to snapshot the document");hr({type:qt.FullSnapshot,data:{node:X,initialOffset:q4(window)}}),ch.forEach(k=>k.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&he.adoptStyleSheets(document.adoptedStyleSheets,Uo.getId(document))};Qx=We;try{const je=[],X=fe=>pn(rle)({onMutation:O,mutationCb:rt,mousemoveCb:(ge,be)=>hr({type:qt.IncrementalSnapshot,data:{source:be,positions:ge}}),mouseInteractionCb:ge=>hr({type:qt.IncrementalSnapshot,data:{source:$t.MouseInteraction,...ge}}),scrollCb:tt,viewportResizeCb:ge=>hr({type:qt.IncrementalSnapshot,data:{source:$t.ViewportResize,...ge}}),inputCb:ge=>hr({type:qt.IncrementalSnapshot,data:{source:$t.Input,...ge}}),mediaInteractionCb:ge=>hr({type:qt.IncrementalSnapshot,data:{source:$t.MediaInteraction,...ge}}),styleSheetRuleCb:ge=>hr({type:qt.IncrementalSnapshot,data:{source:$t.StyleSheetRule,...ge}}),styleDeclarationCb:ge=>hr({type:qt.IncrementalSnapshot,data:{source:$t.StyleDeclaration,...ge}}),canvasMutationCb:q,fontCb:ge=>hr({type:qt.IncrementalSnapshot,data:{source:$t.Font,...ge}}),selectionCb:ge=>{hr({type:qt.IncrementalSnapshot,data:{source:$t.Selection,...ge}})},customElementCb:ge=>{hr({type:qt.IncrementalSnapshot,data:{source:$t.CustomElement,...ge}})},blockClass:i,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:m,maskInputOptions:ce,inlineStylesheet:g,sampling:R,recordCanvas:M,inlineImages:ee,userTriggeredOnInput:j,collectFonts:Q,doc:fe,maskAttributeFn:S,maskInputFn:A,maskTextFn:w,keepIframeSrcFn:te,blockSelector:s,unblockSelector:o,slimDOMOptions:Se,dataURLOptions:P,mirror:Uo,iframeManager:Ce,stylesheetManager:he,shadowDomManager:ne,processedNodeManager:Le,canvasManager:ke,ignoreCSSAttributes:F,plugins:Tw([K,"optionalAccess",ge=>ge.filter,"call",ge=>ge(be=>be.observer),"optionalAccess",ge=>ge.map,"call",ge=>ge(be=>({observer:be.observer,options:be.options,callback:Be=>hr({type:qt.Plugin,data:{plugin:be.name,payload:Be}})}))])||[]},{});Ce.addLoadListener(fe=>{try{je.push(X(fe.contentDocument))}catch(ge){console.warn(ge)}});const k=()=>{We(),je.push(X(document))};return document.readyState==="interactive"||document.readyState==="complete"?k():(je.push($i("DOMContentLoaded",()=>{hr({type:qt.DomContentLoaded,data:{}}),H==="DOMContentLoaded"&&k()})),je.push($i("load",()=>{hr({type:qt.Load,data:{}}),H==="load"&&k()},window))),()=>{je.forEach(fe=>fe()),Le.destroy(),Qx=void 0,Xae()}}catch(je){console.warn(je)}}function ule(n){if(!Qx)throw new Error("please take full snapshot after start recording");Qx(n)}bc.mirror=Uo;bc.takeFullSnapshot=ule;function fle(n,e){try{return n?n(e):new bO}catch{return console.warn("Unable to initialize CanvasManager"),new bO}}const dle=3,hle=5;function AI(n){return n>9999999999?n:n*1e3}function Lw(n){return n>9999999999?n/1e3:n}function P_(n,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?n.triggerUserActivity():n.checkAndHandleExpiredSession(),n.addUpdate(()=>(n.throttledAddEvent({type:qt.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:ga(e,10,1e3)}}),e.category==="console")))}const ple="button,a";function u5(n){return n.closest(ple)||n}function f5(n){const e=d5(n);return!e||!(e instanceof Element)?e:u5(e)}function d5(n){return mle(n)?n.target:n}function mle(n){return typeof n=="object"&&!!n&&"target"in n}let nc;function gle(n){return nc||(nc=[],_le()),nc.push(n),()=>{const e=nc?nc.indexOf(n):-1;e>-1&&nc.splice(e,1)}}function _le(){ni(zn,"open",function(n){return function(...e){if(nc)try{nc.forEach(t=>t())}catch{}return n.apply(zn,e)}})}function vle(n,e,t){n.handleClick(e,t)}class yle{constructor(e,t,r=P_){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const e=gle(()=>{this._lastMutation=RO()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(Sle(t,this._ignoreSelector)||!Ale(e))return;const r={timestamp:Lw(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some(i=>i.node===r.node&&Math.abs(i.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Lw(e)}registerScroll(e=Date.now()){this._lastScroll=Lw(e)}registerClick(e){const t=u5(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach(t=>{t.clickCount++})}_getClicks(e){return this._clicks.filter(t=>t.node===e)}_checkClicks(){const e=[],t=RO();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=t&&e.push(r)});for(const r of e){const i=this._clicks.indexOf(r);i>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(i,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,i=e.mutationAfter&&e.mutationAfter<=this._threshold,s=!r&&!i,{clickCount:o,clickBreadcrumb:a}=e;if(s){const l=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,c=l<this._timeout*1e3?"mutation":"timeout",u={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:zn.location.href,route:t.getCurrentRoute(),timeAfterClickMs:l,endReason:c,clickCount:o||1}};this._addBreadcrumbEvent(t,u);return}if(o>1){const l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:zn.location.href,route:t.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(t,l)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Nf(()=>this._checkClicks(),1e3)}}const xle=["A","BUTTON","INPUT"];function Sle(n,e){return!!(!xle.includes(n.tagName)||n.tagName==="INPUT"&&!["submit","button"].includes(n.getAttribute("type")||"")||n.tagName==="A"&&(n.hasAttribute("download")||n.hasAttribute("target")&&n.getAttribute("target")!=="_self")||e&&n.matches(e))}function Ale(n){return!!(n.data&&typeof n.data.nodeId=="number"&&n.timestamp)}function RO(){return Date.now()/1e3}function Ele(n,e){try{if(!wle(e))return;const{source:t}=e.data;if(t===$t.Mutation&&n.registerMutation(e.timestamp),t===$t.Scroll&&n.registerScroll(e.timestamp),Mle(e)){const{type:r,id:i}=e.data,s=bc.mirror.getNode(i);s instanceof HTMLElement&&r===Gi.Click&&n.registerClick(s)}}catch{}}function wle(n){return n.type===dle}function Mle(n){return n.data.source===$t.MouseInteraction}function Ma(n){return{timestamp:Date.now()/1e3,type:"default",...n}}var Zx;(function(n){n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment"})(Zx||(Zx={}));const Tle=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Cle(n){const e={};!n["data-sentry-component"]&&n["data-sentry-element"]&&(n["data-sentry-component"]=n["data-sentry-element"]);for(const t in n)if(Tle.has(t)){let r=t;(t==="data-testid"||t==="data-test-id")&&(r="testId"),e[r]=n[t]}return e}const ble=n=>e=>{if(!n.isEnabled())return;const t=Rle(e);if(!t)return;const r=e.name==="click",i=r?e.event:void 0;r&&n.clickDetector&&i&&i.target&&!i.altKey&&!i.metaKey&&!i.ctrlKey&&!i.shiftKey&&vle(n.clickDetector,t,f5(e.event)),P_(n,t)};function h5(n,e){const t=bc.mirror.getId(n),r=t&&bc.mirror.getNode(t),i=r&&bc.mirror.getMeta(r),s=i&&Ple(i)?i:null;return{message:e,data:s?{nodeId:t,node:{id:t,tagName:s.tagName,textContent:Array.from(s.childNodes).map(o=>o.type===Zx.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:Cle(s.attributes)}}:{}}}function Rle(n){const{target:e,message:t}=Ile(n);return Ma({category:`ui.${n.name}`,...h5(e,t)})}function Ile(n){const e=n.name==="click";let t,r=null;try{r=e?f5(n.event):d5(n.event),t=zc(r,{maxStringLength:200})||"<unknown>"}catch{t="<unknown>"}return{target:r,message:t}}function Ple(n){return n.type===Zx.Element}function Ble(n,e){if(!n.isEnabled())return;n.updateUserActivity();const t=Dle(e);t&&P_(n,t)}function Dle(n){const{metaKey:e,shiftKey:t,ctrlKey:r,altKey:i,key:s,target:o}=n;if(!o||Lle(o)||!s)return null;const a=e||r||i,l=s.length===1;if(!a&&l)return null;const c=zc(o,{maxStringLength:200})||"<unknown>",u=h5(o,c);return Ma({category:"ui.keyDown",message:c,data:{...u.data,metaKey:e,shiftKey:t,ctrlKey:r,altKey:i,key:s}})}function Lle(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable}const Nle={resource:zle,paint:Fle,navigation:Ule};function dy(n,e){return({metric:t})=>void e.replayPerformanceEntries.push(n(t))}function Ole(n){return n.map(kle).filter(Boolean)}function kle(n){const e=Nle[n.entryType];return e?e(n):null}function ip(n){return((Ks||zn.performance.timeOrigin)+n)/1e3}function Fle(n){const{duration:e,entryType:t,name:r,startTime:i}=n,s=ip(i);return{type:t,name:r,start:s,end:s+e,data:void 0}}function Ule(n){const{entryType:e,name:t,decodedBodySize:r,duration:i,domComplete:s,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:m,transferSize:g,type:y}=n;return i===0?null:{type:`${e}.${y}`,start:ip(m),end:ip(s),name:t,data:{size:g,decodedBodySize:r,encodedBodySize:o,duration:i,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:d,domComplete:s,redirectCount:p}}}function zle(n){const{entryType:e,initiatorType:t,name:r,responseEnd:i,startTime:s,decodedBodySize:o,encodedBodySize:a,responseStatus:l,transferSize:c}=n;return["fetch","xmlhttprequest"].includes(t)?null:{type:`${e}.${t}`,start:ip(s),end:ip(i),name:r,data:{size:c,statusCode:l,decodedBodySize:o,encodedBodySize:a}}}function Hle(n){const e=n.entries[n.entries.length-1],t=e?e.element:void 0;return c1(n,"largest-contentful-paint",t)}function Gle(n){const e=n.entries[0],t=e&&e.sources&&e.sources[0]?e.sources[0].node:void 0;return c1(n,"cumulative-layout-shift",t)}function Vle(n){const e=n.entries[n.entries.length-1],t=e?e.target:void 0;return c1(n,"first-input-delay",t)}function Wle(n){const e=n.entries[n.entries.length-1],t=e?e.target:void 0;return c1(n,"interaction-to-next-paint",t)}function c1(n,e,t){const r=n.value,i=n.rating,s=ip(r);return{type:"web-vital",name:e,start:s,end:s,data:{value:r,size:r,rating:i,nodeId:t?bc.mirror.getId(t):void 0}}}function Xle(n){function e(i){n.performanceEntries.includes(i)||n.performanceEntries.push(i)}function t({entries:i}){i.forEach(e)}const r=[];return["navigation","paint","resource"].forEach(i=>{r.push(ep(i,t))}),r.push(N4(dy(Hle,n)),L4(dy(Gle,n)),O4(dy(Vle,n)),k4(dy(Wle,n))),()=>{r.forEach(i=>i())}}const On=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,jle='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Jle(){const n=new Blob([jle]);return URL.createObjectURL(n)}function ls(n,e){On&&(He.info(n),e&&p5(n))}function df(n,e){On&&(He.info(n),e&&Nf(()=>{p5(n)},0))}function p5(n){Gc({category:"console",data:{logger:"replay"},level:"info",message:n},{level:"info"})}class EI extends Error{constructor(){super(`Event buffer exceeded maximum size of ${gI}.`)}}class m5{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>gI)throw new EI;this.events.push(e)}finish(){return new Promise(e=>{const t=this.events;this.clear(),e(JSON.stringify(t))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(t=>t.timestamp).sort()[0];return e?AI(e):null}}class Yle{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,t)=>{this._worker.addEventListener("message",({data:r})=>{r.success?e():t()},{once:!0}),this._worker.addEventListener("error",r=>{t(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){ls("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const r=this._getAndIncrementId();return new Promise((i,s)=>{const o=({data:a})=>{const l=a;if(l.method===e&&l.id===r){if(this._worker.removeEventListener("message",o),!l.success){On&&He.error("[Replay]",l.response),s(new Error("Error in compression worker"));return}i(l.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:e,arg:t})})}_getAndIncrementId(){return this._id++}}class Kle{constructor(e){this._worker=new Yle(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=AI(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const r=JSON.stringify(e);return this._totalSize+=r.length,this._totalSize>gI?Promise.reject(new EI):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{On&&He.warn('[Replay] Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class qle{constructor(e){this._fallback=new m5,this._compression=new Kle(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{ls("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,r=[];for(const i of e)r.push(this._compression.addEvent(i));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(r)}catch(i){On&&He.warn("[Replay] Failed to add events when switching buffers.",i)}}}function $le({useCompression:n,workerUrl:e}){if(n&&window.Worker){const t=Qle(e);if(t)return t}return ls("[Replay] Using simple buffer"),new m5}function Qle(n){try{const e=n||Zle();if(!e)return;ls(`[Replay] Using compression worker${n?` from ${n}`:""}`);const t=new Worker(e);return new qle(t)}catch{ls("[Replay] Failed to create compression worker")}}function Zle(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?Jle():""}function wI(){try{return"sessionStorage"in zn&&!!zn.sessionStorage}catch{return!1}}function ece(n){tce(),n.session=void 0}function tce(){if(wI())try{zn.sessionStorage.removeItem(pI)}catch{}}function g5(n){return n===void 0?!1:Math.random()<n}function _5(n){const e=Date.now(),t=n.id||Zn(),r=n.started||e,i=n.lastActivity||e,s=n.segmentId||0,o=n.sampled,a=n.previousSessionId;return{id:t,started:r,lastActivity:i,segmentId:s,sampled:o,previousSessionId:a}}function MI(n){if(wI())try{zn.sessionStorage.setItem(pI,JSON.stringify(n))}catch{}}function nce(n,e){return g5(n)?"session":e?"buffer":!1}function IO({sessionSampleRate:n,allowBuffering:e,stickySession:t=!1},{previousSessionId:r}={}){const i=nce(n,e),s=_5({sampled:i,previousSessionId:r});return t&&MI(s),s}function rce(n){if(!wI())return null;try{const e=zn.sessionStorage.getItem(pI);if(!e)return null;const t=JSON.parse(e);return df("[Replay] Loading existing session",n),_5(t)}catch{return null}}function wC(n,e,t=+new Date){return n===null||e===void 0||e<0?!0:e===0?!1:n+e<=t}function v5(n,{maxReplayDuration:e,sessionIdleExpire:t,targetTime:r=Date.now()}){return wC(n.started,e,r)||wC(n.lastActivity,t,r)}function y5(n,{sessionIdleExpire:e,maxReplayDuration:t}){return!(!v5(n,{sessionIdleExpire:e,maxReplayDuration:t})||n.sampled==="buffer"&&n.segmentId===0)}function Nw({traceInternals:n,sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:r},i){const s=i.stickySession&&rce(n);return s?y5(s,{sessionIdleExpire:e,maxReplayDuration:t})?(df("[Replay] Session in sessionStorage is expired, creating new one..."),IO(i,{previousSessionId:s.id})):s:(df("[Replay] Creating new session",n),IO(i,{previousSessionId:r}))}function ice(n){return n.type===qt.Custom}function TI(n,e,t){return S5(n,e)?(x5(n,e,t),!0):!1}function sce(n,e,t){return S5(n,e)?x5(n,e,t):Promise.resolve(null)}async function x5(n,e,t){if(!n.eventBuffer)return null;try{t&&n.recordingMode==="buffer"&&n.eventBuffer.clear(),t&&(n.eventBuffer.hasCheckout=!0);const r=n.getOptions(),i=oce(e,r.beforeAddRecordingEvent);return i?await n.eventBuffer.addEvent(i):void 0}catch(r){const i=r&&r instanceof EI?"addEventSizeExceeded":"addEvent";On&&He.error(r),await n.stop({reason:i});const s=sn();s&&s.recordDroppedEvent("internal_sdk_error","replay")}}function S5(n,e){if(!n.eventBuffer||n.isPaused()||!n.isEnabled())return!1;const t=AI(e.timestamp);return t+n.timeouts.sessionIdlePause<Date.now()?!1:t>n.getContext().initialTimestamp+n.getOptions().maxReplayDuration?(df(`[Replay] Skipping event with timestamp ${t} because it is after maxReplayDuration`,n.getOptions()._experiments.traceInternals),!1):!0}function oce(n,e){try{if(typeof e=="function"&&ice(n))return e(n)}catch(t){return On&&He.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",t),null}return n}function CI(n){return!n.type}function MC(n){return n.type==="transaction"}function ace(n){return n.type==="replay_event"}function PO(n){return n.type==="feedback"}function lce(n){return(e,t)=>{if(!n.isEnabled()||!CI(e)&&!MC(e))return;const r=t&&t.statusCode;if(!(!r||r<200||r>=300)){if(MC(e)){cce(n,e);return}uce(n,e)}}}function cce(n,e){const t=n.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&t.traceIds.size<100&&t.traceIds.add(e.contexts.trace.trace_id)}function uce(n,e){const t=n.getContext();if(e.event_id&&t.errorIds.size<100&&t.errorIds.add(e.event_id),n.recordingMode!=="buffer"||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:r}=n.getOptions();typeof r=="function"&&!r(e)||Nf(()=>{n.sendBufferedReplayOrFlush()})}function fce(n){return e=>{!n.isEnabled()||!CI(e)||dce(n,e)}}function dce(n,e){const t=e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].value;if(typeof t=="string"&&(t.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||t.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Ma({category:"replay.hydrate-error",data:{url:DG()}});P_(n,r)}}function hce(n){const e=sn();e&&e.on("beforeAddBreadcrumb",t=>pce(n,t))}function pce(n,e){if(!n.isEnabled()||!A5(e))return;const t=mce(e);t&&P_(n,t)}function mce(n){return!A5(n)||["fetch","xhr","sentry.event","sentry.transaction"].includes(n.category)||n.category.startsWith("ui.")?null:n.category==="console"?gce(n):Ma(n)}function gce(n){const e=n.data&&n.data.arguments;if(!Array.isArray(e)||e.length===0)return Ma(n);let t=!1;const r=e.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>cy?(t=!0,`${i.slice(0,cy)}`):i;if(typeof i=="object")try{const s=ga(i,7);return JSON.stringify(s).length>cy?(t=!0,`${JSON.stringify(s,null,2).slice(0,cy)}`):s}catch{}return i});return Ma({...n,data:{...n.data,arguments:r,...t?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function A5(n){return!!n.category}function _ce(n,e){return n.type||!n.exception||!n.exception.values||!n.exception.values.length?!1:!!(e.originalException&&e.originalException.__rrweb__)}function vce(n,e){n.triggerUserActivity(),n.addUpdate(()=>e.timestamp?(n.throttledAddEvent({type:qt.Custom,timestamp:e.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1):!0)}function yce(n,e){return n.recordingMode!=="buffer"||e.message===mI||!e.exception||e.type?!1:g5(n.getOptions().errorSampleRate)}function xce(n){return Object.assign((e,t)=>n.isEnabled()?ace(e)?(delete e.breadcrumbs,e):!CI(e)&&!MC(e)&&!PO(e)||!n.checkAndHandleExpiredSession()?e:PO(e)?(n.flush(),e.contexts.feedback.replay_id=n.getSessionId(),vce(n,e),e):_ce(e,t)&&!n.getOptions()._experiments.captureExceptions?(On&&He.log("[Replay] Ignoring error from rrweb internals",e),null):((yce(n,e)||n.recordingMode==="session")&&(e.tags={...e.tags,replayId:n.getSessionId()}),e):e,{id:"Replay"})}function u1(n,e){return e.map(({type:t,start:r,end:i,name:s,data:o})=>{const a=n.throttledAddEvent({type:qt.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:t,description:s,startTimestamp:r,endTimestamp:i,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function Sce(n){const{from:e,to:t}=n,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:t,data:{previous:e}}}function Ace(n){return e=>{if(!n.isEnabled())return;const t=Sce(e);t!==null&&(n.getContext().urls.push(t.name),n.triggerUserActivity(),n.addUpdate(()=>(u1(n,[t]),!1)))}}function Ece(n,e){return On&&n.getOptions()._experiments.traceInternals?!1:nie(e,sn())}function E5(n,e){n.isEnabled()&&e!==null&&(Ece(n,e.name)||n.addUpdate(()=>(u1(n,[e]),!0)))}function f1(n){if(!n)return;const e=new TextEncoder;try{if(typeof n=="string")return e.encode(n).length;if(n instanceof URLSearchParams)return e.encode(n.toString()).length;if(n instanceof FormData){const t=C5(n);return e.encode(t).length}if(n instanceof Blob)return n.size;if(n instanceof ArrayBuffer)return n.byteLength}catch{}}function w5(n){if(!n)return;const e=parseInt(n,10);return isNaN(e)?void 0:e}function M5(n){try{if(typeof n=="string")return[n];if(n instanceof URLSearchParams)return[n.toString()];if(n instanceof FormData)return[C5(n)];if(!n)return[void 0]}catch{return On&&He.warn("[Replay] Failed to serialize body",n),[void 0,"BODY_PARSE_ERROR"]}return On&&He.info("[Replay] Skipping network body because of body type",n),[void 0,"UNPARSEABLE_BODY_TYPE"]}function eS(n,e){if(!n)return{headers:{},size:void 0,_meta:{warnings:[e]}};const t={...n._meta},r=t.warnings||[];return t.warnings=[...r,e],n._meta=t,n}function T5(n,e){if(!e)return null;const{startTimestamp:t,endTimestamp:r,url:i,method:s,statusCode:o,request:a,response:l}=e;return{type:n,start:t/1e3,end:r/1e3,name:i,data:ri({method:s,statusCode:o,request:a,response:l})}}function Zg(n){return{headers:{},size:n,_meta:{warnings:["URL_SKIPPED"]}}}function Rc(n,e,t){if(!e&&Object.keys(n).length===0)return;if(!e)return{headers:n};if(!t)return{headers:n,size:e};const r={headers:n,size:e},{body:i,warnings:s}=wce(t);return r.body=i,s&&s.length>0&&(r._meta={warnings:s}),r}function TC(n,e){return Object.entries(n).reduce((t,[r,i])=>{const s=r.toLowerCase();return e.includes(s)&&n[r]&&(t[s]=i),t},{})}function C5(n){return new URLSearchParams(n).toString()}function wce(n){if(!n||typeof n!="string")return{body:n};const e=n.length>gO,t=Mce(n);if(e){const r=n.slice(0,gO);return t?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(t)try{return{body:JSON.parse(n)}}catch{}return{body:n}}function Mce(n){const e=n[0],t=n[n.length-1];return e==="["&&t==="]"||e==="{"&&t==="}"}function tS(n,e){const t=Tce(n);return Cc(t,e)}function Tce(n,e=zn.document.baseURI){if(n.startsWith("http://")||n.startsWith("https://")||n.startsWith(zn.location.origin))return n;const t=new URL(n,e);if(t.origin!==new URL(e).origin)return n;const r=t.href;return!n.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function Cce(n,e,t){try{const r=await Rce(n,e,t),i=T5("resource.fetch",r);E5(t.replay,i)}catch(r){On&&He.error("[Replay] Failed to capture fetch breadcrumb",r)}}function bce(n,e){const{input:t,response:r}=e,i=t?b5(t):void 0,s=f1(i),o=r?w5(r.headers.get("content-length")):void 0;s!==void 0&&(n.data.request_body_size=s),o!==void 0&&(n.data.response_body_size=o)}async function Rce(n,e,t){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r}=e,{url:o,method:a,status_code:l=0,request_body_size:c,response_body_size:u}=n.data,d=tS(o,t.networkDetailAllowUrls)&&!tS(o,t.networkDetailDenyUrls),p=d?Ice(t,e.input,c):Zg(c),m=await Pce(d,t,e.response,u);return{startTimestamp:i,endTimestamp:s,url:o,method:a,statusCode:l,request:p,response:m}}function Ice({networkCaptureBodies:n,networkRequestHeaders:e},t,r){const i=t?Lce(t,e):{};if(!n)return Rc(i,r,void 0);const s=b5(t),[o,a]=M5(s),l=Rc(i,r,o);return a?eS(l,a):l}async function Pce(n,{networkCaptureBodies:e,networkResponseHeaders:t},r,i){if(!n&&i!==void 0)return Zg(i);const s=r?R5(r.headers,t):{};if(!r||!e&&i!==void 0)return Rc(s,i,void 0);const[o,a]=await Dce(r),l=Bce(o,{networkCaptureBodies:e,responseBodySize:i,captureDetails:n,headers:s});return a?eS(l,a):l}function Bce(n,{networkCaptureBodies:e,responseBodySize:t,captureDetails:r,headers:i}){try{const s=n&&n.length&&t===void 0?f1(n):t;return r?e?Rc(i,s,n):Rc(i,s,void 0):Zg(s)}catch(s){return On&&He.warn("[Replay] Failed to serialize response body",s),Rc(i,t,void 0)}}async function Dce(n){const e=Nce(n);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{return[await Oce(e)]}catch(t){return On&&He.warn("[Replay] Failed to get text body from response",t),[void 0,"BODY_PARSE_ERROR"]}}function b5(n=[]){if(!(n.length!==2||typeof n[1]!="object"))return n[1].body}function R5(n,e){const t={};return e.forEach(r=>{n.get(r)&&(t[r]=n.get(r))}),t}function Lce(n,e){return n.length===1&&typeof n[0]!="string"?BO(n[0],e):n.length===2?BO(n[1],e):{}}function BO(n,e){if(!n)return{};const t=n.headers;return t?t instanceof Headers?R5(t,e):Array.isArray(t)?{}:TC(t,e):{}}function Nce(n){try{return n.clone()}catch(e){On&&He.warn("[Replay] Failed to clone response body",e)}}function Oce(n){return new Promise((e,t)=>{const r=Nf(()=>t(new Error("Timeout while trying to read response body")),500);kce(n).then(i=>e(i),i=>t(i)).finally(()=>clearTimeout(r))})}async function kce(n){return await n.text()}async function Fce(n,e,t){try{const r=zce(n,e,t),i=T5("resource.xhr",r);E5(t.replay,i)}catch(r){On&&He.error("[Replay] Failed to capture xhr breadcrumb",r)}}function Uce(n,e){const{xhr:t,input:r}=e;if(!t)return;const i=f1(r),s=t.getResponseHeader("content-length")?w5(t.getResponseHeader("content-length")):Wce(t.response,t.responseType);i!==void 0&&(n.data.request_body_size=i),s!==void 0&&(n.data.response_body_size=s)}function zce(n,e,t){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r,input:o,xhr:a}=e,{url:l,method:c,status_code:u=0,request_body_size:d,response_body_size:p}=n.data;if(!l)return null;if(!a||!tS(l,t.networkDetailAllowUrls)||tS(l,t.networkDetailDenyUrls)){const T=Zg(d),R=Zg(p);return{startTimestamp:i,endTimestamp:s,url:l,method:c,statusCode:u,request:T,response:R}}const m=a[Xu],g=m?TC(m.request_headers,t.networkRequestHeaders):{},y=TC(Hce(a),t.networkResponseHeaders),[v,_]=t.networkCaptureBodies?M5(o):[void 0],[S,A]=t.networkCaptureBodies?Gce(a):[void 0],w=Rc(g,d,v),I=Rc(y,p,S);return{startTimestamp:i,endTimestamp:s,url:l,method:c,statusCode:u,request:_?eS(w,_):w,response:A?eS(I,A):I}}function Hce(n){const e=n.getAllResponseHeaders();return e?e.split(`\r
`).reduce((t,r)=>{const[i,s]=r.split(": ");return s&&(t[i.toLowerCase()]=s),t},{}):{}}function Gce(n){const e=[];try{return[n.responseText]}catch(t){e.push(t)}try{return Vce(n.response,n.responseType)}catch(t){e.push(t)}return On&&He.warn("[Replay] Failed to get xhr response body",...e),[void 0]}function Vce(n,e){try{if(typeof n=="string")return[n];if(n instanceof Document)return[n.body.outerHTML];if(e==="json"&&n&&typeof n=="object")return[JSON.stringify(n)];if(!n)return[void 0]}catch{return On&&He.warn("[Replay] Failed to serialize body",n),[void 0,"BODY_PARSE_ERROR"]}return On&&He.info("[Replay] Skipping network body because of body type",n),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Wce(n,e){try{const t=e==="json"&&n&&typeof n=="object"?JSON.stringify(n):n;return f1(t)}catch{return}}function Xce(n){const e=sn();try{const{networkDetailAllowUrls:t,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:o}=n.getOptions(),a={replay:n,networkDetailAllowUrls:t,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:o};e&&e.on("beforeAddBreadcrumb",(l,c)=>jce(a,l,c))}catch{}}function jce(n,e,t){if(e.data)try{Jce(e)&&Kce(t)&&(Uce(e,t),Fce(e,t,n)),Yce(e)&&qce(t)&&(bce(e,t),Cce(e,t,n))}catch{On&&He.warn("Error when enriching network breadcrumb")}}function Jce(n){return n.category==="xhr"}function Yce(n){return n.category==="fetch"}function Kce(n){return n&&n.xhr}function qce(n){return n&&n.response}function $ce(n){const e=sn();z4(ble(n)),o1(Ace(n)),hce(n),Xce(n);const t=xce(n);zre(t),e&&(e.on("beforeSendEvent",fce(n)),e.on("afterSendEvent",lce(n)),e.on("createDsc",r=>{const i=n.getSessionId();i&&n.isEnabled()&&n.recordingMode==="session"&&n.checkAndHandleExpiredSession()&&(r.replay_id=i)}),e.on("spanStart",r=>{n.lastActiveSpan=r}),e.on("spanEnd",r=>{n.lastActiveSpan=r}),e.on("beforeSendFeedback",(r,i)=>{const s=n.getSessionId();i&&i.includeReplay&&n.isEnabled()&&s&&r.contexts&&r.contexts.feedback&&(r.contexts.feedback.replay_id=s)}))}async function Qce(n){try{return Promise.all(u1(n,[Zce(zn.performance.memory)]))}catch{return[]}}function Zce(n){const{jsHeapSizeLimit:e,totalJSHeapSize:t,usedJSHeapSize:r}=n,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:t,usedJSHeapSize:r}}}}function eue(n,e,t){let r,i,s;const o=t&&t.maxWait?Math.max(t.maxWait,e):0;function a(){return l(),r=n(),r}function l(){i!==void 0&&clearTimeout(i),s!==void 0&&clearTimeout(s),i=s=void 0}function c(){return i!==void 0||s!==void 0?a():r}function u(){return i&&clearTimeout(i),i=Nf(a,e),o&&s===void 0&&(s=Nf(a,o)),r}return u.cancel=l,u.flush=c,u}function tue(n){let e=!1;return(t,r)=>{if(!n.checkAndHandleExpiredSession()){On&&He.warn("[Replay] Received replay event after session expired.");return}const i=r||!e;e=!0,n.clickDetector&&Ele(n.clickDetector,t),n.addUpdate(()=>{if(n.recordingMode==="buffer"&&i&&n.setInitialState(),!TI(n,t,i))return!0;if(!i)return!1;if(rue(n,i),n.session&&n.session.previousSessionId)return!0;if(n.recordingMode==="buffer"&&n.session&&n.eventBuffer){const s=n.eventBuffer.getEarliestTimestamp();s&&(ls(`[Replay] Updating session start time to earliest event in buffer to ${new Date(s)}`,n.getOptions()._experiments.traceInternals),n.session.started=s,n.getOptions().stickySession&&MI(n.session))}return n.recordingMode==="session"&&n.flush(),!0})}}function nue(n){const e=n.getOptions();return{type:qt.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:n.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:n.eventBuffer?n.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}function rue(n,e){!e||!n.session||n.session.segmentId!==0||TI(n,nue(n),!1)}function iue(n,e,t,r){return jf($G(n,eI(n),r,t),[[{type:"replay_event"},n],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}function sue({recordingData:n,headers:e}){let t;const r=`${JSON.stringify(e)}
`;if(typeof n=="string")t=`${r}${n}`;else{const s=new TextEncoder().encode(r);t=new Uint8Array(s.length+n.length),t.set(s),t.set(n,s.length)}return t}async function oue({client:n,scope:e,replayId:t,event:r}){const i=typeof n._integrations=="object"&&n._integrations!==null&&!Array.isArray(n._integrations)?Object.keys(n._integrations):void 0,s={event_id:t,integrations:i};n.emit("preprocessEvent",r,s);const o=await m4(n.getOptions(),r,s,e,n,Io());if(!o)return null;o.platform=o.platform||"javascript";const a=n.getSdkMetadata(),{name:l,version:c}=a&&a.sdk||{};return o.sdk={...o.sdk,name:l||"sentry.javascript.unknown",version:c||"0.0.0"},o}async function aue({recordingData:n,replayId:e,segmentId:t,eventContext:r,timestamp:i,session:s}){const o=sue({recordingData:n,headers:{segment_id:t}}),{urls:a,errorIds:l,traceIds:c,initialTimestamp:u}=r,d=sn(),p=ur(),m=d&&d.getTransport(),g=d&&d.getDsn();if(!d||!m||!g||!s.sampled)return bl({});const y={type:Xoe,replay_start_timestamp:u/1e3,timestamp:i/1e3,error_ids:l,trace_ids:c,urls:a,replay_id:e,segment_id:t,replay_type:s.sampled},v=await oue({scope:p,client:d,replayId:e,event:y});if(!v)return d.recordDroppedEvent("event_processor","replay",y),ls("An event processor returned `null`, will not send event."),bl({});delete v.sdkProcessingMetadata;const _=iue(v,o,g,d.getOptions().tunnel);let S;try{S=await m.send(_)}catch(w){const I=new Error(mI);try{I.cause=w}catch{}throw I}if(typeof S.statusCode=="number"&&(S.statusCode<200||S.statusCode>=300))throw new I5(S.statusCode);const A=ZG({},S);if(QG(A,"replay"))throw new P5(A);return S}class I5 extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class P5 extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function B5(n,e={count:0,interval:$oe}){const{recordingData:t,options:r}=n;if(t.length)try{return await aue(n),!0}catch(i){if(i instanceof I5||i instanceof P5)throw i;if(_4("Replays",{_retryCount:e.count}),On&&r._experiments&&r._experiments.captureExceptions&&lI(i),e.count>=Qoe){const s=new Error(`${mI} - max retries exceeded`);try{s.cause=i}catch{}throw s}return e.interval*=++e.count,new Promise((s,o)=>{Nf(async()=>{try{await B5(n,e),s(!0)}catch(a){o(a)}},e.interval)})}}const D5="__THROTTLED",lue="__SKIPPED";function cue(n,e,t){const r=new Map,i=a=>{const l=a-t;r.forEach((c,u)=>{u<l&&r.delete(u)})},s=()=>[...r.values()].reduce((a,l)=>a+l,0);let o=!1;return(...a)=>{const l=Math.floor(Date.now()/1e3);if(i(l),s()>=e){const u=o;return o=!0,u?lue:D5}o=!1;const c=r.get(l)||0;return r.set(l,c+1),n(...a)}}class rc{constructor({options:e,recordingOptions:t}){rc.prototype.__init.call(this),rc.prototype.__init2.call(this),rc.prototype.__init3.call(this),rc.prototype.__init4.call(this),rc.prototype.__init5.call(this),rc.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:joe,sessionIdleExpire:Joe},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=eue(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=cue((o,a)=>sce(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:i}=this.getOptions(),s=r?{threshold:Math.min(Zoe,r),timeout:r,scrollTimeout:eae,ignoreSelector:i?i.join(","):""}:void 0;s&&(this.clickDetector=new yle(this,s))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:r}=this._options,i=t<=0&&r<=0;if(this._requiresManualStart=i,!i){if(this._initializeSessionForSampling(e),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",df(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");df("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=Nw({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");df("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Nw({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=bc({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:qoe},emit:tue(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{ls(`[Replay] Stopping Replay${t?` triggered by ${t}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,ece(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),ls("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),ls("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const t=Date.now();ls("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!e||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();this.recordingMode!=="buffer"&&t!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&wC(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${zn.location.pathname}${zn.location.hash}${zn.location.search}`,t=`${zn.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const r=this._throttledAddEvent(e,t);if(r===D5){const i=Ma({category:"replay.throttled"});this.addUpdate(()=>!TI(this,{type:hle,timestamp:i.timestamp||0,data:{tag:"breadcrumb",payload:i,metric:!0}}))}return r}getCurrentRoute(){const e=this.lastActiveSpan||Qs(),t=e&&es(e),i=(t&&Cn(t).data||{})[wa];if(!(!t||!i||!["route","custom"].includes(i)))return Cn(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=$le({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){On&&He.error("[Replay]",e),On&&this._options._experiments&&this._options._experiments.captureExceptions&&lI(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,r=Nw({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=r}_checkSession(){if(!this.session)return!1;const e=this.session;return y5(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{zn.document.addEventListener("visibilitychange",this._handleVisibilityChange),zn.addEventListener("blur",this._handleWindowBlur),zn.addEventListener("focus",this._handleWindowFocus),zn.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||($ce(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=Xle(this)}_removeListeners(){try{zn.document.removeEventListener("visibilitychange",this._handleVisibilityChange),zn.removeEventListener("blur",this._handleWindowBlur),zn.removeEventListener("focus",this._handleWindowFocus),zn.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{zn.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Ma({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Ma({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{Ble(this,e)}}_doChangeToBackgroundTasks(e){!this.session||v5(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){ls("[Replay] Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:qt.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){const e=Ole(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(u1(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart||e.segmentId)return;const r=t.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){On&&He.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await Qce(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await B5({replayId:e,recordingData:s,segmentId:i,eventContext:r,session:this.session,options:this.getOptions(),timestamp:t})}catch(t){this._handleException(t),this.stop({reason:"sendReplay"});const r=sn();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){On&&He.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const t=this.session.started,i=Date.now()-t;this._debouncedFlush.cancel();const s=i<this._options.minReplayDuration,o=i>this._options.maxReplayDuration+5e3;if(s||o){ls(`[Replay] Session duration (${Math.floor(i/1e3)}s) is too ${s?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),s&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&ls("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(l){On&&He.error(l)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&MI(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,r=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=r&&t>r;if(t>i||s){const o=Ma({category:"replay.mutations",data:{count:t,limit:s}});this._createCustomBreadcrumb(o)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function pm(n,e){return[...n,...e].join(",")}function uue({mask:n,unmask:e,block:t,unblock:r,ignore:i}){const s=['base[href="/"]'],o=pm(n,[".sentry-mask","[data-sentry-mask]"]),a=pm(e,[]);return{maskTextSelector:o,unmaskTextSelector:a,blockSelector:pm(t,[".sentry-block","[data-sentry-block]",...s]),unblockSelector:pm(r,[]),ignoreSelector:pm(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function fue({el:n,key:e,maskAttributes:t,maskAllText:r,privacyOptions:i,value:s}){return!r||i.unmaskTextSelector&&n.matches(i.unmaskTextSelector)?s:t.includes(e)||e==="value"&&n.tagName==="INPUT"&&["submit","button"].includes(n.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s}const DO='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',due=["content-length","content-type","accept"];let LO=!1;const hue=n=>new d1(n);class d1{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=Yoe,flushMaxDelay:t=Koe,minReplayDuration:r=tae,maxReplayDuration:i=_O,stickySession:s=!0,useCompression:o=!0,workerUrl:a,_experiments:l={},maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:p=750,mutationLimit:m=1e4,slowClickTimeout:g=7e3,slowClickIgnoreSelectors:y=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:_=[],networkCaptureBodies:S=!0,networkRequestHeaders:A=[],networkResponseHeaders:w=[],mask:I=[],maskAttributes:T=["title","placeholder"],unmask:R=[],block:P=[],unblock:b=[],ignore:M=[],maskFn:L,beforeAddRecordingEvent:H,beforeErrorSampling:j}={}){this.name=d1.id;const Q=uue({mask:I,unmask:R,block:P,unblock:b,ignore:M});if(this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:L,maskInputFn:L,maskAttributeFn:(ee,K,te)=>fue({maskAttributes:T,maskAllText:c,privacyOptions:Q,key:ee,value:K,el:te}),...Q,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ee=>{try{ee.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(r,nae),maxReplayDuration:Math.min(i,_O),stickySession:s,useCompression:o,workerUrl:a,blockAllMedia:d,maskAllInputs:u,maskAllText:c,mutationBreadcrumbLimit:p,mutationLimit:m,slowClickTimeout:g,slowClickIgnoreSelectors:y,networkDetailAllowUrls:v,networkDetailDenyUrls:_,networkCaptureBodies:S,networkRequestHeaders:NO(A),networkResponseHeaders:NO(w),beforeAddRecordingEvent:H,beforeErrorSampling:j,_experiments:l},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${DO}`:DO),this._isInitialized&&DN())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return LO}set _isInitialized(e){LO=e}setupOnce(){DN()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(e)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=pue(this._initialOptions);this._replay=new rc({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const t=sn().getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch{}}}d1.__initStatic();function pue(n){const e=sn(),t=e&&e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...ri(n)};if(!t)return Bf(()=>{console.warn("SDK client is not available.")}),r;const i=Hx(t.replaysSessionSampleRate),s=Hx(t.replaysOnErrorSampleRate);return i==null&&s==null&&Bf(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),i!=null&&(r.sessionSampleRate=i),s!=null&&(r.errorSampleRate=s),r}function NO(n){return[...due,...n.map(e=>e.toLowerCase())]}const CC={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function mue(n){const{traceFetch:e,traceXHR:t,shouldCreateSpanForRequest:r,enableHTTPTimings:i,tracePropagationTargets:s}={traceFetch:CC.traceFetch,traceXHR:CC.traceXHR,...n},o=typeof r=="function"?r:c=>!0,a=c=>yue(c,s),l={};e&&GG(c=>{const u=Rie(c,o,a,l);if(u){const d=L5(c.fetchData.url),p=d?cf(d).host:void 0;u.setAttributes({"http.url":d,"server.address":p})}i&&u&&OO(u)}),t&&G4(c=>{const u=xue(c,o,a,l);i&&u&&OO(u)})}function gue(n){return n.entryType==="resource"&&"initiatorType"in n&&typeof n.nextHopProtocol=="string"&&(n.initiatorType==="fetch"||n.initiatorType==="xmlhttprequest")}function OO(n){const{url:e}=Cn(n).data||{};if(!e||typeof e!="string")return;const t=ep("resource",({entries:r})=>{r.forEach(i=>{gue(i)&&i.name.endsWith(e)&&(vue(i).forEach(o=>n.setAttribute(...o)),setTimeout(t))})})}function _ue(n){let e="unknown",t="unknown",r="";for(const i of n){if(i==="/"){[e,t]=n.split("/");break}if(!isNaN(Number(i))){e=r==="h"?"http":r,t=n.split(r)[1];break}r+=i}return r===n&&(e=r),{name:e,version:t}}function fa(n=0){return((Ks||performance.timeOrigin)+n)/1e3}function vue(n){const{name:e,version:t}=_ue(n.nextHopProtocol),r=[];return r.push(["network.protocol.version",t],["network.protocol.name",e]),Ks?[...r,["http.request.redirect_start",fa(n.redirectStart)],["http.request.fetch_start",fa(n.fetchStart)],["http.request.domain_lookup_start",fa(n.domainLookupStart)],["http.request.domain_lookup_end",fa(n.domainLookupEnd)],["http.request.connect_start",fa(n.connectStart)],["http.request.secure_connection_start",fa(n.secureConnectionStart)],["http.request.connection_end",fa(n.connectEnd)],["http.request.request_start",fa(n.requestStart)],["http.request.response_start",fa(n.responseStart)],["http.request.response_end",fa(n.responseEnd)]]:r}function yue(n,e){const t=kt.location&&kt.location.href;if(t){let r,i;try{r=new URL(n,t),i=new URL(t).origin}catch{return!1}const s=r.origin===i;return e?Cc(r.toString(),e)||s&&Cc(r.pathname,e):s}else{const r=!!n.match(/^\/(?!\/)/);return e?Cc(n,e):r}}function xue(n,e,t,r){const i=n.xhr,s=i&&i[Xu];if(!i||i.__sentry_own_request__||!s)return;const o=Hc()&&e(s.url);if(n.endTimestamp&&o){const p=i.__sentry_xhr_span_id__;if(!p)return;const m=r[p];m&&s.status_code!==void 0&&(r4(m,s.status_code),m.end(),delete r[p]);return}const a=L5(s.url),l=a?cf(a).host:void 0,c=!!Qs(),u=o&&c?La({name:`${s.method} ${s.url}`,attributes:{type:"xhr","http.method":s.method,"http.url":a,url:s.url,"server.address":l,[Lr]:"auto.http.browser",[Qh]:"http.client"}}):new gp;i.__sentry_xhr_span_id__=u.spanContext().spanId,r[i.__sentry_xhr_span_id__]=u;const d=sn();return i.setRequestHeader&&t(s.url)&&d&&Sue(i,d,Hc()&&c?u:void 0),u}function Sue(n,e,t){const r=ur(),i=Io(),{traceId:s,spanId:o,sampled:a,dsc:l}={...i.getPropagationContext(),...r.getPropagationContext()},c=t&&Hc()?o4(t):ZR(s,o,a),u=qG(l||(t?Yf(t):t1(s,e)));Aue(n,c,u)}function Aue(n,e,t){try{n.setRequestHeader("sentry-trace",e),t&&n.setRequestHeader(iC,t)}catch{}}function L5(n){try{return new URL(n,kt.location.origin).href}catch{return}}function Eue(){kt&&kt.document?kt.document.addEventListener("visibilitychange",()=>{const n=Qs();if(!n)return;const e=es(n);if(kt.document.hidden&&e){const t="cancelled",{op:r,status:i}=Cn(e);hs&&He.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${r}`),i||e.setStatus({code:qr,message:t}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):hs&&He.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const wue="BrowserTracing",Mue={...Xy,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{},...CC},N5=(n={})=>{ore();const{enableInp:e,enableLongTask:t,_experiments:{enableInteractions:r},beforeStartSpan:i,idleTimeout:s,finalTimeout:o,childSpanTimeout:a,markBackgroundSpan:l,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:d,enableHTTPTimings:p,instrumentPageLoad:m,instrumentNavigation:g}={...Mue,...n},y=Ese();e&&jse(),t&&wse(),r&&Mse();const v={name:void 0,source:void 0};function _(S,A){const w=A.op==="pageload",I=i?i(A):A,T=I.attributes||{};A.name!==I.name&&(T[wa]="custom",I.attributes=T),v.name=I.name,v.source=T[wa];const R=p4(I,{idleTimeout:s,finalTimeout:o,childSpanTimeout:a,disableAutoFinish:w,beforeSpanEnd:b=>{y(),Ise(b)}});function P(){["interactive","complete"].includes(kt.document.readyState)&&S.emit("idleSpanEnableAutoFinish",R)}return w&&kt.document&&(kt.document.addEventListener("readystatechange",()=>{P()}),P()),R}return{name:wue,afterAllSetup(S){let A,w=kt.location&&kt.location.href;S.on("startNavigationSpan",I=>{sn()===S&&(A&&(hs&&He.log(`[Tracing] Finishing current root span with op: ${Cn(A).op}`),A.end()),A=_(S,{op:"navigation",...I}))}),S.on("startPageLoadSpan",(I,T={})=>{if(sn()!==S)return;A&&(hs&&He.log(`[Tracing] Finishing current root span with op: ${Cn(A).op}`),A.end());const R=T.sentryTrace||kO("sentry-trace"),P=T.baggage||kO("baggage"),b=Cne(R,P);ur().setPropagationContext(b),A=_(S,{op:"pageload",...I})}),S.on("spanEnd",I=>{const T=Cn(I).op;if(I!==es(I)||T!=="navigation"&&T!=="pageload")return;const R=ur(),P=R.getPropagationContext();R.setPropagationContext({...P,sampled:P.sampled!==void 0?P.sampled:Jf(I),dsc:P.dsc||Yf(I)})}),kt.location&&(m&&O5(S,{name:kt.location.pathname,startTime:Ks?Ks/1e3:void 0,attributes:{[wa]:"url",[Lr]:"auto.pageload.browser"}}),g&&o1(({to:I,from:T})=>{if(T===void 0&&w&&w.indexOf(I)!==-1){w=void 0;return}T!==I&&(w=void 0,Tue(S,{name:kt.location.pathname,attributes:{[wa]:"url",[Lr]:"auto.navigation.browser"}}))})),l&&Eue(),r&&Cue(s,o,a,v),e&&Yse(v),mue({traceFetch:c,traceXHR:u,tracePropagationTargets:S.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:d,enableHTTPTimings:p})}}};function O5(n,e,t){n.emit("startPageLoadSpan",e,t),ur().setTransactionName(e.name);const r=Qs();return(r&&Cn(r).op)==="pageload"?r:void 0}function Tue(n,e){Io().setPropagationContext(Ux()),ur().setPropagationContext(Ux()),n.emit("startNavigationSpan",e),ur().setTransactionName(e.name);const t=Qs();return(t&&Cn(t).op)==="navigation"?t:void 0}function kO(n){const e=Gte(`meta[name=${n}]`);return e?e.getAttribute("content"):void 0}function Cue(n,e,t,r){let i;const s=()=>{const o="ui.action.click",a=Qs(),l=a&&es(a);if(l){const c=Cn(l).op;if(["navigation","pageload"].includes(c)){hs&&He.warn(`[Tracing] Did not create ${o} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(lC,"interactionInterrupted"),i.end(),i=void 0),!r.name){hs&&He.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}i=p4({name:r.name,op:o,attributes:{[wa]:r.source||"url"}},{idleTimeout:n,finalTimeout:e,childSpanTimeout:t})};kt.document&&addEventListener("click",s,{once:!1,capture:!0})}function bue(n){const e={...n};E4(e,"react"),_4("react",{version:ie.version}),Voe(e)}var k5={exports:{}},Pn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ai=typeof Symbol=="function"&&Symbol.for,bI=ai?Symbol.for("react.element"):60103,RI=ai?Symbol.for("react.portal"):60106,h1=ai?Symbol.for("react.fragment"):60107,p1=ai?Symbol.for("react.strict_mode"):60108,m1=ai?Symbol.for("react.profiler"):60114,g1=ai?Symbol.for("react.provider"):60109,_1=ai?Symbol.for("react.context"):60110,II=ai?Symbol.for("react.async_mode"):60111,v1=ai?Symbol.for("react.concurrent_mode"):60111,y1=ai?Symbol.for("react.forward_ref"):60112,x1=ai?Symbol.for("react.suspense"):60113,Rue=ai?Symbol.for("react.suspense_list"):60120,S1=ai?Symbol.for("react.memo"):60115,A1=ai?Symbol.for("react.lazy"):60116,Iue=ai?Symbol.for("react.block"):60121,Pue=ai?Symbol.for("react.fundamental"):60117,Bue=ai?Symbol.for("react.responder"):60118,Due=ai?Symbol.for("react.scope"):60119;function Zs(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case bI:switch(n=n.type,n){case II:case v1:case h1:case m1:case p1:case x1:return n;default:switch(n=n&&n.$$typeof,n){case _1:case y1:case A1:case S1:case g1:return n;default:return e}}case RI:return e}}}function F5(n){return Zs(n)===v1}Pn.AsyncMode=II;Pn.ConcurrentMode=v1;Pn.ContextConsumer=_1;Pn.ContextProvider=g1;Pn.Element=bI;Pn.ForwardRef=y1;Pn.Fragment=h1;Pn.Lazy=A1;Pn.Memo=S1;Pn.Portal=RI;Pn.Profiler=m1;Pn.StrictMode=p1;Pn.Suspense=x1;Pn.isAsyncMode=function(n){return F5(n)||Zs(n)===II};Pn.isConcurrentMode=F5;Pn.isContextConsumer=function(n){return Zs(n)===_1};Pn.isContextProvider=function(n){return Zs(n)===g1};Pn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===bI};Pn.isForwardRef=function(n){return Zs(n)===y1};Pn.isFragment=function(n){return Zs(n)===h1};Pn.isLazy=function(n){return Zs(n)===A1};Pn.isMemo=function(n){return Zs(n)===S1};Pn.isPortal=function(n){return Zs(n)===RI};Pn.isProfiler=function(n){return Zs(n)===m1};Pn.isStrictMode=function(n){return Zs(n)===p1};Pn.isSuspense=function(n){return Zs(n)===x1};Pn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===h1||n===v1||n===m1||n===p1||n===x1||n===Rue||typeof n=="object"&&n!==null&&(n.$$typeof===A1||n.$$typeof===S1||n.$$typeof===g1||n.$$typeof===_1||n.$$typeof===y1||n.$$typeof===Pue||n.$$typeof===Bue||n.$$typeof===Due||n.$$typeof===Iue)};Pn.typeOf=Zs;k5.exports=Pn;var Lue=k5.exports,PI=Lue,Nue={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Oue={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},kue={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},U5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},BI={};BI[PI.ForwardRef]=kue;BI[PI.Memo]=U5;function FO(n){return PI.isMemo(n)?U5:BI[n.$$typeof]||Nue}var Fue=Object.defineProperty,Uue=Object.getOwnPropertyNames,UO=Object.getOwnPropertySymbols,zue=Object.getOwnPropertyDescriptor,Hue=Object.getPrototypeOf,zO=Object.prototype;function z5(n,e,t){if(typeof e!="string"){if(zO){var r=Hue(e);r&&r!==zO&&z5(n,r,t)}var i=Uue(e);UO&&(i=i.concat(UO(e)));for(var s=FO(n),o=FO(e),a=0;a<i.length;++a){var l=i[a];if(!Oue[l]&&!(t&&t[l])&&!(o&&o[l])&&!(s&&s[l])){var c=zue(e,l);try{Fue(n,l,c)}catch{}}}}return n}var Gue=z5;const Vue=e_(Gue),Wue="ui.react.render",Xue="ui.react.update",jue="ui.react.mount",Jue="unknown";class H5 extends ie.Component{static __initStatic(){this.defaultProps={disabled:!1,includeRender:!0,includeUpdates:!0}}constructor(e){super(e);const{name:t,disabled:r=!1}=this.props;r||(this._mountSpan=La({name:`<${t}>`,onlyIfParent:!0,op:jue,attributes:{[Lr]:"auto.ui.react.profiler","ui.component_name":t}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:e,includeUpdates:t=!0}){if(t&&this._mountSpan&&e!==this.props.updateProps){const r=Object.keys(e).filter(i=>e[i]!==this.props.updateProps[i]);if(r.length>0){const i=Bi();this._updateSpan=Gx(this._mountSpan,()=>La({name:`<${this.props.name}>`,onlyIfParent:!0,op:Xue,startTime:i,attributes:{[Lr]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":r}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const e=Bi(),{name:t,includeRender:r=!0}=this.props;if(this._mountSpan&&r){const i=Cn(this._mountSpan).timestamp;Gx(this._mountSpan,()=>{const s=La({onlyIfParent:!0,name:`<${t}>`,op:Wue,startTime:i,attributes:{[Lr]:"auto.ui.react.profiler","ui.component_name":t}});s&&s.end(e)})}}render(){return this.props.children}}H5.__initStatic();function Yue(n,e){const t=n.displayName||n.name||Jue,r=i=>se.jsx(H5,{...e,name:t,updateProps:i,children:se.jsx(n,{...i})});return r.displayName=`profiler(${t})`,Vue(r,n),r}const Kue=new WeakSet;function que(n){const e=N5({...n,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:t,useLocation:r,useNavigationType:i,createRoutesFromChildren:s,matchRoutes:o,stripBasename:a,instrumentPageLoad:l=!0,instrumentNavigation:c=!0}=n;return{...e,setup(){},afterAllSetup(u){e.afterAllSetup(u);const d=kt&&kt.location&&kt.location.pathname;l&&d&&O5(u,{name:d,attributes:{[wa]:"url",[Qh]:"pageload",[Lr]:"auto.pageload.react.reactrouter_v6"}}),c&&Kue.add(u)}}}const $ue=()=>{const n=ie.useRef();return Jc(()=>{xr.to("#exploreVideo",{scrollTrigger:{trigger:"#exploreVideo",toggleActions:"play pause reverse restart",start:"-10% bottom"},onComplete:()=>{n.current.play()}}),Gy("#features_title",{y:0,opacity:1}),Gy(".g_grow",{scale:1,opacity:1,ease:"power1"},{scrub:5.5}),Gy(".g_text",{y:0,opacity:1,ease:"power2.inOut",duration:1})},[]),se.jsx("section",{className:"h-full common-padding bg-zinc relative overflow-hidden",children:se.jsxs("div",{className:"screen-max-width",children:[se.jsx("div",{className:"mb-12 w-full",children:se.jsx("h1",{id:"features_title",className:"section-heading",children:"Explore the full story."})}),se.jsxs("div",{className:"flex flex-col justify-center items-center overflow-hidden",children:[se.jsxs("div",{className:"mt-32 mb-24 pl-24",children:[se.jsx("h2",{className:"text-5xl lg:text-7xl font-semibold",children:"iPhone"}),se.jsx("h2",{className:"text-5xl lg:text-7xl font-semibold",children:"Forged in titanium"})]}),se.jsxs("div",{className:"flex-center flex-col sm:px-10",children:[se.jsx("div",{className:"relative h-[50vh] w-full flex items-center",children:se.jsx("video",{playsInline:!0,id:"exploreVideo",className:"w-full h-full object-cover object-center",preload:"none",muted:!0,autoPlay:!0,ref:n,children:se.jsx("source",{src:P6,type:"video/mp4"})})}),se.jsxs("div",{className:"flex flex-col w-full relative",children:[se.jsxs("div",{className:"feature-video-container",children:[se.jsx("div",{className:"overflow-hidden flex-1 h-[50vh]",children:se.jsx("img",{src:W6,alt:"titanium",className:"feature-video g_grow"})}),se.jsx("div",{className:"overflow-hidden flex-1 h-[50vh]",children:se.jsx("img",{src:X6,alt:"titanium 2",className:"feature-video g_grow"})})]}),se.jsxs("div",{className:"feature-text-container",children:[se.jsx("div",{className:"flex-1 flex-center",children:se.jsxs("p",{className:"feature-text g_text",children:["iPhone 15 pro is"," ",se.jsx("span",{className:"text-white",children:"the first iPhone to feature an erospace-grade titanium design"}),", using the same alloy that spacecrafts use for mission to mars"]})}),se.jsx("div",{className:"flex-1 flex-center",children:se.jsxs("p",{className:"feature-text g_text",children:["Titanium has on of the best strenght-to-weghit ratios of any meatl, making this our"," ",se.jsx("span",{className:"text-white",children:"lightest pro models ever ."}),"you'll notice the difference the momentyou pick one up"]})})]})]})]})]})]})})},Que=()=>{const n=ie.useRef();return Jc(()=>{xr.from("#chip",{scrollTrigger:{trigger:"#chip",start:"20% bottom"},opacity:0,scale:2,duration:2,ease:"power2.inOut"}),Gy(".g_fadeIn",{opacity:1,y:0,duration:1,ease:"power2.inOut"})},[]),se.jsx("section",{className:"common-padding",children:se.jsxs("div",{className:"screen-max-width",children:[se.jsx("div",{id:"chip",className:"flex-center w-full my-20",children:se.jsx("img",{src:j6,alt:"chip",width:180,height:180})}),se.jsxs("div",{className:"flex flex-col items-center",children:[se.jsxs("h2",{className:"hiw-title",children:["A17 pro chip .",se.jsx("br",{}),"a monster win for gaming."]}),se.jsx("p",{className:"hiw-subtitle",children:"It's here. the biggest redesgin in the history of apple GBUs"})]}),se.jsxs("div",{className:"mt-10 md:mt-20 mb-14",children:[se.jsxs("div",{className:"relative h-full flex-center",children:[se.jsx("div",{className:"overflow-hidden",children:se.jsx("img",{src:J6,alt:"frame",className:"bg-transparent relative z-10"})}),se.jsx("div",{className:"hiw-video",children:se.jsx("video",{className:"pointer-events-none",playsInline:!0,preload:"none",muted:!0,autoPlay:!0,ref:n,children:se.jsx("source",{src:B6,type:"video/mp4"})})})]}),se.jsx("p",{className:"text-gray font-semibold text-center mt-3",children:"Hokani: Star Rail"})]}),se.jsxs("div",{className:"hiw-text-container",children:[se.jsxs("div",{className:"flex flex-1 justify-center flex-col",children:[se.jsxs("p",{className:"hiw-text g_fadeIn",children:["A17 pro is an entirely new class of Iphone chips that delivers our"," ",se.jsx("span",{className:"text-white",children:"best graphic performance by far"}),"."]}),se.jsxs("p",{className:"hiw-text g_fadeIn",children:["Mobile"," ",se.jsx("span",{className:"text-white",children:"games will feel and look so immersive."}),", with incredibly detailed environments and characters."]})]}),se.jsxs("div",{className:"flex-1 flex justify-center flex-col g_fadeIn",children:[se.jsx("p",{className:"hiw-text",children:"New"}),se.jsx("p",{className:"hiw-bigtext",children:"Pro-class GPU"}),se.jsx("p",{className:"hiw-text",children:"with 6 cores"})]})]})]})})},Zue=()=>se.jsx("footer",{className:"py-5 sm:px-10 px-5",children:se.jsxs("div",{className:"scree-max-width",children:[se.jsxs("div",{children:[se.jsxs("p",{className:"font-semibold text-gray text-xs",children:["More ways to shop:"," ",se.jsx("span",{className:"underline text-blue",children:"Find an apple store"})," or"," ",se.jsx("span",{className:"underline text-blue",children:"other retailer"})," near you"]}),se.jsxs("p",{className:"font-semibold text-gray text-xs",children:["Or call 00800-040-1972"," "]})]}),se.jsx("div",{className:"bg-neutral-700 my-5 h-[1px] w-full"}),se.jsxs("div",{className:"flex md:flex-row flex-col md:items-center justify-between",children:[se.jsx("p",{className:"font-semibold text-gray text-xs",children:"Copyright @ 2024 Apple Inc. All rights reserved."}),se.jsx("div",{className:"flex",children:AD.map((n,e)=>se.jsxs("p",{className:"font-semibold text-gray text-xs",children:[n," ",e!==AD.length-1&&se.jsx("span",{className:"mx-2",children:" | "})]},n))})]})]})});function efe(){return se.jsxs("main",{className:"bg-black overflow-hidden",children:[se.jsx($6,{}),se.jsx(hX,{}),se.jsx(mX,{}),se.jsx(Bte,{}),se.jsx($ue,{}),se.jsx(Que,{}),se.jsx(Zue,{})]})}const tfe=Yue(efe);bue({dsn:"https://1a0f0403ceb321c92de0c7cf1d86a723@o4507486852677632.ingest.de.sentry.io/4507486853988432",integrations:[N5(),que({useEffect:hf.useEffect}),hue()],tracesSampleRate:1,tracePropagationTargets:["localhost",/^https:\/\/yourserver\.io\/api/],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});Ow.createRoot(document.getElementById("root")).render(se.jsx(hf.StrictMode,{children:se.jsx(tfe,{})}));
//# sourceMappingURL=index-By-9gpHa.js.map
